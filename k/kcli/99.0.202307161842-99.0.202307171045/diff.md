# Comparing `tmp/kcli-99.0.202307161842-py3-none-any.whl.zip` & `tmp/kcli-99.0.202307171045-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,620 +1,621 @@
-Zip file size: 1521466 bytes, number of entries: 618
--rw-r--r--  2.0 unx       15 b- defN 23-Jul-16 18:40 kvirt/__init__.py
--rw-r--r--  2.0 unx   100542 b- defN 23-Jul-16 18:40 kvirt/baseconfig.py
--rw-r--r--  2.0 unx   171487 b- defN 23-Jul-16 18:40 kvirt/bottle.py
--rw-r--r--  2.0 unx   264818 b- defN 23-Jul-16 18:40 kvirt/cli.py
--rw-r--r--  2.0 unx   198938 b- defN 23-Jul-16 18:40 kvirt/config.py
--rw-r--r--  2.0 unx     2851 b- defN 23-Jul-16 18:40 kvirt/containerconfig.py
--rw-r--r--  2.0 unx     9442 b- defN 23-Jul-16 18:40 kvirt/defaults.py
--rw-r--r--  2.0 unx     1475 b- defN 23-Jul-16 18:40 kvirt/ekstoken.py
--rw-r--r--  2.0 unx    21622 b- defN 23-Jul-16 18:40 kvirt/examples.py
--rw-r--r--  2.0 unx     1047 b- defN 23-Jul-16 18:40 kvirt/gketoken.py
--rw-r--r--  2.0 unx     4333 b- defN 23-Jul-16 18:40 kvirt/ignitionmerger.py
--rw-r--r--  2.0 unx     9871 b- defN 23-Jul-16 18:40 kvirt/keywords.yaml
--rw-r--r--  2.0 unx     3487 b- defN 23-Jul-16 18:40 kvirt/klist.py
--rw-r--r--  2.0 unx     6009 b- defN 23-Jul-16 18:40 kvirt/ansibleutils/__init__.py
--rw-r--r--  2.0 unx        0 b- defN 23-Jul-16 18:40 kvirt/cluster/__init__.py
--rw-r--r--  2.0 unx      204 b- defN 23-Jul-16 18:40 kvirt/cluster/sampleprovider.py
--rw-r--r--  2.0 unx     9366 b- defN 23-Jul-16 18:40 kvirt/cluster/aks/__init__.py
--rw-r--r--  2.0 unx       16 b- defN 23-Jul-16 18:40 kvirt/cluster/aks/fake.yml
--rw-r--r--  2.0 unx      369 b- defN 23-Jul-16 18:40 kvirt/cluster/aks/kcli_default.yml
--rw-r--r--  2.0 unx    12259 b- defN 23-Jul-16 18:40 kvirt/cluster/eks/__init__.py
--rw-r--r--  2.0 unx       16 b- defN 23-Jul-16 18:40 kvirt/cluster/eks/fake.yml
--rw-r--r--  2.0 unx      173 b- defN 23-Jul-16 18:40 kvirt/cluster/eks/kcli_default.yml
--rw-r--r--  2.0 unx    12218 b- defN 23-Jul-16 18:40 kvirt/cluster/gke/__init__.py
--rw-r--r--  2.0 unx       16 b- defN 23-Jul-16 18:40 kvirt/cluster/gke/fake.yml
--rw-r--r--  2.0 unx      497 b- defN 23-Jul-16 18:40 kvirt/cluster/gke/kcli_default.yml
--rw-r--r--  2.0 unx      405 b- defN 23-Jul-16 18:40 kvirt/cluster/gke/kubeconfig.j2
--rw-r--r--  2.0 unx      931 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/99-apps.yaml
--rw-r--r--  2.0 unx      694 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/99-forcedns
--rw-r--r--  2.0 unx     1480 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/99-notifications.yaml
--rw-r--r--  2.0 unx      653 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/Corefile
--rw-r--r--  2.0 unx    43976 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/__init__.py
--rw-r--r--  2.0 unx     1121 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/assisted_infra.yml
--rw-r--r--  2.0 unx     1269 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/assisted_ingress.yml
--rw-r--r--  2.0 unx     1366 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/autoapprovercron.yml
--rw-r--r--  2.0 unx     1106 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/bmc.yml.j2
--rw-r--r--  2.0 unx      511 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/calico.sh.j2
--rw-r--r--  2.0 unx      200 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/cloud_lb_apps.yml
--rw-r--r--  2.0 unx     1433 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/disconnected.sh
--rw-r--r--  2.0 unx      184 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/extras.service
--rw-r--r--  2.0 unx      839 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/extras.sh
--rw-r--r--  2.0 unx     3131 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/hostedcluster.yaml
--rw-r--r--  2.0 unx     1174 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/httpd.yaml
--rw-r--r--  2.0 unx     1110 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/ignition.sh
--rw-r--r--  2.0 unx     2307 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/kcli_plan.yml
--rw-r--r--  2.0 unx     2069 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/kcli_plan_default.yml
--rw-r--r--  2.0 unx      502 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/keepalived.conf
--rw-r--r--  2.0 unx     1587 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/nmstateconfig.yml.j2
--rw-r--r--  2.0 unx      752 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/nodepool.yaml
--rw-r--r--  2.0 unx       60 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/nonlocalbind.conf
--rw-r--r--  2.0 unx     1890 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/staticpods/coredns.yml
--rw-r--r--  2.0 unx     2142 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/staticpods/keepalived.yml
--rw-r--r--  2.0 unx     1619 b- defN 23-Jul-16 18:40 kvirt/cluster/hypershift/staticpods/mdns.yml
--rw-r--r--  2.0 unx    13637 b- defN 23-Jul-16 18:40 kvirt/cluster/k3s/__init__.py
--rw-r--r--  2.0 unx     1117 b- defN 23-Jul-16 18:40 kvirt/cluster/k3s/bootstrap.sh
--rw-r--r--  2.0 unx     1035 b- defN 23-Jul-16 18:40 kvirt/cluster/k3s/bootstrap.yml
--rw-r--r--  2.0 unx      441 b- defN 23-Jul-16 18:40 kvirt/cluster/k3s/cloud_lb_api.yml
--rw-r--r--  2.0 unx      440 b- defN 23-Jul-16 18:40 kvirt/cluster/k3s/ctlplanes.sh
--rw-r--r--  2.0 unx     1068 b- defN 23-Jul-16 18:40 kvirt/cluster/k3s/ctlplanes.yml
--rw-r--r--  2.0 unx      231 b- defN 23-Jul-16 18:40 kvirt/cluster/k3s/join.sh
--rw-r--r--  2.0 unx     1271 b- defN 23-Jul-16 18:40 kvirt/cluster/k3s/kcli_default.yml
--rw-r--r--  2.0 unx      511 b- defN 23-Jul-16 18:40 kvirt/cluster/k3s/keepalived.conf
--rw-r--r--  2.0 unx      352 b- defN 23-Jul-16 18:40 kvirt/cluster/k3s/keepalived.sh
--rw-r--r--  2.0 unx      166 b- defN 23-Jul-16 18:40 kvirt/cluster/k3s/workers.sh
--rw-r--r--  2.0 unx      709 b- defN 23-Jul-16 18:40 kvirt/cluster/k3s/workers.yml
--rw-r--r--  2.0 unx    14263 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/__init__.py
--rwxr-xr-x  2.0 unx     2772 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/bootstrap.sh
--rw-r--r--  2.0 unx     1550 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/bootstrap.yml
--rw-r--r--  2.0 unx      338 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/cloud_lb_api.yml
--rw-r--r--  2.0 unx     1172 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/ctlplanes.yml
--rwxr-xr-x  2.0 unx      343 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/deploy.sh
--rwxr-xr-x  2.0 unx      308 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/join.sh
--rw-r--r--  2.0 unx     1853 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/kcli_default.yml
--rw-r--r--  2.0 unx      563 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/keepalived.conf
--rw-r--r--  2.0 unx      424 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/keepalived.sh
--rw-r--r--  2.0 unx      140 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/kubernetes.repo
--rw-r--r--  2.0 unx      179 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/multus.sh
--rw-r--r--  2.0 unx     1751 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/nfs.sh
--rw-r--r--  2.0 unx      226 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/nfs.yml
--rw-r--r--  2.0 unx     4021 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/pre_el.sh
--rw-r--r--  2.0 unx     3906 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/pre_ubuntu.sh
--rw-r--r--  2.0 unx     2127 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/registry.yml
--rw-r--r--  2.0 unx      949 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/workers.yml
--rw-r--r--  2.0 unx      487 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/argocd/ingress.yml
--rw-r--r--  2.0 unx     2134 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/argocd/install.sh
--rw-r--r--  2.0 unx       71 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/argocd/kcli_default.yml
--rw-r--r--  2.0 unx      314 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/argocd/uninstall.sh
--rw-r--r--  2.0 unx       90 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/autolabeller/install.sh
--rw-r--r--  2.0 unx       91 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/autolabeller/uninstall.sh
--rw-r--r--  2.0 unx      380 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/certmanager/install.sh
--rw-r--r--  2.0 unx      317 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/dashboard/admin.yml
--rw-r--r--  2.0 unx      452 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/dashboard/ingress.yml
--rw-r--r--  2.0 unx     1433 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/dashboard/install.sh
--rw-r--r--  2.0 unx       23 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/dashboard/kcli_default.yml
--rw-r--r--  2.0 unx      373 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/dashboard/user.yml
--rw-r--r--  2.0 unx      157 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/falco/falco_advertisements.yml
--rw-r--r--  2.0 unx      185 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/falco/falco_ip.yml
--rw-r--r--  2.0 unx      839 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/falco/install.sh
--rw-r--r--  2.0 unx       57 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/falco/kcli_default.yml
--rw-r--r--  2.0 unx      133 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/falco/uninstall.sh
--rw-r--r--  2.0 unx      175 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/ingress/install.sh
--rw-r--r--  2.0 unx      176 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/ingress/uninstall.sh
--rw-r--r--  2.0 unx      112 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/istio/install.sh
--rw-r--r--  2.0 unx      910 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/istio/istio-minimal-operator.yaml
--rw-r--r--  2.0 unx      766 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/katacontainer/install.sh
--rw-r--r--  2.0 unx      913 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/katacontainer/uninstall.sh
--rw-r--r--  2.0 unx      198 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/knative/cr_eventing.yml
--rw-r--r--  2.0 unx      194 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/knative/cr_serving.yml
--rw-r--r--  2.0 unx      253 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/knative/install.sh
--rw-r--r--  2.0 unx      670 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/kubevirt/install.sh
--rw-r--r--  2.0 unx       30 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/kubevirt/kcli_default.yml
--rw-r--r--  2.0 unx      534 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/metallb/install.sh
--rw-r--r--  2.0 unx       47 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/metallb/kcli_default.yml
--rw-r--r--  2.0 unx      157 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/metallb/metallb_advertisements.yml
--rw-r--r--  2.0 unx      150 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/metallb/metallb_cr.yml
--rw-r--r--  2.0 unx      283 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/metallb/uninstall.sh
--rw-r--r--  2.0 unx      348 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/olm/install.sh
--rw-r--r--  2.0 unx      350 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/olm/uninstall.sh
--rw-r--r--  2.0 unx      320 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/policy_as_code/install.sh
--rw-r--r--  2.0 unx       34 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/policy_as_code/kcli_default.yml
--rw-r--r--  2.0 unx      322 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/policy_as_code/uninstall.sh
--rw-r--r--  2.0 unx     1662 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/rancher/install.sh
--rw-r--r--  2.0 unx      103 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/rancher/kcli_default.yml
--rw-r--r--  2.0 unx      161 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/rancher/rancher_advertisements.yml
--rw-r--r--  2.0 unx      191 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/rancher/rancher_ip.yml
--rw-r--r--  2.0 unx      151 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/rancher/uninstall.sh
--rw-r--r--  2.0 unx      572 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/rook/install.sh
--rw-r--r--  2.0 unx      190 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/submariner/install.sh
--rw-r--r--  2.0 unx       22 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/submariner/kcli_default.yml
--rw-r--r--  2.0 unx      277 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/tekton/install.sh
--rw-r--r--  2.0 unx      278 b- defN 23-Jul-16 18:40 kvirt/cluster/kubeadm/apps/tekton/uninstall.sh
--rw-r--r--  2.0 unx     2970 b- defN 23-Jul-16 18:40 kvirt/cluster/kubecommon/__init__.py
--rw-r--r--  2.0 unx     9395 b- defN 23-Jul-16 18:40 kvirt/cluster/kubernetes/__init__.py
--rw-r--r--  2.0 unx     4782 b- defN 23-Jul-16 18:40 kvirt/cluster/microshift/__init__.py
--rw-r--r--  2.0 unx      603 b- defN 23-Jul-16 18:40 kvirt/cluster/microshift/kcli_plan.yml
--rw-r--r--  2.0 unx      625 b- defN 23-Jul-16 18:40 kvirt/cluster/microshift/kcli_plan_default.yml
--rw-r--r--  2.0 unx      262 b- defN 23-Jul-16 18:40 kvirt/cluster/microshift/scripts/00_sslip.sh
--rw-r--r--  2.0 unx      799 b- defN 23-Jul-16 18:40 kvirt/cluster/microshift/scripts/01_clients.sh
--rw-r--r--  2.0 unx      183 b- defN 23-Jul-16 18:40 kvirt/cluster/microshift/scripts/02_crio.sh
--rw-r--r--  2.0 unx      538 b- defN 23-Jul-16 18:40 kvirt/cluster/microshift/scripts/03_microshift.sh
--rw-r--r--  2.0 unx      341 b- defN 23-Jul-16 18:40 kvirt/cluster/microshift/scripts/04_kubeconfig.sh
--rw-r--r--  2.0 unx     2252 b- defN 23-Jul-16 18:40 kvirt/cluster/microshift/scripts/05_acm.sh
--rw-r--r--  2.0 unx      696 b- defN 23-Jul-16 18:40 kvirt/cluster/microshift/scripts/deploy.sh
--rw-r--r--  2.0 unx      219 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/01-workload-partitioning
--rw-r--r--  2.0 unx      573 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/10-node-ip-hint.yaml
--rw-r--r--  2.0 unx      997 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/99-apps.yaml
--rw-r--r--  2.0 unx      618 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/99-bootstrap-deletion-2.yaml
--rw-r--r--  2.0 unx     1239 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/99-bootstrap-deletion.yaml
--rw-r--r--  2.0 unx      529 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/99-chrony.yaml
--rw-r--r--  2.0 unx      646 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/99-forcedns
--rw-r--r--  2.0 unx      476 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/99-forcedns-ibm
--rw-r--r--  2.0 unx      854 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/99-kubevirt-fix.yaml
--rw-r--r--  2.0 unx     1127 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/99-localhost-fix.yaml
--rw-r--r--  2.0 unx      250 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/99-metal3-fake-machine.yaml
--rw-r--r--  2.0 unx      162 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/99-metal3-provisioning.yaml
--rw-r--r--  2.0 unx     1659 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/99-notifications.yaml
--rw-r--r--  2.0 unx      118 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/99-operatorhub.yaml
--rw-r--r--  2.0 unx      338 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/99-ovn.yaml
--rw-r--r--  2.0 unx      912 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/99-sno.yaml
--rw-r--r--  2.0 unx      762 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/Corefile
--rw-r--r--  2.0 unx    90964 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/__init__.py
--rw-r--r--  2.0 unx     1325 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/autoapprovercron.yml
--rw-r--r--  2.0 unx      987 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/autorules.yml
--rw-r--r--  2.0 unx     1630 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/bootstrap.yml
--rw-r--r--  2.0 unx      250 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/calico.sh.j2
--rw-r--r--  2.0 unx      107 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/chrony.conf
--rw-r--r--  2.0 unx      629 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/cloud_bootstrap.yml
--rw-r--r--  2.0 unx      792 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/cloud_ctlplanes.yml
--rw-r--r--  2.0 unx      217 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/cloud_dns.yml
--rw-r--r--  2.0 unx      616 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/cloud_lb_api.yml
--rw-r--r--  2.0 unx      224 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/cloud_lb_apps.yml
--rw-r--r--  2.0 unx      703 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/cloud_workers.yml
--rw-r--r--  2.0 unx      123 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/cluster-ingress-02-config.yml
--rw-r--r--  2.0 unx      159 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/cluster-scheduler-02-config.yml
--rw-r--r--  2.0 unx      224 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/config.hcl.templ
--rw-r--r--  2.0 unx       98 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/contrail-ca-patch.service
--rw-r--r--  2.0 unx      486 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/contrail-ca-patch.sh
--rw-r--r--  2.0 unx       87 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/contrail.auth
--rw-r--r--  2.0 unx     1108 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/contrail.sh.j2
--rw-r--r--  2.0 unx     2278 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/ctlplanes.yml
--rw-r--r--  2.0 unx      326 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/dhcp.conf
--rw-r--r--  2.0 unx      106 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/dhcp.sh
--rw-r--r--  2.0 unx      536 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/dhcp.yml
--rw-r--r--  2.0 unx      836 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/disconnected.yml
--rw-r--r--  2.0 unx     8945 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/fake_kubeconfig.json
--rw-r--r--  2.0 unx       35 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/fake_pull.json
--rw-r--r--  2.0 unx     1792 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/haproxy.cfg
--rw-r--r--  2.0 unx     2483 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/haproxy.cfg.kubevirt
--rw-r--r--  2.0 unx      902 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/httpd.yaml
--rw-r--r--  2.0 unx      350 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/icsp.yml.j2
--rw-r--r--  2.0 unx      524 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/ignition.j2
--rw-r--r--  2.0 unx     4216 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/install-config.yaml
--rw-r--r--  2.0 unx     2691 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/iso.sh
--rw-r--r--  2.0 unx      237 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/kcli-ipv6.conf.j2
--rw-r--r--  2.0 unx     4495 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/kcli_default.yml
--rw-r--r--  2.0 unx      982 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/keepalived.conf
--rw-r--r--  2.0 unx       60 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/nonlocalbind.conf
--rw-r--r--  2.0 unx       59 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/openshift-workload-pinning
--rw-r--r--  2.0 unx      157 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/relocate-ip-bootstrap.service
--rw-r--r--  2.0 unx      281 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/relocate-ip-bootstrap.sh
--rw-r--r--  2.0 unx      690 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/relocate-ip.sh
--rw-r--r--  2.0 unx      212 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/sno-finish.service
--rw-r--r--  2.0 unx     2085 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/sno-finish.sh
--rw-r--r--  2.0 unx      660 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/sno.yml
--rw-r--r--  2.0 unx     1615 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/workers.yml
--rw-r--r--  2.0 unx       40 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/cr.sh
--rw-r--r--  2.0 unx      768 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/install.yml.j2
--rw-r--r--  2.0 unx      162 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/advanced-cluster-management/99-metal3-provisioning.yaml
--rw-r--r--  2.0 unx     2934 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/advanced-cluster-management/assisted-service.sample.yml
--rwxr-xr-x  2.0 unx     2839 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/advanced-cluster-management/assisted-service.sh
--rw-r--r--  2.0 unx      418 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/advanced-cluster-management/cr.yml
--rw-r--r--  2.0 unx      625 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/advanced-cluster-management/gen_registries.py
--rw-r--r--  2.0 unx      312 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/advanced-cluster-management/kcli_default.yml
--rw-r--r--  2.0 unx     1219 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/advanced-cluster-management/post.sh
--rw-r--r--  2.0 unx      645 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/argocd/configmap.yml
--rw-r--r--  2.0 unx     2423 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/argocd/install.sh
--rw-r--r--  2.0 unx       49 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/argocd/kcli_default.yml
--rw-r--r--  2.0 unx     1093 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/autolabeller/cr.yml
--rw-r--r--  2.0 unx      142 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/autolabeller/install.sh
--rw-r--r--  2.0 unx     1093 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/autolabeller/install.yml
--rw-r--r--  2.0 unx      165 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/autolabeller/kcli_default.yml
--rw-r--r--  2.0 unx       25 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/autolabeller/uninstall.sh
--rw-r--r--  2.0 unx      873 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/cluster-logging/cr.yml
--rw-r--r--  2.0 unx       63 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/cluster-logging/kcli_default.yml
--rw-r--r--  2.0 unx      265 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/istio/install.sh
--rw-r--r--  2.0 unx      377 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/istio/istio-cni.yaml
--rw-r--r--  2.0 unx     1039 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/kubevirt-hyperconverged/cr.yml
--rw-r--r--  2.0 unx      154 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/kubevirt-hyperconverged/kcli_default.yml
--rw-r--r--  2.0 unx      775 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/local-storage-operator/cr.yml
--rw-r--r--  2.0 unx      227 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/local-storage-operator/kcli_default.yml
--rw-r--r--  2.0 unx      642 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/local-storage-operator/post.sh
--rw-r--r--  2.0 unx      349 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/lvms-operator/cr.yml
--rw-r--r--  2.0 unx      137 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/lvms-operator/kcli_default.yml
--rw-r--r--  2.0 unx      595 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/lvms-operator/post.sh
--rw-r--r--  2.0 unx      510 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/metallb-operator/cr.yml
--rw-r--r--  2.0 unx       94 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/metallb-operator/kcli_default.yml
--rw-r--r--  2.0 unx      162 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/multicluster-engine/99-metal3-provisioning.yaml
--rw-r--r--  2.0 unx     2934 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/multicluster-engine/assisted-service.sample.yml
--rwxr-xr-x  2.0 unx     2846 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/multicluster-engine/assisted-service.sh
--rw-r--r--  2.0 unx      245 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/multicluster-engine/cr.yml
--rw-r--r--  2.0 unx      625 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/multicluster-engine/gen_registries.py
--rw-r--r--  2.0 unx      171 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/multicluster-engine/kcli_default.yml
--rwxr-xr-x  2.0 unx       55 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/multicluster-engine/post.sh
--rwxr-xr-x  2.0 unx     2298 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/nfs/install.sh
--rw-r--r--  2.0 unx      117 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/nfs/kcli_default.yml
--rw-r--r--  2.0 unx      185 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/nfs/uninstall.sh
--rw-r--r--  2.0 unx      849 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/odf-operator/cr.yml
--rw-r--r--  2.0 unx      298 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/odf-operator/kcli_default.yml
--rw-r--r--  2.0 unx      364 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/odf-operator/nad_cluster.yml
--rw-r--r--  2.0 unx      362 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/odf-operator/nad_public.yml
--rw-r--r--  2.0 unx      745 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/odf-operator/post.sh
--rw-r--r--  2.0 unx      530 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/odf-operator/pre.sh
--rw-r--r--  2.0 unx      363 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/serverless-operator/cr.yml
--rw-r--r--  2.0 unx      157 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/serverless-operator/kcli_default.yml
--rw-r--r--  2.0 unx      278 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/serverless-operator/post.sh
--rw-r--r--  2.0 unx     1227 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/users/install.sh
--rw-r--r--  2.0 unx       84 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/users/kcli_default.yml
--rw-r--r--  2.0 unx      258 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/users/oauth.yml
--rw-r--r--  2.0 unx      249 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/users/oauth_hypershift.yml
--rw-r--r--  2.0 unx      422 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/apps/users/uninstall.sh
--rw-r--r--  2.0 unx       60 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/customisation/00-kcli-namespace.yaml
--rw-r--r--  2.0 unx       91 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/customisation/97-autoapprovercron-sa.yaml
--rw-r--r--  2.0 unx      264 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/customisation/98-autoapprovercron-binding.yaml
--rw-r--r--  2.0 unx      911 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/customisation/99-autoapprovercron-cronjob.yaml
--rw-r--r--  2.0 unx      389 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/customisation/99-ingress-controller.yaml
--rw-r--r--  2.0 unx      184 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/customisation/99-monitoring.yaml
--rw-r--r--  2.0 unx      289 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/customisation/99-registry.yaml
--rw-r--r--  2.0 unx     1685 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/disconnected/haproxy.cfg
--rw-r--r--  2.0 unx      211 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/disconnected/registry.service
--rwxr-xr-x  2.0 unx      328 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/disconnected/bin/sync_image.sh
--rwxr-xr-x  2.0 unx      201 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/disconnected/scripts/01_get_oc.sh
--rwxr-xr-x  2.0 unx     2381 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/disconnected/scripts/03_mirror.sh
--rwxr-xr-x  2.0 unx     2046 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/disconnected/scripts/03_registry.sh
--rwxr-xr-x  2.0 unx      337 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/disconnected/scripts/04_extras.sh
--rwxr-xr-x  2.0 unx     2319 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/disconnected/scripts/05_olm.sh
--rwxr-xr-x  2.0 unx      241 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/disconnected/scripts/06_web.sh
--rwxr-xr-x  2.0 unx      733 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/disconnected/scripts/deploy.sh
--rw-r--r--  2.0 unx     4223 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/disconnected/scripts/mirror-config.yaml.sample
--rw-r--r--  2.0 unx     2557 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/staticpods/coredns.yml
--rw-r--r--  2.0 unx      987 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/staticpods/haproxy.yml
--rw-r--r--  2.0 unx     2539 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/staticpods/keepalived.yml
--rw-r--r--  2.0 unx     1721 b- defN 23-Jul-16 18:40 kvirt/cluster/openshift/staticpods/mdns.yml
--rw-r--r--  2.0 unx      193 b- defN 23-Jul-16 18:40 kvirt/cluster/profiles/sample-kubeadm-default.yml
--rw-r--r--  2.0 unx      135 b- defN 23-Jul-16 18:40 kvirt/cluster/profiles/sample-openshift-compact.yml
--rw-r--r--  2.0 unx      210 b- defN 23-Jul-16 18:40 kvirt/cluster/profiles/sample-openshift-contrail.yml
--rw-r--r--  2.0 unx      157 b- defN 23-Jul-16 18:40 kvirt/cluster/profiles/sample-openshift-ipv6.yml
--rw-r--r--  2.0 unx       55 b- defN 23-Jul-16 18:40 kvirt/cluster/profiles/sample-openshift-sno-bm.yml
--rw-r--r--  2.0 unx      148 b- defN 23-Jul-16 18:40 kvirt/cluster/profiles/sample-openshift-sno.yml
--rw-r--r--  2.0 unx     3377 b- defN 23-Jul-16 18:40 kvirt/common/Jenkinsfile.j2
--rw-r--r--  2.0 unx    99590 b- defN 23-Jul-16 18:40 kvirt/common/__init__.py
--rw-r--r--  2.0 unx     1406 b- defN 23-Jul-16 18:40 kvirt/common/autoscale.yaml.j2
--rw-r--r--  2.0 unx     8945 b- defN 23-Jul-16 18:40 kvirt/common/fake_kubeconfig.json
--rw-r--r--  2.0 unx      669 b- defN 23-Jul-16 18:40 kvirt/common/ignition.j2
--rw-r--r--  2.0 unx      125 b- defN 23-Jul-16 18:40 kvirt/common/kubevirt_kcli_conf.j2
--rw-r--r--  2.0 unx       99 b- defN 23-Jul-16 18:40 kvirt/common/local_kcli_conf.j2
--rw-r--r--  2.0 unx     3068 b- defN 23-Jul-16 18:40 kvirt/common/pipeline.yml.j2
--rw-r--r--  2.0 unx     2377 b- defN 23-Jul-16 18:40 kvirt/common/pipeline_kube.yml.j2
--rw-r--r--  2.0 unx     1381 b- defN 23-Jul-16 18:40 kvirt/common/playbook.j2
--rw-r--r--  2.0 unx      833 b- defN 23-Jul-16 18:40 kvirt/common/storage.sh.aws
--rw-r--r--  2.0 unx      635 b- defN 23-Jul-16 18:40 kvirt/common/storage.sh.gcp
--rw-r--r--  2.0 unx       68 b- defN 23-Jul-16 18:40 kvirt/common/storage.sh.ibmcloud
--rw-r--r--  2.0 unx     4562 b- defN 23-Jul-16 18:40 kvirt/common/vm.ovf.j2
--rw-r--r--  2.0 unx     2241 b- defN 23-Jul-16 18:40 kvirt/common/workflow.yml.j2
--rw-r--r--  2.0 unx     2208 b- defN 23-Jul-16 18:40 kvirt/common/workflow_script.yml.j2
--rw-r--r--  2.0 unx    15041 b- defN 23-Jul-16 18:40 kvirt/container/__init__.py
--rw-r--r--  2.0 unx    11716 b- defN 23-Jul-16 18:40 kvirt/expose/__init__.py
--rw-r--r--  2.0 unx     4319 b- defN 23-Jul-16 18:40 kvirt/expose/swagger.yml
--rw-r--r--  2.0 unx      408 b- defN 23-Jul-16 18:40 kvirt/expose/static/css/bootstrap-notify.css
--rw-r--r--  2.0 unx   121125 b- defN 23-Jul-16 18:40 kvirt/expose/static/css/bootstrap.min.css
--rw-r--r--  2.0 unx      399 b- defN 23-Jul-16 18:40 kvirt/expose/static/css/dataTables.checkboxes.css
--rw-r--r--  2.0 unx    13587 b- defN 23-Jul-16 18:40 kvirt/expose/static/css/jquery.dataTables.min.css
--rw-r--r--  2.0 unx      868 b- defN 23-Jul-16 18:40 kvirt/expose/static/css/kcli.css
--rw-r--r--  2.0 unx      269 b- defN 23-Jul-16 18:40 kvirt/expose/static/css/wheel.css
--rw-r--r--  2.0 unx     1406 b- defN 23-Jul-16 18:40 kvirt/expose/static/images/favicon.ico
--rw-r--r--  2.0 unx      160 b- defN 23-Jul-16 18:40 kvirt/expose/static/images/sort_asc.png
--rw-r--r--  2.0 unx      201 b- defN 23-Jul-16 18:40 kvirt/expose/static/images/sort_both.png
--rw-r--r--  2.0 unx      158 b- defN 23-Jul-16 18:40 kvirt/expose/static/images/sort_desc.png
--rw-r--r--  2.0 unx    24772 b- defN 23-Jul-16 18:40 kvirt/expose/static/images/wheel.gif
--rw-r--r--  2.0 unx    12398 b- defN 23-Jul-16 18:40 kvirt/expose/static/js/dataTables.checkboxes.min.js
--rw-r--r--  2.0 unx      367 b- defN 23-Jul-16 18:40 kvirt/expose/static/js/exposeactions.js
--rw-r--r--  2.0 unx    83059 b- defN 23-Jul-16 18:40 kvirt/expose/static/js/jquery.dataTables.min.js
--rw-r--r--  2.0 unx    89795 b- defN 23-Jul-16 18:40 kvirt/expose/static/js/jquery.min.js
--rw-r--r--  2.0 unx      263 b- defN 23-Jul-16 18:40 kvirt/expose/static/js/list.js
--rw-r--r--  2.0 unx     1605 b- defN 23-Jul-16 18:40 kvirt/expose/templates/form.html
--rw-r--r--  2.0 unx     1035 b- defN 23-Jul-16 18:40 kvirt/expose/templates/head.html
--rw-r--r--  2.0 unx      406 b- defN 23-Jul-16 18:40 kvirt/expose/templates/index.html
--rw-r--r--  2.0 unx     1220 b- defN 23-Jul-16 18:40 kvirt/expose/templates/infoplan.html
--rw-r--r--  2.0 unx      574 b- defN 23-Jul-16 18:40 kvirt/expose/templates/planstable.html
--rw-r--r--  2.0 unx      550 b- defN 23-Jul-16 18:40 kvirt/expose/templates/result.html
--rw-r--r--  2.0 unx     1754 b- defN 23-Jul-16 18:40 kvirt/internalplans/__init__.py
--rw-r--r--  2.0 unx        0 b- defN 23-Jul-16 18:40 kvirt/jinjafilters/__init__.py
--rw-r--r--  2.0 unx     5351 b- defN 23-Jul-16 18:40 kvirt/jinjafilters/jinjafilters.py
--rw-r--r--  2.0 unx     9018 b- defN 23-Jul-16 18:40 kvirt/kfish/__init__.py
--rw-r--r--  2.0 unx    10455 b- defN 23-Jul-16 18:40 kvirt/ksushy/__init__.py
--rw-r--r--  2.0 unx      121 b- defN 23-Jul-16 18:40 kvirt/ksushy/main.py
--rw-r--r--  2.0 unx     1028 b- defN 23-Jul-16 18:40 kvirt/ksushy/templates/bios.json
--rw-r--r--  2.0 unx      443 b- defN 23-Jul-16 18:40 kvirt/ksushy/templates/interface.json
--rw-r--r--  2.0 unx      418 b- defN 23-Jul-16 18:40 kvirt/ksushy/templates/interfaces.json
--rw-r--r--  2.0 unx     1050 b- defN 23-Jul-16 18:40 kvirt/ksushy/templates/manager.json
--rw-r--r--  2.0 unx      571 b- defN 23-Jul-16 18:40 kvirt/ksushy/templates/managers.json
--rw-r--r--  2.0 unx      554 b- defN 23-Jul-16 18:40 kvirt/ksushy/templates/root.json
--rw-r--r--  2.0 unx     2760 b- defN 23-Jul-16 18:40 kvirt/ksushy/templates/system.json
--rw-r--r--  2.0 unx      511 b- defN 23-Jul-16 18:40 kvirt/ksushy/templates/systems.json
--rw-r--r--  2.0 unx     1219 b- defN 23-Jul-16 18:40 kvirt/ksushy/templates/virtualmedia_cd.json
--rw-r--r--  2.0 unx      705 b- defN 23-Jul-16 18:40 kvirt/ksushy/templates/virtualmedias.json
--rw-r--r--  2.0 unx     2780 b- defN 23-Jul-16 18:40 kvirt/miniconsole/__init__.py
--rw-r--r--  2.0 unx     3733 b- defN 23-Jul-16 18:40 kvirt/nameutils/__init__.py
--rw-r--r--  2.0 unx        0 b- defN 23-Jul-16 18:40 kvirt/providers/__init__.py
--rw-r--r--  2.0 unx     9005 b- defN 23-Jul-16 18:40 kvirt/providers/sampleprovider.py
--rw-r--r--  2.0 unx    71336 b- defN 23-Jul-16 18:40 kvirt/providers/aws/__init__.py
--rw-r--r--  2.0 unx      260 b- defN 23-Jul-16 18:40 kvirt/providers/aws/assume_policy.json
--rw-r--r--  2.0 unx     1764 b- defN 23-Jul-16 18:40 kvirt/providers/aws/ctlplane_policy.json
--rw-r--r--  2.0 unx      174 b- defN 23-Jul-16 18:40 kvirt/providers/aws/worker_policy.json
--rw-r--r--  2.0 unx    59707 b- defN 23-Jul-16 18:40 kvirt/providers/azure/__init__.py
--rw-r--r--  2.0 unx      479 b- defN 23-Jul-16 18:40 kvirt/providers/fake/__init__.py
--rw-r--r--  2.0 unx    75060 b- defN 23-Jul-16 18:40 kvirt/providers/gcp/__init__.py
--rw-r--r--  2.0 unx      175 b- defN 23-Jul-16 18:40 kvirt/providers/gcp/gcp-hack.service
--rw-r--r--  2.0 unx      231 b- defN 23-Jul-16 18:40 kvirt/providers/gcp/gcp-hack.sh
--rw-r--r--  2.0 unx    65205 b- defN 23-Jul-16 18:40 kvirt/providers/ibm/__init__.py
--rw-r--r--  2.0 unx    83917 b- defN 23-Jul-16 18:40 kvirt/providers/kubevirt/__init__.py
--rw-r--r--  2.0 unx   186846 b- defN 23-Jul-16 18:40 kvirt/providers/kvm/__init__.py
--rw-r--r--  2.0 unx     1965 b- defN 23-Jul-16 18:40 kvirt/providers/kvm/helpers.py
--rw-r--r--  2.0 unx    57194 b- defN 23-Jul-16 18:40 kvirt/providers/openstack/__init__.py
--rw-r--r--  2.0 unx    62662 b- defN 23-Jul-16 18:40 kvirt/providers/ovirt/__init__.py
--rw-r--r--  2.0 unx    31230 b- defN 23-Jul-16 18:40 kvirt/providers/packet/__init__.py
--rw-r--r--  2.0 unx    34424 b- defN 23-Jul-16 18:40 kvirt/providers/proxmox/__init__.py
--rw-r--r--  2.0 unx    73215 b- defN 23-Jul-16 18:40 kvirt/providers/vsphere/__init__.py
--rw-r--r--  2.0 unx    13655 b- defN 23-Jul-16 18:40 kvirt/providers/vsphere/helpers.py
--rw-r--r--  2.0 unx     4893 b- defN 23-Jul-16 18:40 kvirt/providers/vsphere/tagging.py
--rw-r--r--  2.0 unx    21420 b- defN 23-Jul-16 18:40 kvirt/providers/web/__init__.py
--rw-r--r--  2.0 unx        0 b- defN 23-Jul-16 18:40 kvirt/version/__init__.py
--rw-r--r--  2.0 unx       19 b- defN 23-Jul-16 18:42 kvirt/version/git
--rw-r--r--  2.0 unx    46652 b- defN 23-Jul-16 18:40 kvirt/web/__init__.py
--rw-r--r--  2.0 unx      261 b- defN 23-Jul-16 18:40 kvirt/web/main.py
--rw-r--r--  2.0 unx      408 b- defN 23-Jul-16 18:40 kvirt/web/static/css/bootstrap-notify.css
--rw-r--r--  2.0 unx    23409 b- defN 23-Jul-16 18:40 kvirt/web/static/css/bootstrap-theme.min.css
--rw-r--r--  2.0 unx   121125 b- defN 23-Jul-16 18:40 kvirt/web/static/css/bootstrap.min.css
--rw-r--r--  2.0 unx      399 b- defN 23-Jul-16 18:40 kvirt/web/static/css/dataTables.checkboxes.css
--rw-r--r--  2.0 unx    13587 b- defN 23-Jul-16 18:40 kvirt/web/static/css/jquery.dataTables.min.css
--rw-r--r--  2.0 unx      816 b- defN 23-Jul-16 18:40 kvirt/web/static/css/kcli.css
--rw-r--r--  2.0 unx     3033 b- defN 23-Jul-16 18:40 kvirt/web/static/css/navbar.css
--rw-r--r--  2.0 unx     2908 b- defN 23-Jul-16 18:40 kvirt/web/static/css/spice.css
--rw-r--r--  2.0 unx      271 b- defN 23-Jul-16 18:40 kvirt/web/static/css/wheel.css
--rw-r--r--  2.0 unx    18028 b- defN 23-Jul-16 18:40 kvirt/web/static/fonts/glyphicons-halflings-regular.woff2
--rw-r--r--  2.0 unx      715 b- defN 23-Jul-16 18:40 kvirt/web/static/images/Centos.png
--rw-r--r--  2.0 unx      294 b- defN 23-Jul-16 18:40 kvirt/web/static/images/Debian.png
--rw-r--r--  2.0 unx      987 b- defN 23-Jul-16 18:40 kvirt/web/static/images/Fedora.png
--rw-r--r--  2.0 unx      672 b- defN 23-Jul-16 18:40 kvirt/web/static/images/Redhat.png
--rw-r--r--  2.0 unx     1278 b- defN 23-Jul-16 18:40 kvirt/web/static/images/Suse.png
--rw-r--r--  2.0 unx     1782 b- defN 23-Jul-16 18:40 kvirt/web/static/images/Tux.png
--rw-r--r--  2.0 unx      544 b- defN 23-Jul-16 18:40 kvirt/web/static/images/Ubuntu.png
--rw-r--r--  2.0 unx     4213 b- defN 23-Jul-16 18:40 kvirt/web/static/images/delete.png
--rw-r--r--  2.0 unx     1406 b- defN 23-Jul-16 18:40 kvirt/web/static/images/favicon.ico
--rw-r--r--  2.0 unx    23320 b- defN 23-Jul-16 18:40 kvirt/web/static/images/kcli-small.png
--rw-r--r--  2.0 unx    27185 b- defN 23-Jul-16 18:40 kvirt/web/static/images/kcli.jpg
--rw-r--r--  2.0 unx   113928 b- defN 23-Jul-16 18:40 kvirt/web/static/images/kcli.png
--rw-r--r--  2.0 unx    48809 b- defN 23-Jul-16 18:40 kvirt/web/static/images/logo-header.svg
--rw-r--r--  2.0 unx    48809 b- defN 23-Jul-16 18:40 kvirt/web/static/images/logo-main.svg
--rw-r--r--  2.0 unx      160 b- defN 23-Jul-16 18:40 kvirt/web/static/images/sort_asc.png
--rw-r--r--  2.0 unx      201 b- defN 23-Jul-16 18:40 kvirt/web/static/images/sort_both.png
--rw-r--r--  2.0 unx      158 b- defN 23-Jul-16 18:40 kvirt/web/static/images/sort_desc.png
--rw-r--r--  2.0 unx     3927 b- defN 23-Jul-16 18:40 kvirt/web/static/images/start.png
--rw-r--r--  2.0 unx     3631 b- defN 23-Jul-16 18:40 kvirt/web/static/images/stop.png
--rw-r--r--  2.0 unx    24772 b- defN 23-Jul-16 18:40 kvirt/web/static/images/wheel.gif
--rw-r--r--  2.0 unx     2933 b- defN 23-Jul-16 18:40 kvirt/web/static/js/bootstrap-notify.js
--rw-r--r--  2.0 unx    37045 b- defN 23-Jul-16 18:40 kvirt/web/static/js/bootstrap.min.js
--rw-r--r--  2.0 unx     2523 b- defN 23-Jul-16 18:40 kvirt/web/static/js/containeraction.js
--rw-r--r--  2.0 unx    12398 b- defN 23-Jul-16 18:40 kvirt/web/static/js/dataTables.checkboxes.min.js
--rw-r--r--  2.0 unx     1642 b- defN 23-Jul-16 18:40 kvirt/web/static/js/hostaction.js
--rw-r--r--  2.0 unx     1187 b- defN 23-Jul-16 18:40 kvirt/web/static/js/imageaction.js
--rw-r--r--  2.0 unx    83059 b- defN 23-Jul-16 18:40 kvirt/web/static/js/jquery.dataTables.min.js
--rw-r--r--  2.0 unx    87462 b- defN 23-Jul-16 18:40 kvirt/web/static/js/jquery.min.js
--rw-r--r--  2.0 unx     2704 b- defN 23-Jul-16 18:40 kvirt/web/static/js/kcli.js
--rw-r--r--  2.0 unx     1594 b- defN 23-Jul-16 18:40 kvirt/web/static/js/kubeaction.js
--rw-r--r--  2.0 unx     3907 b- defN 23-Jul-16 18:40 kvirt/web/static/js/list.js
--rw-r--r--  2.0 unx     1376 b- defN 23-Jul-16 18:40 kvirt/web/static/js/networkaction.js
--rw-r--r--  2.0 unx     2457 b- defN 23-Jul-16 18:40 kvirt/web/static/js/planaction.js
--rw-r--r--  2.0 unx     1237 b- defN 23-Jul-16 18:40 kvirt/web/static/js/poolaction.js
--rw-r--r--  2.0 unx      846 b- defN 23-Jul-16 18:40 kvirt/web/static/js/productaction.js
--rw-r--r--  2.0 unx      270 b- defN 23-Jul-16 18:40 kvirt/web/static/js/refresh.js
--rw-r--r--  2.0 unx     1835 b- defN 23-Jul-16 18:40 kvirt/web/static/js/repoaction.js
--rw-r--r--  2.0 unx     3463 b- defN 23-Jul-16 18:40 kvirt/web/static/js/snapshotaction.js
--rw-r--r--  2.0 unx     2745 b- defN 23-Jul-16 18:40 kvirt/web/static/js/vmaction.js
--rw-r--r--  2.0 unx      123 b- defN 23-Jul-16 18:40 kvirt/web/static/js/wheel.js
--rw-r--r--  2.0 unx     9944 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/atKeynames.js
--rw-r--r--  2.0 unx     2335 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/bitmap.js
--rw-r--r--  2.0 unx     4795 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/cursor.js
--rw-r--r--  2.0 unx    49214 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/display.js
--rw-r--r--  2.0 unx    13253 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/enums.js
--rw-r--r--  2.0 unx     2847 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/filexfer.js
--rw-r--r--  2.0 unx     9535 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/inputs.js
--rw-r--r--  2.0 unx     6176 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/lz.js
--rw-r--r--  2.0 unx    18370 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/main.js
--rw-r--r--  2.0 unx    12677 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/playback.js
--rw-r--r--  2.0 unx     7036 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/png.js
--rw-r--r--  2.0 unx     3110 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/port.js
--rw-r--r--  2.0 unx    44531 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/quic.js
--rw-r--r--  2.0 unx     3030 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/resize.js
--rw-r--r--  2.0 unx     7282 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/simulatecursor.js
--rw-r--r--  2.0 unx     1895 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/spicearraybuffer.js
--rw-r--r--  2.0 unx    18202 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/spiceconn.js
--rw-r--r--  2.0 unx     3616 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/spicedataview.js
--rw-r--r--  2.0 unx    33015 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/spicemsg.js
--rw-r--r--  2.0 unx    12767 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/spicetype.js
--rw-r--r--  2.0 unx     6808 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/ticket.js
--rw-r--r--  2.0 unx    13628 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/utils.js
--rw-r--r--  2.0 unx    21577 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/webm.js
--rw-r--r--  2.0 unx     4131 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/wire.js
--rw-r--r--  2.0 unx    16580 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/thirdparty/jsbn.js
--rw-r--r--  2.0 unx     2529 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/thirdparty/prng4.js
--rw-r--r--  2.0 unx     3442 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/thirdparty/rng.js
--rw-r--r--  2.0 unx     4257 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/thirdparty/rsa.js
--rw-r--r--  2.0 unx    10671 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/thirdparty/sha1.js
--rw-r--r--  2.0 unx        0 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/thirdparty/browser-es-module-loader/.npmignore
--rw-r--r--  2.0 unx      419 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/thirdparty/browser-es-module-loader/README.md
--rw-r--r--  2.0 unx      359 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/thirdparty/browser-es-module-loader/rollup.config.js
--rw-r--r--  2.0 unx     1113 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/thirdparty/browser-es-module-loader/src/babel-worker.js
--rw-r--r--  2.0 unx     8601 b- defN 23-Jul-16 18:40 kvirt/web/static/js/spice/thirdparty/browser-es-module-loader/src/browser-es-module-loader.js
--rw-r--r--  2.0 unx     2176 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/error-handler.js
--rw-r--r--  2.0 unx     5682 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/localization.js
--rw-r--r--  2.0 unx    56845 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/ui.js
--rw-r--r--  2.0 unx     6696 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/webutil.js
--rw-r--r--  2.0 unx     3553 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/alt.svg
--rw-r--r--  2.0 unx     3980 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/clipboard.svg
--rw-r--r--  2.0 unx     3430 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/connect.svg
--rw-r--r--  2.0 unx     4381 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/ctrl.svg
--rw-r--r--  2.0 unx     3237 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/ctrlaltdel.svg
--rw-r--r--  2.0 unx     5062 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/disconnect.svg
--rw-r--r--  2.0 unx     4684 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/drag.svg
--rw-r--r--  2.0 unx     3106 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/error.svg
--rw-r--r--  2.0 unx     4522 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/esc.svg
--rw-r--r--  2.0 unx     3066 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/expander.svg
--rw-r--r--  2.0 unx     3139 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/fullscreen.svg
--rw-r--r--  2.0 unx     2559 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/handle.svg
--rw-r--r--  2.0 unx     6386 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/handle_bg.svg
--rw-r--r--  2.0 unx     3204 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/info.svg
--rw-r--r--  2.0 unx     6404 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/keyboard.svg
--rw-r--r--  2.0 unx     7000 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/mouse_left.svg
--rw-r--r--  2.0 unx     7002 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/mouse_middle.svg
--rw-r--r--  2.0 unx     6993 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/mouse_none.svg
--rw-r--r--  2.0 unx     7001 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/mouse_right.svg
--rw-r--r--  2.0 unx     3985 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/power.svg
--rw-r--r--  2.0 unx     3082 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/settings.svg
--rw-r--r--  2.0 unx     2953 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/tab.svg
--rw-r--r--  2.0 unx     4441 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/toggleextrakeys.svg
--rw-r--r--  2.0 unx     3869 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/warning.svg
--rw-r--r--  2.0 unx     3178 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/windows.svg
--rw-r--r--  2.0 unx      871 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/icons/Makefile
--rw-r--r--  2.0 unx     4028 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/icons/novnc-120x120.png
--rw-r--r--  2.0 unx     4582 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/icons/novnc-144x144.png
--rw-r--r--  2.0 unx     5216 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/icons/novnc-152x152.png
--rw-r--r--  2.0 unx      675 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/icons/novnc-16x16.png
--rw-r--r--  2.0 unx     5787 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/icons/novnc-192x192.png
--rw-r--r--  2.0 unx     1000 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/icons/novnc-24x24.png
--rw-r--r--  2.0 unx     1064 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/icons/novnc-32x32.png
--rw-r--r--  2.0 unx     1397 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/icons/novnc-48x48.png
--rw-r--r--  2.0 unx     1932 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/icons/novnc-60x60.png
--rw-r--r--  2.0 unx     1946 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/icons/novnc-64x64.png
--rw-r--r--  2.0 unx     2699 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/icons/novnc-72x72.png
--rw-r--r--  2.0 unx     2874 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/icons/novnc-76x76.png
--rw-r--r--  2.0 unx     2351 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/icons/novnc-96x96.png
--rw-r--r--  2.0 unx    11685 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/icons/novnc-icon-sm.svg
--rw-r--r--  2.0 unx    11549 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/images/icons/novnc-icon.svg
--rw-r--r--  2.0 unx     2885 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/locale/cs.json
--rw-r--r--  2.0 unx     2854 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/locale/de.json
--rw-r--r--  2.0 unx     3906 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/locale/el.json
--rw-r--r--  2.0 unx     2671 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/locale/es.json
--rw-r--r--  2.0 unx     3354 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/locale/ja.json
--rw-r--r--  2.0 unx     2961 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/locale/ko.json
--rw-r--r--  2.0 unx     3035 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/locale/nl.json
--rw-r--r--  2.0 unx     2830 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/locale/pl.json
--rw-r--r--  2.0 unx     3825 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/locale/ru.json
--rw-r--r--  2.0 unx     2845 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/locale/sv.json
--rw-r--r--  2.0 unx     2811 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/locale/tr.json
--rw-r--r--  2.0 unx     2597 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/locale/zh_CN.json
--rw-r--r--  2.0 unx     2606 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/locale/zh_TW.json
--rw-r--r--  2.0 unx      157 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/sounds/CREDITS
--rw-r--r--  2.0 unx     4531 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/sounds/bell.mp3
--rw-r--r--  2.0 unx     8495 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/sounds/bell.oga
--rw-r--r--  2.0 unx    38580 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/styles/Orbitron700.ttf
--rw-r--r--  2.0 unx    17472 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/styles/Orbitron700.woff
--rw-r--r--  2.0 unx    18450 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/app/styles/base.css
--rw-r--r--  2.0 unx     4189 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/base64.js
--rw-r--r--  2.0 unx    11241 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/des.js
--rw-r--r--  2.0 unx    20381 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/display.js
--rw-r--r--  2.0 unx     1374 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/encodings.js
--rw-r--r--  2.0 unx     1170 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/inflator.js
--rw-r--r--  2.0 unx    74196 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/rfb.js
--rw-r--r--  2.0 unx     9130 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/websock.js
--rw-r--r--  2.0 unx      628 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/decoders/copyrect.js
--rw-r--r--  2.0 unx     4814 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/decoders/hextile.js
--rw-r--r--  2.0 unx     1739 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/decoders/raw.js
--rw-r--r--  2.0 unx     1210 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/decoders/rre.js
--rw-r--r--  2.0 unx     9662 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/decoders/tight.js
--rw-r--r--  2.0 unx      768 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/decoders/tightpng.js
--rw-r--r--  2.0 unx    11438 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/input/domkeytable.js
--rw-r--r--  2.0 unx     3804 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/input/fixedkeys.js
--rw-r--r--  2.0 unx    13090 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/input/keyboard.js
--rw-r--r--  2.0 unx    34609 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/input/keysym.js
--rw-r--r--  2.0 unx    25374 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/input/keysymdef.js
--rw-r--r--  2.0 unx     9995 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/input/mouse.js
--rw-r--r--  2.0 unx     5283 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/input/util.js
--rw-r--r--  2.0 unx     2580 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/input/vkeys.js
--rw-r--r--  2.0 unx    14256 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/input/xtscancodes.js
--rw-r--r--  2.0 unx     3155 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/util/browser.js
--rw-r--r--  2.0 unx     7556 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/util/cursor.js
--rw-r--r--  2.0 unx     4221 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/util/events.js
--rw-r--r--  2.0 unx      896 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/util/eventtarget.js
--rw-r--r--  2.0 unx     1358 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/util/logging.js
--rw-r--r--  2.0 unx     1866 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/util/polyfill.js
--rw-r--r--  2.0 unx      301 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/core/util/strings.js
--rw-r--r--  2.0 unx     7388 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/vendor/promise.js
--rw-r--r--  2.0 unx      419 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/vendor/browser-es-module-loader/README.md
--rw-r--r--  2.0 unx      295 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/vendor/browser-es-module-loader/rollup.config.js
--rw-r--r--  2.0 unx     1113 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/vendor/browser-es-module-loader/src/babel-worker.js
--rw-r--r--  2.0 unx     8498 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/vendor/browser-es-module-loader/src/browser-es-module-loader.js
--rw-r--r--  2.0 unx     1084 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/vendor/pako/LICENSE
--rw-r--r--  2.0 unx      301 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/vendor/pako/README.md
--rw-r--r--  2.0 unx     1062 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/vendor/pako/lib/utils/common.js
--rw-r--r--  2.0 unx      666 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/vendor/pako/lib/zlib/adler32.js
--rw-r--r--  2.0 unx     1334 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/vendor/pako/lib/zlib/constants.js
--rw-r--r--  2.0 unx      764 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/vendor/pako/lib/zlib/crc32.js
--rw-r--r--  2.0 unx    60016 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/vendor/pako/lib/zlib/deflate.js
--rw-r--r--  2.0 unx     1251 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/vendor/pako/lib/zlib/gzheader.js
--rw-r--r--  2.0 unx    11690 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/vendor/pako/lib/zlib/inffast.js
--rw-r--r--  2.0 unx    47128 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/vendor/pako/lib/zlib/inflate.js
--rw-r--r--  2.0 unx    11527 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/vendor/pako/lib/zlib/inftrees.js
--rw-r--r--  2.0 unx      560 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/vendor/pako/lib/zlib/messages.js
--rw-r--r--  2.0 unx    38767 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/vendor/pako/lib/zlib/trees.js
--rw-r--r--  2.0 unx      823 b- defN 23-Jul-16 18:40 kvirt/web/static/vnc/vendor/pako/lib/zlib/zstream.js
--rw-r--r--  2.0 unx     2509 b- defN 23-Jul-16 18:40 kvirt/web/templates/bootstrap.html
--rw-r--r--  2.0 unx    14595 b- defN 23-Jul-16 18:40 kvirt/web/templates/console.html
--rw-r--r--  2.0 unx      717 b- defN 23-Jul-16 18:40 kvirt/web/templates/containercreate.html
--rw-r--r--  2.0 unx      493 b- defN 23-Jul-16 18:40 kvirt/web/templates/containerprofiles.html
--rw-r--r--  2.0 unx     1050 b- defN 23-Jul-16 18:40 kvirt/web/templates/containerprofilestable.html
--rw-r--r--  2.0 unx      490 b- defN 23-Jul-16 18:40 kvirt/web/templates/containers.html
--rw-r--r--  2.0 unx     1746 b- defN 23-Jul-16 18:40 kvirt/web/templates/containerstable.html
--rw-r--r--  2.0 unx     2123 b- defN 23-Jul-16 18:40 kvirt/web/templates/head.html
--rw-r--r--  2.0 unx      473 b- defN 23-Jul-16 18:40 kvirt/web/templates/hosts.html
--rw-r--r--  2.0 unx     1705 b- defN 23-Jul-16 18:40 kvirt/web/templates/hoststable.html
--rw-r--r--  2.0 unx     1119 b- defN 23-Jul-16 18:40 kvirt/web/templates/imagecreate.html
--rw-r--r--  2.0 unx      478 b- defN 23-Jul-16 18:40 kvirt/web/templates/images.html
--rw-r--r--  2.0 unx      646 b- defN 23-Jul-16 18:40 kvirt/web/templates/imagestable.html
--rw-r--r--  2.0 unx      472 b- defN 23-Jul-16 18:40 kvirt/web/templates/isos.html
--rw-r--r--  2.0 unx      261 b- defN 23-Jul-16 18:40 kvirt/web/templates/isostable.html
--rw-r--r--  2.0 unx      609 b- defN 23-Jul-16 18:40 kvirt/web/templates/kubecreate.html
--rw-r--r--  2.0 unx      622 b- defN 23-Jul-16 18:40 kvirt/web/templates/kubeinfo.html
--rw-r--r--  2.0 unx      488 b- defN 23-Jul-16 18:40 kvirt/web/templates/kubeprofiles.html
--rw-r--r--  2.0 unx      845 b- defN 23-Jul-16 18:40 kvirt/web/templates/kubeprofilestable.html
--rw-r--r--  2.0 unx      475 b- defN 23-Jul-16 18:40 kvirt/web/templates/kubes.html
--rw-r--r--  2.0 unx     1850 b- defN 23-Jul-16 18:40 kvirt/web/templates/kubestable.html
--rw-r--r--  2.0 unx      151 b- defN 23-Jul-16 18:40 kvirt/web/templates/layout.html
--rw-r--r--  2.0 unx     5517 b- defN 23-Jul-16 18:40 kvirt/web/templates/navbar.html
--rw-r--r--  2.0 unx      882 b- defN 23-Jul-16 18:40 kvirt/web/templates/networkcreate.html
--rw-r--r--  2.0 unx      537 b- defN 23-Jul-16 18:40 kvirt/web/templates/networks.html
--rw-r--r--  2.0 unx      845 b- defN 23-Jul-16 18:40 kvirt/web/templates/networkstable.html
--rw-r--r--  2.0 unx      750 b- defN 23-Jul-16 18:40 kvirt/web/templates/plancreate.html
--rw-r--r--  2.0 unx      475 b- defN 23-Jul-16 18:40 kvirt/web/templates/plans.html
--rw-r--r--  2.0 unx     1525 b- defN 23-Jul-16 18:40 kvirt/web/templates/planstable.html
--rw-r--r--  2.0 unx      859 b- defN 23-Jul-16 18:40 kvirt/web/templates/poolcreate.html
--rw-r--r--  2.0 unx      475 b- defN 23-Jul-16 18:40 kvirt/web/templates/pools.html
--rw-r--r--  2.0 unx      554 b- defN 23-Jul-16 18:40 kvirt/web/templates/poolstable.html
--rw-r--r--  2.0 unx     1282 b- defN 23-Jul-16 18:40 kvirt/web/templates/productcreate.html
--rw-r--r--  2.0 unx      484 b- defN 23-Jul-16 18:40 kvirt/web/templates/products.html
--rw-r--r--  2.0 unx      895 b- defN 23-Jul-16 18:40 kvirt/web/templates/productstable.html
--rw-r--r--  2.0 unx      699 b- defN 23-Jul-16 18:40 kvirt/web/templates/repocreate.html
--rw-r--r--  2.0 unx      475 b- defN 23-Jul-16 18:40 kvirt/web/templates/repos.html
--rw-r--r--  2.0 unx     1203 b- defN 23-Jul-16 18:40 kvirt/web/templates/repostable.html
--rw-r--r--  2.0 unx      958 b- defN 23-Jul-16 18:40 kvirt/web/templates/vmcreate.html
--rw-r--r--  2.0 unx      486 b- defN 23-Jul-16 18:40 kvirt/web/templates/vmprofiles.html
--rw-r--r--  2.0 unx     1420 b- defN 23-Jul-16 18:40 kvirt/web/templates/vmprofilestable.html
--rw-r--r--  2.0 unx      470 b- defN 23-Jul-16 18:40 kvirt/web/templates/vms.html
--rw-r--r--  2.0 unx     4894 b- defN 23-Jul-16 18:40 kvirt/web/templates/vmstable.html
--rw-r--r--  2.0 unx    11358 b- defN 23-Jul-16 18:42 kcli-99.0.202307161842.dist-info/LICENSE
--rw-r--r--  2.0 unx     4240 b- defN 23-Jul-16 18:42 kcli-99.0.202307161842.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Jul-16 18:42 kcli-99.0.202307161842.dist-info/WHEEL
--rw-r--r--  2.0 unx      281 b- defN 23-Jul-16 18:42 kcli-99.0.202307161842.dist-info/entry_points.txt
--rw-r--r--  2.0 unx        6 b- defN 23-Jul-16 18:42 kcli-99.0.202307161842.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx    60450 b- defN 23-Jul-16 18:42 kcli-99.0.202307161842.dist-info/RECORD
-618 files, 4757175 bytes uncompressed, 1423414 bytes compressed:  70.1%
+Zip file size: 1522578 bytes, number of entries: 619
+-rw-r--r--  2.0 unx       15 b- defN 23-Jul-17 10:41 kvirt/__init__.py
+-rw-r--r--  2.0 unx   100857 b- defN 23-Jul-17 10:41 kvirt/baseconfig.py
+-rw-r--r--  2.0 unx   171487 b- defN 23-Jul-17 10:41 kvirt/bottle.py
+-rw-r--r--  2.0 unx   266549 b- defN 23-Jul-17 10:41 kvirt/cli.py
+-rw-r--r--  2.0 unx   199094 b- defN 23-Jul-17 10:41 kvirt/config.py
+-rw-r--r--  2.0 unx     2851 b- defN 23-Jul-17 10:41 kvirt/containerconfig.py
+-rw-r--r--  2.0 unx     9442 b- defN 23-Jul-17 10:41 kvirt/defaults.py
+-rw-r--r--  2.0 unx     1475 b- defN 23-Jul-17 10:41 kvirt/ekstoken.py
+-rw-r--r--  2.0 unx    22014 b- defN 23-Jul-17 10:41 kvirt/examples.py
+-rw-r--r--  2.0 unx     1047 b- defN 23-Jul-17 10:41 kvirt/gketoken.py
+-rw-r--r--  2.0 unx     4333 b- defN 23-Jul-17 10:41 kvirt/ignitionmerger.py
+-rw-r--r--  2.0 unx     9871 b- defN 23-Jul-17 10:41 kvirt/keywords.yaml
+-rw-r--r--  2.0 unx     3487 b- defN 23-Jul-17 10:41 kvirt/klist.py
+-rw-r--r--  2.0 unx     6009 b- defN 23-Jul-17 10:41 kvirt/ansibleutils/__init__.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jul-17 10:41 kvirt/cluster/__init__.py
+-rw-r--r--  2.0 unx      204 b- defN 23-Jul-17 10:41 kvirt/cluster/sampleprovider.py
+-rw-r--r--  2.0 unx     9366 b- defN 23-Jul-17 10:41 kvirt/cluster/aks/__init__.py
+-rw-r--r--  2.0 unx       16 b- defN 23-Jul-17 10:41 kvirt/cluster/aks/fake.yml
+-rw-r--r--  2.0 unx      369 b- defN 23-Jul-17 10:41 kvirt/cluster/aks/kcli_default.yml
+-rw-r--r--  2.0 unx    12259 b- defN 23-Jul-17 10:41 kvirt/cluster/eks/__init__.py
+-rw-r--r--  2.0 unx       16 b- defN 23-Jul-17 10:41 kvirt/cluster/eks/fake.yml
+-rw-r--r--  2.0 unx      173 b- defN 23-Jul-17 10:41 kvirt/cluster/eks/kcli_default.yml
+-rw-r--r--  2.0 unx    12218 b- defN 23-Jul-17 10:41 kvirt/cluster/gke/__init__.py
+-rw-r--r--  2.0 unx       16 b- defN 23-Jul-17 10:41 kvirt/cluster/gke/fake.yml
+-rw-r--r--  2.0 unx      497 b- defN 23-Jul-17 10:41 kvirt/cluster/gke/kcli_default.yml
+-rw-r--r--  2.0 unx      405 b- defN 23-Jul-17 10:41 kvirt/cluster/gke/kubeconfig.j2
+-rw-r--r--  2.0 unx      931 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/99-apps.yaml
+-rw-r--r--  2.0 unx      694 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/99-forcedns
+-rw-r--r--  2.0 unx     1480 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/99-notifications.yaml
+-rw-r--r--  2.0 unx      653 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/Corefile
+-rw-r--r--  2.0 unx    43976 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/__init__.py
+-rw-r--r--  2.0 unx     1121 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/assisted_infra.yml
+-rw-r--r--  2.0 unx     1269 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/assisted_ingress.yml
+-rw-r--r--  2.0 unx     1366 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/autoapprovercron.yml
+-rw-r--r--  2.0 unx     1106 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/bmc.yml.j2
+-rw-r--r--  2.0 unx      511 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/calico.sh.j2
+-rw-r--r--  2.0 unx      200 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/cloud_lb_apps.yml
+-rw-r--r--  2.0 unx     1433 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/disconnected.sh
+-rw-r--r--  2.0 unx      184 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/extras.service
+-rw-r--r--  2.0 unx      839 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/extras.sh
+-rw-r--r--  2.0 unx     3131 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/hostedcluster.yaml
+-rw-r--r--  2.0 unx     1174 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/httpd.yaml
+-rw-r--r--  2.0 unx     1110 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/ignition.sh
+-rw-r--r--  2.0 unx     2307 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/kcli_plan.yml
+-rw-r--r--  2.0 unx     2069 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/kcli_plan_default.yml
+-rw-r--r--  2.0 unx      502 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/keepalived.conf
+-rw-r--r--  2.0 unx     1587 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/nmstateconfig.yml.j2
+-rw-r--r--  2.0 unx      752 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/nodepool.yaml
+-rw-r--r--  2.0 unx       60 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/nonlocalbind.conf
+-rw-r--r--  2.0 unx     1890 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/staticpods/coredns.yml
+-rw-r--r--  2.0 unx     2142 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/staticpods/keepalived.yml
+-rw-r--r--  2.0 unx     1619 b- defN 23-Jul-17 10:41 kvirt/cluster/hypershift/staticpods/mdns.yml
+-rw-r--r--  2.0 unx    13637 b- defN 23-Jul-17 10:41 kvirt/cluster/k3s/__init__.py
+-rw-r--r--  2.0 unx     1117 b- defN 23-Jul-17 10:41 kvirt/cluster/k3s/bootstrap.sh
+-rw-r--r--  2.0 unx     1035 b- defN 23-Jul-17 10:41 kvirt/cluster/k3s/bootstrap.yml
+-rw-r--r--  2.0 unx      441 b- defN 23-Jul-17 10:41 kvirt/cluster/k3s/cloud_lb_api.yml
+-rw-r--r--  2.0 unx      440 b- defN 23-Jul-17 10:41 kvirt/cluster/k3s/ctlplanes.sh
+-rw-r--r--  2.0 unx     1068 b- defN 23-Jul-17 10:41 kvirt/cluster/k3s/ctlplanes.yml
+-rw-r--r--  2.0 unx      231 b- defN 23-Jul-17 10:41 kvirt/cluster/k3s/join.sh
+-rw-r--r--  2.0 unx     1271 b- defN 23-Jul-17 10:41 kvirt/cluster/k3s/kcli_default.yml
+-rw-r--r--  2.0 unx      511 b- defN 23-Jul-17 10:41 kvirt/cluster/k3s/keepalived.conf
+-rw-r--r--  2.0 unx      352 b- defN 23-Jul-17 10:41 kvirt/cluster/k3s/keepalived.sh
+-rw-r--r--  2.0 unx      166 b- defN 23-Jul-17 10:41 kvirt/cluster/k3s/workers.sh
+-rw-r--r--  2.0 unx      709 b- defN 23-Jul-17 10:41 kvirt/cluster/k3s/workers.yml
+-rw-r--r--  2.0 unx    14263 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/__init__.py
+-rwxr-xr-x  2.0 unx     2772 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/bootstrap.sh
+-rw-r--r--  2.0 unx     1550 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/bootstrap.yml
+-rw-r--r--  2.0 unx      338 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/cloud_lb_api.yml
+-rw-r--r--  2.0 unx     1172 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/ctlplanes.yml
+-rwxr-xr-x  2.0 unx      343 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/deploy.sh
+-rwxr-xr-x  2.0 unx      308 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/join.sh
+-rw-r--r--  2.0 unx     1853 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/kcli_default.yml
+-rw-r--r--  2.0 unx      563 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/keepalived.conf
+-rw-r--r--  2.0 unx      424 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/keepalived.sh
+-rw-r--r--  2.0 unx      140 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/kubernetes.repo
+-rw-r--r--  2.0 unx      179 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/multus.sh
+-rw-r--r--  2.0 unx     1751 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/nfs.sh
+-rw-r--r--  2.0 unx      226 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/nfs.yml
+-rw-r--r--  2.0 unx     4021 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/pre_el.sh
+-rw-r--r--  2.0 unx     3906 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/pre_ubuntu.sh
+-rw-r--r--  2.0 unx     2127 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/registry.yml
+-rw-r--r--  2.0 unx      949 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/workers.yml
+-rw-r--r--  2.0 unx      487 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/argocd/ingress.yml
+-rw-r--r--  2.0 unx     2134 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/argocd/install.sh
+-rw-r--r--  2.0 unx       71 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/argocd/kcli_default.yml
+-rw-r--r--  2.0 unx      314 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/argocd/uninstall.sh
+-rw-r--r--  2.0 unx       90 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/autolabeller/install.sh
+-rw-r--r--  2.0 unx       91 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/autolabeller/uninstall.sh
+-rw-r--r--  2.0 unx      380 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/certmanager/install.sh
+-rw-r--r--  2.0 unx      317 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/dashboard/admin.yml
+-rw-r--r--  2.0 unx      452 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/dashboard/ingress.yml
+-rw-r--r--  2.0 unx     1433 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/dashboard/install.sh
+-rw-r--r--  2.0 unx       23 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/dashboard/kcli_default.yml
+-rw-r--r--  2.0 unx      373 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/dashboard/user.yml
+-rw-r--r--  2.0 unx      157 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/falco/falco_advertisements.yml
+-rw-r--r--  2.0 unx      185 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/falco/falco_ip.yml
+-rw-r--r--  2.0 unx      839 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/falco/install.sh
+-rw-r--r--  2.0 unx       57 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/falco/kcli_default.yml
+-rw-r--r--  2.0 unx      133 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/falco/uninstall.sh
+-rw-r--r--  2.0 unx      175 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/ingress/install.sh
+-rw-r--r--  2.0 unx      176 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/ingress/uninstall.sh
+-rw-r--r--  2.0 unx      112 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/istio/install.sh
+-rw-r--r--  2.0 unx      910 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/istio/istio-minimal-operator.yaml
+-rw-r--r--  2.0 unx      766 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/katacontainer/install.sh
+-rw-r--r--  2.0 unx      913 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/katacontainer/uninstall.sh
+-rw-r--r--  2.0 unx      198 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/knative/cr_eventing.yml
+-rw-r--r--  2.0 unx      194 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/knative/cr_serving.yml
+-rw-r--r--  2.0 unx      253 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/knative/install.sh
+-rw-r--r--  2.0 unx      670 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/kubevirt/install.sh
+-rw-r--r--  2.0 unx       30 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/kubevirt/kcli_default.yml
+-rw-r--r--  2.0 unx      534 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/metallb/install.sh
+-rw-r--r--  2.0 unx       47 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/metallb/kcli_default.yml
+-rw-r--r--  2.0 unx      157 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/metallb/metallb_advertisements.yml
+-rw-r--r--  2.0 unx      150 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/metallb/metallb_cr.yml
+-rw-r--r--  2.0 unx      283 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/metallb/uninstall.sh
+-rw-r--r--  2.0 unx      348 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/olm/install.sh
+-rw-r--r--  2.0 unx      350 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/olm/uninstall.sh
+-rw-r--r--  2.0 unx      320 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/policy_as_code/install.sh
+-rw-r--r--  2.0 unx       34 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/policy_as_code/kcli_default.yml
+-rw-r--r--  2.0 unx      322 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/policy_as_code/uninstall.sh
+-rw-r--r--  2.0 unx     1662 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/rancher/install.sh
+-rw-r--r--  2.0 unx      103 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/rancher/kcli_default.yml
+-rw-r--r--  2.0 unx      161 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/rancher/rancher_advertisements.yml
+-rw-r--r--  2.0 unx      191 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/rancher/rancher_ip.yml
+-rw-r--r--  2.0 unx      151 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/rancher/uninstall.sh
+-rw-r--r--  2.0 unx      572 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/rook/install.sh
+-rw-r--r--  2.0 unx      190 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/submariner/install.sh
+-rw-r--r--  2.0 unx       22 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/submariner/kcli_default.yml
+-rw-r--r--  2.0 unx      277 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/tekton/install.sh
+-rw-r--r--  2.0 unx      278 b- defN 23-Jul-17 10:41 kvirt/cluster/kubeadm/apps/tekton/uninstall.sh
+-rw-r--r--  2.0 unx     2970 b- defN 23-Jul-17 10:41 kvirt/cluster/kubecommon/__init__.py
+-rw-r--r--  2.0 unx     9395 b- defN 23-Jul-17 10:41 kvirt/cluster/kubernetes/__init__.py
+-rw-r--r--  2.0 unx     4782 b- defN 23-Jul-17 10:41 kvirt/cluster/microshift/__init__.py
+-rw-r--r--  2.0 unx      603 b- defN 23-Jul-17 10:41 kvirt/cluster/microshift/kcli_plan.yml
+-rw-r--r--  2.0 unx      625 b- defN 23-Jul-17 10:41 kvirt/cluster/microshift/kcli_plan_default.yml
+-rw-r--r--  2.0 unx      262 b- defN 23-Jul-17 10:41 kvirt/cluster/microshift/scripts/00_sslip.sh
+-rw-r--r--  2.0 unx      799 b- defN 23-Jul-17 10:41 kvirt/cluster/microshift/scripts/01_clients.sh
+-rw-r--r--  2.0 unx      183 b- defN 23-Jul-17 10:41 kvirt/cluster/microshift/scripts/02_crio.sh
+-rw-r--r--  2.0 unx      538 b- defN 23-Jul-17 10:41 kvirt/cluster/microshift/scripts/03_microshift.sh
+-rw-r--r--  2.0 unx      341 b- defN 23-Jul-17 10:41 kvirt/cluster/microshift/scripts/04_kubeconfig.sh
+-rw-r--r--  2.0 unx     2252 b- defN 23-Jul-17 10:41 kvirt/cluster/microshift/scripts/05_acm.sh
+-rw-r--r--  2.0 unx      696 b- defN 23-Jul-17 10:41 kvirt/cluster/microshift/scripts/deploy.sh
+-rw-r--r--  2.0 unx      219 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/01-workload-partitioning
+-rw-r--r--  2.0 unx      573 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/10-node-ip-hint.yaml
+-rw-r--r--  2.0 unx      997 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/99-apps.yaml
+-rw-r--r--  2.0 unx      618 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/99-bootstrap-deletion-2.yaml
+-rw-r--r--  2.0 unx     1239 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/99-bootstrap-deletion.yaml
+-rw-r--r--  2.0 unx      529 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/99-chrony.yaml
+-rw-r--r--  2.0 unx      646 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/99-forcedns
+-rw-r--r--  2.0 unx      476 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/99-forcedns-ibm
+-rw-r--r--  2.0 unx      854 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/99-kubevirt-fix.yaml
+-rw-r--r--  2.0 unx     1127 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/99-localhost-fix.yaml
+-rw-r--r--  2.0 unx      250 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/99-metal3-fake-machine.yaml
+-rw-r--r--  2.0 unx      162 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/99-metal3-provisioning.yaml
+-rw-r--r--  2.0 unx     1659 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/99-notifications.yaml
+-rw-r--r--  2.0 unx      118 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/99-operatorhub.yaml
+-rw-r--r--  2.0 unx      338 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/99-ovn.yaml
+-rw-r--r--  2.0 unx      912 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/99-sno.yaml
+-rw-r--r--  2.0 unx      762 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/Corefile
+-rw-r--r--  2.0 unx    90964 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/__init__.py
+-rw-r--r--  2.0 unx     1325 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/autoapprovercron.yml
+-rw-r--r--  2.0 unx      987 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/autorules.yml
+-rw-r--r--  2.0 unx     1630 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/bootstrap.yml
+-rw-r--r--  2.0 unx      250 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/calico.sh.j2
+-rw-r--r--  2.0 unx      107 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/chrony.conf
+-rw-r--r--  2.0 unx      629 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/cloud_bootstrap.yml
+-rw-r--r--  2.0 unx      792 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/cloud_ctlplanes.yml
+-rw-r--r--  2.0 unx      217 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/cloud_dns.yml
+-rw-r--r--  2.0 unx      616 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/cloud_lb_api.yml
+-rw-r--r--  2.0 unx      224 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/cloud_lb_apps.yml
+-rw-r--r--  2.0 unx      703 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/cloud_workers.yml
+-rw-r--r--  2.0 unx      123 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/cluster-ingress-02-config.yml
+-rw-r--r--  2.0 unx      159 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/cluster-scheduler-02-config.yml
+-rw-r--r--  2.0 unx      224 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/config.hcl.templ
+-rw-r--r--  2.0 unx       98 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/contrail-ca-patch.service
+-rw-r--r--  2.0 unx      486 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/contrail-ca-patch.sh
+-rw-r--r--  2.0 unx       87 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/contrail.auth
+-rw-r--r--  2.0 unx     1108 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/contrail.sh.j2
+-rw-r--r--  2.0 unx     2278 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/ctlplanes.yml
+-rw-r--r--  2.0 unx      326 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/dhcp.conf
+-rw-r--r--  2.0 unx      106 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/dhcp.sh
+-rw-r--r--  2.0 unx      536 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/dhcp.yml
+-rw-r--r--  2.0 unx      836 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/disconnected.yml
+-rw-r--r--  2.0 unx     8945 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/fake_kubeconfig.json
+-rw-r--r--  2.0 unx       35 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/fake_pull.json
+-rw-r--r--  2.0 unx     1792 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/haproxy.cfg
+-rw-r--r--  2.0 unx     2483 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/haproxy.cfg.kubevirt
+-rw-r--r--  2.0 unx      902 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/httpd.yaml
+-rw-r--r--  2.0 unx      350 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/icsp.yml.j2
+-rw-r--r--  2.0 unx      524 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/ignition.j2
+-rw-r--r--  2.0 unx     4216 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/install-config.yaml
+-rw-r--r--  2.0 unx     2691 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/iso.sh
+-rw-r--r--  2.0 unx      237 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/kcli-ipv6.conf.j2
+-rw-r--r--  2.0 unx     4495 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/kcli_default.yml
+-rw-r--r--  2.0 unx      982 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/keepalived.conf
+-rw-r--r--  2.0 unx       60 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/nonlocalbind.conf
+-rw-r--r--  2.0 unx       59 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/openshift-workload-pinning
+-rw-r--r--  2.0 unx      157 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/relocate-ip-bootstrap.service
+-rw-r--r--  2.0 unx      281 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/relocate-ip-bootstrap.sh
+-rw-r--r--  2.0 unx      690 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/relocate-ip.sh
+-rw-r--r--  2.0 unx      212 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/sno-finish.service
+-rw-r--r--  2.0 unx     2085 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/sno-finish.sh
+-rw-r--r--  2.0 unx     1615 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/workers.yml
+-rw-r--r--  2.0 unx       40 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/cr.sh
+-rw-r--r--  2.0 unx      768 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/install.yml.j2
+-rw-r--r--  2.0 unx      162 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/advanced-cluster-management/99-metal3-provisioning.yaml
+-rw-r--r--  2.0 unx     2934 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/advanced-cluster-management/assisted-service.sample.yml
+-rwxr-xr-x  2.0 unx     2839 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/advanced-cluster-management/assisted-service.sh
+-rw-r--r--  2.0 unx      418 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/advanced-cluster-management/cr.yml
+-rw-r--r--  2.0 unx      625 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/advanced-cluster-management/gen_registries.py
+-rw-r--r--  2.0 unx      312 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/advanced-cluster-management/kcli_default.yml
+-rw-r--r--  2.0 unx     1219 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/advanced-cluster-management/post.sh
+-rw-r--r--  2.0 unx      645 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/argocd/configmap.yml
+-rw-r--r--  2.0 unx     2423 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/argocd/install.sh
+-rw-r--r--  2.0 unx       49 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/argocd/kcli_default.yml
+-rw-r--r--  2.0 unx     1093 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/autolabeller/cr.yml
+-rw-r--r--  2.0 unx      142 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/autolabeller/install.sh
+-rw-r--r--  2.0 unx     1093 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/autolabeller/install.yml
+-rw-r--r--  2.0 unx      165 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/autolabeller/kcli_default.yml
+-rw-r--r--  2.0 unx       25 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/autolabeller/uninstall.sh
+-rw-r--r--  2.0 unx      873 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/cluster-logging/cr.yml
+-rw-r--r--  2.0 unx       63 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/cluster-logging/kcli_default.yml
+-rw-r--r--  2.0 unx      265 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/istio/install.sh
+-rw-r--r--  2.0 unx      377 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/istio/istio-cni.yaml
+-rw-r--r--  2.0 unx     1039 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/kubevirt-hyperconverged/cr.yml
+-rw-r--r--  2.0 unx      154 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/kubevirt-hyperconverged/kcli_default.yml
+-rw-r--r--  2.0 unx      775 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/local-storage-operator/cr.yml
+-rw-r--r--  2.0 unx      227 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/local-storage-operator/kcli_default.yml
+-rw-r--r--  2.0 unx      642 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/local-storage-operator/post.sh
+-rw-r--r--  2.0 unx      349 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/lvms-operator/cr.yml
+-rw-r--r--  2.0 unx      137 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/lvms-operator/kcli_default.yml
+-rw-r--r--  2.0 unx      595 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/lvms-operator/post.sh
+-rw-r--r--  2.0 unx      510 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/metallb-operator/cr.yml
+-rw-r--r--  2.0 unx       94 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/metallb-operator/kcli_default.yml
+-rw-r--r--  2.0 unx      162 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/multicluster-engine/99-metal3-provisioning.yaml
+-rw-r--r--  2.0 unx     2934 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/multicluster-engine/assisted-service.sample.yml
+-rwxr-xr-x  2.0 unx     2846 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/multicluster-engine/assisted-service.sh
+-rw-r--r--  2.0 unx      245 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/multicluster-engine/cr.yml
+-rw-r--r--  2.0 unx      625 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/multicluster-engine/gen_registries.py
+-rw-r--r--  2.0 unx      171 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/multicluster-engine/kcli_default.yml
+-rwxr-xr-x  2.0 unx       55 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/multicluster-engine/post.sh
+-rwxr-xr-x  2.0 unx     2298 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/nfs/install.sh
+-rw-r--r--  2.0 unx      117 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/nfs/kcli_default.yml
+-rw-r--r--  2.0 unx      185 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/nfs/uninstall.sh
+-rw-r--r--  2.0 unx      849 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/odf-operator/cr.yml
+-rw-r--r--  2.0 unx      298 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/odf-operator/kcli_default.yml
+-rw-r--r--  2.0 unx      364 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/odf-operator/nad_cluster.yml
+-rw-r--r--  2.0 unx      362 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/odf-operator/nad_public.yml
+-rw-r--r--  2.0 unx      745 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/odf-operator/post.sh
+-rw-r--r--  2.0 unx      530 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/odf-operator/pre.sh
+-rw-r--r--  2.0 unx      363 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/serverless-operator/cr.yml
+-rw-r--r--  2.0 unx      157 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/serverless-operator/kcli_default.yml
+-rw-r--r--  2.0 unx      278 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/serverless-operator/post.sh
+-rw-r--r--  2.0 unx     1227 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/users/install.sh
+-rw-r--r--  2.0 unx       84 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/users/kcli_default.yml
+-rw-r--r--  2.0 unx      258 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/users/oauth.yml
+-rw-r--r--  2.0 unx      249 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/users/oauth_hypershift.yml
+-rw-r--r--  2.0 unx      422 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/apps/users/uninstall.sh
+-rw-r--r--  2.0 unx       60 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/customisation/00-kcli-namespace.yaml
+-rw-r--r--  2.0 unx       91 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/customisation/97-autoapprovercron-sa.yaml
+-rw-r--r--  2.0 unx      264 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/customisation/98-autoapprovercron-binding.yaml
+-rw-r--r--  2.0 unx      911 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/customisation/99-autoapprovercron-cronjob.yaml
+-rw-r--r--  2.0 unx      389 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/customisation/99-ingress-controller.yaml
+-rw-r--r--  2.0 unx      184 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/customisation/99-monitoring.yaml
+-rw-r--r--  2.0 unx      289 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/customisation/99-registry.yaml
+-rw-r--r--  2.0 unx     1685 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/disconnected/haproxy.cfg
+-rw-r--r--  2.0 unx      211 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/disconnected/registry.service
+-rwxr-xr-x  2.0 unx      328 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/disconnected/bin/sync_image.sh
+-rwxr-xr-x  2.0 unx      201 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/disconnected/scripts/01_get_oc.sh
+-rwxr-xr-x  2.0 unx     2381 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/disconnected/scripts/03_mirror.sh
+-rwxr-xr-x  2.0 unx     2046 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/disconnected/scripts/03_registry.sh
+-rwxr-xr-x  2.0 unx      337 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/disconnected/scripts/04_extras.sh
+-rwxr-xr-x  2.0 unx     2319 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/disconnected/scripts/05_olm.sh
+-rwxr-xr-x  2.0 unx      241 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/disconnected/scripts/06_web.sh
+-rwxr-xr-x  2.0 unx      733 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/disconnected/scripts/deploy.sh
+-rw-r--r--  2.0 unx     4223 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/disconnected/scripts/mirror-config.yaml.sample
+-rw-r--r--  2.0 unx      945 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/sno/kcli_default.yml
+-rw-r--r--  2.0 unx      660 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/sno/kcli_plan.yml
+-rw-r--r--  2.0 unx     2557 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/staticpods/coredns.yml
+-rw-r--r--  2.0 unx      987 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/staticpods/haproxy.yml
+-rw-r--r--  2.0 unx     2539 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/staticpods/keepalived.yml
+-rw-r--r--  2.0 unx     1721 b- defN 23-Jul-17 10:41 kvirt/cluster/openshift/staticpods/mdns.yml
+-rw-r--r--  2.0 unx      193 b- defN 23-Jul-17 10:41 kvirt/cluster/profiles/sample-kubeadm-default.yml
+-rw-r--r--  2.0 unx      135 b- defN 23-Jul-17 10:41 kvirt/cluster/profiles/sample-openshift-compact.yml
+-rw-r--r--  2.0 unx      210 b- defN 23-Jul-17 10:41 kvirt/cluster/profiles/sample-openshift-contrail.yml
+-rw-r--r--  2.0 unx      157 b- defN 23-Jul-17 10:41 kvirt/cluster/profiles/sample-openshift-ipv6.yml
+-rw-r--r--  2.0 unx       55 b- defN 23-Jul-17 10:41 kvirt/cluster/profiles/sample-openshift-sno-bm.yml
+-rw-r--r--  2.0 unx      148 b- defN 23-Jul-17 10:41 kvirt/cluster/profiles/sample-openshift-sno.yml
+-rw-r--r--  2.0 unx     3377 b- defN 23-Jul-17 10:41 kvirt/common/Jenkinsfile.j2
+-rw-r--r--  2.0 unx    99590 b- defN 23-Jul-17 10:41 kvirt/common/__init__.py
+-rw-r--r--  2.0 unx     1406 b- defN 23-Jul-17 10:41 kvirt/common/autoscale.yaml.j2
+-rw-r--r--  2.0 unx     8945 b- defN 23-Jul-17 10:41 kvirt/common/fake_kubeconfig.json
+-rw-r--r--  2.0 unx      669 b- defN 23-Jul-17 10:41 kvirt/common/ignition.j2
+-rw-r--r--  2.0 unx      125 b- defN 23-Jul-17 10:41 kvirt/common/kubevirt_kcli_conf.j2
+-rw-r--r--  2.0 unx       99 b- defN 23-Jul-17 10:41 kvirt/common/local_kcli_conf.j2
+-rw-r--r--  2.0 unx     3068 b- defN 23-Jul-17 10:41 kvirt/common/pipeline.yml.j2
+-rw-r--r--  2.0 unx     2377 b- defN 23-Jul-17 10:41 kvirt/common/pipeline_kube.yml.j2
+-rw-r--r--  2.0 unx     1381 b- defN 23-Jul-17 10:41 kvirt/common/playbook.j2
+-rw-r--r--  2.0 unx      833 b- defN 23-Jul-17 10:41 kvirt/common/storage.sh.aws
+-rw-r--r--  2.0 unx      635 b- defN 23-Jul-17 10:41 kvirt/common/storage.sh.gcp
+-rw-r--r--  2.0 unx       68 b- defN 23-Jul-17 10:41 kvirt/common/storage.sh.ibmcloud
+-rw-r--r--  2.0 unx     4562 b- defN 23-Jul-17 10:41 kvirt/common/vm.ovf.j2
+-rw-r--r--  2.0 unx     2241 b- defN 23-Jul-17 10:41 kvirt/common/workflow.yml.j2
+-rw-r--r--  2.0 unx     2208 b- defN 23-Jul-17 10:41 kvirt/common/workflow_script.yml.j2
+-rw-r--r--  2.0 unx    15041 b- defN 23-Jul-17 10:41 kvirt/container/__init__.py
+-rw-r--r--  2.0 unx    11716 b- defN 23-Jul-17 10:41 kvirt/expose/__init__.py
+-rw-r--r--  2.0 unx     4319 b- defN 23-Jul-17 10:41 kvirt/expose/swagger.yml
+-rw-r--r--  2.0 unx      408 b- defN 23-Jul-17 10:41 kvirt/expose/static/css/bootstrap-notify.css
+-rw-r--r--  2.0 unx   121125 b- defN 23-Jul-17 10:41 kvirt/expose/static/css/bootstrap.min.css
+-rw-r--r--  2.0 unx      399 b- defN 23-Jul-17 10:41 kvirt/expose/static/css/dataTables.checkboxes.css
+-rw-r--r--  2.0 unx    13587 b- defN 23-Jul-17 10:41 kvirt/expose/static/css/jquery.dataTables.min.css
+-rw-r--r--  2.0 unx      868 b- defN 23-Jul-17 10:41 kvirt/expose/static/css/kcli.css
+-rw-r--r--  2.0 unx      269 b- defN 23-Jul-17 10:41 kvirt/expose/static/css/wheel.css
+-rw-r--r--  2.0 unx     1406 b- defN 23-Jul-17 10:41 kvirt/expose/static/images/favicon.ico
+-rw-r--r--  2.0 unx      160 b- defN 23-Jul-17 10:41 kvirt/expose/static/images/sort_asc.png
+-rw-r--r--  2.0 unx      201 b- defN 23-Jul-17 10:41 kvirt/expose/static/images/sort_both.png
+-rw-r--r--  2.0 unx      158 b- defN 23-Jul-17 10:41 kvirt/expose/static/images/sort_desc.png
+-rw-r--r--  2.0 unx    24772 b- defN 23-Jul-17 10:41 kvirt/expose/static/images/wheel.gif
+-rw-r--r--  2.0 unx    12398 b- defN 23-Jul-17 10:41 kvirt/expose/static/js/dataTables.checkboxes.min.js
+-rw-r--r--  2.0 unx      367 b- defN 23-Jul-17 10:41 kvirt/expose/static/js/exposeactions.js
+-rw-r--r--  2.0 unx    83059 b- defN 23-Jul-17 10:41 kvirt/expose/static/js/jquery.dataTables.min.js
+-rw-r--r--  2.0 unx    89795 b- defN 23-Jul-17 10:41 kvirt/expose/static/js/jquery.min.js
+-rw-r--r--  2.0 unx      263 b- defN 23-Jul-17 10:41 kvirt/expose/static/js/list.js
+-rw-r--r--  2.0 unx     1605 b- defN 23-Jul-17 10:41 kvirt/expose/templates/form.html
+-rw-r--r--  2.0 unx     1035 b- defN 23-Jul-17 10:41 kvirt/expose/templates/head.html
+-rw-r--r--  2.0 unx      406 b- defN 23-Jul-17 10:41 kvirt/expose/templates/index.html
+-rw-r--r--  2.0 unx     1220 b- defN 23-Jul-17 10:41 kvirt/expose/templates/infoplan.html
+-rw-r--r--  2.0 unx      574 b- defN 23-Jul-17 10:41 kvirt/expose/templates/planstable.html
+-rw-r--r--  2.0 unx      550 b- defN 23-Jul-17 10:41 kvirt/expose/templates/result.html
+-rw-r--r--  2.0 unx     1754 b- defN 23-Jul-17 10:41 kvirt/internalplans/__init__.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jul-17 10:41 kvirt/jinjafilters/__init__.py
+-rw-r--r--  2.0 unx     5351 b- defN 23-Jul-17 10:41 kvirt/jinjafilters/jinjafilters.py
+-rw-r--r--  2.0 unx     9018 b- defN 23-Jul-17 10:41 kvirt/kfish/__init__.py
+-rw-r--r--  2.0 unx    10455 b- defN 23-Jul-17 10:41 kvirt/ksushy/__init__.py
+-rw-r--r--  2.0 unx      121 b- defN 23-Jul-17 10:41 kvirt/ksushy/main.py
+-rw-r--r--  2.0 unx     1028 b- defN 23-Jul-17 10:41 kvirt/ksushy/templates/bios.json
+-rw-r--r--  2.0 unx      443 b- defN 23-Jul-17 10:41 kvirt/ksushy/templates/interface.json
+-rw-r--r--  2.0 unx      418 b- defN 23-Jul-17 10:41 kvirt/ksushy/templates/interfaces.json
+-rw-r--r--  2.0 unx     1050 b- defN 23-Jul-17 10:41 kvirt/ksushy/templates/manager.json
+-rw-r--r--  2.0 unx      571 b- defN 23-Jul-17 10:41 kvirt/ksushy/templates/managers.json
+-rw-r--r--  2.0 unx      554 b- defN 23-Jul-17 10:41 kvirt/ksushy/templates/root.json
+-rw-r--r--  2.0 unx     2760 b- defN 23-Jul-17 10:41 kvirt/ksushy/templates/system.json
+-rw-r--r--  2.0 unx      511 b- defN 23-Jul-17 10:41 kvirt/ksushy/templates/systems.json
+-rw-r--r--  2.0 unx     1219 b- defN 23-Jul-17 10:41 kvirt/ksushy/templates/virtualmedia_cd.json
+-rw-r--r--  2.0 unx      705 b- defN 23-Jul-17 10:41 kvirt/ksushy/templates/virtualmedias.json
+-rw-r--r--  2.0 unx     2780 b- defN 23-Jul-17 10:41 kvirt/miniconsole/__init__.py
+-rw-r--r--  2.0 unx     3733 b- defN 23-Jul-17 10:41 kvirt/nameutils/__init__.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jul-17 10:41 kvirt/providers/__init__.py
+-rw-r--r--  2.0 unx     9005 b- defN 23-Jul-17 10:41 kvirt/providers/sampleprovider.py
+-rw-r--r--  2.0 unx    71336 b- defN 23-Jul-17 10:41 kvirt/providers/aws/__init__.py
+-rw-r--r--  2.0 unx      260 b- defN 23-Jul-17 10:41 kvirt/providers/aws/assume_policy.json
+-rw-r--r--  2.0 unx     1764 b- defN 23-Jul-17 10:41 kvirt/providers/aws/ctlplane_policy.json
+-rw-r--r--  2.0 unx      174 b- defN 23-Jul-17 10:41 kvirt/providers/aws/worker_policy.json
+-rw-r--r--  2.0 unx    59707 b- defN 23-Jul-17 10:41 kvirt/providers/azure/__init__.py
+-rw-r--r--  2.0 unx      479 b- defN 23-Jul-17 10:41 kvirt/providers/fake/__init__.py
+-rw-r--r--  2.0 unx    75060 b- defN 23-Jul-17 10:41 kvirt/providers/gcp/__init__.py
+-rw-r--r--  2.0 unx      175 b- defN 23-Jul-17 10:41 kvirt/providers/gcp/gcp-hack.service
+-rw-r--r--  2.0 unx      231 b- defN 23-Jul-17 10:41 kvirt/providers/gcp/gcp-hack.sh
+-rw-r--r--  2.0 unx    65205 b- defN 23-Jul-17 10:41 kvirt/providers/ibm/__init__.py
+-rw-r--r--  2.0 unx    83917 b- defN 23-Jul-17 10:41 kvirt/providers/kubevirt/__init__.py
+-rw-r--r--  2.0 unx   186846 b- defN 23-Jul-17 10:41 kvirt/providers/kvm/__init__.py
+-rw-r--r--  2.0 unx     1965 b- defN 23-Jul-17 10:41 kvirt/providers/kvm/helpers.py
+-rw-r--r--  2.0 unx    57194 b- defN 23-Jul-17 10:41 kvirt/providers/openstack/__init__.py
+-rw-r--r--  2.0 unx    62662 b- defN 23-Jul-17 10:41 kvirt/providers/ovirt/__init__.py
+-rw-r--r--  2.0 unx    31230 b- defN 23-Jul-17 10:41 kvirt/providers/packet/__init__.py
+-rw-r--r--  2.0 unx    34424 b- defN 23-Jul-17 10:41 kvirt/providers/proxmox/__init__.py
+-rw-r--r--  2.0 unx    73215 b- defN 23-Jul-17 10:41 kvirt/providers/vsphere/__init__.py
+-rw-r--r--  2.0 unx    13655 b- defN 23-Jul-17 10:41 kvirt/providers/vsphere/helpers.py
+-rw-r--r--  2.0 unx     4893 b- defN 23-Jul-17 10:41 kvirt/providers/vsphere/tagging.py
+-rw-r--r--  2.0 unx    21420 b- defN 23-Jul-17 10:41 kvirt/providers/web/__init__.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jul-17 10:41 kvirt/version/__init__.py
+-rw-r--r--  2.0 unx       19 b- defN 23-Jul-17 10:45 kvirt/version/git
+-rw-r--r--  2.0 unx    46652 b- defN 23-Jul-17 10:41 kvirt/web/__init__.py
+-rw-r--r--  2.0 unx      261 b- defN 23-Jul-17 10:41 kvirt/web/main.py
+-rw-r--r--  2.0 unx      408 b- defN 23-Jul-17 10:41 kvirt/web/static/css/bootstrap-notify.css
+-rw-r--r--  2.0 unx    23409 b- defN 23-Jul-17 10:41 kvirt/web/static/css/bootstrap-theme.min.css
+-rw-r--r--  2.0 unx   121125 b- defN 23-Jul-17 10:41 kvirt/web/static/css/bootstrap.min.css
+-rw-r--r--  2.0 unx      399 b- defN 23-Jul-17 10:41 kvirt/web/static/css/dataTables.checkboxes.css
+-rw-r--r--  2.0 unx    13587 b- defN 23-Jul-17 10:41 kvirt/web/static/css/jquery.dataTables.min.css
+-rw-r--r--  2.0 unx      816 b- defN 23-Jul-17 10:41 kvirt/web/static/css/kcli.css
+-rw-r--r--  2.0 unx     3033 b- defN 23-Jul-17 10:41 kvirt/web/static/css/navbar.css
+-rw-r--r--  2.0 unx     2908 b- defN 23-Jul-17 10:41 kvirt/web/static/css/spice.css
+-rw-r--r--  2.0 unx      271 b- defN 23-Jul-17 10:41 kvirt/web/static/css/wheel.css
+-rw-r--r--  2.0 unx    18028 b- defN 23-Jul-17 10:41 kvirt/web/static/fonts/glyphicons-halflings-regular.woff2
+-rw-r--r--  2.0 unx      715 b- defN 23-Jul-17 10:41 kvirt/web/static/images/Centos.png
+-rw-r--r--  2.0 unx      294 b- defN 23-Jul-17 10:41 kvirt/web/static/images/Debian.png
+-rw-r--r--  2.0 unx      987 b- defN 23-Jul-17 10:41 kvirt/web/static/images/Fedora.png
+-rw-r--r--  2.0 unx      672 b- defN 23-Jul-17 10:41 kvirt/web/static/images/Redhat.png
+-rw-r--r--  2.0 unx     1278 b- defN 23-Jul-17 10:41 kvirt/web/static/images/Suse.png
+-rw-r--r--  2.0 unx     1782 b- defN 23-Jul-17 10:41 kvirt/web/static/images/Tux.png
+-rw-r--r--  2.0 unx      544 b- defN 23-Jul-17 10:41 kvirt/web/static/images/Ubuntu.png
+-rw-r--r--  2.0 unx     4213 b- defN 23-Jul-17 10:41 kvirt/web/static/images/delete.png
+-rw-r--r--  2.0 unx     1406 b- defN 23-Jul-17 10:41 kvirt/web/static/images/favicon.ico
+-rw-r--r--  2.0 unx    23320 b- defN 23-Jul-17 10:41 kvirt/web/static/images/kcli-small.png
+-rw-r--r--  2.0 unx    27185 b- defN 23-Jul-17 10:41 kvirt/web/static/images/kcli.jpg
+-rw-r--r--  2.0 unx   113928 b- defN 23-Jul-17 10:41 kvirt/web/static/images/kcli.png
+-rw-r--r--  2.0 unx    48809 b- defN 23-Jul-17 10:41 kvirt/web/static/images/logo-header.svg
+-rw-r--r--  2.0 unx    48809 b- defN 23-Jul-17 10:41 kvirt/web/static/images/logo-main.svg
+-rw-r--r--  2.0 unx      160 b- defN 23-Jul-17 10:41 kvirt/web/static/images/sort_asc.png
+-rw-r--r--  2.0 unx      201 b- defN 23-Jul-17 10:41 kvirt/web/static/images/sort_both.png
+-rw-r--r--  2.0 unx      158 b- defN 23-Jul-17 10:41 kvirt/web/static/images/sort_desc.png
+-rw-r--r--  2.0 unx     3927 b- defN 23-Jul-17 10:41 kvirt/web/static/images/start.png
+-rw-r--r--  2.0 unx     3631 b- defN 23-Jul-17 10:41 kvirt/web/static/images/stop.png
+-rw-r--r--  2.0 unx    24772 b- defN 23-Jul-17 10:41 kvirt/web/static/images/wheel.gif
+-rw-r--r--  2.0 unx     2933 b- defN 23-Jul-17 10:41 kvirt/web/static/js/bootstrap-notify.js
+-rw-r--r--  2.0 unx    37045 b- defN 23-Jul-17 10:41 kvirt/web/static/js/bootstrap.min.js
+-rw-r--r--  2.0 unx     2523 b- defN 23-Jul-17 10:41 kvirt/web/static/js/containeraction.js
+-rw-r--r--  2.0 unx    12398 b- defN 23-Jul-17 10:41 kvirt/web/static/js/dataTables.checkboxes.min.js
+-rw-r--r--  2.0 unx     1642 b- defN 23-Jul-17 10:41 kvirt/web/static/js/hostaction.js
+-rw-r--r--  2.0 unx     1187 b- defN 23-Jul-17 10:41 kvirt/web/static/js/imageaction.js
+-rw-r--r--  2.0 unx    83059 b- defN 23-Jul-17 10:41 kvirt/web/static/js/jquery.dataTables.min.js
+-rw-r--r--  2.0 unx    87462 b- defN 23-Jul-17 10:41 kvirt/web/static/js/jquery.min.js
+-rw-r--r--  2.0 unx     2704 b- defN 23-Jul-17 10:41 kvirt/web/static/js/kcli.js
+-rw-r--r--  2.0 unx     1594 b- defN 23-Jul-17 10:41 kvirt/web/static/js/kubeaction.js
+-rw-r--r--  2.0 unx     3907 b- defN 23-Jul-17 10:41 kvirt/web/static/js/list.js
+-rw-r--r--  2.0 unx     1376 b- defN 23-Jul-17 10:41 kvirt/web/static/js/networkaction.js
+-rw-r--r--  2.0 unx     2457 b- defN 23-Jul-17 10:41 kvirt/web/static/js/planaction.js
+-rw-r--r--  2.0 unx     1237 b- defN 23-Jul-17 10:41 kvirt/web/static/js/poolaction.js
+-rw-r--r--  2.0 unx      846 b- defN 23-Jul-17 10:41 kvirt/web/static/js/productaction.js
+-rw-r--r--  2.0 unx      270 b- defN 23-Jul-17 10:41 kvirt/web/static/js/refresh.js
+-rw-r--r--  2.0 unx     1835 b- defN 23-Jul-17 10:41 kvirt/web/static/js/repoaction.js
+-rw-r--r--  2.0 unx     3463 b- defN 23-Jul-17 10:41 kvirt/web/static/js/snapshotaction.js
+-rw-r--r--  2.0 unx     2745 b- defN 23-Jul-17 10:41 kvirt/web/static/js/vmaction.js
+-rw-r--r--  2.0 unx      123 b- defN 23-Jul-17 10:41 kvirt/web/static/js/wheel.js
+-rw-r--r--  2.0 unx     9944 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/atKeynames.js
+-rw-r--r--  2.0 unx     2335 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/bitmap.js
+-rw-r--r--  2.0 unx     4795 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/cursor.js
+-rw-r--r--  2.0 unx    49214 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/display.js
+-rw-r--r--  2.0 unx    13253 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/enums.js
+-rw-r--r--  2.0 unx     2847 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/filexfer.js
+-rw-r--r--  2.0 unx     9535 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/inputs.js
+-rw-r--r--  2.0 unx     6176 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/lz.js
+-rw-r--r--  2.0 unx    18370 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/main.js
+-rw-r--r--  2.0 unx    12677 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/playback.js
+-rw-r--r--  2.0 unx     7036 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/png.js
+-rw-r--r--  2.0 unx     3110 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/port.js
+-rw-r--r--  2.0 unx    44531 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/quic.js
+-rw-r--r--  2.0 unx     3030 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/resize.js
+-rw-r--r--  2.0 unx     7282 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/simulatecursor.js
+-rw-r--r--  2.0 unx     1895 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/spicearraybuffer.js
+-rw-r--r--  2.0 unx    18202 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/spiceconn.js
+-rw-r--r--  2.0 unx     3616 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/spicedataview.js
+-rw-r--r--  2.0 unx    33015 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/spicemsg.js
+-rw-r--r--  2.0 unx    12767 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/spicetype.js
+-rw-r--r--  2.0 unx     6808 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/ticket.js
+-rw-r--r--  2.0 unx    13628 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/utils.js
+-rw-r--r--  2.0 unx    21577 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/webm.js
+-rw-r--r--  2.0 unx     4131 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/wire.js
+-rw-r--r--  2.0 unx    16580 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/thirdparty/jsbn.js
+-rw-r--r--  2.0 unx     2529 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/thirdparty/prng4.js
+-rw-r--r--  2.0 unx     3442 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/thirdparty/rng.js
+-rw-r--r--  2.0 unx     4257 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/thirdparty/rsa.js
+-rw-r--r--  2.0 unx    10671 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/thirdparty/sha1.js
+-rw-r--r--  2.0 unx        0 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/thirdparty/browser-es-module-loader/.npmignore
+-rw-r--r--  2.0 unx      419 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/thirdparty/browser-es-module-loader/README.md
+-rw-r--r--  2.0 unx      359 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/thirdparty/browser-es-module-loader/rollup.config.js
+-rw-r--r--  2.0 unx     1113 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/thirdparty/browser-es-module-loader/src/babel-worker.js
+-rw-r--r--  2.0 unx     8601 b- defN 23-Jul-17 10:41 kvirt/web/static/js/spice/thirdparty/browser-es-module-loader/src/browser-es-module-loader.js
+-rw-r--r--  2.0 unx     2176 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/error-handler.js
+-rw-r--r--  2.0 unx     5682 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/localization.js
+-rw-r--r--  2.0 unx    56845 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/ui.js
+-rw-r--r--  2.0 unx     6696 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/webutil.js
+-rw-r--r--  2.0 unx     3553 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/alt.svg
+-rw-r--r--  2.0 unx     3980 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/clipboard.svg
+-rw-r--r--  2.0 unx     3430 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/connect.svg
+-rw-r--r--  2.0 unx     4381 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/ctrl.svg
+-rw-r--r--  2.0 unx     3237 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/ctrlaltdel.svg
+-rw-r--r--  2.0 unx     5062 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/disconnect.svg
+-rw-r--r--  2.0 unx     4684 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/drag.svg
+-rw-r--r--  2.0 unx     3106 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/error.svg
+-rw-r--r--  2.0 unx     4522 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/esc.svg
+-rw-r--r--  2.0 unx     3066 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/expander.svg
+-rw-r--r--  2.0 unx     3139 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/fullscreen.svg
+-rw-r--r--  2.0 unx     2559 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/handle.svg
+-rw-r--r--  2.0 unx     6386 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/handle_bg.svg
+-rw-r--r--  2.0 unx     3204 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/info.svg
+-rw-r--r--  2.0 unx     6404 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/keyboard.svg
+-rw-r--r--  2.0 unx     7000 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/mouse_left.svg
+-rw-r--r--  2.0 unx     7002 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/mouse_middle.svg
+-rw-r--r--  2.0 unx     6993 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/mouse_none.svg
+-rw-r--r--  2.0 unx     7001 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/mouse_right.svg
+-rw-r--r--  2.0 unx     3985 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/power.svg
+-rw-r--r--  2.0 unx     3082 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/settings.svg
+-rw-r--r--  2.0 unx     2953 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/tab.svg
+-rw-r--r--  2.0 unx     4441 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/toggleextrakeys.svg
+-rw-r--r--  2.0 unx     3869 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/warning.svg
+-rw-r--r--  2.0 unx     3178 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/windows.svg
+-rw-r--r--  2.0 unx      871 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/icons/Makefile
+-rw-r--r--  2.0 unx     4028 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/icons/novnc-120x120.png
+-rw-r--r--  2.0 unx     4582 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/icons/novnc-144x144.png
+-rw-r--r--  2.0 unx     5216 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/icons/novnc-152x152.png
+-rw-r--r--  2.0 unx      675 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/icons/novnc-16x16.png
+-rw-r--r--  2.0 unx     5787 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/icons/novnc-192x192.png
+-rw-r--r--  2.0 unx     1000 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/icons/novnc-24x24.png
+-rw-r--r--  2.0 unx     1064 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/icons/novnc-32x32.png
+-rw-r--r--  2.0 unx     1397 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/icons/novnc-48x48.png
+-rw-r--r--  2.0 unx     1932 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/icons/novnc-60x60.png
+-rw-r--r--  2.0 unx     1946 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/icons/novnc-64x64.png
+-rw-r--r--  2.0 unx     2699 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/icons/novnc-72x72.png
+-rw-r--r--  2.0 unx     2874 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/icons/novnc-76x76.png
+-rw-r--r--  2.0 unx     2351 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/icons/novnc-96x96.png
+-rw-r--r--  2.0 unx    11685 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/icons/novnc-icon-sm.svg
+-rw-r--r--  2.0 unx    11549 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/images/icons/novnc-icon.svg
+-rw-r--r--  2.0 unx     2885 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/locale/cs.json
+-rw-r--r--  2.0 unx     2854 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/locale/de.json
+-rw-r--r--  2.0 unx     3906 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/locale/el.json
+-rw-r--r--  2.0 unx     2671 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/locale/es.json
+-rw-r--r--  2.0 unx     3354 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/locale/ja.json
+-rw-r--r--  2.0 unx     2961 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/locale/ko.json
+-rw-r--r--  2.0 unx     3035 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/locale/nl.json
+-rw-r--r--  2.0 unx     2830 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/locale/pl.json
+-rw-r--r--  2.0 unx     3825 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/locale/ru.json
+-rw-r--r--  2.0 unx     2845 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/locale/sv.json
+-rw-r--r--  2.0 unx     2811 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/locale/tr.json
+-rw-r--r--  2.0 unx     2597 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/locale/zh_CN.json
+-rw-r--r--  2.0 unx     2606 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/locale/zh_TW.json
+-rw-r--r--  2.0 unx      157 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/sounds/CREDITS
+-rw-r--r--  2.0 unx     4531 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/sounds/bell.mp3
+-rw-r--r--  2.0 unx     8495 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/sounds/bell.oga
+-rw-r--r--  2.0 unx    38580 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/styles/Orbitron700.ttf
+-rw-r--r--  2.0 unx    17472 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/styles/Orbitron700.woff
+-rw-r--r--  2.0 unx    18450 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/app/styles/base.css
+-rw-r--r--  2.0 unx     4189 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/base64.js
+-rw-r--r--  2.0 unx    11241 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/des.js
+-rw-r--r--  2.0 unx    20381 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/display.js
+-rw-r--r--  2.0 unx     1374 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/encodings.js
+-rw-r--r--  2.0 unx     1170 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/inflator.js
+-rw-r--r--  2.0 unx    74196 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/rfb.js
+-rw-r--r--  2.0 unx     9130 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/websock.js
+-rw-r--r--  2.0 unx      628 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/decoders/copyrect.js
+-rw-r--r--  2.0 unx     4814 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/decoders/hextile.js
+-rw-r--r--  2.0 unx     1739 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/decoders/raw.js
+-rw-r--r--  2.0 unx     1210 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/decoders/rre.js
+-rw-r--r--  2.0 unx     9662 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/decoders/tight.js
+-rw-r--r--  2.0 unx      768 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/decoders/tightpng.js
+-rw-r--r--  2.0 unx    11438 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/input/domkeytable.js
+-rw-r--r--  2.0 unx     3804 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/input/fixedkeys.js
+-rw-r--r--  2.0 unx    13090 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/input/keyboard.js
+-rw-r--r--  2.0 unx    34609 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/input/keysym.js
+-rw-r--r--  2.0 unx    25374 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/input/keysymdef.js
+-rw-r--r--  2.0 unx     9995 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/input/mouse.js
+-rw-r--r--  2.0 unx     5283 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/input/util.js
+-rw-r--r--  2.0 unx     2580 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/input/vkeys.js
+-rw-r--r--  2.0 unx    14256 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/input/xtscancodes.js
+-rw-r--r--  2.0 unx     3155 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/util/browser.js
+-rw-r--r--  2.0 unx     7556 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/util/cursor.js
+-rw-r--r--  2.0 unx     4221 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/util/events.js
+-rw-r--r--  2.0 unx      896 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/util/eventtarget.js
+-rw-r--r--  2.0 unx     1358 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/util/logging.js
+-rw-r--r--  2.0 unx     1866 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/util/polyfill.js
+-rw-r--r--  2.0 unx      301 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/core/util/strings.js
+-rw-r--r--  2.0 unx     7388 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/vendor/promise.js
+-rw-r--r--  2.0 unx      419 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/vendor/browser-es-module-loader/README.md
+-rw-r--r--  2.0 unx      295 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/vendor/browser-es-module-loader/rollup.config.js
+-rw-r--r--  2.0 unx     1113 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/vendor/browser-es-module-loader/src/babel-worker.js
+-rw-r--r--  2.0 unx     8498 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/vendor/browser-es-module-loader/src/browser-es-module-loader.js
+-rw-r--r--  2.0 unx     1084 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/vendor/pako/LICENSE
+-rw-r--r--  2.0 unx      301 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/vendor/pako/README.md
+-rw-r--r--  2.0 unx     1062 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/vendor/pako/lib/utils/common.js
+-rw-r--r--  2.0 unx      666 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/vendor/pako/lib/zlib/adler32.js
+-rw-r--r--  2.0 unx     1334 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/vendor/pako/lib/zlib/constants.js
+-rw-r--r--  2.0 unx      764 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/vendor/pako/lib/zlib/crc32.js
+-rw-r--r--  2.0 unx    60016 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/vendor/pako/lib/zlib/deflate.js
+-rw-r--r--  2.0 unx     1251 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/vendor/pako/lib/zlib/gzheader.js
+-rw-r--r--  2.0 unx    11690 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/vendor/pako/lib/zlib/inffast.js
+-rw-r--r--  2.0 unx    47128 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/vendor/pako/lib/zlib/inflate.js
+-rw-r--r--  2.0 unx    11527 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/vendor/pako/lib/zlib/inftrees.js
+-rw-r--r--  2.0 unx      560 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/vendor/pako/lib/zlib/messages.js
+-rw-r--r--  2.0 unx    38767 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/vendor/pako/lib/zlib/trees.js
+-rw-r--r--  2.0 unx      823 b- defN 23-Jul-17 10:41 kvirt/web/static/vnc/vendor/pako/lib/zlib/zstream.js
+-rw-r--r--  2.0 unx     2509 b- defN 23-Jul-17 10:41 kvirt/web/templates/bootstrap.html
+-rw-r--r--  2.0 unx    14595 b- defN 23-Jul-17 10:41 kvirt/web/templates/console.html
+-rw-r--r--  2.0 unx      717 b- defN 23-Jul-17 10:41 kvirt/web/templates/containercreate.html
+-rw-r--r--  2.0 unx      493 b- defN 23-Jul-17 10:41 kvirt/web/templates/containerprofiles.html
+-rw-r--r--  2.0 unx     1050 b- defN 23-Jul-17 10:41 kvirt/web/templates/containerprofilestable.html
+-rw-r--r--  2.0 unx      490 b- defN 23-Jul-17 10:41 kvirt/web/templates/containers.html
+-rw-r--r--  2.0 unx     1746 b- defN 23-Jul-17 10:41 kvirt/web/templates/containerstable.html
+-rw-r--r--  2.0 unx     2123 b- defN 23-Jul-17 10:41 kvirt/web/templates/head.html
+-rw-r--r--  2.0 unx      473 b- defN 23-Jul-17 10:41 kvirt/web/templates/hosts.html
+-rw-r--r--  2.0 unx     1705 b- defN 23-Jul-17 10:41 kvirt/web/templates/hoststable.html
+-rw-r--r--  2.0 unx     1119 b- defN 23-Jul-17 10:41 kvirt/web/templates/imagecreate.html
+-rw-r--r--  2.0 unx      478 b- defN 23-Jul-17 10:41 kvirt/web/templates/images.html
+-rw-r--r--  2.0 unx      646 b- defN 23-Jul-17 10:41 kvirt/web/templates/imagestable.html
+-rw-r--r--  2.0 unx      472 b- defN 23-Jul-17 10:41 kvirt/web/templates/isos.html
+-rw-r--r--  2.0 unx      261 b- defN 23-Jul-17 10:41 kvirt/web/templates/isostable.html
+-rw-r--r--  2.0 unx      609 b- defN 23-Jul-17 10:41 kvirt/web/templates/kubecreate.html
+-rw-r--r--  2.0 unx      622 b- defN 23-Jul-17 10:41 kvirt/web/templates/kubeinfo.html
+-rw-r--r--  2.0 unx      488 b- defN 23-Jul-17 10:41 kvirt/web/templates/kubeprofiles.html
+-rw-r--r--  2.0 unx      845 b- defN 23-Jul-17 10:41 kvirt/web/templates/kubeprofilestable.html
+-rw-r--r--  2.0 unx      475 b- defN 23-Jul-17 10:41 kvirt/web/templates/kubes.html
+-rw-r--r--  2.0 unx     1850 b- defN 23-Jul-17 10:41 kvirt/web/templates/kubestable.html
+-rw-r--r--  2.0 unx      151 b- defN 23-Jul-17 10:41 kvirt/web/templates/layout.html
+-rw-r--r--  2.0 unx     5517 b- defN 23-Jul-17 10:41 kvirt/web/templates/navbar.html
+-rw-r--r--  2.0 unx      882 b- defN 23-Jul-17 10:41 kvirt/web/templates/networkcreate.html
+-rw-r--r--  2.0 unx      537 b- defN 23-Jul-17 10:41 kvirt/web/templates/networks.html
+-rw-r--r--  2.0 unx      845 b- defN 23-Jul-17 10:41 kvirt/web/templates/networkstable.html
+-rw-r--r--  2.0 unx      750 b- defN 23-Jul-17 10:41 kvirt/web/templates/plancreate.html
+-rw-r--r--  2.0 unx      475 b- defN 23-Jul-17 10:41 kvirt/web/templates/plans.html
+-rw-r--r--  2.0 unx     1525 b- defN 23-Jul-17 10:41 kvirt/web/templates/planstable.html
+-rw-r--r--  2.0 unx      859 b- defN 23-Jul-17 10:41 kvirt/web/templates/poolcreate.html
+-rw-r--r--  2.0 unx      475 b- defN 23-Jul-17 10:41 kvirt/web/templates/pools.html
+-rw-r--r--  2.0 unx      554 b- defN 23-Jul-17 10:41 kvirt/web/templates/poolstable.html
+-rw-r--r--  2.0 unx     1282 b- defN 23-Jul-17 10:41 kvirt/web/templates/productcreate.html
+-rw-r--r--  2.0 unx      484 b- defN 23-Jul-17 10:41 kvirt/web/templates/products.html
+-rw-r--r--  2.0 unx      895 b- defN 23-Jul-17 10:41 kvirt/web/templates/productstable.html
+-rw-r--r--  2.0 unx      699 b- defN 23-Jul-17 10:41 kvirt/web/templates/repocreate.html
+-rw-r--r--  2.0 unx      475 b- defN 23-Jul-17 10:41 kvirt/web/templates/repos.html
+-rw-r--r--  2.0 unx     1203 b- defN 23-Jul-17 10:41 kvirt/web/templates/repostable.html
+-rw-r--r--  2.0 unx      958 b- defN 23-Jul-17 10:41 kvirt/web/templates/vmcreate.html
+-rw-r--r--  2.0 unx      486 b- defN 23-Jul-17 10:41 kvirt/web/templates/vmprofiles.html
+-rw-r--r--  2.0 unx     1420 b- defN 23-Jul-17 10:41 kvirt/web/templates/vmprofilestable.html
+-rw-r--r--  2.0 unx      470 b- defN 23-Jul-17 10:41 kvirt/web/templates/vms.html
+-rw-r--r--  2.0 unx     4894 b- defN 23-Jul-17 10:41 kvirt/web/templates/vmstable.html
+-rw-r--r--  2.0 unx    11358 b- defN 23-Jul-17 10:45 kcli-99.0.202307171045.dist-info/LICENSE
+-rw-r--r--  2.0 unx     4240 b- defN 23-Jul-17 10:45 kcli-99.0.202307171045.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-17 10:45 kcli-99.0.202307171045.dist-info/WHEEL
+-rw-r--r--  2.0 unx      281 b- defN 23-Jul-17 10:45 kcli-99.0.202307171045.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx        6 b- defN 23-Jul-17 10:45 kcli-99.0.202307171045.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx    60560 b- defN 23-Jul-17 10:45 kcli-99.0.202307171045.dist-info/RECORD
+619 files, 4760824 bytes uncompressed, 1424342 bytes compressed:  70.1%
```

## zipnote {}

```diff
@@ -600,17 +600,14 @@
 
 Filename: kvirt/cluster/openshift/sno-finish.service
 Comment: 
 
 Filename: kvirt/cluster/openshift/sno-finish.sh
 Comment: 
 
-Filename: kvirt/cluster/openshift/sno.yml
-Comment: 
-
 Filename: kvirt/cluster/openshift/workers.yml
 Comment: 
 
 Filename: kvirt/cluster/openshift/apps/cr.sh
 Comment: 
 
 Filename: kvirt/cluster/openshift/apps/install.yml.j2
@@ -825,14 +822,20 @@
 
 Filename: kvirt/cluster/openshift/disconnected/scripts/deploy.sh
 Comment: 
 
 Filename: kvirt/cluster/openshift/disconnected/scripts/mirror-config.yaml.sample
 Comment: 
 
+Filename: kvirt/cluster/openshift/sno/kcli_default.yml
+Comment: 
+
+Filename: kvirt/cluster/openshift/sno/kcli_plan.yml
+Comment: 
+
 Filename: kvirt/cluster/openshift/staticpods/coredns.yml
 Comment: 
 
 Filename: kvirt/cluster/openshift/staticpods/haproxy.yml
 Comment: 
 
 Filename: kvirt/cluster/openshift/staticpods/keepalived.yml
@@ -1830,26 +1833,26 @@
 
 Filename: kvirt/web/templates/vms.html
 Comment: 
 
 Filename: kvirt/web/templates/vmstable.html
 Comment: 
 
-Filename: kcli-99.0.202307161842.dist-info/LICENSE
+Filename: kcli-99.0.202307171045.dist-info/LICENSE
 Comment: 
 
-Filename: kcli-99.0.202307161842.dist-info/METADATA
+Filename: kcli-99.0.202307171045.dist-info/METADATA
 Comment: 
 
-Filename: kcli-99.0.202307161842.dist-info/WHEEL
+Filename: kcli-99.0.202307171045.dist-info/WHEEL
 Comment: 
 
-Filename: kcli-99.0.202307161842.dist-info/entry_points.txt
+Filename: kcli-99.0.202307171045.dist-info/entry_points.txt
 Comment: 
 
-Filename: kcli-99.0.202307161842.dist-info/top_level.txt
+Filename: kcli-99.0.202307171045.dist-info/top_level.txt
 Comment: 
 
-Filename: kcli-99.0.202307161842.dist-info/RECORD
+Filename: kcli-99.0.202307171045.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## kvirt/baseconfig.py

```diff
@@ -704,15 +704,16 @@
                 pprint(f"Parsing {plan}_default.yml for default parameters")
             parameters.update(common.get_parameters(parameterfile))
         if os.path.exists(f"{basedir}/kcli_default.yml"):
             parameterfile = f"{basedir}/kcli_default.yml"
             if not quiet:
                 pprint("Parsing kcli_default.yml for default parameters")
             parameters.update(common.get_parameters(parameterfile))
-        inputfile_default = "%s_default%s" % os.path.splitext(inputfile)
+        inputfile_split = os.path.splitext(os.path.basename(inputfile))
+        inputfile_default = f"{inputfile_split[0]}_default{inputfile_split[1]}"
         if os.path.exists(f"{basedir}/{inputfile_default}"):
             parameterfile = f"{basedir}/{inputfile_default}"
             parameters.update(common.get_parameters(parameterfile))
         parameters.update(common.get_parameters(inputfile, planfile=True))
         if parameters:
             description = parameters.get('description')
             if description is not None:
@@ -1327,14 +1328,19 @@
         self.info_plan(inputfile, quiet=quiet, web=web)
 
     def info_kube_openshift(self, quiet, web=False):
         plandir = os.path.dirname(openshift.create.__code__.co_filename)
         inputfile = f'{plandir}/ctlplanes.yml'
         self.info_plan(inputfile, quiet=quiet, web=web)
 
+    def info_openshift_sno(self, quiet, web=False):
+        plandir = os.path.dirname(openshift.create.__code__.co_filename)
+        inputfile = f'{plandir}/sno/kcli_default.yml'
+        self.info_plan(inputfile, quiet=quiet, web=web)
+
     def list_apps_generic(self, quiet=True):
         plandir = os.path.dirname(kubeadm.create.__code__.co_filename)
         appdir = plandir + '/apps'
         return sorted([x for x in os.listdir(appdir) if os.path.isdir(f"{appdir}/{x}") and x != '__pycache__'])
 
     def list_apps_openshift(self, quiet=True, installed=False):
         if installed:
```

## kvirt/cli.py

```diff
@@ -9,15 +9,15 @@
 from kvirt.examples import plandatacreate, vmdatacreate, hostcreate, _list, plancreate, planinfo, productinfo, start
 from kvirt.examples import repocreate, isocreate, networkupdate
 from kvirt.examples import kubegenericcreate, kubek3screate, kubeopenshiftcreate, kubemicroshiftcreate, kubegkecreate
 from kvirt.examples import dnscreate, diskcreate, diskdelete, vmcreate, vmconsole, vmexport, niccreate, nicdelete
 from kvirt.examples import disconnectedcreate, appopenshiftcreate, plantemplatecreate, kubehypershiftcreate
 from kvirt.examples import workflowcreate, kubegenericscale, kubek3sscale, kubeopenshiftscale, kubegkescale
 from kvirt.examples import changelog, starthosts, stophosts, infohosts, ocdownload, openshiftdownload, ocmirrordownload
-from kvirt.examples import kubeekscreate, kubeeksscale, kubeakscreate, kubeaksscale
+from kvirt.examples import kubeekscreate, kubeeksscale, kubeakscreate, kubeaksscale, openshiftsnocreate
 from kvirt.examples import networkcreate, securitygroupcreate, profilecreate, vmupdate, vmlist, providercreate
 from kvirt.baseconfig import Kbaseconfig
 from kvirt.containerconfig import Kcontainerconfig
 from kvirt.defaults import IMAGES, VERSION, LOCAL_OPENSHIFT_APPS, SSH_PUB_LOCATIONS, PLANTYPES
 from prettytable import PrettyTable
 import argcomplete
 import argparse
@@ -1810,15 +1810,16 @@
         overrides['threaded'] = args.threaded
     master_parameters = [key for key in overrides if 'master' in key]
     if master_parameters:
         master_parameters = ','.join(master_parameters)
         error(f"parameters that contain master word need to be replaced with ctlplane. Found {master_parameters}")
         sys.exit(1)
     client = overrides.get('client', args.client)
-    offline = kubetype == 'openshift' and 'sno' in overrides and (client == 'fake' or common.need_fake())
+    sno_type = kubetype == 'openshift-sno' or (kubetype == 'openshift' and 'sno' in overrides and overrides['sno'])
+    offline = sno_type and (client == 'fake' or common.need_fake())
     config = Kconfig(client=client, debug=args.debug, region=args.region, zone=args.zone, namespace=args.namespace,
                      offline=offline)
     if overrides.get('force', args.force):
         overrides['kubetype'] = kubetype
         config.delete_kube(cluster, overrides=overrides)
     confpool = overrides.get('namepool') or overrides.get('confpool')
     if cluster is None and confpool is not None:
@@ -1885,14 +1886,20 @@
 
 def create_openshift_kube(args):
     """Create Openshift kube"""
     args.type = 'openshift'
     create_kube(args)
 
 
+def create_openshift_sno(args):
+    """Create Openshift sno"""
+    args.type = 'openshift-sno'
+    create_kube(args)
+
+
 def delete_kube(args):
     """Delete kube"""
     clusters = args.cluster if args.cluster else ['mykube']
     yes = args.yes
     yes_top = args.yes_top
     if not yes and not yes_top:
         common.confirm("Are you sure?")
@@ -2332,14 +2339,16 @@
             for node in status['nodes']:
                 kubetable.add_row(node)
             kubetable.align["Kube"] = "l"
             print(kubetable)
     else:
         if kubetype == 'openshift':
             baseconfig.info_kube_openshift(quiet=True)
+        if kubetype == 'openshift-sno':
+            baseconfig.info_openshift_sno(quiet=True)
         elif kubetype == 'hypershift':
             baseconfig.info_kube_hypershift(quiet=True)
         elif kubetype == 'microshift':
             baseconfig.info_kube_microshift(quiet=True)
         elif kubetype == 'k3s':
             baseconfig.info_kube_k3s(quiet=True)
         elif kubetype == 'gke':
@@ -2406,14 +2415,19 @@
 
 
 def info_openshift_kube(args):
     args.kubetype = 'openshift'
     info_kube(args)
 
 
+def info_openshift_sno(args):
+    args.kubetype = 'openshift-sno'
+    info_kube(args)
+
+
 def info_network(args):
     """Info network """
     name = args.name
     pprint(f"Providing information about network {name}...")
     config = Kconfig(client=args.client, debug=args.debug, region=args.region, zone=args.zone, namespace=args.namespace)
     networkinfo = config.k.info_network(name)
     if networkinfo:
@@ -3876,100 +3890,14 @@
     lbcreate_parser.add_argument('--ip', help='Specific ip to associate the load balancer to')
     lbcreate_parser.add_argument('-p', '--ports', default='443', help='Load Balancer Ports. Defaults to 443')
     lbcreate_parser.add_argument('-v', '--vms', help='Vms to add to the pool. Can also be a list of ips')
     lbcreate_parser.add_argument('--subnetid', help='Subnet id. Specific to AWS')
     lbcreate_parser.add_argument('name', metavar='NAME', nargs='?')
     lbcreate_parser.set_defaults(func=create_lb)
 
-    profilecreate_desc = 'Create Profile'
-    profilecreate_epilog = f"examples:\n{profilecreate}"
-    profilecreate_parser = argparse.ArgumentParser(add_help=False)
-    profilecreate_parser.add_argument('-i', '--image', help='Image to use', metavar='IMAGE')
-    profilecreate_parser.add_argument('-P', '--param', action='append',
-                                      help='specify parameter or keyword for rendering (can specify multiple)',
-                                      metavar='PARAM')
-    profilecreate_parser.add_argument('profile', metavar='PROFILE')
-    profilecreate_parser.set_defaults(func=create_profile)
-    create_subparsers.add_parser('profile', parents=[profilecreate_parser], description=profilecreate_desc,
-                                 help=profilecreate_desc, epilog=profilecreate_epilog, formatter_class=rawhelp)
-
-    providercreate_desc = 'Install Provider'
-    providercreate_epilog = f"examples:\n{providercreate}"
-    providercreate_parser = create_subparsers.add_parser('provider', help=providercreate_desc,
-                                                         description=providercreate_desc, epilog=providercreate_epilog,
-                                                         formatter_class=rawhelp)
-    providercreate_subparsers = providercreate_parser.add_subparsers(metavar='', dest='subcommand_create_provider')
-
-    awsprovidercreate_desc = 'Install Aws Provider'
-    awsprovidercreate_parser = providercreate_subparsers.add_parser('aws', help=awsprovidercreate_desc,
-                                                                    description=awsprovidercreate_desc)
-    awsprovidercreate_parser.add_argument('-p', '--pip', action='store_true', help='Force pip installation')
-    awsprovidercreate_parser.set_defaults(func=install_provider)
-
-    azureprovidercreate_desc = 'Install Azure Provider'
-    azureprovidercreate_parser = providercreate_subparsers.add_parser('azure', help=azureprovidercreate_desc,
-                                                                      description=azureprovidercreate_desc)
-    azureprovidercreate_parser.add_argument('-p', '--pip', action='store_true', help='Force pip installation')
-    azureprovidercreate_parser.set_defaults(func=install_provider)
-
-    gcpprovidercreate_desc = 'Install Gcp Provider'
-    gcpprovidercreate_parser = providercreate_subparsers.add_parser('gcp', help=gcpprovidercreate_desc,
-                                                                    description=gcpprovidercreate_desc)
-    gcpprovidercreate_parser.add_argument('-p', '--pip', action='store_true', help='Force pip installation')
-    gcpprovidercreate_parser.set_defaults(func=install_provider)
-
-    ibmprovidercreate_desc = 'Install IBM Cloud Provider'
-    ibmprovidercreate_parser = providercreate_subparsers.add_parser('ibm', help=ibmprovidercreate_desc,
-                                                                    description=ibmprovidercreate_desc)
-    ibmprovidercreate_parser.add_argument('-p', '--pip', action='store_true', help='Force pip installation')
-    ibmprovidercreate_parser.set_defaults(func=install_provider)
-
-    kvmprovidercreate_desc = 'Install Kvm Provider'
-    kvmprovidercreate_parser = providercreate_subparsers.add_parser('kvm', help=kvmprovidercreate_desc,
-                                                                    description=kvmprovidercreate_desc)
-    kvmprovidercreate_parser.add_argument('-p', '--pip', action='store_true', help='Force pip installation')
-    kvmprovidercreate_parser.set_defaults(func=install_provider)
-
-    kubevirtprovidercreate_desc = 'Install Kubevirt Provider'
-    kubevirtprovidercreate_parser = providercreate_subparsers.add_parser('kubevirt', help=kubevirtprovidercreate_desc,
-                                                                         description=kubevirtprovidercreate_desc)
-    kubevirtprovidercreate_parser.add_argument('-p', '--pip', action='store_true', help='Force pip installation')
-    kubevirtprovidercreate_parser.set_defaults(func=install_provider)
-
-    openstackprovidercreate_desc = 'Install Openstack Provider'
-    openstackprovidercreate_parser = providercreate_subparsers.add_parser('openstack',
-                                                                          help=openstackprovidercreate_desc,
-                                                                          description=openstackprovidercreate_desc)
-    openstackprovidercreate_parser.add_argument('-p', '--pip', action='store_true', help='Force pip installation')
-    openstackprovidercreate_parser.set_defaults(func=install_provider)
-
-    ovirtprovidercreate_desc = 'Install Ovirt Provider'
-    ovirtprovidercreate_parser = providercreate_subparsers.add_parser('ovirt', help=ovirtprovidercreate_desc,
-                                                                      description=ovirtprovidercreate_desc)
-    ovirtprovidercreate_parser.add_argument('-p', '--pip', action='store_true', help='Force pip installation')
-    ovirtprovidercreate_parser.set_defaults(func=install_provider)
-
-    packetprovidercreate_desc = 'Install Packet Provider'
-    packetprovidercreate_parser = providercreate_subparsers.add_parser('packet', help=packetprovidercreate_desc,
-                                                                       description=packetprovidercreate_desc)
-    packetprovidercreate_parser.add_argument('-p', '--pip', action='store_true', help='Force pip installation')
-    packetprovidercreate_parser.set_defaults(func=install_provider)
-
-    proxmoxprovidercreate_desc = 'Install Proxmox Provider'
-    proxmoxprovidercreate_parser = providercreate_subparsers.add_parser('proxmox', help=proxmoxprovidercreate_desc,
-                                                                        description=proxmoxprovidercreate_desc)
-    proxmoxprovidercreate_parser.add_argument('-p', '--pip', action='store_true', help='Force pip installation')
-    proxmoxprovidercreate_parser.set_defaults(func=install_provider)
-
-    vsphereprovidercreate_desc = 'Install Vsphere Provider'
-    vsphereprovidercreate_parser = providercreate_subparsers.add_parser('vsphere', help=vsphereprovidercreate_desc,
-                                                                        description=vsphereprovidercreate_desc)
-    vsphereprovidercreate_parser.add_argument('-p', '--pip', action='store_true', help='Force pip installation')
-    vsphereprovidercreate_parser.set_defaults(func=install_provider)
-
     networkcreate_desc = 'Create Network'
     networkcreate_epilog = f"examples:\n{networkcreate}"
     networkcreate_parser = create_subparsers.add_parser('network', description=networkcreate_desc,
                                                         help=networkcreate_desc, parents=[parent_parser],
                                                         epilog=networkcreate_epilog, formatter_class=rawhelp,
                                                         aliases=['net'])
     networkcreate_parser.add_argument('-i', '--isolated', action='store_true', help='Isolated Network')
@@ -3997,14 +3925,25 @@
     isocreate_parser.add_argument('-d', '--direct', action='store_true', help='Embed directly target ignition in iso')
     isocreate_parser.add_argument('-f', '--ignitionfile', help='Ignition file')
     isocreate_parser.add_argument('cluster', metavar='CLUSTER', help='Cluster')
     isocreate_parser.set_defaults(func=create_openshift_iso)
     create_subparsers.add_parser('openshift-iso', parents=[isocreate_parser], description=isocreate_desc,
                                  help=isocreate_desc, epilog=isocreate_epilog, formatter_class=rawhelp)
 
+    openshiftsnocreate_desc = 'Create Openshift SNO'
+    openshiftsnocreate_epilog = f"examples:\n{openshiftsnocreate}"
+    openshiftsnocreate_parser = argparse.ArgumentParser(add_help=False, parents=[parent_parser])
+    openshiftsnocreate_parser.add_argument('-f', '--force', action='store_true', help='Delete existing cluster first')
+    openshiftsnocreate_parser.add_argument('-t', '--threaded', help='Run threaded', action='store_true')
+    openshiftsnocreate_parser.add_argument('cluster', metavar='CLUSTER', nargs='?', type=valid_cluster)
+    openshiftsnocreate_parser.set_defaults(func=create_openshift_sno)
+    create_subparsers.add_parser('openshift-sno', parents=[openshiftsnocreate_parser],
+                                 description=openshiftsnocreate_desc, help=openshiftsnocreate_desc,
+                                 epilog=openshiftsnocreate_epilog, formatter_class=rawhelp)
+
     pipelinecreate_desc = 'Create Pipeline'
     pipelinecreate_parser = create_subparsers.add_parser('pipeline', description=pipelinecreate_desc,
                                                          help=pipelinecreate_desc)
     pipelinecreate_subparsers = pipelinecreate_parser.add_subparsers(metavar='', dest='subcommand_create_pipeline')
 
     githubpipelinecreate_desc = 'Create Github Pipeline'
     githubpipelinecreate_parser = pipelinecreate_subparsers.add_parser('github', description=githubpipelinecreate_desc,
@@ -4107,23 +4046,131 @@
     productcreate_parser.add_argument('-l', '--latest', action='store_true', help='Grab latest version of the plans')
     productcreate_parser.add_argument('-r', '--repo',
                                       help='Repo to use, if deploying a product present in several repos',
                                       metavar='REPO')
     productcreate_parser.add_argument('product', metavar='PRODUCT')
     productcreate_parser.set_defaults(func=create_product)
 
+    profilecreate_desc = 'Create Profile'
+    profilecreate_epilog = f"examples:\n{profilecreate}"
+    profilecreate_parser = argparse.ArgumentParser(add_help=False)
+    profilecreate_parser.add_argument('-i', '--image', help='Image to use', metavar='IMAGE')
+    profilecreate_parser.add_argument('-P', '--param', action='append',
+                                      help='specify parameter or keyword for rendering (can specify multiple)',
+                                      metavar='PARAM')
+    profilecreate_parser.add_argument('profile', metavar='PROFILE')
+    profilecreate_parser.set_defaults(func=create_profile)
+    create_subparsers.add_parser('profile', parents=[profilecreate_parser], description=profilecreate_desc,
+                                 help=profilecreate_desc, epilog=profilecreate_epilog, formatter_class=rawhelp)
+
+    providercreate_desc = 'Install Provider'
+    providercreate_epilog = f"examples:\n{providercreate}"
+    providercreate_parser = create_subparsers.add_parser('provider', help=providercreate_desc,
+                                                         description=providercreate_desc, epilog=providercreate_epilog,
+                                                         formatter_class=rawhelp)
+    providercreate_subparsers = providercreate_parser.add_subparsers(metavar='', dest='subcommand_create_provider')
+
+    awsprovidercreate_desc = 'Install Aws Provider'
+    awsprovidercreate_parser = providercreate_subparsers.add_parser('aws', help=awsprovidercreate_desc,
+                                                                    description=awsprovidercreate_desc)
+    awsprovidercreate_parser.add_argument('-p', '--pip', action='store_true', help='Force pip installation')
+    awsprovidercreate_parser.set_defaults(func=install_provider)
+
+    azureprovidercreate_desc = 'Install Azure Provider'
+    azureprovidercreate_parser = providercreate_subparsers.add_parser('azure', help=azureprovidercreate_desc,
+                                                                      description=azureprovidercreate_desc)
+    azureprovidercreate_parser.add_argument('-p', '--pip', action='store_true', help='Force pip installation')
+    azureprovidercreate_parser.set_defaults(func=install_provider)
+
+    gcpprovidercreate_desc = 'Install Gcp Provider'
+    gcpprovidercreate_parser = providercreate_subparsers.add_parser('gcp', help=gcpprovidercreate_desc,
+                                                                    description=gcpprovidercreate_desc)
+    gcpprovidercreate_parser.add_argument('-p', '--pip', action='store_true', help='Force pip installation')
+    gcpprovidercreate_parser.set_defaults(func=install_provider)
+
+    ibmprovidercreate_desc = 'Install IBM Cloud Provider'
+    ibmprovidercreate_parser = providercreate_subparsers.add_parser('ibm', help=ibmprovidercreate_desc,
+                                                                    description=ibmprovidercreate_desc)
+    ibmprovidercreate_parser.add_argument('-p', '--pip', action='store_true', help='Force pip installation')
+    ibmprovidercreate_parser.set_defaults(func=install_provider)
+
+    kvmprovidercreate_desc = 'Install Kvm Provider'
+    kvmprovidercreate_parser = providercreate_subparsers.add_parser('kvm', help=kvmprovidercreate_desc,
+                                                                    description=kvmprovidercreate_desc)
+    kvmprovidercreate_parser.add_argument('-p', '--pip', action='store_true', help='Force pip installation')
+    kvmprovidercreate_parser.set_defaults(func=install_provider)
+
+    kubevirtprovidercreate_desc = 'Install Kubevirt Provider'
+    kubevirtprovidercreate_parser = providercreate_subparsers.add_parser('kubevirt', help=kubevirtprovidercreate_desc,
+                                                                         description=kubevirtprovidercreate_desc)
+    kubevirtprovidercreate_parser.add_argument('-p', '--pip', action='store_true', help='Force pip installation')
+    kubevirtprovidercreate_parser.set_defaults(func=install_provider)
+
+    openstackprovidercreate_desc = 'Install Openstack Provider'
+    openstackprovidercreate_parser = providercreate_subparsers.add_parser('openstack',
+                                                                          help=openstackprovidercreate_desc,
+                                                                          description=openstackprovidercreate_desc)
+    openstackprovidercreate_parser.add_argument('-p', '--pip', action='store_true', help='Force pip installation')
+    openstackprovidercreate_parser.set_defaults(func=install_provider)
+
+    ovirtprovidercreate_desc = 'Install Ovirt Provider'
+    ovirtprovidercreate_parser = providercreate_subparsers.add_parser('ovirt', help=ovirtprovidercreate_desc,
+                                                                      description=ovirtprovidercreate_desc)
+    ovirtprovidercreate_parser.add_argument('-p', '--pip', action='store_true', help='Force pip installation')
+    ovirtprovidercreate_parser.set_defaults(func=install_provider)
+
+    packetprovidercreate_desc = 'Install Packet Provider'
+    packetprovidercreate_parser = providercreate_subparsers.add_parser('packet', help=packetprovidercreate_desc,
+                                                                       description=packetprovidercreate_desc)
+    packetprovidercreate_parser.add_argument('-p', '--pip', action='store_true', help='Force pip installation')
+    packetprovidercreate_parser.set_defaults(func=install_provider)
+
+    proxmoxprovidercreate_desc = 'Install Proxmox Provider'
+    proxmoxprovidercreate_parser = providercreate_subparsers.add_parser('proxmox', help=proxmoxprovidercreate_desc,
+                                                                        description=proxmoxprovidercreate_desc)
+    proxmoxprovidercreate_parser.add_argument('-p', '--pip', action='store_true', help='Force pip installation')
+    proxmoxprovidercreate_parser.set_defaults(func=install_provider)
+
+    vsphereprovidercreate_desc = 'Install Vsphere Provider'
+    vsphereprovidercreate_parser = providercreate_subparsers.add_parser('vsphere', help=vsphereprovidercreate_desc,
+                                                                        description=vsphereprovidercreate_desc)
+    vsphereprovidercreate_parser.add_argument('-p', '--pip', action='store_true', help='Force pip installation')
+    vsphereprovidercreate_parser.set_defaults(func=install_provider)
+
     repocreate_desc = 'Create Repo'
     repocreate_epilog = f"examples:\n{repocreate}"
     repocreate_parser = create_subparsers.add_parser('repo', description=repocreate_desc, help=repocreate_desc,
                                                      epilog=repocreate_epilog,
                                                      formatter_class=rawhelp)
     repocreate_parser.add_argument('-u', '--url', help='URL of the repo', metavar='URL', type=valid_url)
     repocreate_parser.add_argument('repo')
     repocreate_parser.set_defaults(func=create_repo)
 
+    securitygroupcreate_desc = 'Create Security Group'
+    securitygroupcreate_epilog = f"examples:\n{securitygroupcreate}"
+    securitygroupcreate_desc = 'Create Security Group'
+    securitygroupcreate_parser = create_subparsers.add_parser('security-group', description=securitygroupcreate_desc,
+                                                              help=securitygroupcreate_desc, parents=[parent_parser],
+                                                              aliases=['sg'], epilog=securitygroupcreate_epilog,
+                                                              formatter_class=rawhelp)
+    securitygroupcreate_parser.add_argument('securitygroup')
+    securitygroupcreate_parser.set_defaults(func=create_securitygroup)
+
+    sushycreate_desc = 'Create Ksushy service'
+    sushycreate_parser = create_subparsers.add_parser('sushy-service', description=sushycreate_desc,
+                                                      help=sushycreate_desc, aliases=['sushy', 'ksushy',
+                                                                                      'ksushy-service'])
+    sushycreate_parser.add_argument('-b', '--bootonce', action='store_true', help='Enable bootonce hack')
+    sushycreate_parser.add_argument('-i', '--ipv6', action='store_true', help='Listen on ipv6')
+    sushycreate_parser.add_argument('--port', help='Port where to listen', default=9000)
+    sushycreate_parser.add_argument('-s', '--ssl', action='store_true', help='Enable ssl')
+    sushycreate_parser.add_argument('-u', '--user', help='User for authentication')
+    sushycreate_parser.add_argument('-p', '--password', help='Password for authentication')
+    sushycreate_parser.set_defaults(func=create_ksushy_service)
+
     vmcreate_desc = 'Create Vm'
     vmcreate_epilog = f"examples:\n{vmcreate}"
     vmcreate_parser = argparse.ArgumentParser(add_help=False, parents=[parent_parser])
     vmcreate_parser.add_argument('-p', '--profile', help='Profile to use', metavar='PROFILE')
     vmcreate_parser.add_argument('--console', help='Directly switch to console after creation', action='store_true')
     vmcreate_parser.add_argument('-c', '--count', help='How many vms to create', type=int, default=0, metavar='COUNT')
     vmcreate_parser.add_argument('-i', '--image', help='Image to use', metavar='IMAGE')
@@ -4170,36 +4217,14 @@
     create_vmnic_parser.add_argument('-n', '--network', help='Network', metavar='NETWORK')
     create_vmnic_parser.add_argument('name', metavar='VMNAME')
     create_vmnic_parser.set_defaults(func=create_vmnic)
     create_subparsers.add_parser('vm-nic', parents=[create_vmnic_parser], description=create_vmnic_desc,
                                  help=create_vmnic_desc, aliases=['nic'],
                                  epilog=create_vmnic_epilog, formatter_class=rawhelp)
 
-    securitygroupcreate_desc = 'Create Security Group'
-    securitygroupcreate_epilog = f"examples:\n{securitygroupcreate}"
-    securitygroupcreate_desc = 'Create Security Group'
-    securitygroupcreate_parser = create_subparsers.add_parser('security-group', description=securitygroupcreate_desc,
-                                                              help=securitygroupcreate_desc, parents=[parent_parser],
-                                                              aliases=['sg'], epilog=securitygroupcreate_epilog,
-                                                              formatter_class=rawhelp)
-    securitygroupcreate_parser.add_argument('securitygroup')
-    securitygroupcreate_parser.set_defaults(func=create_securitygroup)
-
-    sushycreate_desc = 'Create Ksushy service'
-    sushycreate_parser = create_subparsers.add_parser('sushy-service', description=sushycreate_desc,
-                                                      help=sushycreate_desc, aliases=['sushy', 'ksushy',
-                                                                                      'ksushy-service'])
-    sushycreate_parser.add_argument('-b', '--bootonce', action='store_true', help='Enable bootonce hack')
-    sushycreate_parser.add_argument('-i', '--ipv6', action='store_true', help='Listen on ipv6')
-    sushycreate_parser.add_argument('--port', help='Port where to listen', default=9000)
-    sushycreate_parser.add_argument('-s', '--ssl', action='store_true', help='Enable ssl')
-    sushycreate_parser.add_argument('-u', '--user', help='User for authentication')
-    sushycreate_parser.add_argument('-p', '--password', help='Password for authentication')
-    sushycreate_parser.set_defaults(func=create_ksushy_service)
-
     vmsnapshotcreate_desc = 'Create Snapshot Of Vm'
     vmsnapshotcreate_parser = create_subparsers.add_parser('vm-snapshot', description=vmsnapshotcreate_desc,
                                                            help=vmsnapshotcreate_desc, aliases=['snapshot'])
     vmsnapshotcreate_parser.add_argument('-n', '--name', help='vm name', required=True, metavar='VMNAME')
     vmsnapshotcreate_parser.add_argument('snapshot')
     vmsnapshotcreate_parser.set_defaults(func=snapshotcreate_vm)
 
@@ -4740,14 +4765,20 @@
 
     networkinfo_desc = 'Info Network'
     networkinfo_parser = info_subparsers.add_parser('network', description=networkinfo_desc, help=networkinfo_desc,
                                                     aliases=['net'])
     networkinfo_parser.add_argument('name', metavar='NETWORK')
     networkinfo_parser.set_defaults(func=info_network)
 
+    openshiftsnoinfo_desc = 'Info Openshift SNO'
+    openshiftsnoinfo_parser = info_subparsers.add_parser('openshift-sno', description=openshiftsnoinfo_desc,
+                                                         help=openshiftsnoinfo_desc, parents=[output_parser])
+    openshiftsnoinfo_parser.add_argument('cluster', metavar='CLUSTER', nargs='?', type=valid_cluster)
+    openshiftsnoinfo_parser.set_defaults(func=info_openshift_sno)
+
     plantypeinfo_desc = 'Info Plan Type'
     plantypeinfo_parser = info_subparsers.add_parser('plan-type', description=plantypeinfo_desc, help=plantypeinfo_desc,
                                                      aliases=['type'])
     plantypeinfo_parser.add_argument('plantype', metavar='PLANTYPE', type=valid_plantype)
     plantypeinfo_parser.set_defaults(func=info_plantype)
 
     profileinfo_desc = 'Info Profile'
```

## kvirt/config.py

```diff
@@ -9690,2745 +9690,2755 @@
 00025d90: 6520 3d3d 2027 6f70 656e 7368 6966 7427  e == 'openshift'
 00025da0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
 00025db0: 7375 6c74 203d 2073 656c 662e 6372 6561  sult = self.crea
 00025dc0: 7465 5f6b 7562 655f 6f70 656e 7368 6966  te_kube_openshif
 00025dd0: 7428 636c 7573 7465 722c 206f 7665 7272  t(cluster, overr
 00025de0: 6964 6573 3d6f 7665 7272 6964 6573 290a  ides=overrides).
 00025df0: 2020 2020 2020 2020 656c 6966 206b 7562          elif kub
-00025e00: 6574 7970 6520 3d3d 2027 6879 7065 7273  etype == 'hypers
-00025e10: 6869 6674 273a 0a20 2020 2020 2020 2020  hift':.         
-00025e20: 2020 2072 6573 756c 7420 3d20 7365 6c66     result = self
-00025e30: 2e63 7265 6174 655f 6b75 6265 5f68 7970  .create_kube_hyp
-00025e40: 6572 7368 6966 7428 636c 7573 7465 722c  ershift(cluster,
-00025e50: 206f 7665 7272 6964 6573 3d6f 7665 7272   overrides=overr
-00025e60: 6964 6573 290a 2020 2020 2020 2020 656c  ides).        el
-00025e70: 6966 206b 7562 6574 7970 6520 3d3d 2027  if kubetype == '
-00025e80: 6d69 6372 6f73 6869 6674 273a 0a20 2020  microshift':.   
-00025e90: 2020 2020 2020 2020 2072 6573 756c 7420           result 
-00025ea0: 3d20 7365 6c66 2e63 7265 6174 655f 6b75  = self.create_ku
-00025eb0: 6265 5f6d 6963 726f 7368 6966 7428 636c  be_microshift(cl
-00025ec0: 7573 7465 722c 206f 7665 7272 6964 6573  uster, overrides
-00025ed0: 3d6f 7665 7272 6964 6573 290a 2020 2020  =overrides).    
-00025ee0: 2020 2020 656c 6966 206b 7562 6574 7970      elif kubetyp
-00025ef0: 6520 3d3d 2027 6b33 7327 3a0a 2020 2020  e == 'k3s':.    
-00025f00: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-00025f10: 2073 656c 662e 6372 6561 7465 5f6b 7562   self.create_kub
-00025f20: 655f 6b33 7328 636c 7573 7465 722c 206f  e_k3s(cluster, o
-00025f30: 7665 7272 6964 6573 3d6f 7665 7272 6964  verrides=overrid
-00025f40: 6573 290a 2020 2020 2020 2020 656c 6966  es).        elif
-00025f50: 206b 7562 6574 7970 6520 3d3d 2027 676b   kubetype == 'gk
-00025f60: 6527 3a0a 2020 2020 2020 2020 2020 2020  e':.            
-00025f70: 7265 7375 6c74 203d 2073 656c 662e 6372  result = self.cr
-00025f80: 6561 7465 5f6b 7562 655f 676b 6528 636c  eate_kube_gke(cl
-00025f90: 7573 7465 722c 206f 7665 7272 6964 6573  uster, overrides
-00025fa0: 3d6f 7665 7272 6964 6573 290a 2020 2020  =overrides).    
-00025fb0: 2020 2020 656c 6966 206b 7562 6574 7970      elif kubetyp
-00025fc0: 6520 3d3d 2027 656b 7327 3a0a 2020 2020  e == 'eks':.    
-00025fd0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-00025fe0: 2073 656c 662e 6372 6561 7465 5f6b 7562   self.create_kub
-00025ff0: 655f 656b 7328 636c 7573 7465 722c 206f  e_eks(cluster, o
-00026000: 7665 7272 6964 6573 3d6f 7665 7272 6964  verrides=overrid
-00026010: 6573 290a 2020 2020 2020 2020 656c 6966  es).        elif
-00026020: 206b 7562 6574 7970 6520 3d3d 2027 616b   kubetype == 'ak
-00026030: 7327 3a0a 2020 2020 2020 2020 2020 2020  s':.            
-00026040: 7265 7375 6c74 203d 2073 656c 662e 6372  result = self.cr
-00026050: 6561 7465 5f6b 7562 655f 616b 7328 636c  eate_kube_aks(cl
-00026060: 7573 7465 722c 206f 7665 7272 6964 6573  uster, overrides
-00026070: 3d6f 7665 7272 6964 6573 290a 2020 2020  =overrides).    
-00026080: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00026090: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
-000260a0: 656c 662e 6372 6561 7465 5f6b 7562 655f  elf.create_kube_
-000260b0: 6765 6e65 7269 6328 636c 7573 7465 722c  generic(cluster,
-000260c0: 206f 7665 7272 6964 6573 3d6f 7665 7272   overrides=overr
-000260d0: 6964 6573 290a 2020 2020 2020 2020 7265  ides).        re
-000260e0: 7475 726e 2072 6573 756c 740a 0a20 2020  turn result..   
-000260f0: 2064 6566 2063 7265 6174 655f 6b75 6265   def create_kube
-00026100: 5f61 6b73 2873 656c 662c 2063 6c75 7374  _aks(self, clust
-00026110: 6572 2c20 6f76 6572 7269 6465 733d 7b7d  er, overrides={}
-00026120: 293a 0a20 2020 2020 2020 2066 726f 6d20  ):.        from 
-00026130: 6b76 6972 742e 636c 7573 7465 7220 696d  kvirt.cluster im
-00026140: 706f 7274 2061 6b73 0a20 2020 2020 2020  port aks.       
-00026150: 2069 6620 636f 6e74 6169 6e65 725f 6d6f   if container_mo
-00026160: 6465 2829 3a0a 2020 2020 2020 2020 2020  de():.          
-00026170: 2020 6f73 2e65 6e76 6972 6f6e 5b27 5041    os.environ['PA
-00026180: 5448 275d 202b 3d20 273a 2f77 6f72 6b64  TH'] += ':/workd
-00026190: 6972 270a 2020 2020 2020 2020 656c 7365  ir'.        else
-000261a0: 3a0a 2020 2020 2020 2020 2020 2020 6f73  :.            os
-000261b0: 2e65 6e76 6972 6f6e 5b27 5041 5448 275d  .environ['PATH']
-000261c0: 202b 3d20 273a 2573 2720 2520 6f73 2e67   += ':%s' % os.g
-000261d0: 6574 6377 6428 290a 2020 2020 2020 2020  etcwd().        
-000261e0: 7265 7475 726e 2061 6b73 2e63 7265 6174  return aks.creat
-000261f0: 6528 7365 6c66 2c20 636c 7573 7465 722c  e(self, cluster,
-00026200: 206f 7665 7272 6964 6573 290a 0a20 2020   overrides)..   
-00026210: 2064 6566 2063 7265 6174 655f 6b75 6265   def create_kube
-00026220: 5f65 6b73 2873 656c 662c 2063 6c75 7374  _eks(self, clust
-00026230: 6572 2c20 6f76 6572 7269 6465 733d 7b7d  er, overrides={}
-00026240: 293a 0a20 2020 2020 2020 2066 726f 6d20  ):.        from 
-00026250: 6b76 6972 742e 636c 7573 7465 7220 696d  kvirt.cluster im
-00026260: 706f 7274 2065 6b73 0a20 2020 2020 2020  port eks.       
-00026270: 2069 6620 636f 6e74 6169 6e65 725f 6d6f   if container_mo
-00026280: 6465 2829 3a0a 2020 2020 2020 2020 2020  de():.          
-00026290: 2020 6f73 2e65 6e76 6972 6f6e 5b27 5041    os.environ['PA
-000262a0: 5448 275d 202b 3d20 273a 2f77 6f72 6b64  TH'] += ':/workd
-000262b0: 6972 270a 2020 2020 2020 2020 656c 7365  ir'.        else
-000262c0: 3a0a 2020 2020 2020 2020 2020 2020 6f73  :.            os
-000262d0: 2e65 6e76 6972 6f6e 5b27 5041 5448 275d  .environ['PATH']
-000262e0: 202b 3d20 273a 2573 2720 2520 6f73 2e67   += ':%s' % os.g
-000262f0: 6574 6377 6428 290a 2020 2020 2020 2020  etcwd().        
-00026300: 7265 7475 726e 2065 6b73 2e63 7265 6174  return eks.creat
-00026310: 6528 7365 6c66 2c20 636c 7573 7465 722c  e(self, cluster,
-00026320: 206f 7665 7272 6964 6573 290a 0a20 2020   overrides)..   
-00026330: 2064 6566 2063 7265 6174 655f 6b75 6265   def create_kube
-00026340: 5f67 656e 6572 6963 2873 656c 662c 2063  _generic(self, c
-00026350: 6c75 7374 6572 2c20 6f76 6572 7269 6465  luster, override
-00026360: 733d 7b7d 293a 0a20 2020 2020 2020 2069  s={}):.        i
-00026370: 6620 636f 6e74 6169 6e65 725f 6d6f 6465  f container_mode
-00026380: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
-00026390: 6f73 2e65 6e76 6972 6f6e 5b27 5041 5448  os.environ['PATH
-000263a0: 275d 202b 3d20 273a 2f77 6f72 6b64 6972  '] += ':/workdir
-000263b0: 270a 2020 2020 2020 2020 656c 7365 3a0a  '.        else:.
-000263c0: 2020 2020 2020 2020 2020 2020 6f73 2e65              os.e
-000263d0: 6e76 6972 6f6e 5b27 5041 5448 275d 202b  nviron['PATH'] +
-000263e0: 3d20 273a 2573 2720 2520 6f73 2e67 6574  = ':%s' % os.get
-000263f0: 6377 6428 290a 2020 2020 2020 2020 706c  cwd().        pl
-00026400: 616e 6469 7220 3d20 6f73 2e70 6174 682e  andir = os.path.
-00026410: 6469 726e 616d 6528 6b75 6265 6164 6d2e  dirname(kubeadm.
-00026420: 6372 6561 7465 2e5f 5f63 6f64 655f 5f2e  create.__code__.
-00026430: 636f 5f66 696c 656e 616d 6529 0a20 2020  co_filename).   
-00026440: 2020 2020 2072 6574 7572 6e20 6b75 6265       return kube
-00026450: 6164 6d2e 6372 6561 7465 2873 656c 662c  adm.create(self,
-00026460: 2070 6c61 6e64 6972 2c20 636c 7573 7465   plandir, cluste
-00026470: 722c 206f 7665 7272 6964 6573 290a 0a20  r, overrides).. 
-00026480: 2020 2064 6566 2063 7265 6174 655f 6b75     def create_ku
-00026490: 6265 5f67 6b65 2873 656c 662c 2063 6c75  be_gke(self, clu
-000264a0: 7374 6572 2c20 6f76 6572 7269 6465 733d  ster, overrides=
-000264b0: 7b7d 293a 0a20 2020 2020 2020 2066 726f  {}):.        fro
-000264c0: 6d20 6b76 6972 742e 636c 7573 7465 7220  m kvirt.cluster 
-000264d0: 696d 706f 7274 2067 6b65 0a20 2020 2020  import gke.     
-000264e0: 2020 2069 6620 636f 6e74 6169 6e65 725f     if container_
-000264f0: 6d6f 6465 2829 3a0a 2020 2020 2020 2020  mode():.        
-00026500: 2020 2020 6f73 2e65 6e76 6972 6f6e 5b27      os.environ['
-00026510: 5041 5448 275d 202b 3d20 273a 2f77 6f72  PATH'] += ':/wor
-00026520: 6b64 6972 270a 2020 2020 2020 2020 656c  kdir'.        el
-00026530: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00026540: 6f73 2e65 6e76 6972 6f6e 5b27 5041 5448  os.environ['PATH
-00026550: 275d 202b 3d20 273a 2573 2720 2520 6f73  '] += ':%s' % os
-00026560: 2e67 6574 6377 6428 290a 2020 2020 2020  .getcwd().      
-00026570: 2020 7265 7475 726e 2067 6b65 2e63 7265    return gke.cre
-00026580: 6174 6528 7365 6c66 2c20 636c 7573 7465  ate(self, cluste
-00026590: 722c 206f 7665 7272 6964 6573 290a 0a20  r, overrides).. 
-000265a0: 2020 2064 6566 2063 7265 6174 655f 6b75     def create_ku
-000265b0: 6265 5f6d 6963 726f 7368 6966 7428 7365  be_microshift(se
-000265c0: 6c66 2c20 636c 7573 7465 722c 206f 7665  lf, cluster, ove
-000265d0: 7272 6964 6573 3d7b 7d29 3a0a 2020 2020  rrides={}):.    
-000265e0: 2020 2020 6966 2063 6f6e 7461 696e 6572      if container
-000265f0: 5f6d 6f64 6528 293a 0a20 2020 2020 2020  _mode():.       
-00026600: 2020 2020 206f 732e 656e 7669 726f 6e5b       os.environ[
-00026610: 2750 4154 4827 5d20 2b3d 2027 3a2f 776f  'PATH'] += ':/wo
-00026620: 726b 6469 7227 0a20 2020 2020 2020 2065  rkdir'.        e
-00026630: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00026640: 206f 732e 656e 7669 726f 6e5b 2750 4154   os.environ['PAT
-00026650: 4827 5d20 2b3d 2027 3a25 7327 2025 206f  H'] += ':%s' % o
-00026660: 732e 6765 7463 7764 2829 0a20 2020 2020  s.getcwd().     
-00026670: 2020 2070 6c61 6e64 6972 203d 206f 732e     plandir = os.
-00026680: 7061 7468 2e64 6972 6e61 6d65 286d 6963  path.dirname(mic
-00026690: 726f 7368 6966 742e 6372 6561 7465 2e5f  roshift.create._
-000266a0: 5f63 6f64 655f 5f2e 636f 5f66 696c 656e  _code__.co_filen
-000266b0: 616d 6529 0a20 2020 2020 2020 2072 6574  ame).        ret
-000266c0: 7572 6e20 6d69 6372 6f73 6869 6674 2e63  urn microshift.c
-000266d0: 7265 6174 6528 7365 6c66 2c20 706c 616e  reate(self, plan
-000266e0: 6469 722c 2063 6c75 7374 6572 2c20 6f76  dir, cluster, ov
-000266f0: 6572 7269 6465 7329 0a0a 2020 2020 6465  errides)..    de
-00026700: 6620 6372 6561 7465 5f6b 7562 655f 6b33  f create_kube_k3
-00026710: 7328 7365 6c66 2c20 636c 7573 7465 722c  s(self, cluster,
-00026720: 206f 7665 7272 6964 6573 3d7b 7d29 3a0a   overrides={}):.
-00026730: 2020 2020 2020 2020 6966 2063 6f6e 7461          if conta
-00026740: 696e 6572 5f6d 6f64 6528 293a 0a20 2020  iner_mode():.   
-00026750: 2020 2020 2020 2020 206f 732e 656e 7669           os.envi
-00026760: 726f 6e5b 2750 4154 4827 5d20 2b3d 2027  ron['PATH'] += '
-00026770: 3a2f 776f 726b 6469 7227 0a20 2020 2020  :/workdir'.     
-00026780: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00026790: 2020 2020 206f 732e 656e 7669 726f 6e5b       os.environ[
-000267a0: 2750 4154 4827 5d20 2b3d 2027 3a25 7327  'PATH'] += ':%s'
-000267b0: 2025 206f 732e 6765 7463 7764 2829 0a20   % os.getcwd(). 
-000267c0: 2020 2020 2020 2070 6c61 6e64 6972 203d         plandir =
-000267d0: 206f 732e 7061 7468 2e64 6972 6e61 6d65   os.path.dirname
-000267e0: 286b 3373 2e63 7265 6174 652e 5f5f 636f  (k3s.create.__co
-000267f0: 6465 5f5f 2e63 6f5f 6669 6c65 6e61 6d65  de__.co_filename
-00026800: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00026810: 206b 3373 2e63 7265 6174 6528 7365 6c66   k3s.create(self
-00026820: 2c20 706c 616e 6469 722c 2063 6c75 7374  , plandir, clust
-00026830: 6572 2c20 6f76 6572 7269 6465 7329 0a0a  er, overrides)..
-00026840: 2020 2020 6465 6620 6372 6561 7465 5f6b      def create_k
-00026850: 7562 655f 6879 7065 7273 6869 6674 2873  ube_hypershift(s
-00026860: 656c 662c 2063 6c75 7374 6572 2c20 6f76  elf, cluster, ov
-00026870: 6572 7269 6465 733d 7b7d 293a 0a20 2020  errides={}):.   
-00026880: 2020 2020 2069 6620 636f 6e74 6169 6e65       if containe
-00026890: 725f 6d6f 6465 2829 3a0a 2020 2020 2020  r_mode():.      
-000268a0: 2020 2020 2020 6f73 2e65 6e76 6972 6f6e        os.environ
-000268b0: 5b27 5041 5448 275d 202b 3d20 273a 2f77  ['PATH'] += ':/w
-000268c0: 6f72 6b64 6972 270a 2020 2020 2020 2020  orkdir'.        
-000268d0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-000268e0: 2020 6f73 2e65 6e76 6972 6f6e 5b27 5041    os.environ['PA
-000268f0: 5448 275d 202b 3d20 273a 2573 2720 2520  TH'] += ':%s' % 
-00026900: 6f73 2e67 6574 6377 6428 290a 2020 2020  os.getcwd().    
-00026910: 2020 2020 706c 616e 6469 7220 3d20 6f73      plandir = os
-00026920: 2e70 6174 682e 6469 726e 616d 6528 6879  .path.dirname(hy
-00026930: 7065 7273 6869 6674 2e63 7265 6174 652e  pershift.create.
-00026940: 5f5f 636f 6465 5f5f 2e63 6f5f 6669 6c65  __code__.co_file
-00026950: 6e61 6d65 290a 2020 2020 2020 2020 2320  name).        # 
-00026960: 646e 7363 6c69 656e 7420 3d20 6f76 6572  dnsclient = over
-00026970: 7269 6465 732e 6765 7428 2764 6e73 636c  rides.get('dnscl
-00026980: 6965 6e74 2729 0a20 2020 2020 2020 2023  ient').        #
-00026990: 2064 6e73 636f 6e66 6967 203d 204b 636f   dnsconfig = Kco
-000269a0: 6e66 6967 2863 6c69 656e 743d 646e 7363  nfig(client=dnsc
-000269b0: 6c69 656e 7429 2069 6620 646e 7363 6c69  lient) if dnscli
-000269c0: 656e 7420 6973 206e 6f74 204e 6f6e 6520  ent is not None 
-000269d0: 656c 7365 204e 6f6e 650a 2020 2020 2020  else None.      
-000269e0: 2020 7265 7475 726e 2068 7970 6572 7368    return hypersh
-000269f0: 6966 742e 6372 6561 7465 2873 656c 662c  ift.create(self,
-00026a00: 2070 6c61 6e64 6972 2c20 636c 7573 7465   plandir, cluste
-00026a10: 722c 206f 7665 7272 6964 6573 290a 0a20  r, overrides).. 
-00026a20: 2020 2064 6566 2063 7265 6174 655f 6b75     def create_ku
-00026a30: 6265 5f6f 7065 6e73 6869 6674 2873 656c  be_openshift(sel
-00026a40: 662c 2063 6c75 7374 6572 2c20 6f76 6572  f, cluster, over
-00026a50: 7269 6465 733d 7b7d 293a 0a20 2020 2020  rides={}):.     
-00026a60: 2020 2069 6620 636f 6e74 6169 6e65 725f     if container_
-00026a70: 6d6f 6465 2829 3a0a 2020 2020 2020 2020  mode():.        
-00026a80: 2020 2020 6f73 2e65 6e76 6972 6f6e 5b27      os.environ['
-00026a90: 5041 5448 275d 202b 3d20 273a 2f77 6f72  PATH'] += ':/wor
-00026aa0: 6b64 6972 270a 2020 2020 2020 2020 656c  kdir'.        el
-00026ab0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00026ac0: 6f73 2e65 6e76 6972 6f6e 5b27 5041 5448  os.environ['PATH
-00026ad0: 275d 202b 3d20 273a 2573 2720 2520 6f73  '] += ':%s' % os
-00026ae0: 2e67 6574 6377 6428 290a 2020 2020 2020  .getcwd().      
-00026af0: 2020 706c 616e 6469 7220 3d20 6f73 2e70    plandir = os.p
-00026b00: 6174 682e 6469 726e 616d 6528 6f70 656e  ath.dirname(open
-00026b10: 7368 6966 742e 6372 6561 7465 2e5f 5f63  shift.create.__c
-00026b20: 6f64 655f 5f2e 636f 5f66 696c 656e 616d  ode__.co_filenam
-00026b30: 6529 0a20 2020 2020 2020 2064 6e73 636c  e).        dnscl
-00026b40: 6965 6e74 203d 206f 7665 7272 6964 6573  ient = overrides
-00026b50: 2e67 6574 2827 646e 7363 6c69 656e 7427  .get('dnsclient'
-00026b60: 290a 2020 2020 2020 2020 646e 7363 6f6e  ).        dnscon
-00026b70: 6669 6720 3d20 4b63 6f6e 6669 6728 636c  fig = Kconfig(cl
-00026b80: 6965 6e74 3d64 6e73 636c 6965 6e74 2920  ient=dnsclient) 
-00026b90: 6966 2064 6e73 636c 6965 6e74 2069 7320  if dnsclient is 
-00026ba0: 6e6f 7420 4e6f 6e65 2065 6c73 6520 4e6f  not None else No
-00026bb0: 6e65 0a20 2020 2020 2020 2072 6574 7572  ne.        retur
-00026bc0: 6e20 6f70 656e 7368 6966 742e 6372 6561  n openshift.crea
-00026bd0: 7465 2873 656c 662c 2070 6c61 6e64 6972  te(self, plandir
-00026be0: 2c20 636c 7573 7465 722c 206f 7665 7272  , cluster, overr
-00026bf0: 6964 6573 2c20 646e 7363 6f6e 6669 673d  ides, dnsconfig=
-00026c00: 646e 7363 6f6e 6669 6729 0a0a 2020 2020  dnsconfig)..    
-00026c10: 6465 6620 6465 6c65 7465 5f6b 7562 6528  def delete_kube(
-00026c20: 7365 6c66 2c20 636c 7573 7465 722c 206f  self, cluster, o
-00026c30: 7665 7272 6964 6573 3d7b 7d29 3a0a 2020  verrides={}):.  
-00026c40: 2020 2020 2020 6879 7065 7273 6869 6674        hypershift
-00026c50: 203d 206f 7665 7272 6964 6573 2e67 6574   = overrides.get
-00026c60: 2827 6b75 6265 7479 7065 272c 2027 7878  ('kubetype', 'xx
-00026c70: 7827 2920 3d3d 2027 6879 7065 7273 6869  x') == 'hypershi
-00026c80: 6674 270a 2020 2020 2020 2020 6173 7369  ft'.        assi
-00026c90: 7374 6564 203d 2046 616c 7365 0a20 2020  sted = False.   
-00026ca0: 2020 2020 2061 6b73 203d 206f 7665 7272       aks = overr
-00026cb0: 6964 6573 2e67 6574 2827 6b75 6265 7479  ides.get('kubety
-00026cc0: 7065 272c 2027 7878 7827 2920 3d3d 2027  pe', 'xxx') == '
-00026cd0: 616b 7327 0a20 2020 2020 2020 2065 6b73  aks'.        eks
-00026ce0: 203d 206f 7665 7272 6964 6573 2e67 6574   = overrides.get
-00026cf0: 2827 6b75 6265 7479 7065 272c 2027 7878  ('kubetype', 'xx
-00026d00: 7827 2920 3d3d 2027 656b 7327 0a20 2020  x') == 'eks'.   
-00026d10: 2020 2020 2067 6b65 203d 206f 7665 7272       gke = overr
-00026d20: 6964 6573 2e67 6574 2827 6b75 6265 7479  ides.get('kubety
-00026d30: 7065 272c 2027 7878 7827 2920 3d3d 2027  pe', 'xxx') == '
-00026d40: 676b 6527 0a20 2020 2020 2020 2064 6f6d  gke'.        dom
-00026d50: 6169 6e20 3d20 6f76 6572 7269 6465 732e  ain = overrides.
-00026d60: 6765 7428 2764 6f6d 6169 6e27 2c20 276b  get('domain', 'k
-00026d70: 6172 6d61 6c61 6273 2e63 6f72 7027 290a  armalabs.corp').
-00026d80: 2020 2020 2020 2020 6b75 6265 7479 7065          kubetype
-00026d90: 203d 206f 7665 7272 6964 6573 2e67 6574   = overrides.get
-00026da0: 2827 6b75 6265 7479 7065 272c 2027 6765  ('kubetype', 'ge
-00026db0: 6e65 7269 6327 290a 2020 2020 2020 2020  neric').        
-00026dc0: 646e 7363 6c69 656e 7420 3d20 4e6f 6e65  dnsclient = None
-00026dd0: 0a20 2020 2020 2020 206b 203d 2073 656c  .        k = sel
-00026de0: 662e 6b0a 2020 2020 2020 2020 6966 2073  f.k.        if s
-00026df0: 656c 662e 7479 7065 203d 3d20 2777 6562  elf.type == 'web
-00026e00: 2720 616e 6420 7365 6c66 2e6b 2e6c 6f63  ' and self.k.loc
-00026e10: 616c 6b75 6265 3a0a 2020 2020 2020 2020  alkube:.        
-00026e20: 2020 2020 7265 7475 726e 206b 2e64 656c      return k.del
-00026e30: 6574 655f 6b75 6265 2863 6c75 7374 6572  ete_kube(cluster
-00026e40: 2c20 6b75 6265 7479 7065 2c20 6f76 6572  , kubetype, over
-00026e50: 7269 6465 733d 6f76 6572 7269 6465 7329  rides=overrides)
-00026e60: 0a20 2020 2020 2020 2063 6c75 7374 6572  .        cluster
-00026e70: 203d 206f 7665 7272 6964 6573 2e67 6574   = overrides.get
-00026e80: 2827 636c 7573 7465 7227 2c20 636c 7573  ('cluster', clus
-00026e90: 7465 7229 0a20 2020 2020 2020 2069 6620  ter).        if 
-00026ea0: 636c 7573 7465 7220 6973 204e 6f6e 6520  cluster is None 
-00026eb0: 6f72 2063 6c75 7374 6572 203d 3d20 2727  or cluster == ''
-00026ec0: 3a0a 2020 2020 2020 2020 2020 2020 6465  :.            de
-00026ed0: 6661 756c 745f 636c 7573 7465 7273 203d  fault_clusters =
-00026ee0: 207b 2767 656e 6572 6963 273a 2027 6d79   {'generic': 'my
-00026ef0: 6b75 6265 272c 2027 6879 7065 7273 6869  kube', 'hypershi
-00026f00: 6674 273a 2027 6d79 6879 7065 7273 6869  ft': 'myhypershi
-00026f10: 6674 272c 2027 6f70 656e 7368 6966 7427  ft', 'openshift'
-00026f20: 3a20 276d 796f 7065 6e73 6869 6674 272c  : 'myopenshift',
-00026f30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00026f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026f50: 2027 6b33 7327 3a20 276d 796b 3373 272c   'k3s': 'myk3s',
-00026f60: 2027 6d69 6372 6f73 6869 6674 273a 2027   'microshift': '
-00026f70: 6d79 6d69 6372 6f73 6869 6674 272c 2027  mymicroshift', '
-00026f80: 676b 6527 3a20 276d 7967 6b65 272c 2027  gke': 'mygke', '
-00026f90: 656b 7327 3a20 276d 7965 6b73 272c 0a20  eks': 'myeks',. 
-00026fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026fb0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-00026fc0: 616b 7327 3a20 276d 7961 6b73 277d 0a20  aks': 'myaks'}. 
-00026fd0: 2020 2020 2020 2020 2020 2063 6c75 7374             clust
-00026fe0: 6572 203d 2064 6566 6175 6c74 5f63 6c75  er = default_clu
-00026ff0: 7374 6572 735b 6b75 6265 7479 7065 5d0a  sters[kubetype].
-00027000: 2020 2020 2020 2020 636c 7573 7465 7264          clusterd
-00027010: 6174 6120 3d20 7b7d 0a20 2020 2020 2020  ata = {}.       
-00027020: 2063 6c75 7374 6572 6469 7220 3d20 6f73   clusterdir = os
-00027030: 2e70 6174 682e 6578 7061 6e64 7573 6572  .path.expanduser
-00027040: 2866 227e 2f2e 6b63 6c69 2f63 6c75 7374  (f"~/.kcli/clust
-00027050: 6572 732f 7b63 6c75 7374 6572 7d22 290a  ers/{cluster}").
-00027060: 2020 2020 2020 2020 6966 206f 732e 7061          if os.pa
-00027070: 7468 2e65 7869 7374 7328 636c 7573 7465  th.exists(cluste
-00027080: 7264 6972 293a 0a20 2020 2020 2020 2020  rdir):.         
-00027090: 2020 2070 6172 616d 6574 6572 7366 696c     parametersfil
-000270a0: 6520 3d20 6622 7b63 6c75 7374 6572 6469  e = f"{clusterdi
-000270b0: 727d 2f6b 636c 695f 7061 7261 6d65 7465  r}/kcli_paramete
-000270c0: 7273 2e79 6d6c 220a 2020 2020 2020 2020  rs.yml".        
-000270d0: 2020 2020 6966 206f 732e 7061 7468 2e65      if os.path.e
-000270e0: 7869 7374 7328 7061 7261 6d65 7465 7273  xists(parameters
-000270f0: 6669 6c65 293a 0a20 2020 2020 2020 2020  file):.         
-00027100: 2020 2020 2020 2077 6974 6820 6f70 656e         with open
-00027110: 2870 6172 616d 6574 6572 7366 696c 6529  (parametersfile)
-00027120: 2061 7320 663a 0a20 2020 2020 2020 2020   as f:.         
-00027130: 2020 2020 2020 2020 2020 2063 6c75 7374             clust
-00027140: 6572 6461 7461 203d 2079 616d 6c2e 7361  erdata = yaml.sa
-00027150: 6665 5f6c 6f61 6428 6629 0a20 2020 2020  fe_load(f).     
-00027160: 2020 2020 2020 2020 2020 2020 2020 206b                 k
-00027170: 7562 6574 7970 6520 3d20 636c 7573 7465  ubetype = cluste
-00027180: 7264 6174 612e 6765 7428 276b 7562 6574  rdata.get('kubet
-00027190: 7970 6527 2c20 2767 656e 6572 6963 2729  ype', 'generic')
-000271a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000271b0: 2020 2020 2069 6620 6b75 6265 7479 7065       if kubetype
-000271c0: 203d 3d20 2768 7970 6572 7368 6966 7427   == 'hypershift'
-000271d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000271e0: 2020 2020 2020 2020 2020 6879 7065 7273            hypers
-000271f0: 6869 6674 203d 2054 7275 650a 2020 2020  hift = True.    
-00027200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027210: 2020 2020 6173 7369 7374 6564 203d 2063      assisted = c
-00027220: 6c75 7374 6572 6461 7461 2e67 6574 2827  lusterdata.get('
-00027230: 6173 7369 7374 6564 272c 2046 616c 7365  assisted', False
-00027240: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00027250: 2020 2020 2020 646f 6d61 696e 203d 2063        domain = c
-00027260: 6c75 7374 6572 6461 7461 2e67 6574 2827  lusterdata.get('
-00027270: 646f 6d61 696e 272c 2064 6f6d 6169 6e29  domain', domain)
-00027280: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00027290: 2020 2020 2064 6e73 636c 6965 6e74 203d       dnsclient =
-000272a0: 2063 6c75 7374 6572 6461 7461 2e67 6574   clusterdata.get
-000272b0: 2827 646e 7363 6c69 656e 7427 290a 2020  ('dnsclient').  
-000272c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000272d0: 2020 676b 6520 3d20 6b75 6265 7479 7065    gke = kubetype
-000272e0: 203d 3d20 2767 6b65 270a 2020 2020 2020   == 'gke'.      
-000272f0: 2020 2020 2020 2020 2020 2020 2020 656b                ek
-00027300: 7320 3d20 6b75 6265 7479 7065 203d 3d20  s = kubetype == 
-00027310: 2765 6b73 270a 2020 2020 2020 2020 2020  'eks'.          
-00027320: 2020 2020 2020 2020 2020 616b 7320 3d20            aks = 
-00027330: 6b75 6265 7479 7065 203d 3d20 2761 6b73  kubetype == 'aks
-00027340: 270a 2020 2020 2020 2020 6465 6c65 7465  '.        delete
-00027350: 636c 6965 6e74 7320 3d20 7b73 656c 662e  clients = {self.
-00027360: 636c 6965 6e74 3a20 6b7d 0a20 2020 2020  client: k}.     
-00027370: 2020 2076 6d63 6c69 656e 7473 203d 205b     vmclients = [
-00027380: 5d0a 2020 2020 2020 2020 766d 636c 6965  ].        vmclie
-00027390: 6e74 735f 6669 6c65 203d 206f 732e 7061  nts_file = os.pa
-000273a0: 7468 2e65 7870 616e 6475 7365 7228 6627  th.expanduser(f'
-000273b0: 7e2f 2e6b 636c 692f 766d 636c 6965 6e74  ~/.kcli/vmclient
-000273c0: 735f 7b63 6c75 7374 6572 7d27 290a 2020  s_{cluster}').  
-000273d0: 2020 2020 2020 6966 206f 732e 7061 7468        if os.path
-000273e0: 2e65 7869 7374 7328 766d 636c 6965 6e74  .exists(vmclient
-000273f0: 735f 6669 6c65 293a 0a20 2020 2020 2020  s_file):.       
-00027400: 2020 2020 2076 6d63 6c69 656e 7473 203d       vmclients =
-00027410: 2079 616d 6c2e 7361 6665 5f6c 6f61 6428   yaml.safe_load(
-00027420: 6f70 656e 2876 6d63 6c69 656e 7473 5f66  open(vmclients_f
-00027430: 696c 6529 290a 2020 2020 2020 2020 2020  ile)).          
-00027440: 2020 6f73 2e72 656d 6f76 6528 766d 636c    os.remove(vmcl
-00027450: 6965 6e74 735f 6669 6c65 290a 2020 2020  ients_file).    
-00027460: 2020 2020 6966 2073 656c 662e 6578 7472      if self.extr
-00027470: 6163 6c69 656e 7473 3a0a 2020 2020 2020  aclients:.      
-00027480: 2020 2020 2020 6465 6c65 7465 636c 6965        deleteclie
-00027490: 6e74 732e 7570 6461 7465 2873 656c 662e  nts.update(self.
-000274a0: 6578 7472 6163 6c69 656e 7473 290a 2020  extraclients).  
-000274b0: 2020 2020 2020 656c 6966 2076 6d63 6c69        elif vmcli
-000274c0: 656e 7473 3a0a 2020 2020 2020 2020 2020  ents:.          
-000274d0: 2020 6465 6c65 7465 636c 6965 6e74 732e    deleteclients.
-000274e0: 7570 6461 7465 287b 636c 693a 204b 636f  update({cli: Kco
-000274f0: 6e66 6967 2863 6c69 656e 743d 636c 6929  nfig(client=cli)
-00027500: 2e6b 2066 6f72 2063 6c69 2069 6e20 766d  .k for cli in vm
-00027510: 636c 6965 6e74 7320 6966 2063 6c69 2021  clients if cli !
-00027520: 3d20 7365 6c66 2e63 6c69 656e 747d 290a  = self.client}).
-00027530: 2020 2020 2020 2020 666f 7220 6879 7065          for hype
-00027540: 7276 6973 6f72 2069 6e20 6465 6c65 7465  rvisor in delete
-00027550: 636c 6965 6e74 733a 0a20 2020 2020 2020  clients:.       
-00027560: 2020 2020 2063 203d 2064 656c 6574 6563       c = deletec
-00027570: 6c69 656e 7473 5b68 7970 6572 7669 736f  lients[hyperviso
-00027580: 725d 0a20 2020 2020 2020 2020 2020 2066  r].            f
-00027590: 6f72 2076 6d20 696e 2073 6f72 7465 6428  or vm in sorted(
-000275a0: 632e 6c69 7374 2829 2c20 6b65 793d 6c61  c.list(), key=la
-000275b0: 6d62 6461 2078 3a20 785b 276e 616d 6527  mbda x: x['name'
-000275c0: 5d29 3a0a 2020 2020 2020 2020 2020 2020  ]):.            
-000275d0: 2020 2020 6e61 6d65 203d 2076 6d5b 276e      name = vm['n
-000275e0: 616d 6527 5d0a 2020 2020 2020 2020 2020  ame'].          
-000275f0: 2020 2020 2020 646e 7363 6c69 656e 7420        dnsclient 
-00027600: 3d20 766d 2e67 6574 2827 646e 7363 6c69  = vm.get('dnscli
-00027610: 656e 7427 2920 6f72 2064 6e73 636c 6965  ent') or dnsclie
-00027620: 6e74 0a20 2020 2020 2020 2020 2020 2020  nt.             
-00027630: 2020 2063 7572 7265 6e74 636c 7573 7465     currentcluste
-00027640: 7220 3d20 766d 2e67 6574 2827 6b75 6265  r = vm.get('kube
-00027650: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
-00027660: 2020 206b 7562 6574 7970 6520 3d20 766d     kubetype = vm
-00027670: 2e67 6574 2827 6b75 6265 7479 7065 272c  .get('kubetype',
-00027680: 2027 6765 6e65 7269 6327 290a 2020 2020   'generic').    
-00027690: 2020 2020 2020 2020 2020 2020 6966 2063              if c
-000276a0: 7572 7265 6e74 636c 7573 7465 7220 6973  urrentcluster is
-000276b0: 206e 6f74 204e 6f6e 6520 616e 6420 6375   not None and cu
-000276c0: 7272 656e 7463 6c75 7374 6572 203d 3d20  rrentcluster == 
-000276d0: 636c 7573 7465 723a 0a20 2020 2020 2020  cluster:.       
-000276e0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-000276f0: 6b75 6265 7479 7065 203d 3d20 2767 6b65  kubetype == 'gke
-00027700: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
-00027710: 2020 2020 2020 2020 2020 2067 6b65 203d             gke =
-00027720: 2054 7275 650a 2020 2020 2020 2020 2020   True.          
-00027730: 2020 2020 2020 2020 2020 2020 2020 6272                br
-00027740: 6561 6b0a 2020 2020 2020 2020 2020 2020  eak.            
-00027750: 2020 2020 2020 2020 656c 6966 206b 7562          elif kub
-00027760: 6574 7970 6520 3d3d 2027 656b 7327 3a0a  etype == 'eks':.
-00027770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027780: 2020 2020 2020 2020 656b 7320 3d20 5472          eks = Tr
-00027790: 7565 0a20 2020 2020 2020 2020 2020 2020  ue.             
-000277a0: 2020 2020 2020 2020 2020 2062 7265 616b             break
-000277b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000277c0: 2020 2020 2065 6c69 6620 6b75 6265 7479       elif kubety
-000277d0: 7065 203d 3d20 2761 6b73 273a 0a20 2020  pe == 'aks':.   
+00025e00: 6574 7970 6520 3d3d 2027 6f70 656e 7368  etype == 'opensh
+00025e10: 6966 742d 736e 6f27 3a0a 2020 2020 2020  ift-sno':.      
+00025e20: 2020 2020 2020 6f76 6572 7269 6465 735b        overrides[
+00025e30: 2773 6e6f 275d 203d 2054 7275 650a 2020  'sno'] = True.  
+00025e40: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+00025e50: 203d 2073 656c 662e 6372 6561 7465 5f6b   = self.create_k
+00025e60: 7562 655f 6f70 656e 7368 6966 7428 636c  ube_openshift(cl
+00025e70: 7573 7465 722c 206f 7665 7272 6964 6573  uster, overrides
+00025e80: 3d6f 7665 7272 6964 6573 290a 2020 2020  =overrides).    
+00025e90: 2020 2020 656c 6966 206b 7562 6574 7970      elif kubetyp
+00025ea0: 6520 3d3d 2027 6879 7065 7273 6869 6674  e == 'hypershift
+00025eb0: 273a 0a20 2020 2020 2020 2020 2020 2072  ':.            r
+00025ec0: 6573 756c 7420 3d20 7365 6c66 2e63 7265  esult = self.cre
+00025ed0: 6174 655f 6b75 6265 5f68 7970 6572 7368  ate_kube_hypersh
+00025ee0: 6966 7428 636c 7573 7465 722c 206f 7665  ift(cluster, ove
+00025ef0: 7272 6964 6573 3d6f 7665 7272 6964 6573  rrides=overrides
+00025f00: 290a 2020 2020 2020 2020 656c 6966 206b  ).        elif k
+00025f10: 7562 6574 7970 6520 3d3d 2027 6d69 6372  ubetype == 'micr
+00025f20: 6f73 6869 6674 273a 0a20 2020 2020 2020  oshift':.       
+00025f30: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
+00025f40: 6c66 2e63 7265 6174 655f 6b75 6265 5f6d  lf.create_kube_m
+00025f50: 6963 726f 7368 6966 7428 636c 7573 7465  icroshift(cluste
+00025f60: 722c 206f 7665 7272 6964 6573 3d6f 7665  r, overrides=ove
+00025f70: 7272 6964 6573 290a 2020 2020 2020 2020  rrides).        
+00025f80: 656c 6966 206b 7562 6574 7970 6520 3d3d  elif kubetype ==
+00025f90: 2027 6b33 7327 3a0a 2020 2020 2020 2020   'k3s':.        
+00025fa0: 2020 2020 7265 7375 6c74 203d 2073 656c      result = sel
+00025fb0: 662e 6372 6561 7465 5f6b 7562 655f 6b33  f.create_kube_k3
+00025fc0: 7328 636c 7573 7465 722c 206f 7665 7272  s(cluster, overr
+00025fd0: 6964 6573 3d6f 7665 7272 6964 6573 290a  ides=overrides).
+00025fe0: 2020 2020 2020 2020 656c 6966 206b 7562          elif kub
+00025ff0: 6574 7970 6520 3d3d 2027 676b 6527 3a0a  etype == 'gke':.
+00026000: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+00026010: 6c74 203d 2073 656c 662e 6372 6561 7465  lt = self.create
+00026020: 5f6b 7562 655f 676b 6528 636c 7573 7465  _kube_gke(cluste
+00026030: 722c 206f 7665 7272 6964 6573 3d6f 7665  r, overrides=ove
+00026040: 7272 6964 6573 290a 2020 2020 2020 2020  rrides).        
+00026050: 656c 6966 206b 7562 6574 7970 6520 3d3d  elif kubetype ==
+00026060: 2027 656b 7327 3a0a 2020 2020 2020 2020   'eks':.        
+00026070: 2020 2020 7265 7375 6c74 203d 2073 656c      result = sel
+00026080: 662e 6372 6561 7465 5f6b 7562 655f 656b  f.create_kube_ek
+00026090: 7328 636c 7573 7465 722c 206f 7665 7272  s(cluster, overr
+000260a0: 6964 6573 3d6f 7665 7272 6964 6573 290a  ides=overrides).
+000260b0: 2020 2020 2020 2020 656c 6966 206b 7562          elif kub
+000260c0: 6574 7970 6520 3d3d 2027 616b 7327 3a0a  etype == 'aks':.
+000260d0: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+000260e0: 6c74 203d 2073 656c 662e 6372 6561 7465  lt = self.create
+000260f0: 5f6b 7562 655f 616b 7328 636c 7573 7465  _kube_aks(cluste
+00026100: 722c 206f 7665 7272 6964 6573 3d6f 7665  r, overrides=ove
+00026110: 7272 6964 6573 290a 2020 2020 2020 2020  rrides).        
+00026120: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00026130: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
+00026140: 6372 6561 7465 5f6b 7562 655f 6765 6e65  create_kube_gene
+00026150: 7269 6328 636c 7573 7465 722c 206f 7665  ric(cluster, ove
+00026160: 7272 6964 6573 3d6f 7665 7272 6964 6573  rrides=overrides
+00026170: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00026180: 2072 6573 756c 740a 0a20 2020 2064 6566   result..    def
+00026190: 2063 7265 6174 655f 6b75 6265 5f61 6b73   create_kube_aks
+000261a0: 2873 656c 662c 2063 6c75 7374 6572 2c20  (self, cluster, 
+000261b0: 6f76 6572 7269 6465 733d 7b7d 293a 0a20  overrides={}):. 
+000261c0: 2020 2020 2020 2066 726f 6d20 6b76 6972         from kvir
+000261d0: 742e 636c 7573 7465 7220 696d 706f 7274  t.cluster import
+000261e0: 2061 6b73 0a20 2020 2020 2020 2069 6620   aks.        if 
+000261f0: 636f 6e74 6169 6e65 725f 6d6f 6465 2829  container_mode()
+00026200: 3a0a 2020 2020 2020 2020 2020 2020 6f73  :.            os
+00026210: 2e65 6e76 6972 6f6e 5b27 5041 5448 275d  .environ['PATH']
+00026220: 202b 3d20 273a 2f77 6f72 6b64 6972 270a   += ':/workdir'.
+00026230: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00026240: 2020 2020 2020 2020 2020 6f73 2e65 6e76            os.env
+00026250: 6972 6f6e 5b27 5041 5448 275d 202b 3d20  iron['PATH'] += 
+00026260: 273a 2573 2720 2520 6f73 2e67 6574 6377  ':%s' % os.getcw
+00026270: 6428 290a 2020 2020 2020 2020 7265 7475  d().        retu
+00026280: 726e 2061 6b73 2e63 7265 6174 6528 7365  rn aks.create(se
+00026290: 6c66 2c20 636c 7573 7465 722c 206f 7665  lf, cluster, ove
+000262a0: 7272 6964 6573 290a 0a20 2020 2064 6566  rrides)..    def
+000262b0: 2063 7265 6174 655f 6b75 6265 5f65 6b73   create_kube_eks
+000262c0: 2873 656c 662c 2063 6c75 7374 6572 2c20  (self, cluster, 
+000262d0: 6f76 6572 7269 6465 733d 7b7d 293a 0a20  overrides={}):. 
+000262e0: 2020 2020 2020 2066 726f 6d20 6b76 6972         from kvir
+000262f0: 742e 636c 7573 7465 7220 696d 706f 7274  t.cluster import
+00026300: 2065 6b73 0a20 2020 2020 2020 2069 6620   eks.        if 
+00026310: 636f 6e74 6169 6e65 725f 6d6f 6465 2829  container_mode()
+00026320: 3a0a 2020 2020 2020 2020 2020 2020 6f73  :.            os
+00026330: 2e65 6e76 6972 6f6e 5b27 5041 5448 275d  .environ['PATH']
+00026340: 202b 3d20 273a 2f77 6f72 6b64 6972 270a   += ':/workdir'.
+00026350: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00026360: 2020 2020 2020 2020 2020 6f73 2e65 6e76            os.env
+00026370: 6972 6f6e 5b27 5041 5448 275d 202b 3d20  iron['PATH'] += 
+00026380: 273a 2573 2720 2520 6f73 2e67 6574 6377  ':%s' % os.getcw
+00026390: 6428 290a 2020 2020 2020 2020 7265 7475  d().        retu
+000263a0: 726e 2065 6b73 2e63 7265 6174 6528 7365  rn eks.create(se
+000263b0: 6c66 2c20 636c 7573 7465 722c 206f 7665  lf, cluster, ove
+000263c0: 7272 6964 6573 290a 0a20 2020 2064 6566  rrides)..    def
+000263d0: 2063 7265 6174 655f 6b75 6265 5f67 656e   create_kube_gen
+000263e0: 6572 6963 2873 656c 662c 2063 6c75 7374  eric(self, clust
+000263f0: 6572 2c20 6f76 6572 7269 6465 733d 7b7d  er, overrides={}
+00026400: 293a 0a20 2020 2020 2020 2069 6620 636f  ):.        if co
+00026410: 6e74 6169 6e65 725f 6d6f 6465 2829 3a0a  ntainer_mode():.
+00026420: 2020 2020 2020 2020 2020 2020 6f73 2e65              os.e
+00026430: 6e76 6972 6f6e 5b27 5041 5448 275d 202b  nviron['PATH'] +
+00026440: 3d20 273a 2f77 6f72 6b64 6972 270a 2020  = ':/workdir'.  
+00026450: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00026460: 2020 2020 2020 2020 6f73 2e65 6e76 6972          os.envir
+00026470: 6f6e 5b27 5041 5448 275d 202b 3d20 273a  on['PATH'] += ':
+00026480: 2573 2720 2520 6f73 2e67 6574 6377 6428  %s' % os.getcwd(
+00026490: 290a 2020 2020 2020 2020 706c 616e 6469  ).        plandi
+000264a0: 7220 3d20 6f73 2e70 6174 682e 6469 726e  r = os.path.dirn
+000264b0: 616d 6528 6b75 6265 6164 6d2e 6372 6561  ame(kubeadm.crea
+000264c0: 7465 2e5f 5f63 6f64 655f 5f2e 636f 5f66  te.__code__.co_f
+000264d0: 696c 656e 616d 6529 0a20 2020 2020 2020  ilename).       
+000264e0: 2072 6574 7572 6e20 6b75 6265 6164 6d2e   return kubeadm.
+000264f0: 6372 6561 7465 2873 656c 662c 2070 6c61  create(self, pla
+00026500: 6e64 6972 2c20 636c 7573 7465 722c 206f  ndir, cluster, o
+00026510: 7665 7272 6964 6573 290a 0a20 2020 2064  verrides)..    d
+00026520: 6566 2063 7265 6174 655f 6b75 6265 5f67  ef create_kube_g
+00026530: 6b65 2873 656c 662c 2063 6c75 7374 6572  ke(self, cluster
+00026540: 2c20 6f76 6572 7269 6465 733d 7b7d 293a  , overrides={}):
+00026550: 0a20 2020 2020 2020 2066 726f 6d20 6b76  .        from kv
+00026560: 6972 742e 636c 7573 7465 7220 696d 706f  irt.cluster impo
+00026570: 7274 2067 6b65 0a20 2020 2020 2020 2069  rt gke.        i
+00026580: 6620 636f 6e74 6169 6e65 725f 6d6f 6465  f container_mode
+00026590: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
+000265a0: 6f73 2e65 6e76 6972 6f6e 5b27 5041 5448  os.environ['PATH
+000265b0: 275d 202b 3d20 273a 2f77 6f72 6b64 6972  '] += ':/workdir
+000265c0: 270a 2020 2020 2020 2020 656c 7365 3a0a  '.        else:.
+000265d0: 2020 2020 2020 2020 2020 2020 6f73 2e65              os.e
+000265e0: 6e76 6972 6f6e 5b27 5041 5448 275d 202b  nviron['PATH'] +
+000265f0: 3d20 273a 2573 2720 2520 6f73 2e67 6574  = ':%s' % os.get
+00026600: 6377 6428 290a 2020 2020 2020 2020 7265  cwd().        re
+00026610: 7475 726e 2067 6b65 2e63 7265 6174 6528  turn gke.create(
+00026620: 7365 6c66 2c20 636c 7573 7465 722c 206f  self, cluster, o
+00026630: 7665 7272 6964 6573 290a 0a20 2020 2064  verrides)..    d
+00026640: 6566 2063 7265 6174 655f 6b75 6265 5f6d  ef create_kube_m
+00026650: 6963 726f 7368 6966 7428 7365 6c66 2c20  icroshift(self, 
+00026660: 636c 7573 7465 722c 206f 7665 7272 6964  cluster, overrid
+00026670: 6573 3d7b 7d29 3a0a 2020 2020 2020 2020  es={}):.        
+00026680: 6966 2063 6f6e 7461 696e 6572 5f6d 6f64  if container_mod
+00026690: 6528 293a 0a20 2020 2020 2020 2020 2020  e():.           
+000266a0: 206f 732e 656e 7669 726f 6e5b 2750 4154   os.environ['PAT
+000266b0: 4827 5d20 2b3d 2027 3a2f 776f 726b 6469  H'] += ':/workdi
+000266c0: 7227 0a20 2020 2020 2020 2065 6c73 653a  r'.        else:
+000266d0: 0a20 2020 2020 2020 2020 2020 206f 732e  .            os.
+000266e0: 656e 7669 726f 6e5b 2750 4154 4827 5d20  environ['PATH'] 
+000266f0: 2b3d 2027 3a25 7327 2025 206f 732e 6765  += ':%s' % os.ge
+00026700: 7463 7764 2829 0a20 2020 2020 2020 2070  tcwd().        p
+00026710: 6c61 6e64 6972 203d 206f 732e 7061 7468  landir = os.path
+00026720: 2e64 6972 6e61 6d65 286d 6963 726f 7368  .dirname(microsh
+00026730: 6966 742e 6372 6561 7465 2e5f 5f63 6f64  ift.create.__cod
+00026740: 655f 5f2e 636f 5f66 696c 656e 616d 6529  e__.co_filename)
+00026750: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00026760: 6d69 6372 6f73 6869 6674 2e63 7265 6174  microshift.creat
+00026770: 6528 7365 6c66 2c20 706c 616e 6469 722c  e(self, plandir,
+00026780: 2063 6c75 7374 6572 2c20 6f76 6572 7269   cluster, overri
+00026790: 6465 7329 0a0a 2020 2020 6465 6620 6372  des)..    def cr
+000267a0: 6561 7465 5f6b 7562 655f 6b33 7328 7365  eate_kube_k3s(se
+000267b0: 6c66 2c20 636c 7573 7465 722c 206f 7665  lf, cluster, ove
+000267c0: 7272 6964 6573 3d7b 7d29 3a0a 2020 2020  rrides={}):.    
+000267d0: 2020 2020 6966 2063 6f6e 7461 696e 6572      if container
+000267e0: 5f6d 6f64 6528 293a 0a20 2020 2020 2020  _mode():.       
+000267f0: 2020 2020 206f 732e 656e 7669 726f 6e5b       os.environ[
+00026800: 2750 4154 4827 5d20 2b3d 2027 3a2f 776f  'PATH'] += ':/wo
+00026810: 726b 6469 7227 0a20 2020 2020 2020 2065  rkdir'.        e
+00026820: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00026830: 206f 732e 656e 7669 726f 6e5b 2750 4154   os.environ['PAT
+00026840: 4827 5d20 2b3d 2027 3a25 7327 2025 206f  H'] += ':%s' % o
+00026850: 732e 6765 7463 7764 2829 0a20 2020 2020  s.getcwd().     
+00026860: 2020 2070 6c61 6e64 6972 203d 206f 732e     plandir = os.
+00026870: 7061 7468 2e64 6972 6e61 6d65 286b 3373  path.dirname(k3s
+00026880: 2e63 7265 6174 652e 5f5f 636f 6465 5f5f  .create.__code__
+00026890: 2e63 6f5f 6669 6c65 6e61 6d65 290a 2020  .co_filename).  
+000268a0: 2020 2020 2020 7265 7475 726e 206b 3373        return k3s
+000268b0: 2e63 7265 6174 6528 7365 6c66 2c20 706c  .create(self, pl
+000268c0: 616e 6469 722c 2063 6c75 7374 6572 2c20  andir, cluster, 
+000268d0: 6f76 6572 7269 6465 7329 0a0a 2020 2020  overrides)..    
+000268e0: 6465 6620 6372 6561 7465 5f6b 7562 655f  def create_kube_
+000268f0: 6879 7065 7273 6869 6674 2873 656c 662c  hypershift(self,
+00026900: 2063 6c75 7374 6572 2c20 6f76 6572 7269   cluster, overri
+00026910: 6465 733d 7b7d 293a 0a20 2020 2020 2020  des={}):.       
+00026920: 2069 6620 636f 6e74 6169 6e65 725f 6d6f   if container_mo
+00026930: 6465 2829 3a0a 2020 2020 2020 2020 2020  de():.          
+00026940: 2020 6f73 2e65 6e76 6972 6f6e 5b27 5041    os.environ['PA
+00026950: 5448 275d 202b 3d20 273a 2f77 6f72 6b64  TH'] += ':/workd
+00026960: 6972 270a 2020 2020 2020 2020 656c 7365  ir'.        else
+00026970: 3a0a 2020 2020 2020 2020 2020 2020 6f73  :.            os
+00026980: 2e65 6e76 6972 6f6e 5b27 5041 5448 275d  .environ['PATH']
+00026990: 202b 3d20 273a 2573 2720 2520 6f73 2e67   += ':%s' % os.g
+000269a0: 6574 6377 6428 290a 2020 2020 2020 2020  etcwd().        
+000269b0: 706c 616e 6469 7220 3d20 6f73 2e70 6174  plandir = os.pat
+000269c0: 682e 6469 726e 616d 6528 6879 7065 7273  h.dirname(hypers
+000269d0: 6869 6674 2e63 7265 6174 652e 5f5f 636f  hift.create.__co
+000269e0: 6465 5f5f 2e63 6f5f 6669 6c65 6e61 6d65  de__.co_filename
+000269f0: 290a 2020 2020 2020 2020 2320 646e 7363  ).        # dnsc
+00026a00: 6c69 656e 7420 3d20 6f76 6572 7269 6465  lient = override
+00026a10: 732e 6765 7428 2764 6e73 636c 6965 6e74  s.get('dnsclient
+00026a20: 2729 0a20 2020 2020 2020 2023 2064 6e73  ').        # dns
+00026a30: 636f 6e66 6967 203d 204b 636f 6e66 6967  config = Kconfig
+00026a40: 2863 6c69 656e 743d 646e 7363 6c69 656e  (client=dnsclien
+00026a50: 7429 2069 6620 646e 7363 6c69 656e 7420  t) if dnsclient 
+00026a60: 6973 206e 6f74 204e 6f6e 6520 656c 7365  is not None else
+00026a70: 204e 6f6e 650a 2020 2020 2020 2020 7265   None.        re
+00026a80: 7475 726e 2068 7970 6572 7368 6966 742e  turn hypershift.
+00026a90: 6372 6561 7465 2873 656c 662c 2070 6c61  create(self, pla
+00026aa0: 6e64 6972 2c20 636c 7573 7465 722c 206f  ndir, cluster, o
+00026ab0: 7665 7272 6964 6573 290a 0a20 2020 2064  verrides)..    d
+00026ac0: 6566 2063 7265 6174 655f 6b75 6265 5f6f  ef create_kube_o
+00026ad0: 7065 6e73 6869 6674 2873 656c 662c 2063  penshift(self, c
+00026ae0: 6c75 7374 6572 2c20 6f76 6572 7269 6465  luster, override
+00026af0: 733d 7b7d 293a 0a20 2020 2020 2020 2069  s={}):.        i
+00026b00: 6620 636f 6e74 6169 6e65 725f 6d6f 6465  f container_mode
+00026b10: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
+00026b20: 6f73 2e65 6e76 6972 6f6e 5b27 5041 5448  os.environ['PATH
+00026b30: 275d 202b 3d20 273a 2f77 6f72 6b64 6972  '] += ':/workdir
+00026b40: 270a 2020 2020 2020 2020 656c 7365 3a0a  '.        else:.
+00026b50: 2020 2020 2020 2020 2020 2020 6f73 2e65              os.e
+00026b60: 6e76 6972 6f6e 5b27 5041 5448 275d 202b  nviron['PATH'] +
+00026b70: 3d20 273a 2573 2720 2520 6f73 2e67 6574  = ':%s' % os.get
+00026b80: 6377 6428 290a 2020 2020 2020 2020 706c  cwd().        pl
+00026b90: 616e 6469 7220 3d20 6f73 2e70 6174 682e  andir = os.path.
+00026ba0: 6469 726e 616d 6528 6f70 656e 7368 6966  dirname(openshif
+00026bb0: 742e 6372 6561 7465 2e5f 5f63 6f64 655f  t.create.__code_
+00026bc0: 5f2e 636f 5f66 696c 656e 616d 6529 0a20  _.co_filename). 
+00026bd0: 2020 2020 2020 2064 6e73 636c 6965 6e74         dnsclient
+00026be0: 203d 206f 7665 7272 6964 6573 2e67 6574   = overrides.get
+00026bf0: 2827 646e 7363 6c69 656e 7427 290a 2020  ('dnsclient').  
+00026c00: 2020 2020 2020 646e 7363 6f6e 6669 6720        dnsconfig 
+00026c10: 3d20 4b63 6f6e 6669 6728 636c 6965 6e74  = Kconfig(client
+00026c20: 3d64 6e73 636c 6965 6e74 2920 6966 2064  =dnsclient) if d
+00026c30: 6e73 636c 6965 6e74 2069 7320 6e6f 7420  nsclient is not 
+00026c40: 4e6f 6e65 2065 6c73 6520 4e6f 6e65 0a20  None else None. 
+00026c50: 2020 2020 2020 2072 6574 7572 6e20 6f70         return op
+00026c60: 656e 7368 6966 742e 6372 6561 7465 2873  enshift.create(s
+00026c70: 656c 662c 2070 6c61 6e64 6972 2c20 636c  elf, plandir, cl
+00026c80: 7573 7465 722c 206f 7665 7272 6964 6573  uster, overrides
+00026c90: 2c20 646e 7363 6f6e 6669 673d 646e 7363  , dnsconfig=dnsc
+00026ca0: 6f6e 6669 6729 0a0a 2020 2020 6465 6620  onfig)..    def 
+00026cb0: 6465 6c65 7465 5f6b 7562 6528 7365 6c66  delete_kube(self
+00026cc0: 2c20 636c 7573 7465 722c 206f 7665 7272  , cluster, overr
+00026cd0: 6964 6573 3d7b 7d29 3a0a 2020 2020 2020  ides={}):.      
+00026ce0: 2020 6879 7065 7273 6869 6674 203d 206f    hypershift = o
+00026cf0: 7665 7272 6964 6573 2e67 6574 2827 6b75  verrides.get('ku
+00026d00: 6265 7479 7065 272c 2027 7878 7827 2920  betype', 'xxx') 
+00026d10: 3d3d 2027 6879 7065 7273 6869 6674 270a  == 'hypershift'.
+00026d20: 2020 2020 2020 2020 6173 7369 7374 6564          assisted
+00026d30: 203d 2046 616c 7365 0a20 2020 2020 2020   = False.       
+00026d40: 2061 6b73 203d 206f 7665 7272 6964 6573   aks = overrides
+00026d50: 2e67 6574 2827 6b75 6265 7479 7065 272c  .get('kubetype',
+00026d60: 2027 7878 7827 2920 3d3d 2027 616b 7327   'xxx') == 'aks'
+00026d70: 0a20 2020 2020 2020 2065 6b73 203d 206f  .        eks = o
+00026d80: 7665 7272 6964 6573 2e67 6574 2827 6b75  verrides.get('ku
+00026d90: 6265 7479 7065 272c 2027 7878 7827 2920  betype', 'xxx') 
+00026da0: 3d3d 2027 656b 7327 0a20 2020 2020 2020  == 'eks'.       
+00026db0: 2067 6b65 203d 206f 7665 7272 6964 6573   gke = overrides
+00026dc0: 2e67 6574 2827 6b75 6265 7479 7065 272c  .get('kubetype',
+00026dd0: 2027 7878 7827 2920 3d3d 2027 676b 6527   'xxx') == 'gke'
+00026de0: 0a20 2020 2020 2020 2064 6f6d 6169 6e20  .        domain 
+00026df0: 3d20 6f76 6572 7269 6465 732e 6765 7428  = overrides.get(
+00026e00: 2764 6f6d 6169 6e27 2c20 276b 6172 6d61  'domain', 'karma
+00026e10: 6c61 6273 2e63 6f72 7027 290a 2020 2020  labs.corp').    
+00026e20: 2020 2020 6b75 6265 7479 7065 203d 206f      kubetype = o
+00026e30: 7665 7272 6964 6573 2e67 6574 2827 6b75  verrides.get('ku
+00026e40: 6265 7479 7065 272c 2027 6765 6e65 7269  betype', 'generi
+00026e50: 6327 290a 2020 2020 2020 2020 646e 7363  c').        dnsc
+00026e60: 6c69 656e 7420 3d20 4e6f 6e65 0a20 2020  lient = None.   
+00026e70: 2020 2020 206b 203d 2073 656c 662e 6b0a       k = self.k.
+00026e80: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00026e90: 7479 7065 203d 3d20 2777 6562 2720 616e  type == 'web' an
+00026ea0: 6420 7365 6c66 2e6b 2e6c 6f63 616c 6b75  d self.k.localku
+00026eb0: 6265 3a0a 2020 2020 2020 2020 2020 2020  be:.            
+00026ec0: 7265 7475 726e 206b 2e64 656c 6574 655f  return k.delete_
+00026ed0: 6b75 6265 2863 6c75 7374 6572 2c20 6b75  kube(cluster, ku
+00026ee0: 6265 7479 7065 2c20 6f76 6572 7269 6465  betype, override
+00026ef0: 733d 6f76 6572 7269 6465 7329 0a20 2020  s=overrides).   
+00026f00: 2020 2020 2063 6c75 7374 6572 203d 206f       cluster = o
+00026f10: 7665 7272 6964 6573 2e67 6574 2827 636c  verrides.get('cl
+00026f20: 7573 7465 7227 2c20 636c 7573 7465 7229  uster', cluster)
+00026f30: 0a20 2020 2020 2020 2069 6620 636c 7573  .        if clus
+00026f40: 7465 7220 6973 204e 6f6e 6520 6f72 2063  ter is None or c
+00026f50: 6c75 7374 6572 203d 3d20 2727 3a0a 2020  luster == '':.  
+00026f60: 2020 2020 2020 2020 2020 6465 6661 756c            defaul
+00026f70: 745f 636c 7573 7465 7273 203d 207b 2767  t_clusters = {'g
+00026f80: 656e 6572 6963 273a 2027 6d79 6b75 6265  eneric': 'mykube
+00026f90: 272c 2027 6879 7065 7273 6869 6674 273a  ', 'hypershift':
+00026fa0: 2027 6d79 6879 7065 7273 6869 6674 272c   'myhypershift',
+00026fb0: 2027 6f70 656e 7368 6966 7427 3a20 276d   'openshift': 'm
+00026fc0: 796f 7065 6e73 6869 6674 272c 0a20 2020  yopenshift',.   
+00026fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026fe0: 2020 2020 2020 2020 2020 2020 2027 6b33               'k3
+00026ff0: 7327 3a20 276d 796b 3373 272c 2027 6d69  s': 'myk3s', 'mi
+00027000: 6372 6f73 6869 6674 273a 2027 6d79 6d69  croshift': 'mymi
+00027010: 6372 6f73 6869 6674 272c 2027 676b 6527  croshift', 'gke'
+00027020: 3a20 276d 7967 6b65 272c 2027 656b 7327  : 'mygke', 'eks'
+00027030: 3a20 276d 7965 6b73 272c 0a20 2020 2020  : 'myeks',.     
+00027040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027050: 2020 2020 2020 2020 2020 2027 616b 7327             'aks'
+00027060: 3a20 276d 7961 6b73 277d 0a20 2020 2020  : 'myaks'}.     
+00027070: 2020 2020 2020 2063 6c75 7374 6572 203d         cluster =
+00027080: 2064 6566 6175 6c74 5f63 6c75 7374 6572   default_cluster
+00027090: 735b 6b75 6265 7479 7065 5d0a 2020 2020  s[kubetype].    
+000270a0: 2020 2020 636c 7573 7465 7264 6174 6120      clusterdata 
+000270b0: 3d20 7b7d 0a20 2020 2020 2020 2063 6c75  = {}.        clu
+000270c0: 7374 6572 6469 7220 3d20 6f73 2e70 6174  sterdir = os.pat
+000270d0: 682e 6578 7061 6e64 7573 6572 2866 227e  h.expanduser(f"~
+000270e0: 2f2e 6b63 6c69 2f63 6c75 7374 6572 732f  /.kcli/clusters/
+000270f0: 7b63 6c75 7374 6572 7d22 290a 2020 2020  {cluster}").    
+00027100: 2020 2020 6966 206f 732e 7061 7468 2e65      if os.path.e
+00027110: 7869 7374 7328 636c 7573 7465 7264 6972  xists(clusterdir
+00027120: 293a 0a20 2020 2020 2020 2020 2020 2070  ):.            p
+00027130: 6172 616d 6574 6572 7366 696c 6520 3d20  arametersfile = 
+00027140: 6622 7b63 6c75 7374 6572 6469 727d 2f6b  f"{clusterdir}/k
+00027150: 636c 695f 7061 7261 6d65 7465 7273 2e79  cli_parameters.y
+00027160: 6d6c 220a 2020 2020 2020 2020 2020 2020  ml".            
+00027170: 6966 206f 732e 7061 7468 2e65 7869 7374  if os.path.exist
+00027180: 7328 7061 7261 6d65 7465 7273 6669 6c65  s(parametersfile
+00027190: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+000271a0: 2020 2077 6974 6820 6f70 656e 2870 6172     with open(par
+000271b0: 616d 6574 6572 7366 696c 6529 2061 7320  ametersfile) as 
+000271c0: 663a 0a20 2020 2020 2020 2020 2020 2020  f:.             
+000271d0: 2020 2020 2020 2063 6c75 7374 6572 6461         clusterda
+000271e0: 7461 203d 2079 616d 6c2e 7361 6665 5f6c  ta = yaml.safe_l
+000271f0: 6f61 6428 6629 0a20 2020 2020 2020 2020  oad(f).         
+00027200: 2020 2020 2020 2020 2020 206b 7562 6574             kubet
+00027210: 7970 6520 3d20 636c 7573 7465 7264 6174  ype = clusterdat
+00027220: 612e 6765 7428 276b 7562 6574 7970 6527  a.get('kubetype'
+00027230: 2c20 2767 656e 6572 6963 2729 0a20 2020  , 'generic').   
+00027240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027250: 2069 6620 6b75 6265 7479 7065 203d 3d20   if kubetype == 
+00027260: 2768 7970 6572 7368 6966 7427 3a0a 2020  'hypershift':.  
+00027270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027280: 2020 2020 2020 6879 7065 7273 6869 6674        hypershift
+00027290: 203d 2054 7275 650a 2020 2020 2020 2020   = True.        
+000272a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000272b0: 6173 7369 7374 6564 203d 2063 6c75 7374  assisted = clust
+000272c0: 6572 6461 7461 2e67 6574 2827 6173 7369  erdata.get('assi
+000272d0: 7374 6564 272c 2046 616c 7365 290a 2020  sted', False).  
+000272e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000272f0: 2020 646f 6d61 696e 203d 2063 6c75 7374    domain = clust
+00027300: 6572 6461 7461 2e67 6574 2827 646f 6d61  erdata.get('doma
+00027310: 696e 272c 2064 6f6d 6169 6e29 0a20 2020  in', domain).   
+00027320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027330: 2064 6e73 636c 6965 6e74 203d 2063 6c75   dnsclient = clu
+00027340: 7374 6572 6461 7461 2e67 6574 2827 646e  sterdata.get('dn
+00027350: 7363 6c69 656e 7427 290a 2020 2020 2020  sclient').      
+00027360: 2020 2020 2020 2020 2020 2020 2020 676b                gk
+00027370: 6520 3d20 6b75 6265 7479 7065 203d 3d20  e = kubetype == 
+00027380: 2767 6b65 270a 2020 2020 2020 2020 2020  'gke'.          
+00027390: 2020 2020 2020 2020 2020 656b 7320 3d20            eks = 
+000273a0: 6b75 6265 7479 7065 203d 3d20 2765 6b73  kubetype == 'eks
+000273b0: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
+000273c0: 2020 2020 2020 616b 7320 3d20 6b75 6265        aks = kube
+000273d0: 7479 7065 203d 3d20 2761 6b73 270a 2020  type == 'aks'.  
+000273e0: 2020 2020 2020 6465 6c65 7465 636c 6965        deleteclie
+000273f0: 6e74 7320 3d20 7b73 656c 662e 636c 6965  nts = {self.clie
+00027400: 6e74 3a20 6b7d 0a20 2020 2020 2020 2076  nt: k}.        v
+00027410: 6d63 6c69 656e 7473 203d 205b 5d0a 2020  mclients = [].  
+00027420: 2020 2020 2020 766d 636c 6965 6e74 735f        vmclients_
+00027430: 6669 6c65 203d 206f 732e 7061 7468 2e65  file = os.path.e
+00027440: 7870 616e 6475 7365 7228 6627 7e2f 2e6b  xpanduser(f'~/.k
+00027450: 636c 692f 766d 636c 6965 6e74 735f 7b63  cli/vmclients_{c
+00027460: 6c75 7374 6572 7d27 290a 2020 2020 2020  luster}').      
+00027470: 2020 6966 206f 732e 7061 7468 2e65 7869    if os.path.exi
+00027480: 7374 7328 766d 636c 6965 6e74 735f 6669  sts(vmclients_fi
+00027490: 6c65 293a 0a20 2020 2020 2020 2020 2020  le):.           
+000274a0: 2076 6d63 6c69 656e 7473 203d 2079 616d   vmclients = yam
+000274b0: 6c2e 7361 6665 5f6c 6f61 6428 6f70 656e  l.safe_load(open
+000274c0: 2876 6d63 6c69 656e 7473 5f66 696c 6529  (vmclients_file)
+000274d0: 290a 2020 2020 2020 2020 2020 2020 6f73  ).            os
+000274e0: 2e72 656d 6f76 6528 766d 636c 6965 6e74  .remove(vmclient
+000274f0: 735f 6669 6c65 290a 2020 2020 2020 2020  s_file).        
+00027500: 6966 2073 656c 662e 6578 7472 6163 6c69  if self.extracli
+00027510: 656e 7473 3a0a 2020 2020 2020 2020 2020  ents:.          
+00027520: 2020 6465 6c65 7465 636c 6965 6e74 732e    deleteclients.
+00027530: 7570 6461 7465 2873 656c 662e 6578 7472  update(self.extr
+00027540: 6163 6c69 656e 7473 290a 2020 2020 2020  aclients).      
+00027550: 2020 656c 6966 2076 6d63 6c69 656e 7473    elif vmclients
+00027560: 3a0a 2020 2020 2020 2020 2020 2020 6465  :.            de
+00027570: 6c65 7465 636c 6965 6e74 732e 7570 6461  leteclients.upda
+00027580: 7465 287b 636c 693a 204b 636f 6e66 6967  te({cli: Kconfig
+00027590: 2863 6c69 656e 743d 636c 6929 2e6b 2066  (client=cli).k f
+000275a0: 6f72 2063 6c69 2069 6e20 766d 636c 6965  or cli in vmclie
+000275b0: 6e74 7320 6966 2063 6c69 2021 3d20 7365  nts if cli != se
+000275c0: 6c66 2e63 6c69 656e 747d 290a 2020 2020  lf.client}).    
+000275d0: 2020 2020 666f 7220 6879 7065 7276 6973      for hypervis
+000275e0: 6f72 2069 6e20 6465 6c65 7465 636c 6965  or in deleteclie
+000275f0: 6e74 733a 0a20 2020 2020 2020 2020 2020  nts:.           
+00027600: 2063 203d 2064 656c 6574 6563 6c69 656e   c = deleteclien
+00027610: 7473 5b68 7970 6572 7669 736f 725d 0a20  ts[hypervisor]. 
+00027620: 2020 2020 2020 2020 2020 2066 6f72 2076             for v
+00027630: 6d20 696e 2073 6f72 7465 6428 632e 6c69  m in sorted(c.li
+00027640: 7374 2829 2c20 6b65 793d 6c61 6d62 6461  st(), key=lambda
+00027650: 2078 3a20 785b 276e 616d 6527 5d29 3a0a   x: x['name']):.
+00027660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027670: 6e61 6d65 203d 2076 6d5b 276e 616d 6527  name = vm['name'
+00027680: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+00027690: 2020 646e 7363 6c69 656e 7420 3d20 766d    dnsclient = vm
+000276a0: 2e67 6574 2827 646e 7363 6c69 656e 7427  .get('dnsclient'
+000276b0: 2920 6f72 2064 6e73 636c 6965 6e74 0a20  ) or dnsclient. 
+000276c0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+000276d0: 7572 7265 6e74 636c 7573 7465 7220 3d20  urrentcluster = 
+000276e0: 766d 2e67 6574 2827 6b75 6265 2729 0a20  vm.get('kube'). 
+000276f0: 2020 2020 2020 2020 2020 2020 2020 206b                 k
+00027700: 7562 6574 7970 6520 3d20 766d 2e67 6574  ubetype = vm.get
+00027710: 2827 6b75 6265 7479 7065 272c 2027 6765  ('kubetype', 'ge
+00027720: 6e65 7269 6327 290a 2020 2020 2020 2020  neric').        
+00027730: 2020 2020 2020 2020 6966 2063 7572 7265          if curre
+00027740: 6e74 636c 7573 7465 7220 6973 206e 6f74  ntcluster is not
+00027750: 204e 6f6e 6520 616e 6420 6375 7272 656e   None and curren
+00027760: 7463 6c75 7374 6572 203d 3d20 636c 7573  tcluster == clus
+00027770: 7465 723a 0a20 2020 2020 2020 2020 2020  ter:.           
+00027780: 2020 2020 2020 2020 2069 6620 6b75 6265           if kube
+00027790: 7479 7065 203d 3d20 2767 6b65 273a 0a20  type == 'gke':. 
+000277a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000277b0: 2020 2020 2020 2067 6b65 203d 2054 7275         gke = Tru
+000277c0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+000277d0: 2020 2020 2020 2020 2020 6272 6561 6b0a            break.
 000277e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000277f0: 2020 2020 2061 6b73 203d 2054 7275 650a       aks = True.
-00027800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027810: 2020 2020 2020 2020 6272 6561 6b0a 2020          break.  
-00027820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027830: 2020 632e 6465 6c65 7465 286e 616d 652c    c.delete(name,
-00027840: 2073 6e61 7073 686f 7473 3d54 7275 6529   snapshots=True)
-00027850: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00027860: 2020 2020 2063 6f6d 6d6f 6e2e 6465 6c65       common.dele
-00027870: 7465 5f6c 6173 7476 6d28 6e61 6d65 2c20  te_lastvm(name, 
-00027880: 7365 6c66 2e63 6c69 656e 7429 0a20 2020  self.client).   
-00027890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000278a0: 2073 7563 6365 7373 2866 227b 6e61 6d65   success(f"{name
-000278b0: 7d20 6465 6c65 7465 6420 6f6e 207b 6879  } deleted on {hy
-000278c0: 7065 7276 6973 6f72 7d21 2229 0a20 2020  pervisor}!").   
-000278d0: 2020 2020 2069 6620 7365 6c66 2e74 7970       if self.typ
-000278e0: 6520 3d3d 2027 6b75 6265 7669 7274 273a  e == 'kubevirt':
-000278f0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00027900: 6622 7b63 6c75 7374 6572 7d2d 6170 6922  f"{cluster}-api"
-00027910: 2069 6e20 6b2e 6c69 7374 5f73 6572 7669   in k.list_servi
-00027920: 6365 7328 6b2e 6e61 6d65 7370 6163 6529  ces(k.namespace)
-00027930: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00027940: 2020 6b2e 6465 6c65 7465 5f73 6572 7669    k.delete_servi
-00027950: 6365 2866 227b 636c 7573 7465 727d 2d61  ce(f"{cluster}-a
-00027960: 7069 222c 206b 2e6e 616d 6573 7061 6365  pi", k.namespace
-00027970: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-00027980: 2066 227b 636c 7573 7465 727d 2d69 6e67   f"{cluster}-ing
-00027990: 7265 7373 2220 696e 206b 2e6c 6973 745f  ress" in k.list_
-000279a0: 7365 7276 6963 6573 286b 2e6e 616d 6573  services(k.names
-000279b0: 7061 6365 293a 0a20 2020 2020 2020 2020  pace):.         
-000279c0: 2020 2020 2020 206b 2e64 656c 6574 655f         k.delete_
-000279d0: 7365 7276 6963 6528 6622 7b63 6c75 7374  service(f"{clust
-000279e0: 6572 7d2d 696e 6772 6573 7322 2c20 6b2e  er}-ingress", k.
-000279f0: 6e61 6d65 7370 6163 6529 0a20 2020 2020  namespace).     
-00027a00: 2020 2069 6620 7365 6c66 2e74 7970 6520     if self.type 
-00027a10: 696e 205b 2761 7773 272c 2027 617a 7572  in ['aws', 'azur
-00027a20: 6527 2c20 2767 6370 272c 2027 6962 6d27  e', 'gcp', 'ibm'
-00027a30: 5d20 616e 6420 6e6f 7420 676b 6520 616e  ] and not gke an
-00027a40: 6420 6e6f 7420 656b 7320 616e 6420 6e6f  d not eks and no
-00027a50: 7420 616b 733a 0a20 2020 2020 2020 2020  t aks:.         
-00027a60: 2020 2065 7869 7374 696e 675f 6c62 7320     existing_lbs 
-00027a70: 3d20 5b6c 5b30 5d20 666f 7220 6c20 696e  = [l[0] for l in
-00027a80: 2073 656c 662e 6c69 7374 5f6c 6f61 6462   self.list_loadb
-00027a90: 616c 616e 6365 7273 2829 2069 6620 6c5b  alancers() if l[
-00027aa0: 305d 2069 6e20 5b66 2761 7069 2e7b 636c  0] in [f'api.{cl
-00027ab0: 7573 7465 727d 272c 2066 2761 7070 732e  uster}', f'apps.
-00027ac0: 7b63 6c75 7374 6572 7d27 5d5d 0a20 2020  {cluster}']].   
-00027ad0: 2020 2020 2020 2020 2066 6f72 206c 6220           for lb 
-00027ae0: 696e 2065 7869 7374 696e 675f 6c62 733a  in existing_lbs:
-00027af0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00027b00: 2073 656c 662e 6465 6c65 7465 5f6c 6f61   self.delete_loa
-00027b10: 6462 616c 616e 6365 7228 6c62 2c20 646f  dbalancer(lb, do
-00027b20: 6d61 696e 3d64 6f6d 6169 6e29 0a20 2020  main=domain).   
-00027b30: 2020 2020 2020 2020 2062 7563 6b65 7420           bucket 
-00027b40: 3d20 6622 7b63 6c75 7374 6572 7d2d 7b64  = f"{cluster}-{d
-00027b50: 6f6d 6169 6e7d 220a 2020 2020 2020 2020  omain}".        
-00027b60: 2020 2020 6966 2062 7563 6b65 7420 696e      if bucket in
-00027b70: 2073 656c 662e 6b2e 6c69 7374 5f62 7563   self.k.list_buc
-00027b80: 6b65 7473 2829 3a0a 2020 2020 2020 2020  kets():.        
-00027b90: 2020 2020 2020 2020 7070 7269 6e74 2866          pprint(f
-00027ba0: 2244 656c 6574 696e 6720 6275 636b 6574  "Deleting bucket
-00027bb0: 207b 6275 636b 6574 7d22 290a 2020 2020   {bucket}").    
-00027bc0: 2020 2020 2020 2020 2020 2020 6b2e 6465              k.de
-00027bd0: 6c65 7465 5f62 7563 6b65 7428 6275 636b  lete_bucket(buck
-00027be0: 6574 290a 2020 2020 2020 2020 2020 2020  et).            
-00027bf0: 6966 2073 656c 662e 7479 7065 203d 3d20  if self.type == 
-00027c00: 2761 7773 2720 616e 6420 636c 7573 7465  'aws' and cluste
-00027c10: 7220 696e 206b 2e6c 6973 745f 696e 7374  r in k.list_inst
-00027c20: 616e 6365 5f70 726f 6669 6c65 7328 293a  ance_profiles():
-00027c30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00027c40: 2069 616d 5f72 6f6c 6520 3d20 636c 7573   iam_role = clus
-00027c50: 7465 7264 6174 612e 6765 7428 2772 6f6c  terdata.get('rol
-00027c60: 6527 2c20 636c 7573 7465 7229 0a20 2020  e', cluster).   
-00027c70: 2020 2020 2020 2020 2020 2020 2074 7279               try
-00027c80: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00027c90: 2020 2020 2020 6b2e 6465 6c65 7465 5f69        k.delete_i
-00027ca0: 6e73 7461 6e63 655f 7072 6f66 696c 6528  nstance_profile(
-00027cb0: 636c 7573 7465 722c 2069 616d 5f72 6f6c  cluster, iam_rol
-00027cc0: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
-00027cd0: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
-00027ce0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00027cf0: 6173 730a 2020 2020 2020 2020 2020 2020  ass.            
-00027d00: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-00027d10: 2020 2020 2020 2020 2020 2020 206b 2e64               k.d
-00027d20: 656c 6574 655f 726f 6c65 2869 616d 5f72  elete_role(iam_r
-00027d30: 6f6c 6529 0a20 2020 2020 2020 2020 2020  ole).           
-00027d40: 2020 2020 2065 7863 6570 743a 0a20 2020       except:.   
-00027d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027d60: 2070 6173 730a 2020 2020 2020 2020 656c   pass.        el
-00027d70: 6966 2064 6e73 636c 6965 6e74 2069 7320  if dnsclient is 
-00027d80: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00027d90: 2020 2020 2020 7a20 3d20 4b63 6f6e 6669        z = Kconfi
-00027da0: 6728 636c 6965 6e74 3d64 6e73 636c 6965  g(client=dnsclie
-00027db0: 6e74 292e 6b0a 2020 2020 2020 2020 2020  nt).k.          
-00027dc0: 2020 7a2e 6465 6c65 7465 5f64 6e73 2866    z.delete_dns(f
-00027dd0: 2261 7069 2e7b 636c 7573 7465 727d 222c  "api.{cluster}",
-00027de0: 2064 6f6d 6169 6e29 0a20 2020 2020 2020   domain).       
-00027df0: 2020 2020 207a 2e64 656c 6574 655f 646e       z.delete_dn
-00027e00: 7328 6622 6170 7073 2e7b 636c 7573 7465  s(f"apps.{cluste
-00027e10: 727d 222c 2064 6f6d 6169 6e29 0a20 2020  r}", domain).   
-00027e20: 2020 2020 2069 6620 6879 7065 7273 6869       if hypershi
-00027e30: 6674 3a0a 2020 2020 2020 2020 2020 2020  ft:.            
-00027e40: 6b75 6265 636f 6e66 6967 6d67 6d74 203d  kubeconfigmgmt =
-00027e50: 2066 227b 636c 7573 7465 7264 6972 7d2f   f"{clusterdir}/
-00027e60: 6b75 6265 636f 6e66 6967 2e6d 676d 7422  kubeconfig.mgmt"
-00027e70: 0a20 2020 2020 2020 2020 2020 2063 616c  .            cal
-00027e80: 6c28 6627 4b55 4245 434f 4e46 4947 3d7b  l(f'KUBECONFIG={
-00027e90: 6b75 6265 636f 6e66 6967 6d67 6d74 7d20  kubeconfigmgmt} 
-00027ea0: 6f63 2064 656c 6574 6520 2d66 207b 636c  oc delete -f {cl
-00027eb0: 7573 7465 7264 6972 7d2f 6175 746f 6170  usterdir}/autoap
-00027ec0: 7072 6f76 6572 6372 6f6e 2e79 6d6c 272c  provercron.yml',
-00027ed0: 2073 6865 6c6c 3d54 7275 6529 0a20 2020   shell=True).   
-00027ee0: 2020 2020 2020 2020 2063 616c 6c28 6627           call(f'
-00027ef0: 4b55 4245 434f 4e46 4947 3d7b 6b75 6265  KUBECONFIG={kube
-00027f00: 636f 6e66 6967 6d67 6d74 7d20 6f63 2064  configmgmt} oc d
-00027f10: 656c 6574 6520 2d66 207b 636c 7573 7465  elete -f {cluste
-00027f20: 7264 6972 7d2f 6e6f 6465 706f 6f6c 2e79  rdir}/nodepool.y
-00027f30: 616d 6c27 2c20 7368 656c 6c3d 5472 7565  aml', shell=True
-00027f40: 290a 2020 2020 2020 2020 2020 2020 6361  ).            ca
-00027f50: 6c6c 2866 274b 5542 4543 4f4e 4649 473d  ll(f'KUBECONFIG=
-00027f60: 7b6b 7562 6563 6f6e 6669 676d 676d 747d  {kubeconfigmgmt}
-00027f70: 206f 6320 6465 6c65 7465 202d 6620 7b63   oc delete -f {c
-00027f80: 6c75 7374 6572 6469 727d 2f68 6f73 7465  lusterdir}/hoste
-00027f90: 6463 6c75 7374 6572 2e79 616d 6c27 2c20  dcluster.yaml', 
-00027fa0: 7368 656c 6c3d 5472 7565 290a 2020 2020  shell=True).    
-00027fb0: 2020 2020 2020 2020 6966 206e 6f74 2061          if not a
-00027fc0: 7373 6973 7465 6420 616e 6420 2827 6261  ssisted and ('ba
-00027fd0: 7265 6d65 7461 6c5f 6973 6f27 2069 6e20  remetal_iso' in 
-00027fe0: 636c 7573 7465 7264 6174 6120 6f72 2027  clusterdata or '
-00027ff0: 6261 7265 6d65 7461 6c5f 686f 7374 7327  baremetal_hosts'
-00028000: 2069 6e20 636c 7573 7465 7264 6174 6129   in clusterdata)
-00028010: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00028020: 2020 6361 6c6c 2866 274b 5542 4543 4f4e    call(f'KUBECON
-00028030: 4649 473d 7b6b 7562 6563 6f6e 6669 676d  FIG={kubeconfigm
-00028040: 676d 747d 206f 6320 2d6e 2064 6566 6175  gmt} oc -n defau
-00028050: 6c74 2064 656c 6574 6520 616c 6c20 2d6c  lt delete all -l
-00028060: 2061 7070 3d68 7474 7064 2d6b 636c 6927   app=httpd-kcli'
-00028070: 2c20 7368 656c 6c3d 5472 7565 290a 2020  , shell=True).  
-00028080: 2020 2020 2020 2020 2020 2020 2020 6361                ca
-00028090: 6c6c 2866 274b 5542 4543 4f4e 4649 473d  ll(f'KUBECONFIG=
-000280a0: 7b6b 7562 6563 6f6e 6669 676d 676d 747d  {kubeconfigmgmt}
-000280b0: 206f 6320 2d6e 2064 6566 6175 6c74 2064   oc -n default d
-000280c0: 656c 6574 6520 7076 6320 6874 7470 642d  elete pvc httpd-
-000280d0: 6b63 6c69 2d70 7663 272c 2073 6865 6c6c  kcli-pvc', shell
-000280e0: 3d54 7275 6529 0a20 2020 2020 2020 2069  =True).        i
-000280f0: 6620 676b 653a 0a20 2020 2020 2020 2020  f gke:.         
-00028100: 2020 2067 6370 636c 6965 6e74 203d 204e     gcpclient = N
-00028110: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
-00028120: 6966 2027 636c 6965 6e74 2720 696e 2063  if 'client' in c
-00028130: 6c75 7374 6572 6461 7461 3a0a 2020 2020  lusterdata:.    
-00028140: 2020 2020 2020 2020 2020 2020 6763 7063              gcpc
-00028150: 6c69 656e 7420 3d20 636c 7573 7465 7264  lient = clusterd
-00028160: 6174 615b 2763 6c69 656e 7427 5d0a 2020  ata['client'].  
-00028170: 2020 2020 2020 2020 2020 656c 6966 2073            elif s
-00028180: 656c 662e 7479 7065 203d 3d20 2767 6370  elf.type == 'gcp
-00028190: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
-000281a0: 2020 2067 6370 636c 6965 6e74 203d 2073     gcpclient = s
-000281b0: 656c 662e 636c 6965 6e74 0a20 2020 2020  elf.client.     
-000281c0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-000281d0: 2020 2020 2020 2020 2020 2020 206d 7367               msg
-000281e0: 203d 2022 4465 6c65 7469 6e67 2067 6b65   = "Deleting gke
-000281f0: 2063 6c75 7374 6572 2072 6571 7569 7265   cluster require
-00028200: 7320 746f 2069 6e73 7461 6e74 6961 7465  s to instantiate
-00028210: 2067 6370 2070 726f 7669 6465 7222 0a20   gcp provider". 
-00028220: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00028230: 7272 6f72 286d 7367 290a 2020 2020 2020  rror(msg).      
-00028240: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00028250: 207b 2772 6573 756c 7427 3a20 2766 6169   {'result': 'fai
-00028260: 6c75 7265 272c 2027 7265 6173 6f6e 273a  lure', 'reason':
-00028270: 206d 7367 7d0a 2020 2020 2020 2020 2020   msg}.          
-00028280: 2020 6672 6f6d 206b 7669 7274 2e63 6c75    from kvirt.clu
-00028290: 7374 6572 2069 6d70 6f72 7420 676b 650a  ster import gke.
-000282a0: 2020 2020 2020 2020 2020 2020 6375 7272              curr
-000282b0: 656e 7463 6f6e 6669 6720 3d20 4b63 6f6e  entconfig = Kcon
-000282c0: 6669 6728 636c 6965 6e74 3d67 6370 636c  fig(client=gcpcl
-000282d0: 6965 6e74 292e 6b20 6966 2067 6370 636c  ient).k if gcpcl
-000282e0: 6965 6e74 2021 3d20 7365 6c66 2e63 6c69  ient != self.cli
-000282f0: 656e 7420 656c 7365 2073 656c 660a 2020  ent else self.  
-00028300: 2020 2020 2020 2020 2020 7a6f 6e61 6c20            zonal 
-00028310: 3d20 636c 7573 7465 7264 6174 612e 6765  = clusterdata.ge
-00028320: 7428 277a 6f6e 616c 272c 2054 7275 6529  t('zonal', True)
-00028330: 0a20 2020 2020 2020 2020 2020 2067 6b65  .            gke
-00028340: 2e64 656c 6574 6528 6375 7272 656e 7463  .delete(currentc
-00028350: 6f6e 6669 672c 2063 6c75 7374 6572 2c20  onfig, cluster, 
-00028360: 7a6f 6e61 6c29 0a20 2020 2020 2020 2065  zonal).        e
-00028370: 6c69 6620 656b 733a 0a20 2020 2020 2020  lif eks:.       
-00028380: 2020 2020 2065 6b73 636c 6965 6e74 203d       eksclient =
-00028390: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
-000283a0: 2020 6966 2027 636c 6965 6e74 2720 696e    if 'client' in
-000283b0: 2063 6c75 7374 6572 6461 7461 3a0a 2020   clusterdata:.  
-000283c0: 2020 2020 2020 2020 2020 2020 2020 656b                ek
-000283d0: 7363 6c69 656e 7420 3d20 636c 7573 7465  sclient = cluste
-000283e0: 7264 6174 615b 2763 6c69 656e 7427 5d0a  rdata['client'].
-000283f0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00028400: 2073 656c 662e 7479 7065 203d 3d20 2761   self.type == 'a
-00028410: 7773 273a 0a20 2020 2020 2020 2020 2020  ws':.           
-00028420: 2020 2020 2065 6b73 636c 6965 6e74 203d       eksclient =
-00028430: 2073 656c 662e 636c 6965 6e74 0a20 2020   self.client.   
-00028440: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00028450: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-00028460: 7367 203d 2022 4465 6c65 7469 6e67 2065  sg = "Deleting e
-00028470: 6b73 2063 6c75 7374 6572 2072 6571 7569  ks cluster requi
-00028480: 7265 7320 746f 2069 6e73 7461 6e74 6961  res to instantia
-00028490: 7465 2061 7773 2070 726f 7669 6465 7222  te aws provider"
-000284a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000284b0: 2065 7272 6f72 286d 7367 290a 2020 2020   error(msg).    
-000284c0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-000284d0: 726e 207b 2772 6573 756c 7427 3a20 2766  rn {'result': 'f
-000284e0: 6169 6c75 7265 272c 2027 7265 6173 6f6e  ailure', 'reason
-000284f0: 273a 206d 7367 7d0a 2020 2020 2020 2020  ': msg}.        
-00028500: 2020 2020 6672 6f6d 206b 7669 7274 2e63      from kvirt.c
-00028510: 6c75 7374 6572 2069 6d70 6f72 7420 656b  luster import ek
-00028520: 730a 2020 2020 2020 2020 2020 2020 6375  s.            cu
-00028530: 7272 656e 7463 6f6e 6669 6720 3d20 4b63  rrentconfig = Kc
-00028540: 6f6e 6669 6728 636c 6965 6e74 3d65 6b73  onfig(client=eks
-00028550: 636c 6965 6e74 292e 6b20 6966 2065 6b73  client).k if eks
-00028560: 636c 6965 6e74 2021 3d20 7365 6c66 2e63  client != self.c
-00028570: 6c69 656e 7420 656c 7365 2073 656c 660a  lient else self.
-00028580: 2020 2020 2020 2020 2020 2020 656b 732e              eks.
-00028590: 6465 6c65 7465 2863 7572 7265 6e74 636f  delete(currentco
-000285a0: 6e66 6967 2c20 636c 7573 7465 7229 0a20  nfig, cluster). 
-000285b0: 2020 2020 2020 2065 6c69 6620 616b 733a         elif aks:
-000285c0: 0a20 2020 2020 2020 2020 2020 2061 6b73  .            aks
-000285d0: 636c 6965 6e74 203d 204e 6f6e 650a 2020  client = None.  
-000285e0: 2020 2020 2020 2020 2020 6966 2027 636c            if 'cl
-000285f0: 6965 6e74 2720 696e 2063 6c75 7374 6572  ient' in cluster
-00028600: 6461 7461 3a0a 2020 2020 2020 2020 2020  data:.          
-00028610: 2020 2020 2020 616b 7363 6c69 656e 7420        aksclient 
-00028620: 3d20 636c 7573 7465 7264 6174 615b 2763  = clusterdata['c
-00028630: 6c69 656e 7427 5d0a 2020 2020 2020 2020  lient'].        
-00028640: 2020 2020 656c 6966 2073 656c 662e 7479      elif self.ty
-00028650: 7065 203d 3d20 2761 7a75 7265 273a 0a20  pe == 'azure':. 
-00028660: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-00028670: 6b73 636c 6965 6e74 203d 2073 656c 662e  ksclient = self.
-00028680: 636c 6965 6e74 0a20 2020 2020 2020 2020  client.         
-00028690: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000286a0: 2020 2020 2020 2020 206d 7367 203d 2022           msg = "
-000286b0: 4465 6c65 7469 6e67 2061 6b73 2063 6c75  Deleting aks clu
-000286c0: 7374 6572 2072 6571 7569 7265 7320 746f  ster requires to
-000286d0: 2069 6e73 7461 6e74 6961 7465 2061 7a75   instantiate azu
-000286e0: 7265 2070 726f 7669 6465 7222 0a20 2020  re provider".   
-000286f0: 2020 2020 2020 2020 2020 2020 2065 7272               err
-00028700: 6f72 286d 7367 290a 2020 2020 2020 2020  or(msg).        
-00028710: 2020 2020 2020 2020 7265 7475 726e 207b          return {
-00028720: 2772 6573 756c 7427 3a20 2766 6169 6c75  'result': 'failu
-00028730: 7265 272c 2027 7265 6173 6f6e 273a 206d  re', 'reason': m
-00028740: 7367 7d0a 2020 2020 2020 2020 2020 2020  sg}.            
-00028750: 6672 6f6d 206b 7669 7274 2e63 6c75 7374  from kvirt.clust
-00028760: 6572 2069 6d70 6f72 7420 616b 730a 2020  er import aks.  
-00028770: 2020 2020 2020 2020 2020 6375 7272 656e            curren
-00028780: 7463 6f6e 6669 6720 3d20 4b63 6f6e 6669  tconfig = Kconfi
-00028790: 6728 636c 6965 6e74 3d61 6b73 636c 6965  g(client=aksclie
-000287a0: 6e74 292e 6b20 6966 2061 6b73 636c 6965  nt).k if aksclie
-000287b0: 6e74 2021 3d20 7365 6c66 2e63 6c69 656e  nt != self.clien
-000287c0: 7420 656c 7365 2073 656c 660a 2020 2020  t else self.    
-000287d0: 2020 2020 2020 2020 616b 732e 6465 6c65          aks.dele
-000287e0: 7465 2863 7572 7265 6e74 636f 6e66 6967  te(currentconfig
-000287f0: 2c20 636c 7573 7465 7229 0a20 2020 2020  , cluster).     
-00028800: 2020 2066 6f72 2063 6f6e 6670 6f6f 6c20     for confpool 
-00028810: 696e 2073 656c 662e 636f 6e66 706f 6f6c  in self.confpool
-00028820: 733a 0a20 2020 2020 2020 2020 2020 2069  s:.            i
-00028830: 705f 7265 7365 7276 6174 696f 6e73 203d  p_reservations =
-00028840: 2073 656c 662e 636f 6e66 706f 6f6c 735b   self.confpools[
-00028850: 636f 6e66 706f 6f6c 5d2e 6765 7428 2769  confpool].get('i
-00028860: 705f 7265 7365 7276 6174 696f 6e73 272c  p_reservations',
-00028870: 207b 7d29 0a20 2020 2020 2020 2020 2020   {}).           
-00028880: 2069 6620 636c 7573 7465 7220 696e 2069   if cluster in i
-00028890: 705f 7265 7365 7276 6174 696f 6e73 3a0a  p_reservations:.
-000288a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000288b0: 6465 6c20 6970 5f72 6573 6572 7661 7469  del ip_reservati
-000288c0: 6f6e 735b 636c 7573 7465 725d 0a20 2020  ons[cluster].   
-000288d0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-000288e0: 662e 7570 6461 7465 5f63 6f6e 6670 6f6f  f.update_confpoo
-000288f0: 6c28 636f 6e66 706f 6f6c 2c20 7b27 6970  l(confpool, {'ip
-00028900: 5f72 6573 6572 7661 7469 6f6e 7327 3a20  _reservations': 
-00028910: 6970 5f72 6573 6572 7661 7469 6f6e 737d  ip_reservations}
-00028920: 290a 2020 2020 2020 2020 2020 2020 6e61  ).            na
-00028930: 6d65 5f72 6573 6572 7661 7469 6f6e 7320  me_reservations 
-00028940: 3d20 7365 6c66 2e63 6f6e 6670 6f6f 6c73  = self.confpools
-00028950: 5b63 6f6e 6670 6f6f 6c5d 2e67 6574 2827  [confpool].get('
-00028960: 6e61 6d65 5f72 6573 6572 7661 7469 6f6e  name_reservation
-00028970: 7327 2c20 5b5d 290a 2020 2020 2020 2020  s', []).        
-00028980: 2020 2020 6966 2063 6c75 7374 6572 2069      if cluster i
-00028990: 6e20 6e61 6d65 5f72 6573 6572 7661 7469  n name_reservati
-000289a0: 6f6e 733a 0a20 2020 2020 2020 2020 2020  ons:.           
-000289b0: 2020 2020 206e 616d 655f 7265 7365 7276       name_reserv
-000289c0: 6174 696f 6e73 2e72 656d 6f76 6528 636c  ations.remove(cl
-000289d0: 7573 7465 7229 0a20 2020 2020 2020 2020  uster).         
-000289e0: 2020 2020 2020 2073 656c 662e 7570 6461         self.upda
-000289f0: 7465 5f63 6f6e 6670 6f6f 6c28 636f 6e66  te_confpool(conf
-00028a00: 706f 6f6c 2c20 7b27 6e61 6d65 5f72 6573  pool, {'name_res
-00028a10: 6572 7661 7469 6f6e 7327 3a20 6e61 6d65  ervations': name
-00028a20: 5f72 6573 6572 7661 7469 6f6e 737d 290a  _reservations}).
-00028a30: 2020 2020 2020 2020 2020 2020 636c 7573              clus
-00028a40: 7465 725f 6261 7265 6d65 7461 6c5f 7265  ter_baremetal_re
-00028a50: 7365 7276 6174 696f 6e73 203d 2073 656c  servations = sel
-00028a60: 662e 636f 6e66 706f 6f6c 735b 636f 6e66  f.confpools[conf
-00028a70: 706f 6f6c 5d2e 6765 7428 2763 6c75 7374  pool].get('clust
-00028a80: 6572 5f62 6172 656d 6574 616c 5f72 6573  er_baremetal_res
-00028a90: 6572 7661 7469 6f6e 7327 2c20 7b7d 290a  ervations', {}).
-00028aa0: 2020 2020 2020 2020 2020 2020 6966 2063              if c
-00028ab0: 6c75 7374 6572 2069 6e20 636c 7573 7465  luster in cluste
-00028ac0: 725f 6261 7265 6d65 7461 6c5f 7265 7365  r_baremetal_rese
-00028ad0: 7276 6174 696f 6e73 3a0a 2020 2020 2020  rvations:.      
-00028ae0: 2020 2020 2020 2020 2020 6465 6c20 636c            del cl
-00028af0: 7573 7465 725f 6261 7265 6d65 7461 6c5f  uster_baremetal_
-00028b00: 7265 7365 7276 6174 696f 6e73 5b63 6c75  reservations[clu
-00028b10: 7374 6572 5d0a 2020 2020 2020 2020 2020  ster].          
-00028b20: 2020 2020 2020 7365 6c66 2e75 7064 6174        self.updat
-00028b30: 655f 636f 6e66 706f 6f6c 2863 6f6e 6670  e_confpool(confp
-00028b40: 6f6f 6c2c 207b 2763 6c75 7374 6572 5f62  ool, {'cluster_b
-00028b50: 6172 656d 6574 616c 5f72 6573 6572 7661  aremetal_reserva
-00028b60: 7469 6f6e 7327 3a20 636c 7573 7465 725f  tions': cluster_
-00028b70: 6261 7265 6d65 7461 6c5f 7265 7365 7276  baremetal_reserv
-00028b80: 6174 696f 6e73 7d29 0a20 2020 2020 2020  ations}).       
-00028b90: 2069 6620 6f73 2e70 6174 682e 6578 6973   if os.path.exis
-00028ba0: 7473 2863 6c75 7374 6572 6469 7229 3a0a  ts(clusterdir):.
-00028bb0: 2020 2020 2020 2020 2020 2020 7070 7269              ppri
-00028bc0: 6e74 2866 2244 656c 6574 696e 6720 6469  nt(f"Deleting di
-00028bd0: 7265 6374 6f72 7920 7b63 6c75 7374 6572  rectory {cluster
-00028be0: 6469 727d 2229 0a20 2020 2020 2020 2020  dir}").         
-00028bf0: 2020 2072 6d74 7265 6528 636c 7573 7465     rmtree(cluste
-00028c00: 7264 6972 290a 2020 2020 2020 2020 7265  rdir).        re
-00028c10: 7475 726e 207b 2772 6573 756c 7427 3a20  turn {'result': 
-00028c20: 2773 7563 6365 7373 277d 0a0a 2020 2020  'success'}..    
-00028c30: 6465 6620 7363 616c 655f 6b75 6265 2873  def scale_kube(s
-00028c40: 656c 662c 2063 6c75 7374 6572 2c20 6b75  elf, cluster, ku
-00028c50: 6265 7479 7065 2c20 6f76 6572 7269 6465  betype, override
-00028c60: 733d 7b7d 293a 0a20 2020 2020 2020 2069  s={}):.        i
-00028c70: 6620 6b75 6265 7479 7065 203d 3d20 2767  f kubetype == 'g
-00028c80: 656e 6572 6963 273a 0a20 2020 2020 2020  eneric':.       
-00028c90: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
-00028ca0: 6c66 2e73 6361 6c65 5f6b 7562 655f 6765  lf.scale_kube_ge
-00028cb0: 6e65 7269 6328 636c 7573 7465 722c 206f  neric(cluster, o
-00028cc0: 7665 7272 6964 6573 3d6f 7665 7272 6964  verrides=overrid
-00028cd0: 6573 290a 2020 2020 2020 2020 656c 6966  es).        elif
-00028ce0: 206b 7562 6574 7970 6520 3d3d 2027 6b33   kubetype == 'k3
-00028cf0: 7327 3a0a 2020 2020 2020 2020 2020 2020  s':.            
-00028d00: 7265 7375 6c74 203d 2073 656c 662e 7363  result = self.sc
-00028d10: 616c 655f 6b75 6265 5f6b 3373 2863 6c75  ale_kube_k3s(clu
-00028d20: 7374 6572 2c20 6f76 6572 7269 6465 733d  ster, overrides=
-00028d30: 6f76 6572 7269 6465 7329 0a20 2020 2020  overrides).     
-00028d40: 2020 2065 6c69 6620 6b75 6265 7479 7065     elif kubetype
-00028d50: 203d 3d20 276f 7065 6e73 6869 6674 273a   == 'openshift':
-00028d60: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
-00028d70: 756c 7420 3d20 7365 6c66 2e73 6361 6c65  ult = self.scale
-00028d80: 5f6b 7562 655f 6f70 656e 7368 6966 7428  _kube_openshift(
-00028d90: 636c 7573 7465 722c 206f 7665 7272 6964  cluster, overrid
-00028da0: 6573 3d6f 7665 7272 6964 6573 290a 2020  es=overrides).  
-00028db0: 2020 2020 2020 656c 6966 206b 7562 6574        elif kubet
-00028dc0: 7970 6520 3d3d 2027 6879 7065 7273 6869  ype == 'hypershi
-00028dd0: 6674 273a 0a20 2020 2020 2020 2020 2020  ft':.           
-00028de0: 2072 6573 756c 7420 3d20 7365 6c66 2e73   result = self.s
-00028df0: 6361 6c65 5f6b 7562 655f 6879 7065 7273  cale_kube_hypers
-00028e00: 6869 6674 2863 6c75 7374 6572 2c20 6f76  hift(cluster, ov
-00028e10: 6572 7269 6465 733d 6f76 6572 7269 6465  errides=override
-00028e20: 7329 0a20 2020 2020 2020 2065 6c69 6620  s).        elif 
-00028e30: 6b75 6265 7479 7065 203d 3d20 2767 6b65  kubetype == 'gke
-00028e40: 273a 0a20 2020 2020 2020 2020 2020 2072  ':.            r
-00028e50: 6573 756c 7420 3d20 7365 6c66 2e73 6361  esult = self.sca
-00028e60: 6c65 5f6b 7562 655f 676b 6528 636c 7573  le_kube_gke(clus
-00028e70: 7465 722c 206f 7665 7272 6964 6573 3d6f  ter, overrides=o
-00028e80: 7665 7272 6964 6573 290a 2020 2020 2020  verrides).      
-00028e90: 2020 656c 6966 206b 7562 6574 7970 6520    elif kubetype 
-00028ea0: 3d3d 2027 656b 7327 3a0a 2020 2020 2020  == 'eks':.      
-00028eb0: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
-00028ec0: 656c 662e 7363 616c 655f 6b75 6265 5f65  elf.scale_kube_e
-00028ed0: 6b73 2863 6c75 7374 6572 2c20 6f76 6572  ks(cluster, over
-00028ee0: 7269 6465 733d 6f76 6572 7269 6465 7329  rides=overrides)
-00028ef0: 0a20 2020 2020 2020 2065 6c69 6620 6b75  .        elif ku
-00028f00: 6265 7479 7065 203d 3d20 2761 6b73 273a  betype == 'aks':
-00028f10: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
-00028f20: 756c 7420 3d20 7365 6c66 2e73 6361 6c65  ult = self.scale
-00028f30: 5f6b 7562 655f 616b 7328 636c 7573 7465  _kube_aks(cluste
-00028f40: 722c 206f 7665 7272 6964 6573 3d6f 7665  r, overrides=ove
-00028f50: 7272 6964 6573 290a 2020 2020 2020 2020  rrides).        
-00028f60: 7265 7475 726e 2072 6573 756c 740a 0a20  return result.. 
-00028f70: 2020 2064 6566 2073 6361 6c65 5f6b 7562     def scale_kub
-00028f80: 655f 616b 7328 7365 6c66 2c20 636c 7573  e_aks(self, clus
-00028f90: 7465 722c 206f 7665 7272 6964 6573 3d7b  ter, overrides={
-00028fa0: 7d29 3a0a 2020 2020 2020 2020 6672 6f6d  }):.        from
-00028fb0: 206b 7669 7274 2e63 6c75 7374 6572 2069   kvirt.cluster i
-00028fc0: 6d70 6f72 7420 616b 730a 2020 2020 2020  mport aks.      
-00028fd0: 2020 7265 7475 726e 2061 6b73 2e73 6361    return aks.sca
-00028fe0: 6c65 2873 656c 662c 2063 6c75 7374 6572  le(self, cluster
-00028ff0: 2c20 6f76 6572 7269 6465 7329 0a0a 2020  , overrides)..  
-00029000: 2020 6465 6620 7363 616c 655f 6b75 6265    def scale_kube
-00029010: 5f65 6b73 2873 656c 662c 2063 6c75 7374  _eks(self, clust
-00029020: 6572 2c20 6f76 6572 7269 6465 733d 7b7d  er, overrides={}
-00029030: 293a 0a20 2020 2020 2020 2066 726f 6d20  ):.        from 
-00029040: 6b76 6972 742e 636c 7573 7465 7220 696d  kvirt.cluster im
-00029050: 706f 7274 2065 6b73 0a20 2020 2020 2020  port eks.       
-00029060: 2072 6574 7572 6e20 656b 732e 7363 616c   return eks.scal
-00029070: 6528 7365 6c66 2c20 636c 7573 7465 722c  e(self, cluster,
-00029080: 206f 7665 7272 6964 6573 290a 0a20 2020   overrides)..   
-00029090: 2064 6566 2073 6361 6c65 5f6b 7562 655f   def scale_kube_
-000290a0: 6765 6e65 7269 6328 7365 6c66 2c20 636c  generic(self, cl
-000290b0: 7573 7465 722c 206f 7665 7272 6964 6573  uster, overrides
-000290c0: 3d7b 7d29 3a0a 2020 2020 2020 2020 706c  ={}):.        pl
-000290d0: 616e 6469 7220 3d20 6f73 2e70 6174 682e  andir = os.path.
-000290e0: 6469 726e 616d 6528 6b75 6265 6164 6d2e  dirname(kubeadm.
-000290f0: 6372 6561 7465 2e5f 5f63 6f64 655f 5f2e  create.__code__.
-00029100: 636f 5f66 696c 656e 616d 6529 0a20 2020  co_filename).   
-00029110: 2020 2020 2072 6574 7572 6e20 6b75 6265       return kube
-00029120: 6164 6d2e 7363 616c 6528 7365 6c66 2c20  adm.scale(self, 
-00029130: 706c 616e 6469 722c 2063 6c75 7374 6572  plandir, cluster
-00029140: 2c20 6f76 6572 7269 6465 7329 0a0a 2020  , overrides)..  
-00029150: 2020 6465 6620 7363 616c 655f 6b75 6265    def scale_kube
-00029160: 5f67 6b65 2873 656c 662c 2063 6c75 7374  _gke(self, clust
-00029170: 6572 2c20 6f76 6572 7269 6465 733d 7b7d  er, overrides={}
-00029180: 293a 0a20 2020 2020 2020 2066 726f 6d20  ):.        from 
-00029190: 6b76 6972 742e 636c 7573 7465 7220 696d  kvirt.cluster im
-000291a0: 706f 7274 2067 6b65 0a20 2020 2020 2020  port gke.       
-000291b0: 2072 6574 7572 6e20 676b 652e 7363 616c   return gke.scal
-000291c0: 6528 7365 6c66 2c20 636c 7573 7465 722c  e(self, cluster,
-000291d0: 206f 7665 7272 6964 6573 290a 0a20 2020   overrides)..   
-000291e0: 2064 6566 2073 6361 6c65 5f6b 7562 655f   def scale_kube_
-000291f0: 6879 7065 7273 6869 6674 2873 656c 662c  hypershift(self,
-00029200: 2063 6c75 7374 6572 2c20 6f76 6572 7269   cluster, overri
-00029210: 6465 733d 7b7d 293a 0a20 2020 2020 2020  des={}):.       
-00029220: 2070 6c61 6e64 6972 203d 206f 732e 7061   plandir = os.pa
-00029230: 7468 2e64 6972 6e61 6d65 2868 7970 6572  th.dirname(hyper
-00029240: 7368 6966 742e 6372 6561 7465 2e5f 5f63  shift.create.__c
-00029250: 6f64 655f 5f2e 636f 5f66 696c 656e 616d  ode__.co_filenam
-00029260: 6529 0a20 2020 2020 2020 2072 6574 7572  e).        retur
-00029270: 6e20 6879 7065 7273 6869 6674 2e73 6361  n hypershift.sca
-00029280: 6c65 2873 656c 662c 2070 6c61 6e64 6972  le(self, plandir
-00029290: 2c20 636c 7573 7465 722c 206f 7665 7272  , cluster, overr
-000292a0: 6964 6573 290a 0a20 2020 2064 6566 2073  ides)..    def s
-000292b0: 6361 6c65 5f6b 7562 655f 6b33 7328 7365  cale_kube_k3s(se
-000292c0: 6c66 2c20 636c 7573 7465 722c 206f 7665  lf, cluster, ove
-000292d0: 7272 6964 6573 3d7b 7d29 3a0a 2020 2020  rrides={}):.    
-000292e0: 2020 2020 706c 616e 6469 7220 3d20 6f73      plandir = os
-000292f0: 2e70 6174 682e 6469 726e 616d 6528 6b33  .path.dirname(k3
-00029300: 732e 6372 6561 7465 2e5f 5f63 6f64 655f  s.create.__code_
-00029310: 5f2e 636f 5f66 696c 656e 616d 6529 0a20  _.co_filename). 
-00029320: 2020 2020 2020 2072 6574 7572 6e20 6b33         return k3
-00029330: 732e 7363 616c 6528 7365 6c66 2c20 706c  s.scale(self, pl
-00029340: 616e 6469 722c 2063 6c75 7374 6572 2c20  andir, cluster, 
-00029350: 6f76 6572 7269 6465 7329 0a0a 2020 2020  overrides)..    
-00029360: 6465 6620 7363 616c 655f 6b75 6265 5f6f  def scale_kube_o
-00029370: 7065 6e73 6869 6674 2873 656c 662c 2063  penshift(self, c
-00029380: 6c75 7374 6572 2c20 6f76 6572 7269 6465  luster, override
-00029390: 733d 7b7d 293a 0a20 2020 2020 2020 2070  s={}):.        p
-000293a0: 6c61 6e64 6972 203d 206f 732e 7061 7468  landir = os.path
-000293b0: 2e64 6972 6e61 6d65 286f 7065 6e73 6869  .dirname(openshi
-000293c0: 6674 2e63 7265 6174 652e 5f5f 636f 6465  ft.create.__code
-000293d0: 5f5f 2e63 6f5f 6669 6c65 6e61 6d65 290a  __.co_filename).
-000293e0: 2020 2020 2020 2020 7265 7475 726e 206f          return o
-000293f0: 7065 6e73 6869 6674 2e73 6361 6c65 2873  penshift.scale(s
-00029400: 656c 662c 2070 6c61 6e64 6972 2c20 636c  elf, plandir, cl
-00029410: 7573 7465 722c 206f 7665 7272 6964 6573  uster, overrides
-00029420: 290a 0a20 2020 2064 6566 2075 7064 6174  )..    def updat
-00029430: 655f 6b75 6265 2873 656c 662c 2063 6c75  e_kube(self, clu
-00029440: 7374 6572 2c20 5f74 7970 652c 206f 7665  ster, _type, ove
-00029450: 7272 6964 6573 3d7b 7d2c 2070 6c61 6e3d  rrides={}, plan=
-00029460: 4e6f 6e65 293a 0a20 2020 2020 2020 206f  None):.        o
-00029470: 7665 7272 6964 6573 5b27 736b 6970 5f66  verrides['skip_f
-00029480: 696c 6573 5f72 656d 6564 6961 7469 6f6e  iles_remediation
-00029490: 275d 203d 2054 7275 650a 2020 2020 2020  '] = True.      
-000294a0: 2020 6f76 6572 7269 6465 735b 2773 6361    overrides['sca
-000294b0: 6c65 275d 203d 2054 7275 650a 2020 2020  le'] = True.    
-000294c0: 2020 2020 636c 7573 7465 7264 6972 203d      clusterdir =
-000294d0: 206f 732e 7061 7468 2e65 7870 616e 6475   os.path.expandu
-000294e0: 7365 7228 6622 7e2f 2e6b 636c 692f 636c  ser(f"~/.kcli/cl
-000294f0: 7573 7465 7273 2f7b 636c 7573 7465 727d  usters/{cluster}
-00029500: 2229 0a20 2020 2020 2020 2070 6c61 6e76  ").        planv
-00029510: 6d73 203d 205b 5d0a 2020 2020 2020 2020  ms = [].        
-00029520: 6966 2070 6c61 6e20 6973 204e 6f6e 653a  if plan is None:
-00029530: 0a20 2020 2020 2020 2020 2020 2070 6c61  .            pla
-00029540: 6e20 3d20 636c 7573 7465 720a 2020 2020  n = cluster.    
-00029550: 2020 2020 6966 205f 7479 7065 203d 3d20      if _type == 
-00029560: 2761 6b73 273a 0a20 2020 2020 2020 2020  'aks':.         
-00029570: 2020 2073 656c 662e 7363 616c 655f 6b75     self.scale_ku
-00029580: 6265 5f61 6b73 2863 6c75 7374 6572 2c20  be_aks(cluster, 
-00029590: 6f76 6572 7269 6465 733d 6f76 6572 7269  overrides=overri
-000295a0: 6465 7329 0a20 2020 2020 2020 2020 2020  des).           
-000295b0: 2072 6574 7572 6e0a 2020 2020 2020 2020   return.        
-000295c0: 6966 205f 7479 7065 203d 3d20 2765 6b73  if _type == 'eks
-000295d0: 273a 0a20 2020 2020 2020 2020 2020 2073  ':.            s
-000295e0: 656c 662e 7363 616c 655f 6b75 6265 5f65  elf.scale_kube_e
-000295f0: 6b73 2863 6c75 7374 6572 2c20 6f76 6572  ks(cluster, over
-00029600: 7269 6465 733d 6f76 6572 7269 6465 7329  rides=overrides)
-00029610: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00029620: 7572 6e0a 2020 2020 2020 2020 6966 205f  urn.        if _
-00029630: 7479 7065 203d 3d20 2767 6b65 273a 0a20  type == 'gke':. 
-00029640: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00029650: 7363 616c 655f 6b75 6265 5f67 6b65 2863  scale_kube_gke(c
-00029660: 6c75 7374 6572 2c20 6f76 6572 7269 6465  luster, override
-00029670: 733d 6f76 6572 7269 6465 7329 0a20 2020  s=overrides).   
-00029680: 2020 2020 2020 2020 2072 6574 7572 6e0a           return.
-00029690: 2020 2020 2020 2020 6966 205f 7479 7065          if _type
-000296a0: 203d 3d20 2767 656e 6572 6963 273a 0a20   == 'generic':. 
-000296b0: 2020 2020 2020 2020 2020 2072 6f6c 6573             roles
-000296c0: 203d 205b 2763 746c 706c 616e 6573 272c   = ['ctlplanes',
-000296d0: 2027 776f 726b 6572 7327 5d0a 2020 2020   'workers'].    
-000296e0: 2020 2020 2020 2020 706c 616e 6469 7220          plandir 
-000296f0: 3d20 6f73 2e70 6174 682e 6469 726e 616d  = os.path.dirnam
-00029700: 6528 6b75 6265 6164 6d2e 6372 6561 7465  e(kubeadm.create
-00029710: 2e5f 5f63 6f64 655f 5f2e 636f 5f66 696c  .__code__.co_fil
-00029720: 656e 616d 6529 0a20 2020 2020 2020 2065  ename).        e
-00029730: 6c69 6620 5f74 7970 6520 3d3d 2027 6b33  lif _type == 'k3
-00029740: 7327 3a0a 2020 2020 2020 2020 2020 2020  s':.            
-00029750: 706c 616e 6469 7220 3d20 6f73 2e70 6174  plandir = os.pat
-00029760: 682e 6469 726e 616d 6528 6b33 732e 6372  h.dirname(k3s.cr
-00029770: 6561 7465 2e5f 5f63 6f64 655f 5f2e 636f  eate.__code__.co
-00029780: 5f66 696c 656e 616d 6529 0a20 2020 2020  _filename).     
-00029790: 2020 2020 2020 2072 6f6c 6573 203d 205b         roles = [
-000297a0: 2762 6f6f 7473 7472 6170 272c 2027 776f  'bootstrap', 'wo
-000297b0: 726b 6572 7327 5d20 6966 206f 7665 7272  rkers'] if overr
-000297c0: 6964 6573 2e67 6574 2827 6374 6c70 6c61  ides.get('ctlpla
-000297d0: 6e65 7327 2c20 3129 203d 3d20 3120 656c  nes', 1) == 1 el
-000297e0: 7365 205b 2762 6f6f 7473 7472 6170 272c  se ['bootstrap',
-000297f0: 2027 6374 6c70 6c61 6e65 7327 2c0a 2020   'ctlplanes',.  
-00029800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029850: 2020 2020 2020 2027 776f 726b 6572 7327         'workers'
-00029860: 5d0a 2020 2020 2020 2020 656c 7365 3a0a  ].        else:.
-00029870: 2020 2020 2020 2020 2020 2020 706c 616e              plan
-00029880: 6469 7220 3d20 6f73 2e70 6174 682e 6469  dir = os.path.di
-00029890: 726e 616d 6528 6f70 656e 7368 6966 742e  rname(openshift.
-000298a0: 6372 6561 7465 2e5f 5f63 6f64 655f 5f2e  create.__code__.
-000298b0: 636f 5f66 696c 656e 616d 6529 0a20 2020  co_filename).   
-000298c0: 2020 2020 2020 2020 2072 6f6c 6573 203d           roles =
-000298d0: 205b 2763 746c 706c 616e 6573 272c 2027   ['ctlplanes', '
-000298e0: 776f 726b 6572 7327 5d0a 2020 2020 2020  workers'].      
-000298f0: 2020 2020 2020 6966 2073 656c 662e 7479        if self.ty
-00029900: 7065 2069 6e20 5b27 6177 7327 2c20 2761  pe in ['aws', 'a
-00029910: 7a75 7265 272c 2027 6763 7027 5d3a 0a20  zure', 'gcp']:. 
-00029920: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00029930: 6f6c 6573 203d 205b 6627 636c 6f75 645f  oles = [f'cloud_
-00029940: 7b72 6f6c 657d 2720 666f 7220 726f 6c65  {role}' for role
-00029950: 2069 6e20 726f 6c65 735d 0a20 2020 2020   in roles].     
-00029960: 2020 2069 6620 6f76 6572 7269 6465 732e     if overrides.
-00029970: 6765 7428 2777 6f72 6b65 7273 272c 2030  get('workers', 0
-00029980: 2920 3d3d 2030 3a0a 2020 2020 2020 2020  ) == 0:.        
-00029990: 2020 2020 6465 6c20 726f 6c65 735b 2d31      del roles[-1
-000299a0: 5d0a 2020 2020 2020 2020 6966 206f 732e  ].        if os.
-000299b0: 7061 7468 2e65 7869 7374 7328 6622 7b63  path.exists(f"{c
-000299c0: 6c75 7374 6572 6469 727d 2f6b 636c 695f  lusterdir}/kcli_
-000299d0: 7061 7261 6d65 7465 7273 2e79 6d6c 2229  parameters.yml")
-000299e0: 3a0a 2020 2020 2020 2020 2020 2020 6461  :.            da
-000299f0: 7461 203d 207b 2763 6c75 7374 6572 273a  ta = {'cluster':
-00029a00: 2063 6c75 7374 6572 2c20 276b 7562 6527   cluster, 'kube'
-00029a10: 3a20 636c 7573 7465 722c 2027 6b75 6265  : cluster, 'kube
-00029a20: 7479 7065 273a 205f 7479 7065 7d0a 2020  type': _type}.  
-00029a30: 2020 2020 2020 2020 2020 7769 7468 206f            with o
-00029a40: 7065 6e28 6622 7b63 6c75 7374 6572 6469  pen(f"{clusterdi
-00029a50: 727d 2f6b 636c 695f 7061 7261 6d65 7465  r}/kcli_paramete
-00029a60: 7273 2e79 6d6c 222c 2027 7227 2920 6173  rs.yml", 'r') as
-00029a70: 2069 6e73 7461 6c6c 3a0a 2020 2020 2020   install:.      
-00029a80: 2020 2020 2020 2020 2020 696e 7374 616c            instal
-00029a90: 6c70 6172 616d 203d 2079 616d 6c2e 7361  lparam = yaml.sa
-00029aa0: 6665 5f6c 6f61 6428 696e 7374 616c 6c29  fe_load(install)
-00029ab0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00029ac0: 2064 6174 612e 7570 6461 7465 2869 6e73   data.update(ins
-00029ad0: 7461 6c6c 7061 7261 6d29 0a20 2020 2020  tallparam).     
-00029ae0: 2020 2020 2020 2020 2020 2070 6c61 6e20             plan 
-00029af0: 3d20 696e 7374 616c 6c70 6172 616d 2e67  = installparam.g
-00029b00: 6574 2827 706c 616e 272c 2070 6c61 6e29  et('plan', plan)
-00029b10: 0a20 2020 2020 2020 2020 2020 2064 6174  .            dat
-00029b20: 612e 7570 6461 7465 286f 7665 7272 6964  a.update(overrid
-00029b30: 6573 290a 2020 2020 2020 2020 2020 2020  es).            
-00029b40: 7769 7468 206f 7065 6e28 6622 7b63 6c75  with open(f"{clu
-00029b50: 7374 6572 6469 727d 2f6b 636c 695f 7061  sterdir}/kcli_pa
-00029b60: 7261 6d65 7465 7273 2e79 6d6c 222c 2027  rameters.yml", '
-00029b70: 7727 2920 6173 2070 6172 616d 6669 6c65  w') as paramfile
-00029b80: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00029b90: 2020 7961 6d6c 2e73 6166 655f 6475 6d70    yaml.safe_dump
-00029ba0: 2864 6174 612c 2070 6172 616d 6669 6c65  (data, paramfile
-00029bb0: 290a 2020 2020 2020 2020 6f73 2e63 6864  ).        os.chd
-00029bc0: 6972 286f 732e 7061 7468 2e65 7870 616e  ir(os.path.expan
-00029bd0: 6475 7365 7228 227e 2f2e 6b63 6c69 2229  duser("~/.kcli")
-00029be0: 290a 2020 2020 2020 2020 666f 7220 726f  ).        for ro
-00029bf0: 6c65 2069 6e20 726f 6c65 733a 0a20 2020  le in roles:.   
-00029c00: 2020 2020 2020 2020 2070 7072 696e 7428           pprint(
-00029c10: 6622 5570 6461 7469 6e67 2076 6d73 2077  f"Updating vms w
-00029c20: 6974 6820 7b72 6f6c 657d 2072 6f6c 6522  ith {role} role"
-00029c30: 290a 2020 2020 2020 2020 2020 2020 706c  ).            pl
-00029c40: 616e 6461 7461 203d 2073 656c 662e 706c  andata = self.pl
-00029c50: 616e 2870 6c61 6e2c 2069 6e70 7574 6669  an(plan, inputfi
-00029c60: 6c65 3d66 277b 706c 616e 6469 727d 2f7b  le=f'{plandir}/{
-00029c70: 726f 6c65 7d2e 796d 6c27 2c20 6f76 6572  role}.yml', over
-00029c80: 7269 6465 733d 6f76 6572 7269 6465 732c  rides=overrides,
-00029c90: 2075 7064 6174 653d 5472 7565 290a 2020   update=True).  
-00029ca0: 2020 2020 2020 2020 2020 706c 616e 766d            planvm
-00029cb0: 732e 6578 7465 6e64 2870 6c61 6e64 6174  s.extend(plandat
-00029cc0: 615b 276e 6577 766d 7327 5d20 2b20 706c  a['newvms'] + pl
-00029cd0: 616e 6461 7461 5b27 6578 6973 7469 6e67  andata['existing
-00029ce0: 766d 7327 5d29 0a20 2020 2020 2020 206f  vms']).        o
-00029cf0: 732e 656e 7669 726f 6e5b 274b 5542 4543  s.environ['KUBEC
-00029d00: 4f4e 4649 4727 5d20 3d20 6622 7b63 6c75  ONFIG'] = f"{clu
-00029d10: 7374 6572 6469 727d 2f61 7574 682f 6b75  sterdir}/auth/ku
-00029d20: 6265 636f 6e66 6967 220a 2020 2020 2020  beconfig".      
-00029d30: 2020 6269 6e61 7279 203d 2027 6f63 2720    binary = 'oc' 
-00029d40: 6966 2077 6869 6368 2827 6f63 2729 2069  if which('oc') i
-00029d50: 7320 6e6f 7420 4e6f 6e65 2065 6c73 6520  s not None else 
-00029d60: 276b 7562 6563 746c 270a 2020 2020 2020  'kubectl'.      
-00029d70: 2020 6e6f 6465 7363 6d64 203d 2066 277b    nodescmd = f'{
-00029d80: 6269 6e61 7279 7d20 6765 7420 6e6f 6465  binary} get node
-00029d90: 202d 6f20 6e61 6d65 270a 2020 2020 2020   -o name'.      
-00029da0: 2020 6e6f 6465 7320 3d20 5b6e 2e73 7472    nodes = [n.str
-00029db0: 6970 2829 2e72 6570 6c61 6365 2827 6e6f  ip().replace('no
-00029dc0: 6465 2f27 2c20 2727 2920 666f 7220 6e20  de/', '') for n 
-00029dd0: 696e 206f 732e 706f 7065 6e28 6e6f 6465  in os.popen(node
-00029de0: 7363 6d64 292e 7265 6164 6c69 6e65 7328  scmd).readlines(
-00029df0: 295d 0a20 2020 2020 2020 2066 6f72 2076  )].        for v
-00029e00: 6d20 696e 2073 656c 662e 6b2e 6c69 7374  m in self.k.list
-00029e10: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
-00029e20: 766d 6e61 6d65 203d 2076 6d5b 276e 616d  vmname = vm['nam
-00029e30: 6527 5d0a 2020 2020 2020 2020 2020 2020  e'].            
-00029e40: 766d 706c 616e 203d 2076 6d2e 6765 7428  vmplan = vm.get(
-00029e50: 2770 6c61 6e27 2c20 276b 7669 7274 2729  'plan', 'kvirt')
-00029e60: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00029e70: 766d 706c 616e 203d 3d20 706c 616e 2061  vmplan == plan a
-00029e80: 6e64 2076 6d6e 616d 6520 6e6f 7420 696e  nd vmname not in
-00029e90: 2070 6c61 6e76 6d73 3a0a 2020 2020 2020   planvms:.      
-00029ea0: 2020 2020 2020 2020 2020 7070 7269 6e74            pprint
-00029eb0: 2866 2244 656c 6574 696e 6720 766d 207b  (f"Deleting vm {
-00029ec0: 766d 6e61 6d65 7d22 290a 2020 2020 2020  vmname}").      
-00029ed0: 2020 2020 2020 2020 2020 7365 6c66 2e6b            self.k
-00029ee0: 2e64 656c 6574 6528 766d 6e61 6d65 290a  .delete(vmname).
-00029ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029f00: 666f 7220 6e6f 6465 2069 6e20 6e6f 6465  for node in node
-00029f10: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
-00029f20: 2020 2020 2020 2069 6620 6e6f 6465 2e73         if node.s
-00029f30: 706c 6974 2827 2e27 295b 305d 203d 3d20  plit('.')[0] == 
-00029f40: 766d 6e61 6d65 3a0a 2020 2020 2020 2020  vmname:.        
-00029f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029f60: 7070 7269 6e74 2866 2244 656c 6574 696e  pprint(f"Deletin
-00029f70: 6720 6e6f 6465 207b 6e6f 6465 7d20 6672  g node {node} fr
-00029f80: 6f6d 2079 6f75 7220 636c 7573 7465 7222  om your cluster"
-00029f90: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00029fa0: 2020 2020 2020 2020 2020 6361 6c6c 2866            call(f
-00029fb0: 277b 6269 6e61 7279 7d20 6465 6c65 7465  '{binary} delete
-00029fc0: 206e 6f64 6520 7b6e 6f64 657d 272c 2073   node {node}', s
-00029fd0: 6865 6c6c 3d54 7275 6529 0a20 2020 2020  hell=True).     
-00029fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029ff0: 2020 2062 7265 616b 0a0a 2020 2020 6465     break..    de
-0002a000: 6620 6578 706f 7365 5f70 6c61 6e28 7365  f expose_plan(se
-0002a010: 6c66 2c20 706c 616e 2c20 696e 7075 7466  lf, plan, inputf
-0002a020: 696c 653d 4e6f 6e65 2c20 6f76 6572 7269  ile=None, overri
-0002a030: 6465 733d 7b7d 2c20 706f 7274 3d39 3030  des={}, port=900
-0002a040: 302c 2070 666d 6f64 653d 4661 6c73 652c  0, pfmode=False,
-0002a050: 2063 6c75 7374 6572 3d46 616c 7365 293a   cluster=False):
-0002a060: 0a20 2020 2020 2020 2069 6e70 7574 6669  .        inputfi
-0002a070: 6c65 203d 206f 732e 7061 7468 2e65 7870  le = os.path.exp
-0002a080: 616e 6475 7365 7228 696e 7075 7466 696c  anduser(inputfil
-0002a090: 6529 0a20 2020 2020 2020 2069 6620 6e6f  e).        if no
-0002a0a0: 7420 6f73 2e70 6174 682e 6578 6973 7473  t os.path.exists
-0002a0b0: 2869 6e70 7574 6669 6c65 293a 0a20 2020  (inputfile):.   
-0002a0c0: 2020 2020 2020 2020 2065 7272 6f72 2822           error("
-0002a0d0: 4e6f 2069 6e70 7574 2066 696c 6520 666f  No input file fo
-0002a0e0: 756e 6420 6e6f 7220 6465 6661 756c 7420  und nor default 
-0002a0f0: 6b63 6c69 5f70 6c61 6e2e 796d 6c2e 4c65  kcli_plan.yml.Le
-0002a100: 6176 696e 672e 2e2e 2e22 290a 2020 2020  aving....").    
-0002a110: 2020 2020 2020 2020 7379 732e 6578 6974          sys.exit
-0002a120: 2831 290a 2020 2020 2020 2020 7070 7269  (1).        ppri
-0002a130: 6e74 2866 2248 616e 646c 696e 6720 6578  nt(f"Handling ex
-0002a140: 706f 7365 206f 6620 706c 616e 2077 6974  pose of plan wit
-0002a150: 6820 6e61 6d65 207b 706c 616e 7d20 616e  h name {plan} an
-0002a160: 6420 696e 7075 7466 696c 6520 7b69 6e70  d inputfile {inp
-0002a170: 7574 6669 6c65 7d22 290a 2020 2020 2020  utfile}").      
-0002a180: 2020 6b65 7870 6f73 6572 203d 204b 6578    kexposer = Kex
-0002a190: 706f 7365 7228 7365 6c66 2c20 706c 616e  poser(self, plan
-0002a1a0: 2c20 696e 7075 7466 696c 652c 206f 7665  , inputfile, ove
-0002a1b0: 7272 6964 6573 3d6f 7665 7272 6964 6573  rrides=overrides
-0002a1c0: 2c20 706f 7274 3d70 6f72 742c 2070 666d  , port=port, pfm
-0002a1d0: 6f64 653d 7066 6d6f 6465 2c20 636c 7573  ode=pfmode, clus
-0002a1e0: 7465 723d 636c 7573 7465 7229 0a20 2020  ter=cluster).   
-0002a1f0: 2020 2020 206b 6578 706f 7365 722e 7275       kexposer.ru
-0002a200: 6e28 290a 0a20 2020 2064 6566 2063 7265  n()..    def cre
-0002a210: 6174 655f 6f70 656e 7368 6966 745f 6973  ate_openshift_is
-0002a220: 6f28 7365 6c66 2c20 636c 7573 7465 722c  o(self, cluster,
-0002a230: 206f 7665 7272 6964 6573 3d7b 7d2c 2069   overrides={}, i
-0002a240: 676e 6974 696f 6e66 696c 653d 4e6f 6e65  gnitionfile=None
-0002a250: 2c20 706f 646d 616e 3d46 616c 7365 2c20  , podman=False, 
-0002a260: 696e 7374 616c 6c65 723d 4661 6c73 652c  installer=False,
-0002a270: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002a280: 2020 2020 2020 2020 2020 2020 2020 6469                di
-0002a290: 7265 6374 3d46 616c 7365 293a 0a20 2020  rect=False):.   
-0002a2a0: 2020 2020 206d 6574 616c 5f75 726c 203d       metal_url =
-0002a2b0: 204e 6f6e 650a 2020 2020 2020 2020 6973   None.        is
-0002a2c0: 6f5f 7665 7273 696f 6e20 3d20 7374 7228  o_version = str(
-0002a2d0: 6f76 6572 7269 6465 732e 6765 7428 2776  overrides.get('v
-0002a2e0: 6572 7369 6f6e 272c 2027 6c61 7465 7374  ersion', 'latest
-0002a2f0: 2729 290a 2020 2020 2020 2020 6966 206e  ')).        if n
-0002a300: 6f74 2069 6e73 7461 6c6c 6572 3a0a 2020  ot installer:.  
-0002a310: 2020 2020 2020 2020 2020 6966 2069 736f            if iso
-0002a320: 5f76 6572 7369 6f6e 206e 6f74 2069 6e20  _version not in 
-0002a330: 5b27 6c61 7465 7374 272c 2027 7072 652d  ['latest', 'pre-
-0002a340: 7265 6c65 6173 6527 5d20 616e 6420 6e6f  release'] and no
-0002a350: 7420 6973 6f5f 7665 7273 696f 6e2e 7374  t iso_version.st
-0002a360: 6172 7473 7769 7468 2827 342e 2729 3a0a  artswith('4.'):.
-0002a370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a380: 7761 726e 696e 6728 2246 6f72 6369 6e67  warning("Forcing
-0002a390: 206c 6976 6520 6973 6f20 7665 7273 696f   live iso versio
-0002a3a0: 6e20 746f 206c 6174 6573 7422 290a 2020  n to latest").  
-0002a3b0: 2020 2020 2020 2020 2020 2020 2020 6973                is
-0002a3c0: 6f5f 7665 7273 696f 6e20 3d20 276c 6174  o_version = 'lat
-0002a3d0: 6573 7427 0a20 2020 2020 2020 2020 2020  est'.           
-0002a3e0: 2065 6c69 6620 6973 6f5f 7665 7273 696f   elif iso_versio
-0002a3f0: 6e2e 7374 6172 7473 7769 7468 2827 342e  n.startswith('4.
-0002a400: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
-0002a410: 2020 2020 6d69 6e6f 725f 7665 7273 696f      minor_versio
-0002a420: 6e20 3d20 6973 6f5f 7665 7273 696f 6e2e  n = iso_version.
-0002a430: 7370 6c69 7428 272e 2729 5b31 5d0a 2020  split('.')[1].  
-0002a440: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0002a450: 206d 696e 6f72 5f76 6572 7369 6f6e 2e69   minor_version.i
-0002a460: 7364 6967 6974 2829 2061 6e64 2069 6e74  sdigit() and int
-0002a470: 286d 696e 6f72 5f76 6572 7369 6f6e 2920  (minor_version) 
-0002a480: 3c20 363a 0a20 2020 2020 2020 2020 2020  < 6:.           
-0002a490: 2020 2020 2020 2020 206d 6574 616c 5f75           metal_u
-0002a4a0: 726c 203d 2066 2268 7474 7073 3a2f 2f6d  rl = f"https://m
-0002a4b0: 6972 726f 722e 6f70 656e 7368 6966 742e  irror.openshift.
-0002a4c0: 636f 6d2f 7075 622f 6f70 656e 7368 6966  com/pub/openshif
-0002a4d0: 742d 7634 2f64 6570 656e 6465 6e63 6965  t-v4/dependencie
-0002a4e0: 732f 7268 636f 732f 7b69 736f 5f76 6572  s/rhcos/{iso_ver
-0002a4f0: 7369 6f6e 7d2f 6c61 7465 7374 220a 2020  sion}/latest".  
-0002a500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a510: 2020 6d65 7461 6c5f 7572 6c20 2b3d 2022    metal_url += "
-0002a520: 2f72 6863 6f73 2d6d 6574 616c 2e78 3836  /rhcos-metal.x86
-0002a530: 5f36 342e 7261 772e 677a 220a 2020 2020  _64.raw.gz".    
-0002a540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a550: 7761 726e 696e 6728 2245 6d62 6564 6469  warning("Embeddi
-0002a560: 6e67 206d 6574 616c 2075 726c 2069 6e20  ng metal url in 
-0002a570: 6973 6f20 666f 7220 7461 7267 6574 2076  iso for target v
-0002a580: 6572 7369 6f6e 2061 6e64 2069 6e73 7461  ersion and insta
-0002a590: 6c6c 696e 6720 7769 7468 2061 206d 6f72  lling with a mor
-0002a5a0: 6520 7265 6365 6e74 2069 736f 2229 0a20  e recent iso"). 
-0002a5b0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0002a5c0: 736f 5f76 6572 7369 6f6e 203d 2027 6c61  so_version = 'la
-0002a5d0: 7465 7374 270a 2020 2020 2020 2020 6170  test'.        ap
-0002a5e0: 695f 6970 203d 206f 7665 7272 6964 6573  i_ip = overrides
-0002a5f0: 2e67 6574 2827 6170 695f 6970 2729 0a20  .get('api_ip'). 
-0002a600: 2020 2020 2020 2069 676e 6974 696f 6e5f         ignition_
-0002a610: 7665 7273 696f 6e20 3d20 6f76 6572 7269  version = overri
-0002a620: 6465 732e 6765 7428 2769 676e 6974 696f  des.get('ignitio
-0002a630: 6e5f 7665 7273 696f 6e27 2c0a 2020 2020  n_version',.    
-0002a640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a660: 2020 2020 2063 6f6d 6d6f 6e2e 6967 6e69       common.igni
-0002a670: 7469 6f6e 5f76 6572 7369 6f6e 2822 7268  tion_version("rh
-0002a680: 636f 732d 2573 2220 2520 6973 6f5f 7665  cos-%s" % iso_ve
-0002a690: 7273 696f 6e2e 7265 706c 6163 6528 272e  rsion.replace('.
-0002a6a0: 272c 2027 2729 2929 0a20 2020 2020 2020  ', ''))).       
-0002a6b0: 2072 6f6c 6520 3d20 6f76 6572 7269 6465   role = override
-0002a6c0: 732e 6765 7428 2772 6f6c 6527 2c20 2777  s.get('role', 'w
-0002a6d0: 6f72 6b65 7227 290a 2020 2020 2020 2020  orker').        
-0002a6e0: 6973 6f20 3d20 6f76 6572 7269 6465 732e  iso = overrides.
-0002a6f0: 6765 7428 2769 736f 272c 2054 7275 6529  get('iso', True)
-0002a700: 0a20 2020 2020 2020 2064 6f6d 6169 6e20  .        domain 
-0002a710: 3d20 6f76 6572 7269 6465 732e 6765 7428  = overrides.get(
-0002a720: 2764 6f6d 6169 6e27 290a 2020 2020 2020  'domain').      
-0002a730: 2020 6966 2027 2e27 2069 6e20 636c 7573    if '.' in clus
-0002a740: 7465 723a 0a20 2020 2020 2020 2020 2020  ter:.           
-0002a750: 2064 6f6d 6169 6e20 3d20 272e 272e 6a6f   domain = '.'.jo
-0002a760: 696e 2863 6c75 7374 6572 2e73 706c 6974  in(cluster.split
-0002a770: 2827 2e27 295b 313a 5d29 0a20 2020 2020  ('.')[1:]).     
-0002a780: 2020 2020 2020 2070 7072 696e 7428 6622         pprint(f"
-0002a790: 5573 696e 6720 646f 6d61 696e 207b 646f  Using domain {do
-0002a7a0: 6d61 696e 7d22 290a 2020 2020 2020 2020  main}").        
-0002a7b0: 2020 2020 636c 7573 7465 7220 3d20 636c      cluster = cl
-0002a7c0: 7573 7465 722e 7265 706c 6163 6528 6622  uster.replace(f"
-0002a7d0: 2e7b 646f 6d61 696e 7d22 2c20 2727 290a  .{domain}", '').
-0002a7e0: 2020 2020 2020 2020 6966 2063 6c75 7374          if clust
-0002a7f0: 6572 2e73 7461 7274 7377 6974 6828 2761  er.startswith('a
-0002a800: 7069 2e27 293a 0a20 2020 2020 2020 2020  pi.'):.         
-0002a810: 2020 2063 6c75 7374 6572 203d 2063 6c75     cluster = clu
-0002a820: 7374 6572 2e72 6570 6c61 6365 2822 6170  ster.replace("ap
-0002a830: 692e 222c 2027 2729 0a20 2020 2020 2020  i.", '').       
-0002a840: 2020 2020 2070 7072 696e 7428 6622 5573       pprint(f"Us
-0002a850: 696e 6720 636c 7573 7465 7220 7b63 6c75  ing cluster {clu
-0002a860: 7374 6572 7d22 290a 2020 2020 2020 2020  ster}").        
-0002a870: 686f 7374 735f 636f 6e74 656e 7420 3d20  hosts_content = 
-0002a880: 4e6f 6e65 0a20 2020 2020 2020 2066 696e  None.        fin
-0002a890: 616c 6461 7461 203d 204e 6f6e 650a 2020  aldata = None.  
-0002a8a0: 2020 2020 2020 6966 2069 676e 6974 696f        if ignitio
-0002a8b0: 6e66 696c 6520 6973 206e 6f74 204e 6f6e  nfile is not Non
-0002a8c0: 653a 0a20 2020 2020 2020 2020 2020 2069  e:.            i
-0002a8d0: 6620 6e6f 7420 6f73 2e70 6174 682e 6578  f not os.path.ex
-0002a8e0: 6973 7473 2869 676e 6974 696f 6e66 696c  ists(ignitionfil
-0002a8f0: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
-0002a900: 2020 2020 6572 726f 7228 6622 7b69 676e      error(f"{ign
-0002a910: 6974 696f 6e66 696c 657d 206e 6f74 2066  itionfile} not f
-0002a920: 6f75 6e64 2229 0a20 2020 2020 2020 2020  ound").         
-0002a930: 2020 2020 2020 2073 7973 2e65 7869 7428         sys.exit(
-0002a940: 3129 0a20 2020 2020 2020 2020 2020 2066  1).            f
-0002a950: 696e 616c 6461 7461 203d 206f 7065 6e28  inaldata = open(
-0002a960: 6967 6e69 7469 6f6e 6669 6c65 292e 7265  ignitionfile).re
-0002a970: 6164 2829 0a20 2020 2020 2020 2065 6c73  ad().        els
-0002a980: 653a 0a20 2020 2020 2020 2020 2020 2069  e:.            i
-0002a990: 676e 6974 696f 6e66 696c 6520 3d20 6622  gnitionfile = f"
-0002a9a0: 7b72 6f6c 657d 2e69 676e 220a 2020 2020  {role}.ign".    
-0002a9b0: 2020 2020 2020 2020 6966 206f 732e 7061          if os.pa
-0002a9c0: 7468 2e65 7869 7374 7328 6967 6e69 7469  th.exists(igniti
-0002a9d0: 6f6e 6669 6c65 293a 0a20 2020 2020 2020  onfile):.       
-0002a9e0: 2020 2020 2020 2020 2077 6172 6e69 6e67           warning
-0002a9f0: 2866 2255 7369 6e67 2065 7869 7374 696e  (f"Using existin
-0002aa00: 6720 7b69 676e 6974 696f 6e66 696c 657d  g {ignitionfile}
-0002aa10: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
-0002aa20: 2020 2066 696e 616c 6461 7461 203d 206f     finaldata = o
-0002aa30: 7065 6e28 6967 6e69 7469 6f6e 6669 6c65  pen(ignitionfile
-0002aa40: 292e 7265 6164 2829 0a20 2020 2020 2020  ).read().       
-0002aa50: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0002aa60: 2020 2020 2020 2020 2020 2069 6620 6170             if ap
-0002aa70: 695f 6970 2069 7320 4e6f 6e65 3a0a 2020  i_ip is None:.  
-0002aa80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002aa90: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
-0002aaa0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-0002aab0: 7069 5f69 7020 3d20 736f 636b 6574 2e67  pi_ip = socket.g
-0002aac0: 6574 686f 7374 6279 6e61 6d65 2866 2761  ethostbyname(f'a
-0002aad0: 7069 2e7b 636c 7573 7465 727d 2e7b 646f  pi.{cluster}.{do
-0002aae0: 6d61 696e 7d27 290a 2020 2020 2020 2020  main}').        
-0002aaf0: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-0002ab00: 7074 3a0a 2020 2020 2020 2020 2020 2020  pt:.            
-0002ab10: 2020 2020 2020 2020 2020 2020 7061 7373              pass
-0002ab20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002ab30: 2069 6620 6170 695f 6970 2069 7320 4e6f   if api_ip is No
-0002ab40: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-0002ab50: 2020 2020 2020 2020 6966 2064 6f6d 6169          if domai
-0002ab60: 6e20 6973 204e 6f6e 653a 0a20 2020 2020  n is None:.     
-0002ab70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ab80: 2020 2065 7272 6f72 2822 436f 756c 646e     error("Couldn
-0002ab90: 2774 2066 6967 7572 6520 6f75 7420 6170  't figure out ap
-0002aba0: 695f 6970 206e 6f72 2072 656c 7920 6f6e  i_ip nor rely on
-0002abb0: 2064 6e73 2073 696e 6365 2064 6f6d 6169   dns since domai
-0002abc0: 6e20 6973 206e 6f74 2073 6574 2229 0a20  n is not set"). 
-0002abd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002abe0: 2020 2020 2020 2073 7973 2e65 7869 7428         sys.exit(
-0002abf0: 3129 0a20 2020 2020 2020 2020 2020 2020  1).             
-0002ac00: 2020 2020 2020 2077 6172 6e69 6e67 2822         warning("
-0002ac10: 436f 756c 646e 2774 2066 6967 7572 6520  Couldn't figure 
-0002ac20: 6f75 7420 6170 695f 6970 2e20 5265 6c79  out api_ip. Rely
-0002ac30: 696e 6720 6f6e 2064 6e73 2229 0a20 2020  ing on dns").   
-0002ac40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ac50: 2061 7069 5f69 7020 3d20 6622 6170 692e   api_ip = f"api.
-0002ac60: 7b63 6c75 7374 6572 7d2e 7b64 6f6d 6169  {cluster}.{domai
-0002ac70: 6e7d 220a 2020 2020 2020 2020 2020 2020  n}".            
-0002ac80: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0002ac90: 2020 2020 2020 2020 2020 2020 2020 686f                ho
-0002aca0: 7374 735f 636f 6e74 656e 7420 3d20 2231  sts_content = "1
-0002acb0: 3237 2e30 2e30 2e31 2020 206c 6f63 616c  27.0.0.1   local
-0002acc0: 686f 7374 206c 6f63 616c 686f 7374 2e6c  host localhost.l
-0002acd0: 6f63 616c 646f 6d61 696e 206c 6f63 616c  ocaldomain local
-0002ace0: 686f 7374 3420 6c6f 6361 6c68 6f73 7434  host4 localhost4
-0002acf0: 2e6c 6f63 616c 646f 6d61 696e 345c 6e22  .localdomain4\n"
-0002ad00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002ad10: 2020 2020 2068 6f73 7473 5f63 6f6e 7465       hosts_conte
-0002ad20: 6e74 202b 3d20 223a 3a31 2020 2020 2020  nt += "::1      
-0002ad30: 2020 206c 6f63 616c 686f 7374 206c 6f63     localhost loc
-0002ad40: 616c 686f 7374 2e6c 6f63 616c 646f 6d61  alhost.localdoma
-0002ad50: 696e 206c 6f63 616c 686f 7374 3620 6c6f  in localhost6 lo
-0002ad60: 6361 6c68 6f73 7436 2e6c 6f63 616c 646f  calhost6.localdo
-0002ad70: 6d61 696e 365c 6e22 0a20 2020 2020 2020  main6\n".       
-0002ad80: 2020 2020 2020 2020 2020 2020 2068 6f73               hos
-0002ad90: 7473 5f63 6f6e 7465 6e74 202b 3d20 6622  ts_content += f"
-0002ada0: 7b61 7069 5f69 707d 2061 7069 2d69 6e74  {api_ip} api-int
-0002adb0: 2e7b 636c 7573 7465 727d 2e7b 646f 6d61  .{cluster}.{doma
-0002adc0: 696e 7d20 6170 692e 7b63 6c75 7374 6572  in} api.{cluster
-0002add0: 7d2e 7b64 6f6d 6169 6e7d 220a 2020 2020  }.{domain}".    
-0002ade0: 2020 2020 706c 616e 6469 7220 3d20 6f73      plandir = os
-0002adf0: 2e70 6174 682e 6469 726e 616d 6528 6f70  .path.dirname(op
-0002ae00: 656e 7368 6966 742e 6372 6561 7465 2e5f  enshift.create._
-0002ae10: 5f63 6f64 655f 5f2e 636f 5f66 696c 656e  _code__.co_filen
-0002ae20: 616d 6529 0a20 2020 2020 2020 2077 6974  ame).        wit
-0002ae30: 6820 6f70 656e 2822 6973 6f2e 6967 6e22  h open("iso.ign"
-0002ae40: 2c20 2777 2729 2061 7320 663a 0a20 2020  , 'w') as f:.   
-0002ae50: 2020 2020 2020 2020 2066 756c 6c5f 6e61           full_na
-0002ae60: 6d65 203d 2066 277b 636c 7573 7465 727d  me = f'{cluster}
-0002ae70: 2e7b 646f 6d61 696e 7d27 2069 6620 646f  .{domain}' if do
-0002ae80: 6d61 696e 2069 7320 6e6f 7420 4e6f 6e65  main is not None
-0002ae90: 2065 6c73 6520 636c 7573 7465 720a 2020   else cluster.  
-0002aea0: 2020 2020 2020 2020 2020 7070 7269 6e74            pprint
-0002aeb0: 2866 2257 7269 7469 6e67 2066 696c 6520  (f"Writing file 
-0002aec0: 6973 6f2e 6967 6e20 666f 7220 7b72 6f6c  iso.ign for {rol
-0002aed0: 657d 2069 6e20 7b66 756c 6c5f 6e61 6d65  e} in {full_name
-0002aee0: 7d22 290a 2020 2020 2020 2020 2020 2020  }").            
-0002aef0: 6973 6f64 6972 203d 206f 732e 7061 7468  isodir = os.path
-0002af00: 2e64 6972 6e61 6d65 2863 6f6d 6d6f 6e2e  .dirname(common.
-0002af10: 5f5f 6669 6c65 5f5f 290a 2020 2020 2020  __file__).      
-0002af20: 2020 2020 2020 6966 2066 696e 616c 6461        if finalda
-0002af30: 7461 2069 7320 4e6f 6e65 3a0a 2020 2020  ta is None:.    
-0002af40: 2020 2020 2020 2020 2020 2020 656e 7620              env 
-0002af50: 3d20 456e 7669 726f 6e6d 656e 7428 6c6f  = Environment(lo
-0002af60: 6164 6572 3d46 696c 6553 7973 7465 6d4c  ader=FileSystemL
-0002af70: 6f61 6465 7228 6973 6f64 6972 292c 2065  oader(isodir), e
-0002af80: 7874 656e 7369 6f6e 733d 5b27 6a69 6e6a  xtensions=['jinj
-0002af90: 6132 2e65 7874 2e64 6f27 5d2c 2074 7269  a2.ext.do'], tri
-0002afa0: 6d5f 626c 6f63 6b73 3d54 7275 652c 0a20  m_blocks=True,. 
-0002afb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002afc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002afd0: 206c 7374 7269 705f 626c 6f63 6b73 3d54   lstrip_blocks=T
-0002afe0: 7275 6529 0a20 2020 2020 2020 2020 2020  rue).           
-0002aff0: 2020 2020 2074 656d 706c 203d 2065 6e76       templ = env
-0002b000: 2e67 6574 5f74 656d 706c 6174 6528 6f73  .get_template(os
-0002b010: 2e70 6174 682e 6261 7365 6e61 6d65 2822  .path.basename("
-0002b020: 6967 6e69 7469 6f6e 2e6a 3222 2929 0a20  ignition.j2")). 
-0002b030: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0002b040: 6620 686f 7374 735f 636f 6e74 656e 7420  f hosts_content 
-0002b050: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0002b060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b070: 2068 6f73 7473 5f63 6f6e 7465 6e74 203d   hosts_content =
-0002b080: 2062 6173 6536 342e 6236 3465 6e63 6f64   base64.b64encod
-0002b090: 6528 686f 7374 735f 636f 6e74 656e 742e  e(hosts_content.
-0002b0a0: 656e 636f 6465 2829 292e 6465 636f 6465  encode()).decode
-0002b0b0: 2822 5554 462d 3822 290a 2020 2020 2020  ("UTF-8").      
-0002b0c0: 2020 2020 2020 2020 2020 6966 2027 3a27            if ':'
-0002b0d0: 2069 6e20 6170 695f 6970 3a20 2020 2320   in api_ip:   # 
-0002b0e0: 4950 7636 2061 6464 7265 7373 0a20 2020  IPv6 address.   
-0002b0f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b100: 2069 676e 6974 696f 6e5f 7572 6c20 3d20   ignition_url = 
-0002b110: 6622 6874 7470 3a2f 2f5b 7b61 7069 5f69  f"http://[{api_i
-0002b120: 707d 5d3a 3232 3632 342f 636f 6e66 6967  p}]:22624/config
-0002b130: 2f7b 726f 6c65 7d22 0a20 2020 2020 2020  /{role}".       
-0002b140: 2020 2020 2020 2020 2065 6c73 653a 2020           else:  
-0002b150: 2020 2020 2020 2020 2020 2020 2023 2049               # I
-0002b160: 5076 3420 6164 6472 6573 730a 2020 2020  Pv4 address.    
-0002b170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b180: 6967 6e69 7469 6f6e 5f75 726c 203d 2066  ignition_url = f
-0002b190: 2268 7474 703a 2f2f 7b61 7069 5f69 707d  "http://{api_ip}
-0002b1a0: 3a32 3236 3234 2f63 6f6e 6669 672f 7b72  :22624/config/{r
-0002b1b0: 6f6c 657d 220a 2020 2020 2020 2020 2020  ole}".          
-0002b1c0: 2020 2020 2020 6669 6e61 6c64 6174 6120        finaldata 
-0002b1d0: 3d20 7465 6d70 6c2e 7265 6e64 6572 2869  = templ.render(i
-0002b1e0: 676e 6974 696f 6e5f 7572 6c3d 6967 6e69  gnition_url=igni
-0002b1f0: 7469 6f6e 5f75 726c 2c20 686f 7374 735f  tion_url, hosts_
-0002b200: 636f 6e74 656e 743d 686f 7374 735f 636f  content=hosts_co
-0002b210: 6e74 656e 742c 0a20 2020 2020 2020 2020  ntent,.         
-0002b220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b240: 6967 6e69 7469 6f6e 5f76 6572 7369 6f6e  ignition_version
-0002b250: 3d69 676e 6974 696f 6e5f 7665 7273 696f  =ignition_versio
-0002b260: 6e29 0a20 2020 2020 2020 2020 2020 2069  n).            i
-0002b270: 6620 6469 7265 6374 3a0a 2020 2020 2020  f direct:.      
-0002b280: 2020 2020 2020 2020 2020 662e 7772 6974            f.writ
-0002b290: 6528 6669 6e61 6c64 6174 6129 0a20 2020  e(finaldata).   
-0002b2a0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-0002b2b0: 2020 2020 2020 2020 2020 2020 2020 205f                 _
-0002b2c0: 6669 6c65 7320 3d20 5b7b 2270 6174 6822  files = [{"path"
-0002b2d0: 3a20 222f 726f 6f74 2f63 6f6e 6669 672e  : "/root/config.
-0002b2e0: 6967 6e22 2c20 2263 6f6e 7465 6e74 223a  ign", "content":
-0002b2f0: 2066 696e 616c 6461 7461 7d5d 0a20 2020   finaldata}].   
-0002b300: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0002b310: 6f73 2e70 6174 682e 6578 6973 7473 2827  os.path.exists('
-0002b320: 6973 6f2e 7368 2729 3a0a 2020 2020 2020  iso.sh'):.      
-0002b330: 2020 2020 2020 2020 2020 2020 2020 7070                pp
-0002b340: 7269 6e74 2822 5573 696e 6720 6c6f 6361  rint("Using loca
-0002b350: 6c20 6973 6f2e 7368 2073 6372 6970 7422  l iso.sh script"
-0002b360: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0002b370: 2020 2020 2020 6973 6f73 6372 6970 7420        isoscript 
-0002b380: 3d20 2769 736f 2e73 6827 0a20 2020 2020  = 'iso.sh'.     
-0002b390: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0002b3a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002b3b0: 2020 2020 2069 736f 7363 7269 7074 203d       isoscript =
-0002b3c0: 2066 277b 706c 616e 6469 727d 2f69 736f   f'{plandir}/iso
-0002b3d0: 2e73 6827 0a20 2020 2020 2020 2020 2020  .sh'.           
-0002b3e0: 2020 2020 2069 6620 6f73 2e70 6174 682e       if os.path.
-0002b3f0: 6578 6973 7473 2827 6d61 6373 2e74 7874  exists('macs.txt
-0002b400: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
-0002b410: 2020 2020 2020 2020 5f66 696c 6573 2e61          _files.a
-0002b420: 7070 656e 6428 7b22 7061 7468 223a 2022  ppend({"path": "
-0002b430: 2f72 6f6f 742f 6d61 6373 2e74 7874 222c  /root/macs.txt",
-0002b440: 2022 6f72 6967 696e 223a 2027 6d61 6373   "origin": 'macs
-0002b450: 2e74 7874 277d 290a 2020 2020 2020 2020  .txt'}).        
-0002b460: 2020 2020 2020 2020 6973 6f5f 6f76 6572          iso_over
-0002b470: 7269 6465 7320 3d20 7b27 7363 7269 7074  rides = {'script
-0002b480: 7327 3a20 5b69 736f 7363 7269 7074 5d2c  s': [isoscript],
-0002b490: 2027 6669 6c65 7327 3a20 5f66 696c 6573   'files': _files
-0002b4a0: 2c20 276d 6574 616c 5f75 726c 273a 206d  , 'metal_url': m
-0002b4b0: 6574 616c 5f75 726c 2c20 276e 6f6e 616d  etal_url, 'nonam
-0002b4c0: 6527 3a20 5472 7565 2c0a 2020 2020 2020  e': True,.      
-0002b4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b4e0: 2020 2020 2020 2020 2020 2027 696d 6167             'imag
-0002b4f0: 6527 3a20 2772 6863 6f73 3430 3030 277d  e': 'rhcos4000'}
-0002b500: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002b510: 2069 6620 6d65 7461 6c5f 7572 6c20 6973   if metal_url is
-0002b520: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-0002b530: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0002b540: 736f 5f6f 7665 7272 6964 6573 5b27 6e65  so_overrides['ne
-0002b550: 6564 5f6e 6574 776f 726b 275d 203d 2054  ed_network'] = T
-0002b560: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
-0002b570: 2020 2020 6973 6f5f 6f76 6572 7269 6465      iso_override
-0002b580: 732e 7570 6461 7465 286f 7665 7272 6964  s.update(overrid
-0002b590: 6573 290a 2020 2020 2020 2020 2020 2020  es).            
-0002b5a0: 2020 2020 6966 2027 6e61 6d65 2720 696e      if 'name' in
-0002b5b0: 206f 7665 7272 6964 6573 3a0a 2020 2020   overrides:.    
-0002b5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b5d0: 6973 6f5f 6e61 6d65 203d 206f 7665 7272  iso_name = overr
-0002b5e0: 6964 6573 5b27 6e61 6d65 275d 0a20 2020  ides['name'].   
-0002b5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b600: 2069 736f 5f6f 7665 7272 6964 6573 5b27   iso_overrides['
-0002b610: 6e6f 6e61 6d65 275d 203d 2046 616c 7365  noname'] = False
-0002b620: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002b630: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0002b640: 2020 2020 2020 2020 2020 2069 736f 5f6e             iso_n
-0002b650: 616d 6520 3d20 2761 7574 6f69 6e73 7461  ame = 'autoinsta
-0002b660: 6c6c 6572 270a 2020 2020 2020 2020 2020  ller'.          
-0002b670: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
-0002b680: 656c 662e 6372 6561 7465 5f76 6d28 6973  elf.create_vm(is
-0002b690: 6f5f 6e61 6d65 2c20 6f76 6572 7269 6465  o_name, override
-0002b6a0: 733d 6973 6f5f 6f76 6572 7269 6465 732c  s=iso_overrides,
-0002b6b0: 206f 6e6c 7961 7373 6574 733d 5472 7565   onlyassets=True
-0002b6c0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0002b6d0: 2020 6966 2027 7265 6173 6f6e 2720 696e    if 'reason' in
-0002b6e0: 2072 6573 756c 743a 0a20 2020 2020 2020   result:.       
-0002b6f0: 2020 2020 2020 2020 2020 2020 2065 7272               err
-0002b700: 6f72 2872 6573 756c 745b 2772 6561 736f  or(result['reaso
-0002b710: 6e27 5d29 0a20 2020 2020 2020 2020 2020  n']).           
-0002b720: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0002b730: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0002b740: 2e77 7269 7465 2872 6573 756c 745b 2775  .write(result['u
-0002b750: 7365 7264 6174 6127 5d29 0a20 2020 2020  serdata']).     
-0002b760: 2020 2069 6620 6973 6f3a 0a20 2020 2020     if iso:.     
-0002b770: 2020 2020 2020 2069 6620 7365 6c66 2e74         if self.t
-0002b780: 7970 6520 6e6f 7420 696e 205b 276b 766d  ype not in ['kvm
-0002b790: 272c 2027 6661 6b65 272c 2027 6b75 6265  ', 'fake', 'kube
-0002b7a0: 7669 7274 272c 2027 7673 7068 6572 6527  virt', 'vsphere'
-0002b7b0: 2c20 276f 7065 6e73 7461 636b 275d 3a0a  , 'openstack']:.
-0002b7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b7d0: 7761 726e 696e 6728 6622 4973 6f20 6765  warning(f"Iso ge
-0002b7e0: 6e65 7261 7469 6f6e 206e 6f74 2073 7570  neration not sup
-0002b7f0: 706f 7274 6564 206f 6e20 7b73 656c 662e  ported on {self.
-0002b800: 7479 7065 7d22 290a 2020 2020 2020 2020  type}").        
-0002b810: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0002b820: 2020 2020 2020 2020 2020 6973 6f5f 706f            iso_po
-0002b830: 6f6c 203d 206f 7665 7272 6964 6573 2e67  ol = overrides.g
-0002b840: 6574 2827 706f 6f6c 2729 206f 7220 7365  et('pool') or se
-0002b850: 6c66 2e70 6f6f 6c0a 2020 2020 2020 2020  lf.pool.        
-0002b860: 2020 2020 2020 2020 6765 6e65 7261 7465          generate
-0002b870: 5f72 6863 6f73 5f69 736f 2873 656c 662e  _rhcos_iso(self.
-0002b880: 6b2c 2066 227b 636c 7573 7465 727d 2d7b  k, f"{cluster}-{
-0002b890: 726f 6c65 7d22 2c20 6973 6f5f 706f 6f6c  role}", iso_pool
-0002b8a0: 2c20 7665 7273 696f 6e3d 6973 6f5f 7665  , version=iso_ve
-0002b8b0: 7273 696f 6e2c 2070 6f64 6d61 6e3d 706f  rsion, podman=po
-0002b8c0: 646d 616e 2c0a 2020 2020 2020 2020 2020  dman,.          
-0002b8d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b8e0: 2020 2020 2020 2020 2069 6e73 7461 6c6c           install
-0002b8f0: 6572 3d69 6e73 7461 6c6c 6572 290a 0a20  er=installer).. 
-0002b900: 2020 2064 6566 2063 7265 6174 655f 6f70     def create_op
-0002b910: 656e 7368 6966 745f 6469 7363 6f6e 6e65  enshift_disconne
-0002b920: 6374 6564 2873 656c 662c 2070 6c61 6e2c  cted(self, plan,
-0002b930: 206f 7665 7272 6964 6573 3d7b 7d29 3a0a   overrides={}):.
-0002b940: 2020 2020 2020 2020 6461 7461 203d 206f          data = o
-0002b950: 7665 7272 6964 6573 0a20 2020 2020 2020  verrides.       
-0002b960: 2070 6c61 6e64 6972 203d 206f 732e 7061   plandir = os.pa
-0002b970: 7468 2e64 6972 6e61 6d65 286f 7065 6e73  th.dirname(opens
-0002b980: 6869 6674 2e63 7265 6174 652e 5f5f 636f  hift.create.__co
-0002b990: 6465 5f5f 2e63 6f5f 6669 6c65 6e61 6d65  de__.co_filename
-0002b9a0: 290a 2020 2020 2020 2020 636c 7573 7465  ).        cluste
-0002b9b0: 7220 3d20 6461 7461 2e67 6574 2827 636c  r = data.get('cl
-0002b9c0: 7573 7465 7227 2c20 276d 796f 7065 6e73  uster', 'myopens
-0002b9d0: 6869 6674 2729 0a20 2020 2020 2020 2075  hift').        u
-0002b9e0: 7073 7472 6561 6d20 3d20 6461 7461 2e67  pstream = data.g
-0002b9f0: 6574 2827 7570 7374 7265 616d 272c 2046  et('upstream', F
-0002ba00: 616c 7365 290a 2020 2020 2020 2020 7665  alse).        ve
-0002ba10: 7273 696f 6e20 3d20 6461 7461 2e67 6574  rsion = data.get
-0002ba20: 2827 7665 7273 696f 6e27 2c20 2773 7461  ('version', 'sta
-0002ba30: 626c 6527 290a 2020 2020 2020 2020 7461  ble').        ta
-0002ba40: 6720 3d20 6461 7461 2e67 6574 2827 7461  g = data.get('ta
-0002ba50: 6727 2c20 4f50 454e 5348 4946 545f 5441  g', OPENSHIFT_TA
-0002ba60: 4729 0a20 2020 2020 2020 2070 7072 696e  G).        pprin
-0002ba70: 7428 6622 5573 696e 6720 7665 7273 696f  t(f"Using versio
-0002ba80: 6e20 7b76 6572 7369 6f6e 7d20 616e 6420  n {version} and 
-0002ba90: 7461 6720 7b74 6167 7d22 290a 2020 2020  tag {tag}").    
-0002baa0: 2020 2020 6469 7363 6f6e 6e65 6374 6564      disconnected
-0002bab0: 5f76 6d20 3d20 6622 7b63 6c75 7374 6572  _vm = f"{cluster
-0002bac0: 7d2d 6469 7363 6f6e 6e65 6374 6564 220a  }-disconnected".
-0002bad0: 2020 2020 2020 2020 6469 7363 6f6e 6e65          disconne
-0002bae0: 6374 6564 5f72 6575 7365 203d 2064 6174  cted_reuse = dat
-0002baf0: 612e 6765 7428 2764 6973 636f 6e6e 6563  a.get('disconnec
-0002bb00: 7465 645f 7265 7573 6527 2c20 4661 6c73  ted_reuse', Fals
-0002bb10: 6529 0a20 2020 2020 2020 2064 6973 636f  e).        disco
-0002bb20: 6e6e 6563 7465 645f 7379 6e63 203d 2064  nnected_sync = d
-0002bb30: 6174 612e 6765 7428 2764 6973 636f 6e6e  ata.get('disconn
-0002bb40: 6563 7465 645f 7379 6e63 272c 2054 7275  ected_sync', Tru
-0002bb50: 6529 0a20 2020 2020 2020 2070 7072 696e  e).        pprin
-0002bb60: 7428 6622 4465 706c 6f79 696e 6720 6469  t(f"Deploying di
-0002bb70: 7363 6f6e 6e65 6374 6564 2076 6d20 7b64  sconnected vm {d
-0002bb80: 6973 636f 6e6e 6563 7465 645f 766d 7d22  isconnected_vm}"
-0002bb90: 290a 2020 2020 2020 2020 6966 2064 6973  ).        if dis
-0002bba0: 636f 6e6e 6563 7465 645f 7379 6e63 3a0a  connected_sync:.
-0002bbb0: 2020 2020 2020 2020 2020 2020 7075 6c6c              pull
-0002bbc0: 5f73 6563 7265 7420 3d20 7077 645f 7061  _secret = pwd_pa
-0002bbd0: 7468 2864 6174 612e 6765 7428 2770 756c  th(data.get('pul
-0002bbe0: 6c5f 7365 6372 6574 2729 2920 6966 206e  l_secret')) if n
-0002bbf0: 6f74 2075 7073 7472 6561 6d20 656c 7365  ot upstream else
-0002bc00: 2066 227b 706c 616e 6469 727d 2f66 616b   f"{plandir}/fak
-0002bc10: 655f 7075 6c6c 2e6a 736f 6e22 0a20 2020  e_pull.json".   
-0002bc20: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-0002bc30: 7570 7374 7265 616d 3a0a 2020 2020 2020  upstream:.      
-0002bc40: 2020 2020 2020 2020 2020 7075 6c6c 5f73            pull_s
-0002bc50: 6563 7265 7420 3d20 7077 645f 7061 7468  ecret = pwd_path
-0002bc60: 2864 6174 612e 6765 7428 2770 756c 6c5f  (data.get('pull_
-0002bc70: 7365 6372 6574 272c 2027 6f70 656e 7368  secret', 'opensh
-0002bc80: 6966 745f 7075 6c6c 2e6a 736f 6e27 2929  ift_pull.json'))
-0002bc90: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-0002bca0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0002bcb0: 2020 2070 756c 6c5f 7365 6372 6574 203d     pull_secret =
-0002bcc0: 2066 227b 706c 616e 6469 727d 2f66 616b   f"{plandir}/fak
-0002bcd0: 655f 7075 6c6c 2e6a 736f 6e22 0a20 2020  e_pull.json".   
-0002bce0: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-0002bcf0: 6f73 2e70 6174 682e 6578 6973 7473 2870  os.path.exists(p
-0002bd00: 756c 6c5f 7365 6372 6574 293a 0a20 2020  ull_secret):.   
-0002bd10: 2020 2020 2020 2020 2020 2020 2065 7272               err
-0002bd20: 6f72 2866 224d 6973 7369 6e67 2070 756c  or(f"Missing pul
-0002bd30: 6c20 7365 6372 6574 2066 696c 6520 7b70  l secret file {p
-0002bd40: 756c 6c5f 7365 6372 6574 7d22 290a 2020  ull_secret}").  
-0002bd50: 2020 2020 2020 2020 2020 2020 2020 7379                sy
-0002bd60: 732e 6578 6974 2831 290a 2020 2020 2020  s.exit(1).      
-0002bd70: 2020 2020 2020 6461 7461 5b27 7075 6c6c        data['pull
-0002bd80: 5f73 6563 7265 7427 5d20 3d20 7265 2e73  _secret'] = re.s
-0002bd90: 7562 2872 225c 7322 2c20 2222 2c20 6f70  ub(r"\s", "", op
-0002bda0: 656e 2870 756c 6c5f 7365 6372 6574 292e  en(pull_secret).
-0002bdb0: 7265 6164 2829 290a 2020 2020 2020 2020  read()).        
-0002bdc0: 6469 7363 6f6e 6e65 6374 6564 5f70 6c61  disconnected_pla
-0002bdd0: 6e20 3d20 6622 7b70 6c61 6e7d 2d72 6575  n = f"{plan}-reu
-0002bde0: 7365 2220 6966 2064 6973 636f 6e6e 6563  se" if disconnec
-0002bdf0: 7465 645f 7265 7573 6520 656c 7365 2070  ted_reuse else p
-0002be00: 6c61 6e0a 2020 2020 2020 2020 6966 2076  lan.        if v
-0002be10: 6572 7369 6f6e 203d 3d20 2763 6927 2061  ersion == 'ci' a
-0002be20: 6e64 2027 6469 7363 6f6e 6e65 6374 6564  nd 'disconnected
-0002be30: 5f6f 7269 6769 6e27 206e 6f74 2069 6e20  _origin' not in 
-0002be40: 6f76 6572 7269 6465 733a 0a20 2020 2020  overrides:.     
-0002be50: 2020 2020 2020 2072 6567 203d 2027 7265         reg = 're
-0002be60: 6769 7374 7279 2e62 7569 6c64 3031 2e63  gistry.build01.c
-0002be70: 692e 6f70 656e 7368 6966 742e 6f72 6727  i.openshift.org'
-0002be80: 2069 6620 7374 7228 7461 6729 2e73 7461   if str(tag).sta
-0002be90: 7274 7377 6974 6828 2763 692d 2729 2065  rtswith('ci-') e
-0002bea0: 6c73 6520 2772 6567 6973 7472 792e 6369  lse 'registry.ci
-0002beb0: 2e6f 7065 6e73 6869 6674 2e6f 7267 270a  .openshift.org'.
-0002bec0: 2020 2020 2020 2020 2020 2020 7761 726e              warn
-0002bed0: 696e 6728 6622 466f 7263 696e 6720 6469  ing(f"Forcing di
-0002bee0: 7363 6f6e 6e65 6374 6564 5f6f 7269 6769  sconnected_origi
-0002bef0: 6e20 746f 207b 7265 677d 2229 0a20 2020  n to {reg}").   
-0002bf00: 2020 2020 2020 2020 2064 6174 615b 2764           data['d
-0002bf10: 6973 636f 6e6e 6563 7465 645f 6f72 6967  isconnected_orig
-0002bf20: 696e 275d 203d 2072 6567 0a20 2020 2020  in'] = reg.     
-0002bf30: 2020 2072 6573 756c 7420 3d20 7365 6c66     result = self
-0002bf40: 2e70 6c61 6e28 6469 7363 6f6e 6e65 6374  .plan(disconnect
-0002bf50: 6564 5f70 6c61 6e2c 2069 6e70 7574 6669  ed_plan, inputfi
-0002bf60: 6c65 3d66 277b 706c 616e 6469 727d 2f64  le=f'{plandir}/d
-0002bf70: 6973 636f 6e6e 6563 7465 642e 796d 6c27  isconnected.yml'
-0002bf80: 2c20 6f76 6572 7269 6465 733d 6461 7461  , overrides=data
-0002bf90: 290a 2020 2020 2020 2020 6966 2072 6573  ).        if res
-0002bfa0: 756c 745b 2772 6573 756c 7427 5d20 213d  ult['result'] !=
-0002bfb0: 2027 7375 6363 6573 7327 3a0a 2020 2020   'success':.    
-0002bfc0: 2020 2020 2020 2020 7379 732e 6578 6974          sys.exit
-0002bfd0: 2831 290a 2020 2020 2020 2020 656c 6966  (1).        elif
-0002bfe0: 2064 6973 636f 6e6e 6563 7465 645f 7379   disconnected_sy
-0002bff0: 6e63 3a0a 2020 2020 2020 2020 2020 2020  nc:.            
-0002c000: 7070 7269 6e74 2822 5573 6520 7468 6520  pprint("Use the 
-0002c010: 666f 6c6c 6f77 696e 6720 4f50 454e 5348  following OPENSH
-0002c020: 4946 545f 494e 5354 414c 4c5f 5245 4c45  IFT_INSTALL_RELE
-0002c030: 4153 455f 494d 4147 455f 4f56 4552 5249  ASE_IMAGE_OVERRI
-0002c040: 4445 2229 0a20 2020 2020 2020 2020 2020  DE").           
-0002c050: 206e 616d 6520 3d20 6461 7461 2e67 6574   name = data.get
-0002c060: 2827 6469 7363 6f6e 6e65 6374 6564 5f72  ('disconnected_r
-0002c070: 6575 7365 5f6e 616d 6527 2920 6f72 2063  euse_name') or c
-0002c080: 6c75 7374 6572 0a20 2020 2020 2020 2020  luster.         
-0002c090: 2020 2069 702c 2076 6d70 6f72 7420 3d20     ip, vmport = 
-0002c0a0: 5f73 7368 5f63 7265 6465 6e74 6961 6c73  _ssh_credentials
-0002c0b0: 2873 656c 662e 6b2c 2066 277b 6e61 6d65  (self.k, f'{name
-0002c0c0: 7d2d 6469 7363 6f6e 6e65 6374 6564 2729  }-disconnected')
-0002c0d0: 5b31 3a5d 0a20 2020 2020 2020 2020 2020  [1:].           
-0002c0e0: 2063 6d64 203d 2022 6361 7420 2f72 6f6f   cmd = "cat /roo
-0002c0f0: 742f 7665 7273 696f 6e2e 7478 7422 0a20  t/version.txt". 
-0002c100: 2020 2020 2020 2020 2020 2073 7368 636d             sshcm
-0002c110: 6420 3d20 7373 6828 6e61 6d65 2c20 6970  d = ssh(name, ip
-0002c120: 3d69 702c 2075 7365 723d 2772 6f6f 7427  =ip, user='root'
-0002c130: 2c20 7475 6e6e 656c 3d73 656c 662e 7475  , tunnel=self.tu
-0002c140: 6e6e 656c 2c0a 2020 2020 2020 2020 2020  nnel,.          
-0002c150: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0002c160: 756e 6e65 6c68 6f73 743d 7365 6c66 2e74  unnelhost=self.t
-0002c170: 756e 6e65 6c68 6f73 742c 2074 756e 6e65  unnelhost, tunne
-0002c180: 6c70 6f72 743d 7365 6c66 2e74 756e 6e65  lport=self.tunne
-0002c190: 6c70 6f72 742c 0a20 2020 2020 2020 2020  lport,.         
-0002c1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c1b0: 7475 6e6e 656c 7573 6572 3d73 656c 662e  tunneluser=self.
-0002c1c0: 7475 6e6e 656c 7573 6572 2c20 696e 7365  tunneluser, inse
-0002c1d0: 6375 7265 3d54 7275 652c 2063 6d64 3d63  cure=True, cmd=c
-0002c1e0: 6d64 2c20 766d 706f 7274 3d76 6d70 6f72  md, vmport=vmpor
-0002c1f0: 7429 0a20 2020 2020 2020 2020 2020 206f  t).            o
-0002c200: 732e 7379 7374 656d 2873 7368 636d 6429  s.system(sshcmd)
-0002c210: 0a0a 2020 2020 6465 6620 6861 6e64 6c65  ..    def handle
-0002c220: 5f66 696e 6973 6866 696c 6573 2873 656c  _finishfiles(sel
-0002c230: 662c 206e 616d 652c 2066 696e 6973 6866  f, name, finishf
-0002c240: 696c 6573 2c20 6964 656e 7469 7479 6669  iles, identityfi
-0002c250: 6c65 3d4e 6f6e 652c 2076 6d63 6c69 656e  le=None, vmclien
-0002c260: 743d 4e6f 6e65 293a 0a20 2020 2020 2020  t=None):.       
-0002c270: 2063 6f6e 6669 6720 3d20 4b63 6f6e 6669   config = Kconfi
-0002c280: 6728 636c 6965 6e74 3d76 6d63 6c69 656e  g(client=vmclien
-0002c290: 7429 2069 6620 766d 636c 6965 6e74 2069  t) if vmclient i
-0002c2a0: 7320 6e6f 7420 4e6f 6e65 2065 6c73 6520  s not None else 
-0002c2b0: 7365 6c66 0a20 2020 2020 2020 206b 203d  self.        k =
-0002c2c0: 2063 6f6e 6669 672e 6b0a 2020 2020 2020   config.k.      
-0002c2d0: 2020 6375 7272 656e 745f 6970 203d 2063    current_ip = c
-0002c2e0: 6f6d 6d6f 6e2e 5f73 7368 5f63 7265 6465  ommon._ssh_crede
-0002c2f0: 6e74 6961 6c73 286b 2c20 6e61 6d65 295b  ntials(k, name)[
-0002c300: 315d 0a20 2020 2020 2020 2066 6f72 2066  1].        for f
-0002c310: 696e 6973 6866 696c 6520 696e 2066 696e  inishfile in fin
-0002c320: 6973 6866 696c 6573 3a0a 2020 2020 2020  ishfiles:.      
-0002c330: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-0002c340: 6e63 6528 6669 6e69 7368 6669 6c65 2c20  nce(finishfile, 
-0002c350: 7374 7229 3a0a 2020 2020 2020 2020 2020  str):.          
-0002c360: 2020 2020 2020 6465 7374 696e 6174 696f        destinatio
-0002c370: 6e20 3d20 272e 270a 2020 2020 2020 2020  n = '.'.        
-0002c380: 2020 2020 2020 2020 736f 7572 6365 203d          source =
-0002c390: 2066 696e 6973 6866 696c 6520 6966 2027   finishfile if '
-0002c3a0: 2f27 2069 6e20 6669 6e69 7368 6669 6c65  /' in finishfile
-0002c3b0: 2065 6c73 6520 6627 2f72 6f6f 742f 7b66   else f'/root/{f
-0002c3c0: 696e 6973 6866 696c 657d 270a 2020 2020  inishfile}'.    
-0002c3d0: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
-0002c3e0: 6e73 7461 6e63 6528 6669 6e69 7368 6669  nstance(finishfi
-0002c3f0: 6c65 2c20 6469 6374 2920 616e 6420 276f  le, dict) and 'o
-0002c400: 7269 6769 6e27 2069 6e20 6669 6e69 7368  rigin' in finish
-0002c410: 6669 6c65 2061 6e64 2027 7061 7468 2720  file and 'path' 
-0002c420: 696e 2066 696e 6973 6866 696c 653a 0a20  in finishfile:. 
-0002c430: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0002c440: 6f75 7263 652c 2064 6573 7469 6e61 7469  ource, destinati
-0002c450: 6f6e 203d 2066 696e 6973 6866 696c 652e  on = finishfile.
-0002c460: 6765 7428 276f 7269 6769 6e27 292c 206f  get('origin'), o
-0002c470: 732e 7061 7468 2e65 7870 616e 6475 7365  s.path.expanduse
-0002c480: 7228 6669 6e69 7368 6669 6c65 2e67 6574  r(finishfile.get
-0002c490: 2827 7061 7468 272c 2027 2e27 2929 0a20  ('path', '.')). 
-0002c4a0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0002c4b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c4c0: 2077 6172 6e69 6e67 2866 2249 6e63 6f72   warning(f"Incor
-0002c4d0: 7265 6374 2066 696e 6973 6866 696c 6520  rect finishfile 
-0002c4e0: 656e 7472 7920 7b66 696e 6973 6866 696c  entry {finishfil
-0002c4f0: 657d 2e20 536b 6970 7069 6e67 2229 0a20  e}. Skipping"). 
-0002c500: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0002c510: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
-0002c520: 2020 2020 7363 7063 6d64 203d 2063 6f6d      scpcmd = com
-0002c530: 6d6f 6e2e 7363 7028 6e61 6d65 2c20 6970  mon.scp(name, ip
-0002c540: 3d63 7572 7265 6e74 5f69 702c 2075 7365  =current_ip, use
-0002c550: 723d 2772 6f6f 7427 2c20 736f 7572 6365  r='root', source
-0002c560: 3d73 6f75 7263 652c 2064 6573 7469 6e61  =source, destina
-0002c570: 7469 6f6e 3d64 6573 7469 6e61 7469 6f6e  tion=destination
-0002c580: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0002c590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c5a0: 2020 7475 6e6e 656c 3d63 6f6e 6669 672e    tunnel=config.
-0002c5b0: 7475 6e6e 656c 2c20 7475 6e6e 656c 686f  tunnel, tunnelho
-0002c5c0: 7374 3d63 6f6e 6669 672e 7475 6e6e 656c  st=config.tunnel
-0002c5d0: 686f 7374 2c20 7475 6e6e 656c 706f 7274  host, tunnelport
-0002c5e0: 3d63 6f6e 6669 672e 7475 6e6e 656c 706f  =config.tunnelpo
-0002c5f0: 7274 2c0a 2020 2020 2020 2020 2020 2020  rt,.            
-0002c600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c610: 2020 2020 7475 6e6e 656c 7573 6572 3d73      tunneluser=s
-0002c620: 656c 662e 7475 6e6e 656c 7573 6572 2c20  elf.tunneluser, 
-0002c630: 646f 776e 6c6f 6164 3d54 7275 652c 2069  download=True, i
-0002c640: 6e73 6563 7572 653d 5472 7565 2c20 6964  nsecure=True, id
-0002c650: 656e 7469 7479 6669 6c65 3d69 6465 6e74  entityfile=ident
-0002c660: 6974 7966 696c 6529 0a20 2020 2020 2020  ityfile).       
-0002c670: 2020 2020 206f 732e 7379 7374 656d 2873       os.system(s
-0002c680: 6370 636d 6429 0a0a 2020 2020 6465 6620  cpcmd)..    def 
-0002c690: 6861 6e64 6c65 5f6e 6f74 6966 6963 6174  handle_notificat
-0002c6a0: 696f 6e73 2873 656c 662c 206e 616d 652c  ions(self, name,
-0002c6b0: 206e 6f74 6966 796d 6574 686f 6473 3d5b   notifymethods=[
-0002c6c0: 5d2c 2070 7573 6862 756c 6c65 7474 6f6b  ], pushbullettok
-0002c6d0: 656e 3d4e 6f6e 652c 206e 6f74 6966 7973  en=None, notifys
-0002c6e0: 6372 6970 743d 4e6f 6e65 2c20 6e6f 7469  cript=None, noti
-0002c6f0: 6679 636d 643d 4e6f 6e65 2c0a 2020 2020  fycmd=None,.    
-0002c700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c710: 2020 2020 2020 2020 2073 6c61 636b 6368           slackch
-0002c720: 616e 6e65 6c3d 4e6f 6e65 2c20 736c 6163  annel=None, slac
-0002c730: 6b74 6f6b 656e 3d4e 6f6e 652c 206d 6169  ktoken=None, mai
-0002c740: 6c73 6572 7665 723d 4e6f 6e65 2c20 6d61  lserver=None, ma
-0002c750: 696c 6672 6f6d 3d4e 6f6e 652c 206d 6169  ilfrom=None, mai
-0002c760: 6c74 6f3d 4e6f 6e65 2c0a 2020 2020 2020  lto=None,.      
-0002c770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c780: 2020 2020 2020 2063 6c75 7374 6572 3d46         cluster=F
-0002c790: 616c 7365 293a 0a20 2020 2020 2020 205f  alse):.        _
-0002c7a0: 7479 7065 203d 2027 436c 7573 7465 7227  type = 'Cluster'
-0002c7b0: 2069 6620 636c 7573 7465 7220 656c 7365   if cluster else
-0002c7c0: 2027 566d 270a 2020 2020 2020 2020 7469   'Vm'.        ti
-0002c7d0: 746c 6520 3d20 6622 7b5f 7479 7065 7d20  tle = f"{_type} 
-0002c7e0: 7b6e 616d 657d 206f 6e20 7b73 656c 662e  {name} on {self.
-0002c7f0: 636c 6965 6e74 7d20 7265 706f 7274 220a  client} report".
-0002c800: 2020 2020 2020 2020 636d 6473 2c20 6d61          cmds, ma
-0002c810: 696c 636f 6e74 656e 7420 3d20 5b5d 2c20  ilcontent = [], 
-0002c820: 4e6f 6e65 0a20 2020 2020 2020 2066 6f72  None.        for
-0002c830: 206e 6f74 6966 796d 6574 686f 6420 696e   notifymethod in
-0002c840: 2073 6f72 7465 6428 6e6f 7469 6679 6d65   sorted(notifyme
-0002c850: 7468 6f64 732c 2072 6576 6572 7365 3d54  thods, reverse=T
-0002c860: 7275 6529 3a0a 2020 2020 2020 2020 2020  rue):.          
-0002c870: 2020 6966 206e 6f74 6966 796d 6574 686f    if notifymetho
-0002c880: 6420 3d3d 2027 7075 7368 6275 6c6c 6574  d == 'pushbullet
-0002c890: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
-0002c8a0: 2020 2069 6620 7075 7368 6275 6c6c 6574     if pushbullet
-0002c8b0: 746f 6b65 6e20 6973 204e 6f6e 653a 0a20  token is None:. 
-0002c8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c8d0: 2020 2077 6172 6e69 6e67 2866 224e 6f74     warning(f"Not
-0002c8e0: 6966 6963 6174 696f 6e20 7265 7175 6972  ification requir
-0002c8f0: 6564 2066 6f72 207b 6e61 6d65 7d20 6275  ed for {name} bu
-0002c900: 7420 6d69 7373 696e 6720 7075 7368 6275  t missing pushbu
-0002c910: 6c6c 6574 746f 6b65 6e22 290a 2020 2020  llettoken").    
-0002c920: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-0002c930: 206e 6f74 6966 7973 6372 6970 7420 6973   notifyscript is
-0002c940: 204e 6f6e 6520 616e 6420 6e6f 7469 6679   None and notify
-0002c950: 636d 6420 6973 204e 6f6e 653a 0a20 2020  cmd is None:.   
-0002c960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c970: 2063 6f6e 7469 6e75 650a 2020 2020 2020   continue.      
-0002c980: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-0002c990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c9a0: 2020 2020 746f 6b65 6e20 3d20 7075 7368      token = push
-0002c9b0: 6275 6c6c 6574 746f 6b65 6e0a 2020 2020  bullettoken.    
-0002c9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c9d0: 7062 636d 6420 3d20 2763 7572 6c20 2d73  pbcmd = 'curl -s
-0002c9e0: 7520 2225 733a 2220 2d64 2074 7970 653d  u "%s:" -d type=
-0002c9f0: 226e 6f74 6522 202d 6420 626f 6479 3d22  "note" -d body="
-0002ca00: 6025 7320 323e 2631 6022 202d 6420 7469  `%s 2>&1`" -d ti
-0002ca10: 746c 653d 2225 7322 2027 2025 2028 746f  tle="%s" ' % (to
-0002ca20: 6b65 6e2c 0a20 2020 2020 2020 2020 2020  ken,.           
+000277f0: 2020 2020 656c 6966 206b 7562 6574 7970      elif kubetyp
+00027800: 6520 3d3d 2027 656b 7327 3a0a 2020 2020  e == 'eks':.    
+00027810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027820: 2020 2020 656b 7320 3d20 5472 7565 0a20      eks = True. 
+00027830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027840: 2020 2020 2020 2062 7265 616b 0a20 2020         break.   
+00027850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027860: 2065 6c69 6620 6b75 6265 7479 7065 203d   elif kubetype =
+00027870: 3d20 2761 6b73 273a 0a20 2020 2020 2020  = 'aks':.       
+00027880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027890: 2061 6b73 203d 2054 7275 650a 2020 2020   aks = True.    
+000278a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000278b0: 2020 2020 6272 6561 6b0a 2020 2020 2020      break.      
+000278c0: 2020 2020 2020 2020 2020 2020 2020 632e                c.
+000278d0: 6465 6c65 7465 286e 616d 652c 2073 6e61  delete(name, sna
+000278e0: 7073 686f 7473 3d54 7275 6529 0a20 2020  pshots=True).   
+000278f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027900: 2063 6f6d 6d6f 6e2e 6465 6c65 7465 5f6c   common.delete_l
+00027910: 6173 7476 6d28 6e61 6d65 2c20 7365 6c66  astvm(name, self
+00027920: 2e63 6c69 656e 7429 0a20 2020 2020 2020  .client).       
+00027930: 2020 2020 2020 2020 2020 2020 2073 7563               suc
+00027940: 6365 7373 2866 227b 6e61 6d65 7d20 6465  cess(f"{name} de
+00027950: 6c65 7465 6420 6f6e 207b 6879 7065 7276  leted on {hyperv
+00027960: 6973 6f72 7d21 2229 0a20 2020 2020 2020  isor}!").       
+00027970: 2069 6620 7365 6c66 2e74 7970 6520 3d3d   if self.type ==
+00027980: 2027 6b75 6265 7669 7274 273a 0a20 2020   'kubevirt':.   
+00027990: 2020 2020 2020 2020 2069 6620 6622 7b63           if f"{c
+000279a0: 6c75 7374 6572 7d2d 6170 6922 2069 6e20  luster}-api" in 
+000279b0: 6b2e 6c69 7374 5f73 6572 7669 6365 7328  k.list_services(
+000279c0: 6b2e 6e61 6d65 7370 6163 6529 3a0a 2020  k.namespace):.  
+000279d0: 2020 2020 2020 2020 2020 2020 2020 6b2e                k.
+000279e0: 6465 6c65 7465 5f73 6572 7669 6365 2866  delete_service(f
+000279f0: 227b 636c 7573 7465 727d 2d61 7069 222c  "{cluster}-api",
+00027a00: 206b 2e6e 616d 6573 7061 6365 290a 2020   k.namespace).  
+00027a10: 2020 2020 2020 2020 2020 6966 2066 227b            if f"{
+00027a20: 636c 7573 7465 727d 2d69 6e67 7265 7373  cluster}-ingress
+00027a30: 2220 696e 206b 2e6c 6973 745f 7365 7276  " in k.list_serv
+00027a40: 6963 6573 286b 2e6e 616d 6573 7061 6365  ices(k.namespace
+00027a50: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00027a60: 2020 206b 2e64 656c 6574 655f 7365 7276     k.delete_serv
+00027a70: 6963 6528 6622 7b63 6c75 7374 6572 7d2d  ice(f"{cluster}-
+00027a80: 696e 6772 6573 7322 2c20 6b2e 6e61 6d65  ingress", k.name
+00027a90: 7370 6163 6529 0a20 2020 2020 2020 2069  space).        i
+00027aa0: 6620 7365 6c66 2e74 7970 6520 696e 205b  f self.type in [
+00027ab0: 2761 7773 272c 2027 617a 7572 6527 2c20  'aws', 'azure', 
+00027ac0: 2767 6370 272c 2027 6962 6d27 5d20 616e  'gcp', 'ibm'] an
+00027ad0: 6420 6e6f 7420 676b 6520 616e 6420 6e6f  d not gke and no
+00027ae0: 7420 656b 7320 616e 6420 6e6f 7420 616b  t eks and not ak
+00027af0: 733a 0a20 2020 2020 2020 2020 2020 2065  s:.            e
+00027b00: 7869 7374 696e 675f 6c62 7320 3d20 5b6c  xisting_lbs = [l
+00027b10: 5b30 5d20 666f 7220 6c20 696e 2073 656c  [0] for l in sel
+00027b20: 662e 6c69 7374 5f6c 6f61 6462 616c 616e  f.list_loadbalan
+00027b30: 6365 7273 2829 2069 6620 6c5b 305d 2069  cers() if l[0] i
+00027b40: 6e20 5b66 2761 7069 2e7b 636c 7573 7465  n [f'api.{cluste
+00027b50: 727d 272c 2066 2761 7070 732e 7b63 6c75  r}', f'apps.{clu
+00027b60: 7374 6572 7d27 5d5d 0a20 2020 2020 2020  ster}']].       
+00027b70: 2020 2020 2066 6f72 206c 6220 696e 2065       for lb in e
+00027b80: 7869 7374 696e 675f 6c62 733a 0a20 2020  xisting_lbs:.   
+00027b90: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00027ba0: 662e 6465 6c65 7465 5f6c 6f61 6462 616c  f.delete_loadbal
+00027bb0: 616e 6365 7228 6c62 2c20 646f 6d61 696e  ancer(lb, domain
+00027bc0: 3d64 6f6d 6169 6e29 0a20 2020 2020 2020  =domain).       
+00027bd0: 2020 2020 2062 7563 6b65 7420 3d20 6622       bucket = f"
+00027be0: 7b63 6c75 7374 6572 7d2d 7b64 6f6d 6169  {cluster}-{domai
+00027bf0: 6e7d 220a 2020 2020 2020 2020 2020 2020  n}".            
+00027c00: 6966 2062 7563 6b65 7420 696e 2073 656c  if bucket in sel
+00027c10: 662e 6b2e 6c69 7374 5f62 7563 6b65 7473  f.k.list_buckets
+00027c20: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
+00027c30: 2020 2020 7070 7269 6e74 2866 2244 656c      pprint(f"Del
+00027c40: 6574 696e 6720 6275 636b 6574 207b 6275  eting bucket {bu
+00027c50: 636b 6574 7d22 290a 2020 2020 2020 2020  cket}").        
+00027c60: 2020 2020 2020 2020 6b2e 6465 6c65 7465          k.delete
+00027c70: 5f62 7563 6b65 7428 6275 636b 6574 290a  _bucket(bucket).
+00027c80: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+00027c90: 656c 662e 7479 7065 203d 3d20 2761 7773  elf.type == 'aws
+00027ca0: 2720 616e 6420 636c 7573 7465 7220 696e  ' and cluster in
+00027cb0: 206b 2e6c 6973 745f 696e 7374 616e 6365   k.list_instance
+00027cc0: 5f70 726f 6669 6c65 7328 293a 0a20 2020  _profiles():.   
+00027cd0: 2020 2020 2020 2020 2020 2020 2069 616d               iam
+00027ce0: 5f72 6f6c 6520 3d20 636c 7573 7465 7264  _role = clusterd
+00027cf0: 6174 612e 6765 7428 2772 6f6c 6527 2c20  ata.get('role', 
+00027d00: 636c 7573 7465 7229 0a20 2020 2020 2020  cluster).       
+00027d10: 2020 2020 2020 2020 2074 7279 3a0a 2020           try:.  
+00027d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027d30: 2020 6b2e 6465 6c65 7465 5f69 6e73 7461    k.delete_insta
+00027d40: 6e63 655f 7072 6f66 696c 6528 636c 7573  nce_profile(clus
+00027d50: 7465 722c 2069 616d 5f72 6f6c 6529 0a20  ter, iam_role). 
+00027d60: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00027d70: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
+00027d80: 2020 2020 2020 2020 2020 2070 6173 730a             pass.
+00027d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027da0: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+00027db0: 2020 2020 2020 2020 206b 2e64 656c 6574           k.delet
+00027dc0: 655f 726f 6c65 2869 616d 5f72 6f6c 6529  e_role(iam_role)
+00027dd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00027de0: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
+00027df0: 2020 2020 2020 2020 2020 2020 2070 6173               pas
+00027e00: 730a 2020 2020 2020 2020 656c 6966 2064  s.        elif d
+00027e10: 6e73 636c 6965 6e74 2069 7320 6e6f 7420  nsclient is not 
+00027e20: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00027e30: 2020 7a20 3d20 4b63 6f6e 6669 6728 636c    z = Kconfig(cl
+00027e40: 6965 6e74 3d64 6e73 636c 6965 6e74 292e  ient=dnsclient).
+00027e50: 6b0a 2020 2020 2020 2020 2020 2020 7a2e  k.            z.
+00027e60: 6465 6c65 7465 5f64 6e73 2866 2261 7069  delete_dns(f"api
+00027e70: 2e7b 636c 7573 7465 727d 222c 2064 6f6d  .{cluster}", dom
+00027e80: 6169 6e29 0a20 2020 2020 2020 2020 2020  ain).           
+00027e90: 207a 2e64 656c 6574 655f 646e 7328 6622   z.delete_dns(f"
+00027ea0: 6170 7073 2e7b 636c 7573 7465 727d 222c  apps.{cluster}",
+00027eb0: 2064 6f6d 6169 6e29 0a20 2020 2020 2020   domain).       
+00027ec0: 2069 6620 6879 7065 7273 6869 6674 3a0a   if hypershift:.
+00027ed0: 2020 2020 2020 2020 2020 2020 6b75 6265              kube
+00027ee0: 636f 6e66 6967 6d67 6d74 203d 2066 227b  configmgmt = f"{
+00027ef0: 636c 7573 7465 7264 6972 7d2f 6b75 6265  clusterdir}/kube
+00027f00: 636f 6e66 6967 2e6d 676d 7422 0a20 2020  config.mgmt".   
+00027f10: 2020 2020 2020 2020 2063 616c 6c28 6627           call(f'
+00027f20: 4b55 4245 434f 4e46 4947 3d7b 6b75 6265  KUBECONFIG={kube
+00027f30: 636f 6e66 6967 6d67 6d74 7d20 6f63 2064  configmgmt} oc d
+00027f40: 656c 6574 6520 2d66 207b 636c 7573 7465  elete -f {cluste
+00027f50: 7264 6972 7d2f 6175 746f 6170 7072 6f76  rdir}/autoapprov
+00027f60: 6572 6372 6f6e 2e79 6d6c 272c 2073 6865  ercron.yml', she
+00027f70: 6c6c 3d54 7275 6529 0a20 2020 2020 2020  ll=True).       
+00027f80: 2020 2020 2063 616c 6c28 6627 4b55 4245       call(f'KUBE
+00027f90: 434f 4e46 4947 3d7b 6b75 6265 636f 6e66  CONFIG={kubeconf
+00027fa0: 6967 6d67 6d74 7d20 6f63 2064 656c 6574  igmgmt} oc delet
+00027fb0: 6520 2d66 207b 636c 7573 7465 7264 6972  e -f {clusterdir
+00027fc0: 7d2f 6e6f 6465 706f 6f6c 2e79 616d 6c27  }/nodepool.yaml'
+00027fd0: 2c20 7368 656c 6c3d 5472 7565 290a 2020  , shell=True).  
+00027fe0: 2020 2020 2020 2020 2020 6361 6c6c 2866            call(f
+00027ff0: 274b 5542 4543 4f4e 4649 473d 7b6b 7562  'KUBECONFIG={kub
+00028000: 6563 6f6e 6669 676d 676d 747d 206f 6320  econfigmgmt} oc 
+00028010: 6465 6c65 7465 202d 6620 7b63 6c75 7374  delete -f {clust
+00028020: 6572 6469 727d 2f68 6f73 7465 6463 6c75  erdir}/hostedclu
+00028030: 7374 6572 2e79 616d 6c27 2c20 7368 656c  ster.yaml', shel
+00028040: 6c3d 5472 7565 290a 2020 2020 2020 2020  l=True).        
+00028050: 2020 2020 6966 206e 6f74 2061 7373 6973      if not assis
+00028060: 7465 6420 616e 6420 2827 6261 7265 6d65  ted and ('bareme
+00028070: 7461 6c5f 6973 6f27 2069 6e20 636c 7573  tal_iso' in clus
+00028080: 7465 7264 6174 6120 6f72 2027 6261 7265  terdata or 'bare
+00028090: 6d65 7461 6c5f 686f 7374 7327 2069 6e20  metal_hosts' in 
+000280a0: 636c 7573 7465 7264 6174 6129 3a0a 2020  clusterdata):.  
+000280b0: 2020 2020 2020 2020 2020 2020 2020 6361                ca
+000280c0: 6c6c 2866 274b 5542 4543 4f4e 4649 473d  ll(f'KUBECONFIG=
+000280d0: 7b6b 7562 6563 6f6e 6669 676d 676d 747d  {kubeconfigmgmt}
+000280e0: 206f 6320 2d6e 2064 6566 6175 6c74 2064   oc -n default d
+000280f0: 656c 6574 6520 616c 6c20 2d6c 2061 7070  elete all -l app
+00028100: 3d68 7474 7064 2d6b 636c 6927 2c20 7368  =httpd-kcli', sh
+00028110: 656c 6c3d 5472 7565 290a 2020 2020 2020  ell=True).      
+00028120: 2020 2020 2020 2020 2020 6361 6c6c 2866            call(f
+00028130: 274b 5542 4543 4f4e 4649 473d 7b6b 7562  'KUBECONFIG={kub
+00028140: 6563 6f6e 6669 676d 676d 747d 206f 6320  econfigmgmt} oc 
+00028150: 2d6e 2064 6566 6175 6c74 2064 656c 6574  -n default delet
+00028160: 6520 7076 6320 6874 7470 642d 6b63 6c69  e pvc httpd-kcli
+00028170: 2d70 7663 272c 2073 6865 6c6c 3d54 7275  -pvc', shell=Tru
+00028180: 6529 0a20 2020 2020 2020 2069 6620 676b  e).        if gk
+00028190: 653a 0a20 2020 2020 2020 2020 2020 2067  e:.            g
+000281a0: 6370 636c 6965 6e74 203d 204e 6f6e 650a  cpclient = None.
+000281b0: 2020 2020 2020 2020 2020 2020 6966 2027              if '
+000281c0: 636c 6965 6e74 2720 696e 2063 6c75 7374  client' in clust
+000281d0: 6572 6461 7461 3a0a 2020 2020 2020 2020  erdata:.        
+000281e0: 2020 2020 2020 2020 6763 7063 6c69 656e          gcpclien
+000281f0: 7420 3d20 636c 7573 7465 7264 6174 615b  t = clusterdata[
+00028200: 2763 6c69 656e 7427 5d0a 2020 2020 2020  'client'].      
+00028210: 2020 2020 2020 656c 6966 2073 656c 662e        elif self.
+00028220: 7479 7065 203d 3d20 2767 6370 273a 0a20  type == 'gcp':. 
+00028230: 2020 2020 2020 2020 2020 2020 2020 2067                 g
+00028240: 6370 636c 6965 6e74 203d 2073 656c 662e  cpclient = self.
+00028250: 636c 6965 6e74 0a20 2020 2020 2020 2020  client.         
+00028260: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00028270: 2020 2020 2020 2020 206d 7367 203d 2022           msg = "
+00028280: 4465 6c65 7469 6e67 2067 6b65 2063 6c75  Deleting gke clu
+00028290: 7374 6572 2072 6571 7569 7265 7320 746f  ster requires to
+000282a0: 2069 6e73 7461 6e74 6961 7465 2067 6370   instantiate gcp
+000282b0: 2070 726f 7669 6465 7222 0a20 2020 2020   provider".     
+000282c0: 2020 2020 2020 2020 2020 2065 7272 6f72             error
+000282d0: 286d 7367 290a 2020 2020 2020 2020 2020  (msg).          
+000282e0: 2020 2020 2020 7265 7475 726e 207b 2772        return {'r
+000282f0: 6573 756c 7427 3a20 2766 6169 6c75 7265  esult': 'failure
+00028300: 272c 2027 7265 6173 6f6e 273a 206d 7367  ', 'reason': msg
+00028310: 7d0a 2020 2020 2020 2020 2020 2020 6672  }.            fr
+00028320: 6f6d 206b 7669 7274 2e63 6c75 7374 6572  om kvirt.cluster
+00028330: 2069 6d70 6f72 7420 676b 650a 2020 2020   import gke.    
+00028340: 2020 2020 2020 2020 6375 7272 656e 7463          currentc
+00028350: 6f6e 6669 6720 3d20 4b63 6f6e 6669 6728  onfig = Kconfig(
+00028360: 636c 6965 6e74 3d67 6370 636c 6965 6e74  client=gcpclient
+00028370: 292e 6b20 6966 2067 6370 636c 6965 6e74  ).k if gcpclient
+00028380: 2021 3d20 7365 6c66 2e63 6c69 656e 7420   != self.client 
+00028390: 656c 7365 2073 656c 660a 2020 2020 2020  else self.      
+000283a0: 2020 2020 2020 7a6f 6e61 6c20 3d20 636c        zonal = cl
+000283b0: 7573 7465 7264 6174 612e 6765 7428 277a  usterdata.get('z
+000283c0: 6f6e 616c 272c 2054 7275 6529 0a20 2020  onal', True).   
+000283d0: 2020 2020 2020 2020 2067 6b65 2e64 656c           gke.del
+000283e0: 6574 6528 6375 7272 656e 7463 6f6e 6669  ete(currentconfi
+000283f0: 672c 2063 6c75 7374 6572 2c20 7a6f 6e61  g, cluster, zona
+00028400: 6c29 0a20 2020 2020 2020 2065 6c69 6620  l).        elif 
+00028410: 656b 733a 0a20 2020 2020 2020 2020 2020  eks:.           
+00028420: 2065 6b73 636c 6965 6e74 203d 204e 6f6e   eksclient = Non
+00028430: 650a 2020 2020 2020 2020 2020 2020 6966  e.            if
+00028440: 2027 636c 6965 6e74 2720 696e 2063 6c75   'client' in clu
+00028450: 7374 6572 6461 7461 3a0a 2020 2020 2020  sterdata:.      
+00028460: 2020 2020 2020 2020 2020 656b 7363 6c69            ekscli
+00028470: 656e 7420 3d20 636c 7573 7465 7264 6174  ent = clusterdat
+00028480: 615b 2763 6c69 656e 7427 5d0a 2020 2020  a['client'].    
+00028490: 2020 2020 2020 2020 656c 6966 2073 656c          elif sel
+000284a0: 662e 7479 7065 203d 3d20 2761 7773 273a  f.type == 'aws':
+000284b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000284c0: 2065 6b73 636c 6965 6e74 203d 2073 656c   eksclient = sel
+000284d0: 662e 636c 6965 6e74 0a20 2020 2020 2020  f.client.       
+000284e0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+000284f0: 2020 2020 2020 2020 2020 206d 7367 203d             msg =
+00028500: 2022 4465 6c65 7469 6e67 2065 6b73 2063   "Deleting eks c
+00028510: 6c75 7374 6572 2072 6571 7569 7265 7320  luster requires 
+00028520: 746f 2069 6e73 7461 6e74 6961 7465 2061  to instantiate a
+00028530: 7773 2070 726f 7669 6465 7222 0a20 2020  ws provider".   
+00028540: 2020 2020 2020 2020 2020 2020 2065 7272               err
+00028550: 6f72 286d 7367 290a 2020 2020 2020 2020  or(msg).        
+00028560: 2020 2020 2020 2020 7265 7475 726e 207b          return {
+00028570: 2772 6573 756c 7427 3a20 2766 6169 6c75  'result': 'failu
+00028580: 7265 272c 2027 7265 6173 6f6e 273a 206d  re', 'reason': m
+00028590: 7367 7d0a 2020 2020 2020 2020 2020 2020  sg}.            
+000285a0: 6672 6f6d 206b 7669 7274 2e63 6c75 7374  from kvirt.clust
+000285b0: 6572 2069 6d70 6f72 7420 656b 730a 2020  er import eks.  
+000285c0: 2020 2020 2020 2020 2020 6375 7272 656e            curren
+000285d0: 7463 6f6e 6669 6720 3d20 4b63 6f6e 6669  tconfig = Kconfi
+000285e0: 6728 636c 6965 6e74 3d65 6b73 636c 6965  g(client=eksclie
+000285f0: 6e74 292e 6b20 6966 2065 6b73 636c 6965  nt).k if eksclie
+00028600: 6e74 2021 3d20 7365 6c66 2e63 6c69 656e  nt != self.clien
+00028610: 7420 656c 7365 2073 656c 660a 2020 2020  t else self.    
+00028620: 2020 2020 2020 2020 656b 732e 6465 6c65          eks.dele
+00028630: 7465 2863 7572 7265 6e74 636f 6e66 6967  te(currentconfig
+00028640: 2c20 636c 7573 7465 7229 0a20 2020 2020  , cluster).     
+00028650: 2020 2065 6c69 6620 616b 733a 0a20 2020     elif aks:.   
+00028660: 2020 2020 2020 2020 2061 6b73 636c 6965           aksclie
+00028670: 6e74 203d 204e 6f6e 650a 2020 2020 2020  nt = None.      
+00028680: 2020 2020 2020 6966 2027 636c 6965 6e74        if 'client
+00028690: 2720 696e 2063 6c75 7374 6572 6461 7461  ' in clusterdata
+000286a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000286b0: 2020 616b 7363 6c69 656e 7420 3d20 636c    aksclient = cl
+000286c0: 7573 7465 7264 6174 615b 2763 6c69 656e  usterdata['clien
+000286d0: 7427 5d0a 2020 2020 2020 2020 2020 2020  t'].            
+000286e0: 656c 6966 2073 656c 662e 7479 7065 203d  elif self.type =
+000286f0: 3d20 2761 7a75 7265 273a 0a20 2020 2020  = 'azure':.     
+00028700: 2020 2020 2020 2020 2020 2061 6b73 636c             akscl
+00028710: 6965 6e74 203d 2073 656c 662e 636c 6965  ient = self.clie
+00028720: 6e74 0a20 2020 2020 2020 2020 2020 2065  nt.            e
+00028730: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00028740: 2020 2020 206d 7367 203d 2022 4465 6c65       msg = "Dele
+00028750: 7469 6e67 2061 6b73 2063 6c75 7374 6572  ting aks cluster
+00028760: 2072 6571 7569 7265 7320 746f 2069 6e73   requires to ins
+00028770: 7461 6e74 6961 7465 2061 7a75 7265 2070  tantiate azure p
+00028780: 726f 7669 6465 7222 0a20 2020 2020 2020  rovider".       
+00028790: 2020 2020 2020 2020 2065 7272 6f72 286d           error(m
+000287a0: 7367 290a 2020 2020 2020 2020 2020 2020  sg).            
+000287b0: 2020 2020 7265 7475 726e 207b 2772 6573      return {'res
+000287c0: 756c 7427 3a20 2766 6169 6c75 7265 272c  ult': 'failure',
+000287d0: 2027 7265 6173 6f6e 273a 206d 7367 7d0a   'reason': msg}.
+000287e0: 2020 2020 2020 2020 2020 2020 6672 6f6d              from
+000287f0: 206b 7669 7274 2e63 6c75 7374 6572 2069   kvirt.cluster i
+00028800: 6d70 6f72 7420 616b 730a 2020 2020 2020  mport aks.      
+00028810: 2020 2020 2020 6375 7272 656e 7463 6f6e        currentcon
+00028820: 6669 6720 3d20 4b63 6f6e 6669 6728 636c  fig = Kconfig(cl
+00028830: 6965 6e74 3d61 6b73 636c 6965 6e74 292e  ient=aksclient).
+00028840: 6b20 6966 2061 6b73 636c 6965 6e74 2021  k if aksclient !
+00028850: 3d20 7365 6c66 2e63 6c69 656e 7420 656c  = self.client el
+00028860: 7365 2073 656c 660a 2020 2020 2020 2020  se self.        
+00028870: 2020 2020 616b 732e 6465 6c65 7465 2863      aks.delete(c
+00028880: 7572 7265 6e74 636f 6e66 6967 2c20 636c  urrentconfig, cl
+00028890: 7573 7465 7229 0a20 2020 2020 2020 2066  uster).        f
+000288a0: 6f72 2063 6f6e 6670 6f6f 6c20 696e 2073  or confpool in s
+000288b0: 656c 662e 636f 6e66 706f 6f6c 733a 0a20  elf.confpools:. 
+000288c0: 2020 2020 2020 2020 2020 2069 705f 7265             ip_re
+000288d0: 7365 7276 6174 696f 6e73 203d 2073 656c  servations = sel
+000288e0: 662e 636f 6e66 706f 6f6c 735b 636f 6e66  f.confpools[conf
+000288f0: 706f 6f6c 5d2e 6765 7428 2769 705f 7265  pool].get('ip_re
+00028900: 7365 7276 6174 696f 6e73 272c 207b 7d29  servations', {})
+00028910: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00028920: 636c 7573 7465 7220 696e 2069 705f 7265  cluster in ip_re
+00028930: 7365 7276 6174 696f 6e73 3a0a 2020 2020  servations:.    
+00028940: 2020 2020 2020 2020 2020 2020 6465 6c20              del 
+00028950: 6970 5f72 6573 6572 7661 7469 6f6e 735b  ip_reservations[
+00028960: 636c 7573 7465 725d 0a20 2020 2020 2020  cluster].       
+00028970: 2020 2020 2020 2020 2073 656c 662e 7570           self.up
+00028980: 6461 7465 5f63 6f6e 6670 6f6f 6c28 636f  date_confpool(co
+00028990: 6e66 706f 6f6c 2c20 7b27 6970 5f72 6573  nfpool, {'ip_res
+000289a0: 6572 7661 7469 6f6e 7327 3a20 6970 5f72  ervations': ip_r
+000289b0: 6573 6572 7661 7469 6f6e 737d 290a 2020  eservations}).  
+000289c0: 2020 2020 2020 2020 2020 6e61 6d65 5f72            name_r
+000289d0: 6573 6572 7661 7469 6f6e 7320 3d20 7365  eservations = se
+000289e0: 6c66 2e63 6f6e 6670 6f6f 6c73 5b63 6f6e  lf.confpools[con
+000289f0: 6670 6f6f 6c5d 2e67 6574 2827 6e61 6d65  fpool].get('name
+00028a00: 5f72 6573 6572 7661 7469 6f6e 7327 2c20  _reservations', 
+00028a10: 5b5d 290a 2020 2020 2020 2020 2020 2020  []).            
+00028a20: 6966 2063 6c75 7374 6572 2069 6e20 6e61  if cluster in na
+00028a30: 6d65 5f72 6573 6572 7661 7469 6f6e 733a  me_reservations:
+00028a40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00028a50: 206e 616d 655f 7265 7365 7276 6174 696f   name_reservatio
+00028a60: 6e73 2e72 656d 6f76 6528 636c 7573 7465  ns.remove(cluste
+00028a70: 7229 0a20 2020 2020 2020 2020 2020 2020  r).             
+00028a80: 2020 2073 656c 662e 7570 6461 7465 5f63     self.update_c
+00028a90: 6f6e 6670 6f6f 6c28 636f 6e66 706f 6f6c  onfpool(confpool
+00028aa0: 2c20 7b27 6e61 6d65 5f72 6573 6572 7661  , {'name_reserva
+00028ab0: 7469 6f6e 7327 3a20 6e61 6d65 5f72 6573  tions': name_res
+00028ac0: 6572 7661 7469 6f6e 737d 290a 2020 2020  ervations}).    
+00028ad0: 2020 2020 2020 2020 636c 7573 7465 725f          cluster_
+00028ae0: 6261 7265 6d65 7461 6c5f 7265 7365 7276  baremetal_reserv
+00028af0: 6174 696f 6e73 203d 2073 656c 662e 636f  ations = self.co
+00028b00: 6e66 706f 6f6c 735b 636f 6e66 706f 6f6c  nfpools[confpool
+00028b10: 5d2e 6765 7428 2763 6c75 7374 6572 5f62  ].get('cluster_b
+00028b20: 6172 656d 6574 616c 5f72 6573 6572 7661  aremetal_reserva
+00028b30: 7469 6f6e 7327 2c20 7b7d 290a 2020 2020  tions', {}).    
+00028b40: 2020 2020 2020 2020 6966 2063 6c75 7374          if clust
+00028b50: 6572 2069 6e20 636c 7573 7465 725f 6261  er in cluster_ba
+00028b60: 7265 6d65 7461 6c5f 7265 7365 7276 6174  remetal_reservat
+00028b70: 696f 6e73 3a0a 2020 2020 2020 2020 2020  ions:.          
+00028b80: 2020 2020 2020 6465 6c20 636c 7573 7465        del cluste
+00028b90: 725f 6261 7265 6d65 7461 6c5f 7265 7365  r_baremetal_rese
+00028ba0: 7276 6174 696f 6e73 5b63 6c75 7374 6572  rvations[cluster
+00028bb0: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+00028bc0: 2020 7365 6c66 2e75 7064 6174 655f 636f    self.update_co
+00028bd0: 6e66 706f 6f6c 2863 6f6e 6670 6f6f 6c2c  nfpool(confpool,
+00028be0: 207b 2763 6c75 7374 6572 5f62 6172 656d   {'cluster_barem
+00028bf0: 6574 616c 5f72 6573 6572 7661 7469 6f6e  etal_reservation
+00028c00: 7327 3a20 636c 7573 7465 725f 6261 7265  s': cluster_bare
+00028c10: 6d65 7461 6c5f 7265 7365 7276 6174 696f  metal_reservatio
+00028c20: 6e73 7d29 0a20 2020 2020 2020 2069 6620  ns}).        if 
+00028c30: 6f73 2e70 6174 682e 6578 6973 7473 2863  os.path.exists(c
+00028c40: 6c75 7374 6572 6469 7229 3a0a 2020 2020  lusterdir):.    
+00028c50: 2020 2020 2020 2020 7070 7269 6e74 2866          pprint(f
+00028c60: 2244 656c 6574 696e 6720 6469 7265 6374  "Deleting direct
+00028c70: 6f72 7920 7b63 6c75 7374 6572 6469 727d  ory {clusterdir}
+00028c80: 2229 0a20 2020 2020 2020 2020 2020 2072  ").            r
+00028c90: 6d74 7265 6528 636c 7573 7465 7264 6972  mtree(clusterdir
+00028ca0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00028cb0: 207b 2772 6573 756c 7427 3a20 2773 7563   {'result': 'suc
+00028cc0: 6365 7373 277d 0a0a 2020 2020 6465 6620  cess'}..    def 
+00028cd0: 7363 616c 655f 6b75 6265 2873 656c 662c  scale_kube(self,
+00028ce0: 2063 6c75 7374 6572 2c20 6b75 6265 7479   cluster, kubety
+00028cf0: 7065 2c20 6f76 6572 7269 6465 733d 7b7d  pe, overrides={}
+00028d00: 293a 0a20 2020 2020 2020 2069 6620 6b75  ):.        if ku
+00028d10: 6265 7479 7065 203d 3d20 2767 656e 6572  betype == 'gener
+00028d20: 6963 273a 0a20 2020 2020 2020 2020 2020  ic':.           
+00028d30: 2072 6573 756c 7420 3d20 7365 6c66 2e73   result = self.s
+00028d40: 6361 6c65 5f6b 7562 655f 6765 6e65 7269  cale_kube_generi
+00028d50: 6328 636c 7573 7465 722c 206f 7665 7272  c(cluster, overr
+00028d60: 6964 6573 3d6f 7665 7272 6964 6573 290a  ides=overrides).
+00028d70: 2020 2020 2020 2020 656c 6966 206b 7562          elif kub
+00028d80: 6574 7970 6520 3d3d 2027 6b33 7327 3a0a  etype == 'k3s':.
+00028d90: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+00028da0: 6c74 203d 2073 656c 662e 7363 616c 655f  lt = self.scale_
+00028db0: 6b75 6265 5f6b 3373 2863 6c75 7374 6572  kube_k3s(cluster
+00028dc0: 2c20 6f76 6572 7269 6465 733d 6f76 6572  , overrides=over
+00028dd0: 7269 6465 7329 0a20 2020 2020 2020 2065  rides).        e
+00028de0: 6c69 6620 6b75 6265 7479 7065 203d 3d20  lif kubetype == 
+00028df0: 276f 7065 6e73 6869 6674 273a 0a20 2020  'openshift':.   
+00028e00: 2020 2020 2020 2020 2072 6573 756c 7420           result 
+00028e10: 3d20 7365 6c66 2e73 6361 6c65 5f6b 7562  = self.scale_kub
+00028e20: 655f 6f70 656e 7368 6966 7428 636c 7573  e_openshift(clus
+00028e30: 7465 722c 206f 7665 7272 6964 6573 3d6f  ter, overrides=o
+00028e40: 7665 7272 6964 6573 290a 2020 2020 2020  verrides).      
+00028e50: 2020 656c 6966 206b 7562 6574 7970 6520    elif kubetype 
+00028e60: 3d3d 2027 6879 7065 7273 6869 6674 273a  == 'hypershift':
+00028e70: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+00028e80: 756c 7420 3d20 7365 6c66 2e73 6361 6c65  ult = self.scale
+00028e90: 5f6b 7562 655f 6879 7065 7273 6869 6674  _kube_hypershift
+00028ea0: 2863 6c75 7374 6572 2c20 6f76 6572 7269  (cluster, overri
+00028eb0: 6465 733d 6f76 6572 7269 6465 7329 0a20  des=overrides). 
+00028ec0: 2020 2020 2020 2065 6c69 6620 6b75 6265         elif kube
+00028ed0: 7479 7065 203d 3d20 2767 6b65 273a 0a20  type == 'gke':. 
+00028ee0: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+00028ef0: 7420 3d20 7365 6c66 2e73 6361 6c65 5f6b  t = self.scale_k
+00028f00: 7562 655f 676b 6528 636c 7573 7465 722c  ube_gke(cluster,
+00028f10: 206f 7665 7272 6964 6573 3d6f 7665 7272   overrides=overr
+00028f20: 6964 6573 290a 2020 2020 2020 2020 656c  ides).        el
+00028f30: 6966 206b 7562 6574 7970 6520 3d3d 2027  if kubetype == '
+00028f40: 656b 7327 3a0a 2020 2020 2020 2020 2020  eks':.          
+00028f50: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
+00028f60: 7363 616c 655f 6b75 6265 5f65 6b73 2863  scale_kube_eks(c
+00028f70: 6c75 7374 6572 2c20 6f76 6572 7269 6465  luster, override
+00028f80: 733d 6f76 6572 7269 6465 7329 0a20 2020  s=overrides).   
+00028f90: 2020 2020 2065 6c69 6620 6b75 6265 7479       elif kubety
+00028fa0: 7065 203d 3d20 2761 6b73 273a 0a20 2020  pe == 'aks':.   
+00028fb0: 2020 2020 2020 2020 2072 6573 756c 7420           result 
+00028fc0: 3d20 7365 6c66 2e73 6361 6c65 5f6b 7562  = self.scale_kub
+00028fd0: 655f 616b 7328 636c 7573 7465 722c 206f  e_aks(cluster, o
+00028fe0: 7665 7272 6964 6573 3d6f 7665 7272 6964  verrides=overrid
+00028ff0: 6573 290a 2020 2020 2020 2020 7265 7475  es).        retu
+00029000: 726e 2072 6573 756c 740a 0a20 2020 2064  rn result..    d
+00029010: 6566 2073 6361 6c65 5f6b 7562 655f 616b  ef scale_kube_ak
+00029020: 7328 7365 6c66 2c20 636c 7573 7465 722c  s(self, cluster,
+00029030: 206f 7665 7272 6964 6573 3d7b 7d29 3a0a   overrides={}):.
+00029040: 2020 2020 2020 2020 6672 6f6d 206b 7669          from kvi
+00029050: 7274 2e63 6c75 7374 6572 2069 6d70 6f72  rt.cluster impor
+00029060: 7420 616b 730a 2020 2020 2020 2020 7265  t aks.        re
+00029070: 7475 726e 2061 6b73 2e73 6361 6c65 2873  turn aks.scale(s
+00029080: 656c 662c 2063 6c75 7374 6572 2c20 6f76  elf, cluster, ov
+00029090: 6572 7269 6465 7329 0a0a 2020 2020 6465  errides)..    de
+000290a0: 6620 7363 616c 655f 6b75 6265 5f65 6b73  f scale_kube_eks
+000290b0: 2873 656c 662c 2063 6c75 7374 6572 2c20  (self, cluster, 
+000290c0: 6f76 6572 7269 6465 733d 7b7d 293a 0a20  overrides={}):. 
+000290d0: 2020 2020 2020 2066 726f 6d20 6b76 6972         from kvir
+000290e0: 742e 636c 7573 7465 7220 696d 706f 7274  t.cluster import
+000290f0: 2065 6b73 0a20 2020 2020 2020 2072 6574   eks.        ret
+00029100: 7572 6e20 656b 732e 7363 616c 6528 7365  urn eks.scale(se
+00029110: 6c66 2c20 636c 7573 7465 722c 206f 7665  lf, cluster, ove
+00029120: 7272 6964 6573 290a 0a20 2020 2064 6566  rrides)..    def
+00029130: 2073 6361 6c65 5f6b 7562 655f 6765 6e65   scale_kube_gene
+00029140: 7269 6328 7365 6c66 2c20 636c 7573 7465  ric(self, cluste
+00029150: 722c 206f 7665 7272 6964 6573 3d7b 7d29  r, overrides={})
+00029160: 3a0a 2020 2020 2020 2020 706c 616e 6469  :.        plandi
+00029170: 7220 3d20 6f73 2e70 6174 682e 6469 726e  r = os.path.dirn
+00029180: 616d 6528 6b75 6265 6164 6d2e 6372 6561  ame(kubeadm.crea
+00029190: 7465 2e5f 5f63 6f64 655f 5f2e 636f 5f66  te.__code__.co_f
+000291a0: 696c 656e 616d 6529 0a20 2020 2020 2020  ilename).       
+000291b0: 2072 6574 7572 6e20 6b75 6265 6164 6d2e   return kubeadm.
+000291c0: 7363 616c 6528 7365 6c66 2c20 706c 616e  scale(self, plan
+000291d0: 6469 722c 2063 6c75 7374 6572 2c20 6f76  dir, cluster, ov
+000291e0: 6572 7269 6465 7329 0a0a 2020 2020 6465  errides)..    de
+000291f0: 6620 7363 616c 655f 6b75 6265 5f67 6b65  f scale_kube_gke
+00029200: 2873 656c 662c 2063 6c75 7374 6572 2c20  (self, cluster, 
+00029210: 6f76 6572 7269 6465 733d 7b7d 293a 0a20  overrides={}):. 
+00029220: 2020 2020 2020 2066 726f 6d20 6b76 6972         from kvir
+00029230: 742e 636c 7573 7465 7220 696d 706f 7274  t.cluster import
+00029240: 2067 6b65 0a20 2020 2020 2020 2072 6574   gke.        ret
+00029250: 7572 6e20 676b 652e 7363 616c 6528 7365  urn gke.scale(se
+00029260: 6c66 2c20 636c 7573 7465 722c 206f 7665  lf, cluster, ove
+00029270: 7272 6964 6573 290a 0a20 2020 2064 6566  rrides)..    def
+00029280: 2073 6361 6c65 5f6b 7562 655f 6879 7065   scale_kube_hype
+00029290: 7273 6869 6674 2873 656c 662c 2063 6c75  rshift(self, clu
+000292a0: 7374 6572 2c20 6f76 6572 7269 6465 733d  ster, overrides=
+000292b0: 7b7d 293a 0a20 2020 2020 2020 2070 6c61  {}):.        pla
+000292c0: 6e64 6972 203d 206f 732e 7061 7468 2e64  ndir = os.path.d
+000292d0: 6972 6e61 6d65 2868 7970 6572 7368 6966  irname(hypershif
+000292e0: 742e 6372 6561 7465 2e5f 5f63 6f64 655f  t.create.__code_
+000292f0: 5f2e 636f 5f66 696c 656e 616d 6529 0a20  _.co_filename). 
+00029300: 2020 2020 2020 2072 6574 7572 6e20 6879         return hy
+00029310: 7065 7273 6869 6674 2e73 6361 6c65 2873  pershift.scale(s
+00029320: 656c 662c 2070 6c61 6e64 6972 2c20 636c  elf, plandir, cl
+00029330: 7573 7465 722c 206f 7665 7272 6964 6573  uster, overrides
+00029340: 290a 0a20 2020 2064 6566 2073 6361 6c65  )..    def scale
+00029350: 5f6b 7562 655f 6b33 7328 7365 6c66 2c20  _kube_k3s(self, 
+00029360: 636c 7573 7465 722c 206f 7665 7272 6964  cluster, overrid
+00029370: 6573 3d7b 7d29 3a0a 2020 2020 2020 2020  es={}):.        
+00029380: 706c 616e 6469 7220 3d20 6f73 2e70 6174  plandir = os.pat
+00029390: 682e 6469 726e 616d 6528 6b33 732e 6372  h.dirname(k3s.cr
+000293a0: 6561 7465 2e5f 5f63 6f64 655f 5f2e 636f  eate.__code__.co
+000293b0: 5f66 696c 656e 616d 6529 0a20 2020 2020  _filename).     
+000293c0: 2020 2072 6574 7572 6e20 6b33 732e 7363     return k3s.sc
+000293d0: 616c 6528 7365 6c66 2c20 706c 616e 6469  ale(self, plandi
+000293e0: 722c 2063 6c75 7374 6572 2c20 6f76 6572  r, cluster, over
+000293f0: 7269 6465 7329 0a0a 2020 2020 6465 6620  rides)..    def 
+00029400: 7363 616c 655f 6b75 6265 5f6f 7065 6e73  scale_kube_opens
+00029410: 6869 6674 2873 656c 662c 2063 6c75 7374  hift(self, clust
+00029420: 6572 2c20 6f76 6572 7269 6465 733d 7b7d  er, overrides={}
+00029430: 293a 0a20 2020 2020 2020 2070 6c61 6e64  ):.        pland
+00029440: 6972 203d 206f 732e 7061 7468 2e64 6972  ir = os.path.dir
+00029450: 6e61 6d65 286f 7065 6e73 6869 6674 2e63  name(openshift.c
+00029460: 7265 6174 652e 5f5f 636f 6465 5f5f 2e63  reate.__code__.c
+00029470: 6f5f 6669 6c65 6e61 6d65 290a 2020 2020  o_filename).    
+00029480: 2020 2020 7265 7475 726e 206f 7065 6e73      return opens
+00029490: 6869 6674 2e73 6361 6c65 2873 656c 662c  hift.scale(self,
+000294a0: 2070 6c61 6e64 6972 2c20 636c 7573 7465   plandir, cluste
+000294b0: 722c 206f 7665 7272 6964 6573 290a 0a20  r, overrides).. 
+000294c0: 2020 2064 6566 2075 7064 6174 655f 6b75     def update_ku
+000294d0: 6265 2873 656c 662c 2063 6c75 7374 6572  be(self, cluster
+000294e0: 2c20 5f74 7970 652c 206f 7665 7272 6964  , _type, overrid
+000294f0: 6573 3d7b 7d2c 2070 6c61 6e3d 4e6f 6e65  es={}, plan=None
+00029500: 293a 0a20 2020 2020 2020 206f 7665 7272  ):.        overr
+00029510: 6964 6573 5b27 736b 6970 5f66 696c 6573  ides['skip_files
+00029520: 5f72 656d 6564 6961 7469 6f6e 275d 203d  _remediation'] =
+00029530: 2054 7275 650a 2020 2020 2020 2020 6f76   True.        ov
+00029540: 6572 7269 6465 735b 2773 6361 6c65 275d  errides['scale']
+00029550: 203d 2054 7275 650a 2020 2020 2020 2020   = True.        
+00029560: 636c 7573 7465 7264 6972 203d 206f 732e  clusterdir = os.
+00029570: 7061 7468 2e65 7870 616e 6475 7365 7228  path.expanduser(
+00029580: 6622 7e2f 2e6b 636c 692f 636c 7573 7465  f"~/.kcli/cluste
+00029590: 7273 2f7b 636c 7573 7465 727d 2229 0a20  rs/{cluster}"). 
+000295a0: 2020 2020 2020 2070 6c61 6e76 6d73 203d         planvms =
+000295b0: 205b 5d0a 2020 2020 2020 2020 6966 2070   [].        if p
+000295c0: 6c61 6e20 6973 204e 6f6e 653a 0a20 2020  lan is None:.   
+000295d0: 2020 2020 2020 2020 2070 6c61 6e20 3d20           plan = 
+000295e0: 636c 7573 7465 720a 2020 2020 2020 2020  cluster.        
+000295f0: 6966 205f 7479 7065 203d 3d20 2761 6b73  if _type == 'aks
+00029600: 273a 0a20 2020 2020 2020 2020 2020 2073  ':.            s
+00029610: 656c 662e 7363 616c 655f 6b75 6265 5f61  elf.scale_kube_a
+00029620: 6b73 2863 6c75 7374 6572 2c20 6f76 6572  ks(cluster, over
+00029630: 7269 6465 733d 6f76 6572 7269 6465 7329  rides=overrides)
+00029640: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00029650: 7572 6e0a 2020 2020 2020 2020 6966 205f  urn.        if _
+00029660: 7479 7065 203d 3d20 2765 6b73 273a 0a20  type == 'eks':. 
+00029670: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00029680: 7363 616c 655f 6b75 6265 5f65 6b73 2863  scale_kube_eks(c
+00029690: 6c75 7374 6572 2c20 6f76 6572 7269 6465  luster, override
+000296a0: 733d 6f76 6572 7269 6465 7329 0a20 2020  s=overrides).   
+000296b0: 2020 2020 2020 2020 2072 6574 7572 6e0a           return.
+000296c0: 2020 2020 2020 2020 6966 205f 7479 7065          if _type
+000296d0: 203d 3d20 2767 6b65 273a 0a20 2020 2020   == 'gke':.     
+000296e0: 2020 2020 2020 2073 656c 662e 7363 616c         self.scal
+000296f0: 655f 6b75 6265 5f67 6b65 2863 6c75 7374  e_kube_gke(clust
+00029700: 6572 2c20 6f76 6572 7269 6465 733d 6f76  er, overrides=ov
+00029710: 6572 7269 6465 7329 0a20 2020 2020 2020  errides).       
+00029720: 2020 2020 2072 6574 7572 6e0a 2020 2020       return.    
+00029730: 2020 2020 6966 205f 7479 7065 203d 3d20      if _type == 
+00029740: 2767 656e 6572 6963 273a 0a20 2020 2020  'generic':.     
+00029750: 2020 2020 2020 2072 6f6c 6573 203d 205b         roles = [
+00029760: 2763 746c 706c 616e 6573 272c 2027 776f  'ctlplanes', 'wo
+00029770: 726b 6572 7327 5d0a 2020 2020 2020 2020  rkers'].        
+00029780: 2020 2020 706c 616e 6469 7220 3d20 6f73      plandir = os
+00029790: 2e70 6174 682e 6469 726e 616d 6528 6b75  .path.dirname(ku
+000297a0: 6265 6164 6d2e 6372 6561 7465 2e5f 5f63  beadm.create.__c
+000297b0: 6f64 655f 5f2e 636f 5f66 696c 656e 616d  ode__.co_filenam
+000297c0: 6529 0a20 2020 2020 2020 2065 6c69 6620  e).        elif 
+000297d0: 5f74 7970 6520 3d3d 2027 6b33 7327 3a0a  _type == 'k3s':.
+000297e0: 2020 2020 2020 2020 2020 2020 706c 616e              plan
+000297f0: 6469 7220 3d20 6f73 2e70 6174 682e 6469  dir = os.path.di
+00029800: 726e 616d 6528 6b33 732e 6372 6561 7465  rname(k3s.create
+00029810: 2e5f 5f63 6f64 655f 5f2e 636f 5f66 696c  .__code__.co_fil
+00029820: 656e 616d 6529 0a20 2020 2020 2020 2020  ename).         
+00029830: 2020 2072 6f6c 6573 203d 205b 2762 6f6f     roles = ['boo
+00029840: 7473 7472 6170 272c 2027 776f 726b 6572  tstrap', 'worker
+00029850: 7327 5d20 6966 206f 7665 7272 6964 6573  s'] if overrides
+00029860: 2e67 6574 2827 6374 6c70 6c61 6e65 7327  .get('ctlplanes'
+00029870: 2c20 3129 203d 3d20 3120 656c 7365 205b  , 1) == 1 else [
+00029880: 2762 6f6f 7473 7472 6170 272c 2027 6374  'bootstrap', 'ct
+00029890: 6c70 6c61 6e65 7327 2c0a 2020 2020 2020  lplanes',.      
+000298a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000298b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000298c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000298d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000298e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000298f0: 2020 2027 776f 726b 6572 7327 5d0a 2020     'workers'].  
+00029900: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00029910: 2020 2020 2020 2020 706c 616e 6469 7220          plandir 
+00029920: 3d20 6f73 2e70 6174 682e 6469 726e 616d  = os.path.dirnam
+00029930: 6528 6f70 656e 7368 6966 742e 6372 6561  e(openshift.crea
+00029940: 7465 2e5f 5f63 6f64 655f 5f2e 636f 5f66  te.__code__.co_f
+00029950: 696c 656e 616d 6529 0a20 2020 2020 2020  ilename).       
+00029960: 2020 2020 2072 6f6c 6573 203d 205b 2763       roles = ['c
+00029970: 746c 706c 616e 6573 272c 2027 776f 726b  tlplanes', 'work
+00029980: 6572 7327 5d0a 2020 2020 2020 2020 2020  ers'].          
+00029990: 2020 6966 2073 656c 662e 7479 7065 2069    if self.type i
+000299a0: 6e20 5b27 6177 7327 2c20 2761 7a75 7265  n ['aws', 'azure
+000299b0: 272c 2027 6763 7027 5d3a 0a20 2020 2020  ', 'gcp']:.     
+000299c0: 2020 2020 2020 2020 2020 2072 6f6c 6573             roles
+000299d0: 203d 205b 6627 636c 6f75 645f 7b72 6f6c   = [f'cloud_{rol
+000299e0: 657d 2720 666f 7220 726f 6c65 2069 6e20  e}' for role in 
+000299f0: 726f 6c65 735d 0a20 2020 2020 2020 2069  roles].        i
+00029a00: 6620 6f76 6572 7269 6465 732e 6765 7428  f overrides.get(
+00029a10: 2777 6f72 6b65 7273 272c 2030 2920 3d3d  'workers', 0) ==
+00029a20: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
+00029a30: 6465 6c20 726f 6c65 735b 2d31 5d0a 2020  del roles[-1].  
+00029a40: 2020 2020 2020 6966 206f 732e 7061 7468        if os.path
+00029a50: 2e65 7869 7374 7328 6622 7b63 6c75 7374  .exists(f"{clust
+00029a60: 6572 6469 727d 2f6b 636c 695f 7061 7261  erdir}/kcli_para
+00029a70: 6d65 7465 7273 2e79 6d6c 2229 3a0a 2020  meters.yml"):.  
+00029a80: 2020 2020 2020 2020 2020 6461 7461 203d            data =
+00029a90: 207b 2763 6c75 7374 6572 273a 2063 6c75   {'cluster': clu
+00029aa0: 7374 6572 2c20 276b 7562 6527 3a20 636c  ster, 'kube': cl
+00029ab0: 7573 7465 722c 2027 6b75 6265 7479 7065  uster, 'kubetype
+00029ac0: 273a 205f 7479 7065 7d0a 2020 2020 2020  ': _type}.      
+00029ad0: 2020 2020 2020 7769 7468 206f 7065 6e28        with open(
+00029ae0: 6622 7b63 6c75 7374 6572 6469 727d 2f6b  f"{clusterdir}/k
+00029af0: 636c 695f 7061 7261 6d65 7465 7273 2e79  cli_parameters.y
+00029b00: 6d6c 222c 2027 7227 2920 6173 2069 6e73  ml", 'r') as ins
+00029b10: 7461 6c6c 3a0a 2020 2020 2020 2020 2020  tall:.          
+00029b20: 2020 2020 2020 696e 7374 616c 6c70 6172        installpar
+00029b30: 616d 203d 2079 616d 6c2e 7361 6665 5f6c  am = yaml.safe_l
+00029b40: 6f61 6428 696e 7374 616c 6c29 0a20 2020  oad(install).   
+00029b50: 2020 2020 2020 2020 2020 2020 2064 6174               dat
+00029b60: 612e 7570 6461 7465 2869 6e73 7461 6c6c  a.update(install
+00029b70: 7061 7261 6d29 0a20 2020 2020 2020 2020  param).         
+00029b80: 2020 2020 2020 2070 6c61 6e20 3d20 696e         plan = in
+00029b90: 7374 616c 6c70 6172 616d 2e67 6574 2827  stallparam.get('
+00029ba0: 706c 616e 272c 2070 6c61 6e29 0a20 2020  plan', plan).   
+00029bb0: 2020 2020 2020 2020 2064 6174 612e 7570           data.up
+00029bc0: 6461 7465 286f 7665 7272 6964 6573 290a  date(overrides).
+00029bd0: 2020 2020 2020 2020 2020 2020 7769 7468              with
+00029be0: 206f 7065 6e28 6622 7b63 6c75 7374 6572   open(f"{cluster
+00029bf0: 6469 727d 2f6b 636c 695f 7061 7261 6d65  dir}/kcli_parame
+00029c00: 7465 7273 2e79 6d6c 222c 2027 7727 2920  ters.yml", 'w') 
+00029c10: 6173 2070 6172 616d 6669 6c65 3a0a 2020  as paramfile:.  
+00029c20: 2020 2020 2020 2020 2020 2020 2020 7961                ya
+00029c30: 6d6c 2e73 6166 655f 6475 6d70 2864 6174  ml.safe_dump(dat
+00029c40: 612c 2070 6172 616d 6669 6c65 290a 2020  a, paramfile).  
+00029c50: 2020 2020 2020 6f73 2e63 6864 6972 286f        os.chdir(o
+00029c60: 732e 7061 7468 2e65 7870 616e 6475 7365  s.path.expanduse
+00029c70: 7228 227e 2f2e 6b63 6c69 2229 290a 2020  r("~/.kcli")).  
+00029c80: 2020 2020 2020 666f 7220 726f 6c65 2069        for role i
+00029c90: 6e20 726f 6c65 733a 0a20 2020 2020 2020  n roles:.       
+00029ca0: 2020 2020 2070 7072 696e 7428 6622 5570       pprint(f"Up
+00029cb0: 6461 7469 6e67 2076 6d73 2077 6974 6820  dating vms with 
+00029cc0: 7b72 6f6c 657d 2072 6f6c 6522 290a 2020  {role} role").  
+00029cd0: 2020 2020 2020 2020 2020 706c 616e 6461            planda
+00029ce0: 7461 203d 2073 656c 662e 706c 616e 2870  ta = self.plan(p
+00029cf0: 6c61 6e2c 2069 6e70 7574 6669 6c65 3d66  lan, inputfile=f
+00029d00: 277b 706c 616e 6469 727d 2f7b 726f 6c65  '{plandir}/{role
+00029d10: 7d2e 796d 6c27 2c20 6f76 6572 7269 6465  }.yml', override
+00029d20: 733d 6f76 6572 7269 6465 732c 2075 7064  s=overrides, upd
+00029d30: 6174 653d 5472 7565 290a 2020 2020 2020  ate=True).      
+00029d40: 2020 2020 2020 706c 616e 766d 732e 6578        planvms.ex
+00029d50: 7465 6e64 2870 6c61 6e64 6174 615b 276e  tend(plandata['n
+00029d60: 6577 766d 7327 5d20 2b20 706c 616e 6461  ewvms'] + planda
+00029d70: 7461 5b27 6578 6973 7469 6e67 766d 7327  ta['existingvms'
+00029d80: 5d29 0a20 2020 2020 2020 206f 732e 656e  ]).        os.en
+00029d90: 7669 726f 6e5b 274b 5542 4543 4f4e 4649  viron['KUBECONFI
+00029da0: 4727 5d20 3d20 6622 7b63 6c75 7374 6572  G'] = f"{cluster
+00029db0: 6469 727d 2f61 7574 682f 6b75 6265 636f  dir}/auth/kubeco
+00029dc0: 6e66 6967 220a 2020 2020 2020 2020 6269  nfig".        bi
+00029dd0: 6e61 7279 203d 2027 6f63 2720 6966 2077  nary = 'oc' if w
+00029de0: 6869 6368 2827 6f63 2729 2069 7320 6e6f  hich('oc') is no
+00029df0: 7420 4e6f 6e65 2065 6c73 6520 276b 7562  t None else 'kub
+00029e00: 6563 746c 270a 2020 2020 2020 2020 6e6f  ectl'.        no
+00029e10: 6465 7363 6d64 203d 2066 277b 6269 6e61  descmd = f'{bina
+00029e20: 7279 7d20 6765 7420 6e6f 6465 202d 6f20  ry} get node -o 
+00029e30: 6e61 6d65 270a 2020 2020 2020 2020 6e6f  name'.        no
+00029e40: 6465 7320 3d20 5b6e 2e73 7472 6970 2829  des = [n.strip()
+00029e50: 2e72 6570 6c61 6365 2827 6e6f 6465 2f27  .replace('node/'
+00029e60: 2c20 2727 2920 666f 7220 6e20 696e 206f  , '') for n in o
+00029e70: 732e 706f 7065 6e28 6e6f 6465 7363 6d64  s.popen(nodescmd
+00029e80: 292e 7265 6164 6c69 6e65 7328 295d 0a20  ).readlines()]. 
+00029e90: 2020 2020 2020 2066 6f72 2076 6d20 696e         for vm in
+00029ea0: 2073 656c 662e 6b2e 6c69 7374 2829 3a0a   self.k.list():.
+00029eb0: 2020 2020 2020 2020 2020 2020 766d 6e61              vmna
+00029ec0: 6d65 203d 2076 6d5b 276e 616d 6527 5d0a  me = vm['name'].
+00029ed0: 2020 2020 2020 2020 2020 2020 766d 706c              vmpl
+00029ee0: 616e 203d 2076 6d2e 6765 7428 2770 6c61  an = vm.get('pla
+00029ef0: 6e27 2c20 276b 7669 7274 2729 0a20 2020  n', 'kvirt').   
+00029f00: 2020 2020 2020 2020 2069 6620 766d 706c           if vmpl
+00029f10: 616e 203d 3d20 706c 616e 2061 6e64 2076  an == plan and v
+00029f20: 6d6e 616d 6520 6e6f 7420 696e 2070 6c61  mname not in pla
+00029f30: 6e76 6d73 3a0a 2020 2020 2020 2020 2020  nvms:.          
+00029f40: 2020 2020 2020 7070 7269 6e74 2866 2244        pprint(f"D
+00029f50: 656c 6574 696e 6720 766d 207b 766d 6e61  eleting vm {vmna
+00029f60: 6d65 7d22 290a 2020 2020 2020 2020 2020  me}").          
+00029f70: 2020 2020 2020 7365 6c66 2e6b 2e64 656c        self.k.del
+00029f80: 6574 6528 766d 6e61 6d65 290a 2020 2020  ete(vmname).    
+00029f90: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00029fa0: 6e6f 6465 2069 6e20 6e6f 6465 733a 0a20  node in nodes:. 
+00029fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029fc0: 2020 2069 6620 6e6f 6465 2e73 706c 6974     if node.split
+00029fd0: 2827 2e27 295b 305d 203d 3d20 766d 6e61  ('.')[0] == vmna
+00029fe0: 6d65 3a0a 2020 2020 2020 2020 2020 2020  me:.            
+00029ff0: 2020 2020 2020 2020 2020 2020 7070 7269              ppri
+0002a000: 6e74 2866 2244 656c 6574 696e 6720 6e6f  nt(f"Deleting no
+0002a010: 6465 207b 6e6f 6465 7d20 6672 6f6d 2079  de {node} from y
+0002a020: 6f75 7220 636c 7573 7465 7222 290a 2020  our cluster").  
+0002a030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a040: 2020 2020 2020 6361 6c6c 2866 277b 6269        call(f'{bi
+0002a050: 6e61 7279 7d20 6465 6c65 7465 206e 6f64  nary} delete nod
+0002a060: 6520 7b6e 6f64 657d 272c 2073 6865 6c6c  e {node}', shell
+0002a070: 3d54 7275 6529 0a20 2020 2020 2020 2020  =True).         
+0002a080: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+0002a090: 7265 616b 0a0a 2020 2020 6465 6620 6578  reak..    def ex
+0002a0a0: 706f 7365 5f70 6c61 6e28 7365 6c66 2c20  pose_plan(self, 
+0002a0b0: 706c 616e 2c20 696e 7075 7466 696c 653d  plan, inputfile=
+0002a0c0: 4e6f 6e65 2c20 6f76 6572 7269 6465 733d  None, overrides=
+0002a0d0: 7b7d 2c20 706f 7274 3d39 3030 302c 2070  {}, port=9000, p
+0002a0e0: 666d 6f64 653d 4661 6c73 652c 2063 6c75  fmode=False, clu
+0002a0f0: 7374 6572 3d46 616c 7365 293a 0a20 2020  ster=False):.   
+0002a100: 2020 2020 2069 6e70 7574 6669 6c65 203d       inputfile =
+0002a110: 206f 732e 7061 7468 2e65 7870 616e 6475   os.path.expandu
+0002a120: 7365 7228 696e 7075 7466 696c 6529 0a20  ser(inputfile). 
+0002a130: 2020 2020 2020 2069 6620 6e6f 7420 6f73         if not os
+0002a140: 2e70 6174 682e 6578 6973 7473 2869 6e70  .path.exists(inp
+0002a150: 7574 6669 6c65 293a 0a20 2020 2020 2020  utfile):.       
+0002a160: 2020 2020 2065 7272 6f72 2822 4e6f 2069       error("No i
+0002a170: 6e70 7574 2066 696c 6520 666f 756e 6420  nput file found 
+0002a180: 6e6f 7220 6465 6661 756c 7420 6b63 6c69  nor default kcli
+0002a190: 5f70 6c61 6e2e 796d 6c2e 4c65 6176 696e  _plan.yml.Leavin
+0002a1a0: 672e 2e2e 2e22 290a 2020 2020 2020 2020  g....").        
+0002a1b0: 2020 2020 7379 732e 6578 6974 2831 290a      sys.exit(1).
+0002a1c0: 2020 2020 2020 2020 7070 7269 6e74 2866          pprint(f
+0002a1d0: 2248 616e 646c 696e 6720 6578 706f 7365  "Handling expose
+0002a1e0: 206f 6620 706c 616e 2077 6974 6820 6e61   of plan with na
+0002a1f0: 6d65 207b 706c 616e 7d20 616e 6420 696e  me {plan} and in
+0002a200: 7075 7466 696c 6520 7b69 6e70 7574 6669  putfile {inputfi
+0002a210: 6c65 7d22 290a 2020 2020 2020 2020 6b65  le}").        ke
+0002a220: 7870 6f73 6572 203d 204b 6578 706f 7365  xposer = Kexpose
+0002a230: 7228 7365 6c66 2c20 706c 616e 2c20 696e  r(self, plan, in
+0002a240: 7075 7466 696c 652c 206f 7665 7272 6964  putfile, overrid
+0002a250: 6573 3d6f 7665 7272 6964 6573 2c20 706f  es=overrides, po
+0002a260: 7274 3d70 6f72 742c 2070 666d 6f64 653d  rt=port, pfmode=
+0002a270: 7066 6d6f 6465 2c20 636c 7573 7465 723d  pfmode, cluster=
+0002a280: 636c 7573 7465 7229 0a20 2020 2020 2020  cluster).       
+0002a290: 206b 6578 706f 7365 722e 7275 6e28 290a   kexposer.run().
+0002a2a0: 0a20 2020 2064 6566 2063 7265 6174 655f  .    def create_
+0002a2b0: 6f70 656e 7368 6966 745f 6973 6f28 7365  openshift_iso(se
+0002a2c0: 6c66 2c20 636c 7573 7465 722c 206f 7665  lf, cluster, ove
+0002a2d0: 7272 6964 6573 3d7b 7d2c 2069 676e 6974  rrides={}, ignit
+0002a2e0: 696f 6e66 696c 653d 4e6f 6e65 2c20 706f  ionfile=None, po
+0002a2f0: 646d 616e 3d46 616c 7365 2c20 696e 7374  dman=False, inst
+0002a300: 616c 6c65 723d 4661 6c73 652c 0a20 2020  aller=False,.   
+0002a310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a320: 2020 2020 2020 2020 2020 6469 7265 6374            direct
+0002a330: 3d46 616c 7365 293a 0a20 2020 2020 2020  =False):.       
+0002a340: 206d 6574 616c 5f75 726c 203d 204e 6f6e   metal_url = Non
+0002a350: 650a 2020 2020 2020 2020 6973 6f5f 7665  e.        iso_ve
+0002a360: 7273 696f 6e20 3d20 7374 7228 6f76 6572  rsion = str(over
+0002a370: 7269 6465 732e 6765 7428 2776 6572 7369  rides.get('versi
+0002a380: 6f6e 272c 2027 6c61 7465 7374 2729 290a  on', 'latest')).
+0002a390: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
+0002a3a0: 6e73 7461 6c6c 6572 3a0a 2020 2020 2020  nstaller:.      
+0002a3b0: 2020 2020 2020 6966 2069 736f 5f76 6572        if iso_ver
+0002a3c0: 7369 6f6e 206e 6f74 2069 6e20 5b27 6c61  sion not in ['la
+0002a3d0: 7465 7374 272c 2027 7072 652d 7265 6c65  test', 'pre-rele
+0002a3e0: 6173 6527 5d20 616e 6420 6e6f 7420 6973  ase'] and not is
+0002a3f0: 6f5f 7665 7273 696f 6e2e 7374 6172 7473  o_version.starts
+0002a400: 7769 7468 2827 342e 2729 3a0a 2020 2020  with('4.'):.    
+0002a410: 2020 2020 2020 2020 2020 2020 7761 726e              warn
+0002a420: 696e 6728 2246 6f72 6369 6e67 206c 6976  ing("Forcing liv
+0002a430: 6520 6973 6f20 7665 7273 696f 6e20 746f  e iso version to
+0002a440: 206c 6174 6573 7422 290a 2020 2020 2020   latest").      
+0002a450: 2020 2020 2020 2020 2020 6973 6f5f 7665            iso_ve
+0002a460: 7273 696f 6e20 3d20 276c 6174 6573 7427  rsion = 'latest'
+0002a470: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
+0002a480: 6620 6973 6f5f 7665 7273 696f 6e2e 7374  f iso_version.st
+0002a490: 6172 7473 7769 7468 2827 342e 2729 3a0a  artswith('4.'):.
+0002a4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a4b0: 6d69 6e6f 725f 7665 7273 696f 6e20 3d20  minor_version = 
+0002a4c0: 6973 6f5f 7665 7273 696f 6e2e 7370 6c69  iso_version.spli
+0002a4d0: 7428 272e 2729 5b31 5d0a 2020 2020 2020  t('.')[1].      
+0002a4e0: 2020 2020 2020 2020 2020 6966 206d 696e            if min
+0002a4f0: 6f72 5f76 6572 7369 6f6e 2e69 7364 6967  or_version.isdig
+0002a500: 6974 2829 2061 6e64 2069 6e74 286d 696e  it() and int(min
+0002a510: 6f72 5f76 6572 7369 6f6e 2920 3c20 363a  or_version) < 6:
+0002a520: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002a530: 2020 2020 206d 6574 616c 5f75 726c 203d       metal_url =
+0002a540: 2066 2268 7474 7073 3a2f 2f6d 6972 726f   f"https://mirro
+0002a550: 722e 6f70 656e 7368 6966 742e 636f 6d2f  r.openshift.com/
+0002a560: 7075 622f 6f70 656e 7368 6966 742d 7634  pub/openshift-v4
+0002a570: 2f64 6570 656e 6465 6e63 6965 732f 7268  /dependencies/rh
+0002a580: 636f 732f 7b69 736f 5f76 6572 7369 6f6e  cos/{iso_version
+0002a590: 7d2f 6c61 7465 7374 220a 2020 2020 2020  }/latest".      
+0002a5a0: 2020 2020 2020 2020 2020 2020 2020 6d65                me
+0002a5b0: 7461 6c5f 7572 6c20 2b3d 2022 2f72 6863  tal_url += "/rhc
+0002a5c0: 6f73 2d6d 6574 616c 2e78 3836 5f36 342e  os-metal.x86_64.
+0002a5d0: 7261 772e 677a 220a 2020 2020 2020 2020  raw.gz".        
+0002a5e0: 2020 2020 2020 2020 2020 2020 7761 726e              warn
+0002a5f0: 696e 6728 2245 6d62 6564 6469 6e67 206d  ing("Embedding m
+0002a600: 6574 616c 2075 726c 2069 6e20 6973 6f20  etal url in iso 
+0002a610: 666f 7220 7461 7267 6574 2076 6572 7369  for target versi
+0002a620: 6f6e 2061 6e64 2069 6e73 7461 6c6c 696e  on and installin
+0002a630: 6720 7769 7468 2061 206d 6f72 6520 7265  g with a more re
+0002a640: 6365 6e74 2069 736f 2229 0a20 2020 2020  cent iso").     
+0002a650: 2020 2020 2020 2020 2020 2069 736f 5f76             iso_v
+0002a660: 6572 7369 6f6e 203d 2027 6c61 7465 7374  ersion = 'latest
+0002a670: 270a 2020 2020 2020 2020 6170 695f 6970  '.        api_ip
+0002a680: 203d 206f 7665 7272 6964 6573 2e67 6574   = overrides.get
+0002a690: 2827 6170 695f 6970 2729 0a20 2020 2020  ('api_ip').     
+0002a6a0: 2020 2069 676e 6974 696f 6e5f 7665 7273     ignition_vers
+0002a6b0: 696f 6e20 3d20 6f76 6572 7269 6465 732e  ion = overrides.
+0002a6c0: 6765 7428 2769 676e 6974 696f 6e5f 7665  get('ignition_ve
+0002a6d0: 7273 696f 6e27 2c0a 2020 2020 2020 2020  rsion',.        
+0002a6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a700: 2063 6f6d 6d6f 6e2e 6967 6e69 7469 6f6e   common.ignition
+0002a710: 5f76 6572 7369 6f6e 2822 7268 636f 732d  _version("rhcos-
+0002a720: 2573 2220 2520 6973 6f5f 7665 7273 696f  %s" % iso_versio
+0002a730: 6e2e 7265 706c 6163 6528 272e 272c 2027  n.replace('.', '
+0002a740: 2729 2929 0a20 2020 2020 2020 2072 6f6c  '))).        rol
+0002a750: 6520 3d20 6f76 6572 7269 6465 732e 6765  e = overrides.ge
+0002a760: 7428 2772 6f6c 6527 2c20 2777 6f72 6b65  t('role', 'worke
+0002a770: 7227 290a 2020 2020 2020 2020 6973 6f20  r').        iso 
+0002a780: 3d20 6f76 6572 7269 6465 732e 6765 7428  = overrides.get(
+0002a790: 2769 736f 272c 2054 7275 6529 0a20 2020  'iso', True).   
+0002a7a0: 2020 2020 2064 6f6d 6169 6e20 3d20 6f76       domain = ov
+0002a7b0: 6572 7269 6465 732e 6765 7428 2764 6f6d  errides.get('dom
+0002a7c0: 6169 6e27 290a 2020 2020 2020 2020 6966  ain').        if
+0002a7d0: 2027 2e27 2069 6e20 636c 7573 7465 723a   '.' in cluster:
+0002a7e0: 0a20 2020 2020 2020 2020 2020 2064 6f6d  .            dom
+0002a7f0: 6169 6e20 3d20 272e 272e 6a6f 696e 2863  ain = '.'.join(c
+0002a800: 6c75 7374 6572 2e73 706c 6974 2827 2e27  luster.split('.'
+0002a810: 295b 313a 5d29 0a20 2020 2020 2020 2020  )[1:]).         
+0002a820: 2020 2070 7072 696e 7428 6622 5573 696e     pprint(f"Usin
+0002a830: 6720 646f 6d61 696e 207b 646f 6d61 696e  g domain {domain
+0002a840: 7d22 290a 2020 2020 2020 2020 2020 2020  }").            
+0002a850: 636c 7573 7465 7220 3d20 636c 7573 7465  cluster = cluste
+0002a860: 722e 7265 706c 6163 6528 6622 2e7b 646f  r.replace(f".{do
+0002a870: 6d61 696e 7d22 2c20 2727 290a 2020 2020  main}", '').    
+0002a880: 2020 2020 6966 2063 6c75 7374 6572 2e73      if cluster.s
+0002a890: 7461 7274 7377 6974 6828 2761 7069 2e27  tartswith('api.'
+0002a8a0: 293a 0a20 2020 2020 2020 2020 2020 2063  ):.            c
+0002a8b0: 6c75 7374 6572 203d 2063 6c75 7374 6572  luster = cluster
+0002a8c0: 2e72 6570 6c61 6365 2822 6170 692e 222c  .replace("api.",
+0002a8d0: 2027 2729 0a20 2020 2020 2020 2020 2020   '').           
+0002a8e0: 2070 7072 696e 7428 6622 5573 696e 6720   pprint(f"Using 
+0002a8f0: 636c 7573 7465 7220 7b63 6c75 7374 6572  cluster {cluster
+0002a900: 7d22 290a 2020 2020 2020 2020 686f 7374  }").        host
+0002a910: 735f 636f 6e74 656e 7420 3d20 4e6f 6e65  s_content = None
+0002a920: 0a20 2020 2020 2020 2066 696e 616c 6461  .        finalda
+0002a930: 7461 203d 204e 6f6e 650a 2020 2020 2020  ta = None.      
+0002a940: 2020 6966 2069 676e 6974 696f 6e66 696c    if ignitionfil
+0002a950: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
+0002a960: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+0002a970: 7420 6f73 2e70 6174 682e 6578 6973 7473  t os.path.exists
+0002a980: 2869 676e 6974 696f 6e66 696c 6529 3a0a  (ignitionfile):.
+0002a990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a9a0: 6572 726f 7228 6622 7b69 676e 6974 696f  error(f"{ignitio
+0002a9b0: 6e66 696c 657d 206e 6f74 2066 6f75 6e64  nfile} not found
+0002a9c0: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
+0002a9d0: 2020 2073 7973 2e65 7869 7428 3129 0a20     sys.exit(1). 
+0002a9e0: 2020 2020 2020 2020 2020 2066 696e 616c             final
+0002a9f0: 6461 7461 203d 206f 7065 6e28 6967 6e69  data = open(igni
+0002aa00: 7469 6f6e 6669 6c65 292e 7265 6164 2829  tionfile).read()
+0002aa10: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+0002aa20: 2020 2020 2020 2020 2020 2069 676e 6974             ignit
+0002aa30: 696f 6e66 696c 6520 3d20 6622 7b72 6f6c  ionfile = f"{rol
+0002aa40: 657d 2e69 676e 220a 2020 2020 2020 2020  e}.ign".        
+0002aa50: 2020 2020 6966 206f 732e 7061 7468 2e65      if os.path.e
+0002aa60: 7869 7374 7328 6967 6e69 7469 6f6e 6669  xists(ignitionfi
+0002aa70: 6c65 293a 0a20 2020 2020 2020 2020 2020  le):.           
+0002aa80: 2020 2020 2077 6172 6e69 6e67 2866 2255       warning(f"U
+0002aa90: 7369 6e67 2065 7869 7374 696e 6720 7b69  sing existing {i
+0002aaa0: 676e 6974 696f 6e66 696c 657d 2229 0a20  gnitionfile}"). 
+0002aab0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0002aac0: 696e 616c 6461 7461 203d 206f 7065 6e28  inaldata = open(
+0002aad0: 6967 6e69 7469 6f6e 6669 6c65 292e 7265  ignitionfile).re
+0002aae0: 6164 2829 0a20 2020 2020 2020 2020 2020  ad().           
+0002aaf0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0002ab00: 2020 2020 2020 2069 6620 6170 695f 6970         if api_ip
+0002ab10: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+0002ab20: 2020 2020 2020 2020 2020 2020 2020 7472                tr
+0002ab30: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
+0002ab40: 2020 2020 2020 2020 2020 2061 7069 5f69             api_i
+0002ab50: 7020 3d20 736f 636b 6574 2e67 6574 686f  p = socket.getho
+0002ab60: 7374 6279 6e61 6d65 2866 2761 7069 2e7b  stbyname(f'api.{
+0002ab70: 636c 7573 7465 727d 2e7b 646f 6d61 696e  cluster}.{domain
+0002ab80: 7d27 290a 2020 2020 2020 2020 2020 2020  }').            
+0002ab90: 2020 2020 2020 2020 6578 6365 7074 3a0a          except:.
+0002aba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002abb0: 2020 2020 2020 2020 7061 7373 0a20 2020          pass.   
+0002abc0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0002abd0: 6170 695f 6970 2069 7320 4e6f 6e65 3a0a  api_ip is None:.
+0002abe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002abf0: 2020 2020 6966 2064 6f6d 6169 6e20 6973      if domain is
+0002ac00: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0002ac10: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0002ac20: 7272 6f72 2822 436f 756c 646e 2774 2066  rror("Couldn't f
+0002ac30: 6967 7572 6520 6f75 7420 6170 695f 6970  igure out api_ip
+0002ac40: 206e 6f72 2072 656c 7920 6f6e 2064 6e73   nor rely on dns
+0002ac50: 2073 696e 6365 2064 6f6d 6169 6e20 6973   since domain is
+0002ac60: 206e 6f74 2073 6574 2229 0a20 2020 2020   not set").     
+0002ac70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ac80: 2020 2073 7973 2e65 7869 7428 3129 0a20     sys.exit(1). 
+0002ac90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002aca0: 2020 2077 6172 6e69 6e67 2822 436f 756c     warning("Coul
+0002acb0: 646e 2774 2066 6967 7572 6520 6f75 7420  dn't figure out 
+0002acc0: 6170 695f 6970 2e20 5265 6c79 696e 6720  api_ip. Relying 
+0002acd0: 6f6e 2064 6e73 2229 0a20 2020 2020 2020  on dns").       
+0002ace0: 2020 2020 2020 2020 2020 2020 2061 7069               api
+0002acf0: 5f69 7020 3d20 6622 6170 692e 7b63 6c75  _ip = f"api.{clu
+0002ad00: 7374 6572 7d2e 7b64 6f6d 6169 6e7d 220a  ster}.{domain}".
+0002ad10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ad20: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0002ad30: 2020 2020 2020 2020 2020 686f 7374 735f            hosts_
+0002ad40: 636f 6e74 656e 7420 3d20 2231 3237 2e30  content = "127.0
+0002ad50: 2e30 2e31 2020 206c 6f63 616c 686f 7374  .0.1   localhost
+0002ad60: 206c 6f63 616c 686f 7374 2e6c 6f63 616c   localhost.local
+0002ad70: 646f 6d61 696e 206c 6f63 616c 686f 7374  domain localhost
+0002ad80: 3420 6c6f 6361 6c68 6f73 7434 2e6c 6f63  4 localhost4.loc
+0002ad90: 616c 646f 6d61 696e 345c 6e22 0a20 2020  aldomain4\n".   
+0002ada0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002adb0: 2068 6f73 7473 5f63 6f6e 7465 6e74 202b   hosts_content +
+0002adc0: 3d20 223a 3a31 2020 2020 2020 2020 206c  = "::1         l
+0002add0: 6f63 616c 686f 7374 206c 6f63 616c 686f  ocalhost localho
+0002ade0: 7374 2e6c 6f63 616c 646f 6d61 696e 206c  st.localdomain l
+0002adf0: 6f63 616c 686f 7374 3620 6c6f 6361 6c68  ocalhost6 localh
+0002ae00: 6f73 7436 2e6c 6f63 616c 646f 6d61 696e  ost6.localdomain
+0002ae10: 365c 6e22 0a20 2020 2020 2020 2020 2020  6\n".           
+0002ae20: 2020 2020 2020 2020 2068 6f73 7473 5f63           hosts_c
+0002ae30: 6f6e 7465 6e74 202b 3d20 6622 7b61 7069  ontent += f"{api
+0002ae40: 5f69 707d 2061 7069 2d69 6e74 2e7b 636c  _ip} api-int.{cl
+0002ae50: 7573 7465 727d 2e7b 646f 6d61 696e 7d20  uster}.{domain} 
+0002ae60: 6170 692e 7b63 6c75 7374 6572 7d2e 7b64  api.{cluster}.{d
+0002ae70: 6f6d 6169 6e7d 220a 2020 2020 2020 2020  omain}".        
+0002ae80: 706c 616e 6469 7220 3d20 6f73 2e70 6174  plandir = os.pat
+0002ae90: 682e 6469 726e 616d 6528 6f70 656e 7368  h.dirname(opensh
+0002aea0: 6966 742e 6372 6561 7465 2e5f 5f63 6f64  ift.create.__cod
+0002aeb0: 655f 5f2e 636f 5f66 696c 656e 616d 6529  e__.co_filename)
+0002aec0: 0a20 2020 2020 2020 2077 6974 6820 6f70  .        with op
+0002aed0: 656e 2822 6973 6f2e 6967 6e22 2c20 2777  en("iso.ign", 'w
+0002aee0: 2729 2061 7320 663a 0a20 2020 2020 2020  ') as f:.       
+0002aef0: 2020 2020 2066 756c 6c5f 6e61 6d65 203d       full_name =
+0002af00: 2066 277b 636c 7573 7465 727d 2e7b 646f   f'{cluster}.{do
+0002af10: 6d61 696e 7d27 2069 6620 646f 6d61 696e  main}' if domain
+0002af20: 2069 7320 6e6f 7420 4e6f 6e65 2065 6c73   is not None els
+0002af30: 6520 636c 7573 7465 720a 2020 2020 2020  e cluster.      
+0002af40: 2020 2020 2020 7070 7269 6e74 2866 2257        pprint(f"W
+0002af50: 7269 7469 6e67 2066 696c 6520 6973 6f2e  riting file iso.
+0002af60: 6967 6e20 666f 7220 7b72 6f6c 657d 2069  ign for {role} i
+0002af70: 6e20 7b66 756c 6c5f 6e61 6d65 7d22 290a  n {full_name}").
+0002af80: 2020 2020 2020 2020 2020 2020 6973 6f64              isod
+0002af90: 6972 203d 206f 732e 7061 7468 2e64 6972  ir = os.path.dir
+0002afa0: 6e61 6d65 2863 6f6d 6d6f 6e2e 5f5f 6669  name(common.__fi
+0002afb0: 6c65 5f5f 290a 2020 2020 2020 2020 2020  le__).          
+0002afc0: 2020 6966 2066 696e 616c 6461 7461 2069    if finaldata i
+0002afd0: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+0002afe0: 2020 2020 2020 2020 656e 7620 3d20 456e          env = En
+0002aff0: 7669 726f 6e6d 656e 7428 6c6f 6164 6572  vironment(loader
+0002b000: 3d46 696c 6553 7973 7465 6d4c 6f61 6465  =FileSystemLoade
+0002b010: 7228 6973 6f64 6972 292c 2065 7874 656e  r(isodir), exten
+0002b020: 7369 6f6e 733d 5b27 6a69 6e6a 6132 2e65  sions=['jinja2.e
+0002b030: 7874 2e64 6f27 5d2c 2074 7269 6d5f 626c  xt.do'], trim_bl
+0002b040: 6f63 6b73 3d54 7275 652c 0a20 2020 2020  ocks=True,.     
+0002b050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b060: 2020 2020 2020 2020 2020 2020 206c 7374               lst
+0002b070: 7269 705f 626c 6f63 6b73 3d54 7275 6529  rip_blocks=True)
+0002b080: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002b090: 2074 656d 706c 203d 2065 6e76 2e67 6574   templ = env.get
+0002b0a0: 5f74 656d 706c 6174 6528 6f73 2e70 6174  _template(os.pat
+0002b0b0: 682e 6261 7365 6e61 6d65 2822 6967 6e69  h.basename("igni
+0002b0c0: 7469 6f6e 2e6a 3222 2929 0a20 2020 2020  tion.j2")).     
+0002b0d0: 2020 2020 2020 2020 2020 2069 6620 686f             if ho
+0002b0e0: 7374 735f 636f 6e74 656e 7420 6973 206e  sts_content is n
+0002b0f0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+0002b100: 2020 2020 2020 2020 2020 2020 2068 6f73               hos
+0002b110: 7473 5f63 6f6e 7465 6e74 203d 2062 6173  ts_content = bas
+0002b120: 6536 342e 6236 3465 6e63 6f64 6528 686f  e64.b64encode(ho
+0002b130: 7374 735f 636f 6e74 656e 742e 656e 636f  sts_content.enco
+0002b140: 6465 2829 292e 6465 636f 6465 2822 5554  de()).decode("UT
+0002b150: 462d 3822 290a 2020 2020 2020 2020 2020  F-8").          
+0002b160: 2020 2020 2020 6966 2027 3a27 2069 6e20        if ':' in 
+0002b170: 6170 695f 6970 3a20 2020 2320 4950 7636  api_ip:   # IPv6
+0002b180: 2061 6464 7265 7373 0a20 2020 2020 2020   address.       
+0002b190: 2020 2020 2020 2020 2020 2020 2069 676e               ign
+0002b1a0: 6974 696f 6e5f 7572 6c20 3d20 6622 6874  ition_url = f"ht
+0002b1b0: 7470 3a2f 2f5b 7b61 7069 5f69 707d 5d3a  tp://[{api_ip}]:
+0002b1c0: 3232 3632 342f 636f 6e66 6967 2f7b 726f  22624/config/{ro
+0002b1d0: 6c65 7d22 0a20 2020 2020 2020 2020 2020  le}".           
+0002b1e0: 2020 2020 2065 6c73 653a 2020 2020 2020       else:      
+0002b1f0: 2020 2020 2020 2020 2023 2049 5076 3420           # IPv4 
+0002b200: 6164 6472 6573 730a 2020 2020 2020 2020  address.        
+0002b210: 2020 2020 2020 2020 2020 2020 6967 6e69              igni
+0002b220: 7469 6f6e 5f75 726c 203d 2066 2268 7474  tion_url = f"htt
+0002b230: 703a 2f2f 7b61 7069 5f69 707d 3a32 3236  p://{api_ip}:226
+0002b240: 3234 2f63 6f6e 6669 672f 7b72 6f6c 657d  24/config/{role}
+0002b250: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
+0002b260: 2020 6669 6e61 6c64 6174 6120 3d20 7465    finaldata = te
+0002b270: 6d70 6c2e 7265 6e64 6572 2869 676e 6974  mpl.render(ignit
+0002b280: 696f 6e5f 7572 6c3d 6967 6e69 7469 6f6e  ion_url=ignition
+0002b290: 5f75 726c 2c20 686f 7374 735f 636f 6e74  _url, hosts_cont
+0002b2a0: 656e 743d 686f 7374 735f 636f 6e74 656e  ent=hosts_conten
+0002b2b0: 742c 0a20 2020 2020 2020 2020 2020 2020  t,.             
+0002b2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b2d0: 2020 2020 2020 2020 2020 2020 6967 6e69              igni
+0002b2e0: 7469 6f6e 5f76 6572 7369 6f6e 3d69 676e  tion_version=ign
+0002b2f0: 6974 696f 6e5f 7665 7273 696f 6e29 0a20  ition_version). 
+0002b300: 2020 2020 2020 2020 2020 2069 6620 6469             if di
+0002b310: 7265 6374 3a0a 2020 2020 2020 2020 2020  rect:.          
+0002b320: 2020 2020 2020 662e 7772 6974 6528 6669        f.write(fi
+0002b330: 6e61 6c64 6174 6129 0a20 2020 2020 2020  naldata).       
+0002b340: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0002b350: 2020 2020 2020 2020 2020 205f 6669 6c65             _file
+0002b360: 7320 3d20 5b7b 2270 6174 6822 3a20 222f  s = [{"path": "/
+0002b370: 726f 6f74 2f63 6f6e 6669 672e 6967 6e22  root/config.ign"
+0002b380: 2c20 2263 6f6e 7465 6e74 223a 2066 696e  , "content": fin
+0002b390: 616c 6461 7461 7d5d 0a20 2020 2020 2020  aldata}].       
+0002b3a0: 2020 2020 2020 2020 2069 6620 6f73 2e70           if os.p
+0002b3b0: 6174 682e 6578 6973 7473 2827 6973 6f2e  ath.exists('iso.
+0002b3c0: 7368 2729 3a0a 2020 2020 2020 2020 2020  sh'):.          
+0002b3d0: 2020 2020 2020 2020 2020 7070 7269 6e74            pprint
+0002b3e0: 2822 5573 696e 6720 6c6f 6361 6c20 6973  ("Using local is
+0002b3f0: 6f2e 7368 2073 6372 6970 7422 290a 2020  o.sh script").  
+0002b400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b410: 2020 6973 6f73 6372 6970 7420 3d20 2769    isoscript = 'i
+0002b420: 736f 2e73 6827 0a20 2020 2020 2020 2020  so.sh'.         
+0002b430: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0002b440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b450: 2069 736f 7363 7269 7074 203d 2066 277b   isoscript = f'{
+0002b460: 706c 616e 6469 727d 2f69 736f 2e73 6827  plandir}/iso.sh'
+0002b470: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002b480: 2069 6620 6f73 2e70 6174 682e 6578 6973   if os.path.exis
+0002b490: 7473 2827 6d61 6373 2e74 7874 2729 3a0a  ts('macs.txt'):.
+0002b4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b4b0: 2020 2020 5f66 696c 6573 2e61 7070 656e      _files.appen
+0002b4c0: 6428 7b22 7061 7468 223a 2022 2f72 6f6f  d({"path": "/roo
+0002b4d0: 742f 6d61 6373 2e74 7874 222c 2022 6f72  t/macs.txt", "or
+0002b4e0: 6967 696e 223a 2027 6d61 6373 2e74 7874  igin": 'macs.txt
+0002b4f0: 277d 290a 2020 2020 2020 2020 2020 2020  '}).            
+0002b500: 2020 2020 6973 6f5f 6f76 6572 7269 6465      iso_override
+0002b510: 7320 3d20 7b27 7363 7269 7074 7327 3a20  s = {'scripts': 
+0002b520: 5b69 736f 7363 7269 7074 5d2c 2027 6669  [isoscript], 'fi
+0002b530: 6c65 7327 3a20 5f66 696c 6573 2c20 276d  les': _files, 'm
+0002b540: 6574 616c 5f75 726c 273a 206d 6574 616c  etal_url': metal
+0002b550: 5f75 726c 2c20 276e 6f6e 616d 6527 3a20  _url, 'noname': 
+0002b560: 5472 7565 2c0a 2020 2020 2020 2020 2020  True,.          
+0002b570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b580: 2020 2020 2020 2027 696d 6167 6527 3a20         'image': 
+0002b590: 2772 6863 6f73 3430 3030 277d 0a20 2020  'rhcos4000'}.   
+0002b5a0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0002b5b0: 6d65 7461 6c5f 7572 6c20 6973 206e 6f74  metal_url is not
+0002b5c0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0002b5d0: 2020 2020 2020 2020 2020 2069 736f 5f6f             iso_o
+0002b5e0: 7665 7272 6964 6573 5b27 6e65 6564 5f6e  verrides['need_n
+0002b5f0: 6574 776f 726b 275d 203d 2054 7275 650a  etwork'] = True.
+0002b600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b610: 6973 6f5f 6f76 6572 7269 6465 732e 7570  iso_overrides.up
+0002b620: 6461 7465 286f 7665 7272 6964 6573 290a  date(overrides).
+0002b630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b640: 6966 2027 6e61 6d65 2720 696e 206f 7665  if 'name' in ove
+0002b650: 7272 6964 6573 3a0a 2020 2020 2020 2020  rrides:.        
+0002b660: 2020 2020 2020 2020 2020 2020 6973 6f5f              iso_
+0002b670: 6e61 6d65 203d 206f 7665 7272 6964 6573  name = overrides
+0002b680: 5b27 6e61 6d65 275d 0a20 2020 2020 2020  ['name'].       
+0002b690: 2020 2020 2020 2020 2020 2020 2069 736f               iso
+0002b6a0: 5f6f 7665 7272 6964 6573 5b27 6e6f 6e61  _overrides['nona
+0002b6b0: 6d65 275d 203d 2046 616c 7365 0a20 2020  me'] = False.   
+0002b6c0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0002b6d0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0002b6e0: 2020 2020 2020 2069 736f 5f6e 616d 6520         iso_name 
+0002b6f0: 3d20 2761 7574 6f69 6e73 7461 6c6c 6572  = 'autoinstaller
+0002b700: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
+0002b710: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
+0002b720: 6372 6561 7465 5f76 6d28 6973 6f5f 6e61  create_vm(iso_na
+0002b730: 6d65 2c20 6f76 6572 7269 6465 733d 6973  me, overrides=is
+0002b740: 6f5f 6f76 6572 7269 6465 732c 206f 6e6c  o_overrides, onl
+0002b750: 7961 7373 6574 733d 5472 7565 290a 2020  yassets=True).  
+0002b760: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0002b770: 2027 7265 6173 6f6e 2720 696e 2072 6573   'reason' in res
+0002b780: 756c 743a 0a20 2020 2020 2020 2020 2020  ult:.           
+0002b790: 2020 2020 2020 2020 2065 7272 6f72 2872           error(r
+0002b7a0: 6573 756c 745b 2772 6561 736f 6e27 5d29  esult['reason'])
+0002b7b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002b7c0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0002b7d0: 2020 2020 2020 2020 2020 2066 2e77 7269             f.wri
+0002b7e0: 7465 2872 6573 756c 745b 2775 7365 7264  te(result['userd
+0002b7f0: 6174 6127 5d29 0a20 2020 2020 2020 2069  ata']).        i
+0002b800: 6620 6973 6f3a 0a20 2020 2020 2020 2020  f iso:.         
+0002b810: 2020 2069 6620 7365 6c66 2e74 7970 6520     if self.type 
+0002b820: 6e6f 7420 696e 205b 276b 766d 272c 2027  not in ['kvm', '
+0002b830: 6661 6b65 272c 2027 6b75 6265 7669 7274  fake', 'kubevirt
+0002b840: 272c 2027 7673 7068 6572 6527 2c20 276f  ', 'vsphere', 'o
+0002b850: 7065 6e73 7461 636b 275d 3a0a 2020 2020  penstack']:.    
+0002b860: 2020 2020 2020 2020 2020 2020 7761 726e              warn
+0002b870: 696e 6728 6622 4973 6f20 6765 6e65 7261  ing(f"Iso genera
+0002b880: 7469 6f6e 206e 6f74 2073 7570 706f 7274  tion not support
+0002b890: 6564 206f 6e20 7b73 656c 662e 7479 7065  ed on {self.type
+0002b8a0: 7d22 290a 2020 2020 2020 2020 2020 2020  }").            
+0002b8b0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0002b8c0: 2020 2020 2020 6973 6f5f 706f 6f6c 203d        iso_pool =
+0002b8d0: 206f 7665 7272 6964 6573 2e67 6574 2827   overrides.get('
+0002b8e0: 706f 6f6c 2729 206f 7220 7365 6c66 2e70  pool') or self.p
+0002b8f0: 6f6f 6c0a 2020 2020 2020 2020 2020 2020  ool.            
+0002b900: 2020 2020 6765 6e65 7261 7465 5f72 6863      generate_rhc
+0002b910: 6f73 5f69 736f 2873 656c 662e 6b2c 2066  os_iso(self.k, f
+0002b920: 227b 636c 7573 7465 727d 2d7b 726f 6c65  "{cluster}-{role
+0002b930: 7d22 2c20 6973 6f5f 706f 6f6c 2c20 7665  }", iso_pool, ve
+0002b940: 7273 696f 6e3d 6973 6f5f 7665 7273 696f  rsion=iso_versio
+0002b950: 6e2c 2070 6f64 6d61 6e3d 706f 646d 616e  n, podman=podman
+0002b960: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0002b970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b980: 2020 2020 2069 6e73 7461 6c6c 6572 3d69       installer=i
+0002b990: 6e73 7461 6c6c 6572 290a 0a20 2020 2064  nstaller)..    d
+0002b9a0: 6566 2063 7265 6174 655f 6f70 656e 7368  ef create_opensh
+0002b9b0: 6966 745f 6469 7363 6f6e 6e65 6374 6564  ift_disconnected
+0002b9c0: 2873 656c 662c 2070 6c61 6e2c 206f 7665  (self, plan, ove
+0002b9d0: 7272 6964 6573 3d7b 7d29 3a0a 2020 2020  rrides={}):.    
+0002b9e0: 2020 2020 6461 7461 203d 206f 7665 7272      data = overr
+0002b9f0: 6964 6573 0a20 2020 2020 2020 2070 6c61  ides.        pla
+0002ba00: 6e64 6972 203d 206f 732e 7061 7468 2e64  ndir = os.path.d
+0002ba10: 6972 6e61 6d65 286f 7065 6e73 6869 6674  irname(openshift
+0002ba20: 2e63 7265 6174 652e 5f5f 636f 6465 5f5f  .create.__code__
+0002ba30: 2e63 6f5f 6669 6c65 6e61 6d65 290a 2020  .co_filename).  
+0002ba40: 2020 2020 2020 636c 7573 7465 7220 3d20        cluster = 
+0002ba50: 6461 7461 2e67 6574 2827 636c 7573 7465  data.get('cluste
+0002ba60: 7227 2c20 276d 796f 7065 6e73 6869 6674  r', 'myopenshift
+0002ba70: 2729 0a20 2020 2020 2020 2075 7073 7472  ').        upstr
+0002ba80: 6561 6d20 3d20 6461 7461 2e67 6574 2827  eam = data.get('
+0002ba90: 7570 7374 7265 616d 272c 2046 616c 7365  upstream', False
+0002baa0: 290a 2020 2020 2020 2020 7665 7273 696f  ).        versio
+0002bab0: 6e20 3d20 6461 7461 2e67 6574 2827 7665  n = data.get('ve
+0002bac0: 7273 696f 6e27 2c20 2773 7461 626c 6527  rsion', 'stable'
+0002bad0: 290a 2020 2020 2020 2020 7461 6720 3d20  ).        tag = 
+0002bae0: 6461 7461 2e67 6574 2827 7461 6727 2c20  data.get('tag', 
+0002baf0: 4f50 454e 5348 4946 545f 5441 4729 0a20  OPENSHIFT_TAG). 
+0002bb00: 2020 2020 2020 2070 7072 696e 7428 6622         pprint(f"
+0002bb10: 5573 696e 6720 7665 7273 696f 6e20 7b76  Using version {v
+0002bb20: 6572 7369 6f6e 7d20 616e 6420 7461 6720  ersion} and tag 
+0002bb30: 7b74 6167 7d22 290a 2020 2020 2020 2020  {tag}").        
+0002bb40: 6469 7363 6f6e 6e65 6374 6564 5f76 6d20  disconnected_vm 
+0002bb50: 3d20 6622 7b63 6c75 7374 6572 7d2d 6469  = f"{cluster}-di
+0002bb60: 7363 6f6e 6e65 6374 6564 220a 2020 2020  sconnected".    
+0002bb70: 2020 2020 6469 7363 6f6e 6e65 6374 6564      disconnected
+0002bb80: 5f72 6575 7365 203d 2064 6174 612e 6765  _reuse = data.ge
+0002bb90: 7428 2764 6973 636f 6e6e 6563 7465 645f  t('disconnected_
+0002bba0: 7265 7573 6527 2c20 4661 6c73 6529 0a20  reuse', False). 
+0002bbb0: 2020 2020 2020 2064 6973 636f 6e6e 6563         disconnec
+0002bbc0: 7465 645f 7379 6e63 203d 2064 6174 612e  ted_sync = data.
+0002bbd0: 6765 7428 2764 6973 636f 6e6e 6563 7465  get('disconnecte
+0002bbe0: 645f 7379 6e63 272c 2054 7275 6529 0a20  d_sync', True). 
+0002bbf0: 2020 2020 2020 2070 7072 696e 7428 6622         pprint(f"
+0002bc00: 4465 706c 6f79 696e 6720 6469 7363 6f6e  Deploying discon
+0002bc10: 6e65 6374 6564 2076 6d20 7b64 6973 636f  nected vm {disco
+0002bc20: 6e6e 6563 7465 645f 766d 7d22 290a 2020  nnected_vm}").  
+0002bc30: 2020 2020 2020 6966 2064 6973 636f 6e6e        if disconn
+0002bc40: 6563 7465 645f 7379 6e63 3a0a 2020 2020  ected_sync:.    
+0002bc50: 2020 2020 2020 2020 7075 6c6c 5f73 6563          pull_sec
+0002bc60: 7265 7420 3d20 7077 645f 7061 7468 2864  ret = pwd_path(d
+0002bc70: 6174 612e 6765 7428 2770 756c 6c5f 7365  ata.get('pull_se
+0002bc80: 6372 6574 2729 2920 6966 206e 6f74 2075  cret')) if not u
+0002bc90: 7073 7472 6561 6d20 656c 7365 2066 227b  pstream else f"{
+0002bca0: 706c 616e 6469 727d 2f66 616b 655f 7075  plandir}/fake_pu
+0002bcb0: 6c6c 2e6a 736f 6e22 0a20 2020 2020 2020  ll.json".       
+0002bcc0: 2020 2020 2069 6620 6e6f 7420 7570 7374       if not upst
+0002bcd0: 7265 616d 3a0a 2020 2020 2020 2020 2020  ream:.          
+0002bce0: 2020 2020 2020 7075 6c6c 5f73 6563 7265        pull_secre
+0002bcf0: 7420 3d20 7077 645f 7061 7468 2864 6174  t = pwd_path(dat
+0002bd00: 612e 6765 7428 2770 756c 6c5f 7365 6372  a.get('pull_secr
+0002bd10: 6574 272c 2027 6f70 656e 7368 6966 745f  et', 'openshift_
+0002bd20: 7075 6c6c 2e6a 736f 6e27 2929 0a20 2020  pull.json')).   
+0002bd30: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+0002bd40: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+0002bd50: 756c 6c5f 7365 6372 6574 203d 2066 227b  ull_secret = f"{
+0002bd60: 706c 616e 6469 727d 2f66 616b 655f 7075  plandir}/fake_pu
+0002bd70: 6c6c 2e6a 736f 6e22 0a20 2020 2020 2020  ll.json".       
+0002bd80: 2020 2020 2069 6620 6e6f 7420 6f73 2e70       if not os.p
+0002bd90: 6174 682e 6578 6973 7473 2870 756c 6c5f  ath.exists(pull_
+0002bda0: 7365 6372 6574 293a 0a20 2020 2020 2020  secret):.       
+0002bdb0: 2020 2020 2020 2020 2065 7272 6f72 2866           error(f
+0002bdc0: 224d 6973 7369 6e67 2070 756c 6c20 7365  "Missing pull se
+0002bdd0: 6372 6574 2066 696c 6520 7b70 756c 6c5f  cret file {pull_
+0002bde0: 7365 6372 6574 7d22 290a 2020 2020 2020  secret}").      
+0002bdf0: 2020 2020 2020 2020 2020 7379 732e 6578            sys.ex
+0002be00: 6974 2831 290a 2020 2020 2020 2020 2020  it(1).          
+0002be10: 2020 6461 7461 5b27 7075 6c6c 5f73 6563    data['pull_sec
+0002be20: 7265 7427 5d20 3d20 7265 2e73 7562 2872  ret'] = re.sub(r
+0002be30: 225c 7322 2c20 2222 2c20 6f70 656e 2870  "\s", "", open(p
+0002be40: 756c 6c5f 7365 6372 6574 292e 7265 6164  ull_secret).read
+0002be50: 2829 290a 2020 2020 2020 2020 6469 7363  ()).        disc
+0002be60: 6f6e 6e65 6374 6564 5f70 6c61 6e20 3d20  onnected_plan = 
+0002be70: 6622 7b70 6c61 6e7d 2d72 6575 7365 2220  f"{plan}-reuse" 
+0002be80: 6966 2064 6973 636f 6e6e 6563 7465 645f  if disconnected_
+0002be90: 7265 7573 6520 656c 7365 2070 6c61 6e0a  reuse else plan.
+0002bea0: 2020 2020 2020 2020 6966 2076 6572 7369          if versi
+0002beb0: 6f6e 203d 3d20 2763 6927 2061 6e64 2027  on == 'ci' and '
+0002bec0: 6469 7363 6f6e 6e65 6374 6564 5f6f 7269  disconnected_ori
+0002bed0: 6769 6e27 206e 6f74 2069 6e20 6f76 6572  gin' not in over
+0002bee0: 7269 6465 733a 0a20 2020 2020 2020 2020  rides:.         
+0002bef0: 2020 2072 6567 203d 2027 7265 6769 7374     reg = 'regist
+0002bf00: 7279 2e62 7569 6c64 3031 2e63 692e 6f70  ry.build01.ci.op
+0002bf10: 656e 7368 6966 742e 6f72 6727 2069 6620  enshift.org' if 
+0002bf20: 7374 7228 7461 6729 2e73 7461 7274 7377  str(tag).startsw
+0002bf30: 6974 6828 2763 692d 2729 2065 6c73 6520  ith('ci-') else 
+0002bf40: 2772 6567 6973 7472 792e 6369 2e6f 7065  'registry.ci.ope
+0002bf50: 6e73 6869 6674 2e6f 7267 270a 2020 2020  nshift.org'.    
+0002bf60: 2020 2020 2020 2020 7761 726e 696e 6728          warning(
+0002bf70: 6622 466f 7263 696e 6720 6469 7363 6f6e  f"Forcing discon
+0002bf80: 6e65 6374 6564 5f6f 7269 6769 6e20 746f  nected_origin to
+0002bf90: 207b 7265 677d 2229 0a20 2020 2020 2020   {reg}").       
+0002bfa0: 2020 2020 2064 6174 615b 2764 6973 636f       data['disco
+0002bfb0: 6e6e 6563 7465 645f 6f72 6967 696e 275d  nnected_origin']
+0002bfc0: 203d 2072 6567 0a20 2020 2020 2020 2072   = reg.        r
+0002bfd0: 6573 756c 7420 3d20 7365 6c66 2e70 6c61  esult = self.pla
+0002bfe0: 6e28 6469 7363 6f6e 6e65 6374 6564 5f70  n(disconnected_p
+0002bff0: 6c61 6e2c 2069 6e70 7574 6669 6c65 3d66  lan, inputfile=f
+0002c000: 277b 706c 616e 6469 727d 2f64 6973 636f  '{plandir}/disco
+0002c010: 6e6e 6563 7465 642e 796d 6c27 2c20 6f76  nnected.yml', ov
+0002c020: 6572 7269 6465 733d 6461 7461 290a 2020  errides=data).  
+0002c030: 2020 2020 2020 6966 2072 6573 756c 745b        if result[
+0002c040: 2772 6573 756c 7427 5d20 213d 2027 7375  'result'] != 'su
+0002c050: 6363 6573 7327 3a0a 2020 2020 2020 2020  ccess':.        
+0002c060: 2020 2020 7379 732e 6578 6974 2831 290a      sys.exit(1).
+0002c070: 2020 2020 2020 2020 656c 6966 2064 6973          elif dis
+0002c080: 636f 6e6e 6563 7465 645f 7379 6e63 3a0a  connected_sync:.
+0002c090: 2020 2020 2020 2020 2020 2020 7070 7269              ppri
+0002c0a0: 6e74 2822 5573 6520 7468 6520 666f 6c6c  nt("Use the foll
+0002c0b0: 6f77 696e 6720 4f50 454e 5348 4946 545f  owing OPENSHIFT_
+0002c0c0: 494e 5354 414c 4c5f 5245 4c45 4153 455f  INSTALL_RELEASE_
+0002c0d0: 494d 4147 455f 4f56 4552 5249 4445 2229  IMAGE_OVERRIDE")
+0002c0e0: 0a20 2020 2020 2020 2020 2020 206e 616d  .            nam
+0002c0f0: 6520 3d20 6461 7461 2e67 6574 2827 6469  e = data.get('di
+0002c100: 7363 6f6e 6e65 6374 6564 5f72 6575 7365  sconnected_reuse
+0002c110: 5f6e 616d 6527 2920 6f72 2063 6c75 7374  _name') or clust
+0002c120: 6572 0a20 2020 2020 2020 2020 2020 2069  er.            i
+0002c130: 702c 2076 6d70 6f72 7420 3d20 5f73 7368  p, vmport = _ssh
+0002c140: 5f63 7265 6465 6e74 6961 6c73 2873 656c  _credentials(sel
+0002c150: 662e 6b2c 2066 277b 6e61 6d65 7d2d 6469  f.k, f'{name}-di
+0002c160: 7363 6f6e 6e65 6374 6564 2729 5b31 3a5d  sconnected')[1:]
+0002c170: 0a20 2020 2020 2020 2020 2020 2063 6d64  .            cmd
+0002c180: 203d 2022 6361 7420 2f72 6f6f 742f 7665   = "cat /root/ve
+0002c190: 7273 696f 6e2e 7478 7422 0a20 2020 2020  rsion.txt".     
+0002c1a0: 2020 2020 2020 2073 7368 636d 6420 3d20         sshcmd = 
+0002c1b0: 7373 6828 6e61 6d65 2c20 6970 3d69 702c  ssh(name, ip=ip,
+0002c1c0: 2075 7365 723d 2772 6f6f 7427 2c20 7475   user='root', tu
+0002c1d0: 6e6e 656c 3d73 656c 662e 7475 6e6e 656c  nnel=self.tunnel
+0002c1e0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0002c1f0: 2020 2020 2020 2020 2020 2074 756e 6e65             tunne
+0002c200: 6c68 6f73 743d 7365 6c66 2e74 756e 6e65  lhost=self.tunne
+0002c210: 6c68 6f73 742c 2074 756e 6e65 6c70 6f72  lhost, tunnelpor
+0002c220: 743d 7365 6c66 2e74 756e 6e65 6c70 6f72  t=self.tunnelpor
+0002c230: 742c 0a20 2020 2020 2020 2020 2020 2020  t,.             
+0002c240: 2020 2020 2020 2020 2020 2020 7475 6e6e              tunn
+0002c250: 656c 7573 6572 3d73 656c 662e 7475 6e6e  eluser=self.tunn
+0002c260: 656c 7573 6572 2c20 696e 7365 6375 7265  eluser, insecure
+0002c270: 3d54 7275 652c 2063 6d64 3d63 6d64 2c20  =True, cmd=cmd, 
+0002c280: 766d 706f 7274 3d76 6d70 6f72 7429 0a20  vmport=vmport). 
+0002c290: 2020 2020 2020 2020 2020 206f 732e 7379             os.sy
+0002c2a0: 7374 656d 2873 7368 636d 6429 0a0a 2020  stem(sshcmd)..  
+0002c2b0: 2020 6465 6620 6861 6e64 6c65 5f66 696e    def handle_fin
+0002c2c0: 6973 6866 696c 6573 2873 656c 662c 206e  ishfiles(self, n
+0002c2d0: 616d 652c 2066 696e 6973 6866 696c 6573  ame, finishfiles
+0002c2e0: 2c20 6964 656e 7469 7479 6669 6c65 3d4e  , identityfile=N
+0002c2f0: 6f6e 652c 2076 6d63 6c69 656e 743d 4e6f  one, vmclient=No
+0002c300: 6e65 293a 0a20 2020 2020 2020 2063 6f6e  ne):.        con
+0002c310: 6669 6720 3d20 4b63 6f6e 6669 6728 636c  fig = Kconfig(cl
+0002c320: 6965 6e74 3d76 6d63 6c69 656e 7429 2069  ient=vmclient) i
+0002c330: 6620 766d 636c 6965 6e74 2069 7320 6e6f  f vmclient is no
+0002c340: 7420 4e6f 6e65 2065 6c73 6520 7365 6c66  t None else self
+0002c350: 0a20 2020 2020 2020 206b 203d 2063 6f6e  .        k = con
+0002c360: 6669 672e 6b0a 2020 2020 2020 2020 6375  fig.k.        cu
+0002c370: 7272 656e 745f 6970 203d 2063 6f6d 6d6f  rrent_ip = commo
+0002c380: 6e2e 5f73 7368 5f63 7265 6465 6e74 6961  n._ssh_credentia
+0002c390: 6c73 286b 2c20 6e61 6d65 295b 315d 0a20  ls(k, name)[1]. 
+0002c3a0: 2020 2020 2020 2066 6f72 2066 696e 6973         for finis
+0002c3b0: 6866 696c 6520 696e 2066 696e 6973 6866  hfile in finishf
+0002c3c0: 696c 6573 3a0a 2020 2020 2020 2020 2020  iles:.          
+0002c3d0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0002c3e0: 6669 6e69 7368 6669 6c65 2c20 7374 7229  finishfile, str)
+0002c3f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0002c400: 2020 6465 7374 696e 6174 696f 6e20 3d20    destination = 
+0002c410: 272e 270a 2020 2020 2020 2020 2020 2020  '.'.            
+0002c420: 2020 2020 736f 7572 6365 203d 2066 696e      source = fin
+0002c430: 6973 6866 696c 6520 6966 2027 2f27 2069  ishfile if '/' i
+0002c440: 6e20 6669 6e69 7368 6669 6c65 2065 6c73  n finishfile els
+0002c450: 6520 6627 2f72 6f6f 742f 7b66 696e 6973  e f'/root/{finis
+0002c460: 6866 696c 657d 270a 2020 2020 2020 2020  hfile}'.        
+0002c470: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
+0002c480: 6e63 6528 6669 6e69 7368 6669 6c65 2c20  nce(finishfile, 
+0002c490: 6469 6374 2920 616e 6420 276f 7269 6769  dict) and 'origi
+0002c4a0: 6e27 2069 6e20 6669 6e69 7368 6669 6c65  n' in finishfile
+0002c4b0: 2061 6e64 2027 7061 7468 2720 696e 2066   and 'path' in f
+0002c4c0: 696e 6973 6866 696c 653a 0a20 2020 2020  inishfile:.     
+0002c4d0: 2020 2020 2020 2020 2020 2073 6f75 7263             sourc
+0002c4e0: 652c 2064 6573 7469 6e61 7469 6f6e 203d  e, destination =
+0002c4f0: 2066 696e 6973 6866 696c 652e 6765 7428   finishfile.get(
+0002c500: 276f 7269 6769 6e27 292c 206f 732e 7061  'origin'), os.pa
+0002c510: 7468 2e65 7870 616e 6475 7365 7228 6669  th.expanduser(fi
+0002c520: 6e69 7368 6669 6c65 2e67 6574 2827 7061  nishfile.get('pa
+0002c530: 7468 272c 2027 2e27 2929 0a20 2020 2020  th', '.')).     
+0002c540: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0002c550: 2020 2020 2020 2020 2020 2020 2077 6172               war
+0002c560: 6e69 6e67 2866 2249 6e63 6f72 7265 6374  ning(f"Incorrect
+0002c570: 2066 696e 6973 6866 696c 6520 656e 7472   finishfile entr
+0002c580: 7920 7b66 696e 6973 6866 696c 657d 2e20  y {finishfile}. 
+0002c590: 536b 6970 7069 6e67 2229 0a20 2020 2020  Skipping").     
+0002c5a0: 2020 2020 2020 2020 2020 2063 6f6e 7469             conti
+0002c5b0: 6e75 650a 2020 2020 2020 2020 2020 2020  nue.            
+0002c5c0: 7363 7063 6d64 203d 2063 6f6d 6d6f 6e2e  scpcmd = common.
+0002c5d0: 7363 7028 6e61 6d65 2c20 6970 3d63 7572  scp(name, ip=cur
+0002c5e0: 7265 6e74 5f69 702c 2075 7365 723d 2772  rent_ip, user='r
+0002c5f0: 6f6f 7427 2c20 736f 7572 6365 3d73 6f75  oot', source=sou
+0002c600: 7263 652c 2064 6573 7469 6e61 7469 6f6e  rce, destination
+0002c610: 3d64 6573 7469 6e61 7469 6f6e 2c0a 2020  =destination,.  
+0002c620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c630: 2020 2020 2020 2020 2020 2020 2020 7475                tu
+0002c640: 6e6e 656c 3d63 6f6e 6669 672e 7475 6e6e  nnel=config.tunn
+0002c650: 656c 2c20 7475 6e6e 656c 686f 7374 3d63  el, tunnelhost=c
+0002c660: 6f6e 6669 672e 7475 6e6e 656c 686f 7374  onfig.tunnelhost
+0002c670: 2c20 7475 6e6e 656c 706f 7274 3d63 6f6e  , tunnelport=con
+0002c680: 6669 672e 7475 6e6e 656c 706f 7274 2c0a  fig.tunnelport,.
+0002c690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c6b0: 7475 6e6e 656c 7573 6572 3d73 656c 662e  tunneluser=self.
+0002c6c0: 7475 6e6e 656c 7573 6572 2c20 646f 776e  tunneluser, down
+0002c6d0: 6c6f 6164 3d54 7275 652c 2069 6e73 6563  load=True, insec
+0002c6e0: 7572 653d 5472 7565 2c20 6964 656e 7469  ure=True, identi
+0002c6f0: 7479 6669 6c65 3d69 6465 6e74 6974 7966  tyfile=identityf
+0002c700: 696c 6529 0a20 2020 2020 2020 2020 2020  ile).           
+0002c710: 206f 732e 7379 7374 656d 2873 6370 636d   os.system(scpcm
+0002c720: 6429 0a0a 2020 2020 6465 6620 6861 6e64  d)..    def hand
+0002c730: 6c65 5f6e 6f74 6966 6963 6174 696f 6e73  le_notifications
+0002c740: 2873 656c 662c 206e 616d 652c 206e 6f74  (self, name, not
+0002c750: 6966 796d 6574 686f 6473 3d5b 5d2c 2070  ifymethods=[], p
+0002c760: 7573 6862 756c 6c65 7474 6f6b 656e 3d4e  ushbullettoken=N
+0002c770: 6f6e 652c 206e 6f74 6966 7973 6372 6970  one, notifyscrip
+0002c780: 743d 4e6f 6e65 2c20 6e6f 7469 6679 636d  t=None, notifycm
+0002c790: 643d 4e6f 6e65 2c0a 2020 2020 2020 2020  d=None,.        
+0002c7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c7b0: 2020 2020 2073 6c61 636b 6368 616e 6e65       slackchanne
+0002c7c0: 6c3d 4e6f 6e65 2c20 736c 6163 6b74 6f6b  l=None, slacktok
+0002c7d0: 656e 3d4e 6f6e 652c 206d 6169 6c73 6572  en=None, mailser
+0002c7e0: 7665 723d 4e6f 6e65 2c20 6d61 696c 6672  ver=None, mailfr
+0002c7f0: 6f6d 3d4e 6f6e 652c 206d 6169 6c74 6f3d  om=None, mailto=
+0002c800: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
+0002c810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c820: 2020 2063 6c75 7374 6572 3d46 616c 7365     cluster=False
+0002c830: 293a 0a20 2020 2020 2020 205f 7479 7065  ):.        _type
+0002c840: 203d 2027 436c 7573 7465 7227 2069 6620   = 'Cluster' if 
+0002c850: 636c 7573 7465 7220 656c 7365 2027 566d  cluster else 'Vm
+0002c860: 270a 2020 2020 2020 2020 7469 746c 6520  '.        title 
+0002c870: 3d20 6622 7b5f 7479 7065 7d20 7b6e 616d  = f"{_type} {nam
+0002c880: 657d 206f 6e20 7b73 656c 662e 636c 6965  e} on {self.clie
+0002c890: 6e74 7d20 7265 706f 7274 220a 2020 2020  nt} report".    
+0002c8a0: 2020 2020 636d 6473 2c20 6d61 696c 636f      cmds, mailco
+0002c8b0: 6e74 656e 7420 3d20 5b5d 2c20 4e6f 6e65  ntent = [], None
+0002c8c0: 0a20 2020 2020 2020 2066 6f72 206e 6f74  .        for not
+0002c8d0: 6966 796d 6574 686f 6420 696e 2073 6f72  ifymethod in sor
+0002c8e0: 7465 6428 6e6f 7469 6679 6d65 7468 6f64  ted(notifymethod
+0002c8f0: 732c 2072 6576 6572 7365 3d54 7275 6529  s, reverse=True)
+0002c900: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+0002c910: 206e 6f74 6966 796d 6574 686f 6420 3d3d   notifymethod ==
+0002c920: 2027 7075 7368 6275 6c6c 6574 273a 0a20   'pushbullet':. 
+0002c930: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002c940: 6620 7075 7368 6275 6c6c 6574 746f 6b65  f pushbullettoke
+0002c950: 6e20 6973 204e 6f6e 653a 0a20 2020 2020  n is None:.     
+0002c960: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+0002c970: 6172 6e69 6e67 2866 224e 6f74 6966 6963  arning(f"Notific
+0002c980: 6174 696f 6e20 7265 7175 6972 6564 2066  ation required f
+0002c990: 6f72 207b 6e61 6d65 7d20 6275 7420 6d69  or {name} but mi
+0002c9a0: 7373 696e 6720 7075 7368 6275 6c6c 6574  ssing pushbullet
+0002c9b0: 746f 6b65 6e22 290a 2020 2020 2020 2020  token").        
+0002c9c0: 2020 2020 2020 2020 656c 6966 206e 6f74          elif not
+0002c9d0: 6966 7973 6372 6970 7420 6973 204e 6f6e  ifyscript is Non
+0002c9e0: 6520 616e 6420 6e6f 7469 6679 636d 6420  e and notifycmd 
+0002c9f0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
+0002ca00: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+0002ca10: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
+0002ca20: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
 0002ca30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ca40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ca50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ca60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ca70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ca80: 2020 2020 2020 206e 6f74 6966 7963 6d64         notifycmd
-0002ca90: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0002caa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ca40: 746f 6b65 6e20 3d20 7075 7368 6275 6c6c  token = pushbull
+0002ca50: 6574 746f 6b65 6e0a 2020 2020 2020 2020  ettoken.        
+0002ca60: 2020 2020 2020 2020 2020 2020 7062 636d              pbcm
+0002ca70: 6420 3d20 2763 7572 6c20 2d73 7520 2225  d = 'curl -su "%
+0002ca80: 733a 2220 2d64 2074 7970 653d 226e 6f74  s:" -d type="not
+0002ca90: 6522 202d 6420 626f 6479 3d22 6025 7320  e" -d body="`%s 
+0002caa0: 323e 2631 6022 202d 6420 7469 746c 653d  2>&1`" -d title=
+0002cab0: 2225 7322 2027 2025 2028 746f 6b65 6e2c  "%s" ' % (token,
+0002cac0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0002cad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002cae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002caf0: 2020 2020 7469 746c 6529 0a20 2020 2020      title).     
-0002cb00: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0002cb10: 6263 6d64 202b 3d20 2768 7474 7073 3a2f  bcmd += 'https:/
-0002cb20: 2f61 7069 2e70 7573 6862 756c 6c65 742e  /api.pushbullet.
-0002cb30: 636f 6d2f 7632 2f70 7573 6865 7327 0a20  com/v2/pushes'. 
+0002caf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cb00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cb10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cb20: 2020 206e 6f74 6966 7963 6d64 2c0a 2020     notifycmd,.  
+0002cb30: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002cb40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cb50: 2020 2063 6d64 732e 6170 7065 6e64 2870     cmds.append(p
-0002cb60: 6263 6d64 290a 2020 2020 2020 2020 2020  bcmd).          
-0002cb70: 2020 656c 6966 206e 6f74 6966 796d 6574    elif notifymet
-0002cb80: 686f 6420 3d3d 2027 736c 6163 6b27 3a0a  hod == 'slack':.
-0002cb90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cba0: 6966 2073 6c61 636b 6368 616e 6e65 6c20  if slackchannel 
-0002cbb0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-0002cbc0: 2020 2020 2020 2020 2020 2020 2077 6172               war
-0002cbd0: 6e69 6e67 2866 224e 6f74 6966 6963 6174  ning(f"Notificat
-0002cbe0: 696f 6e20 7265 7175 6972 6564 2066 6f72  ion required for
-0002cbf0: 207b 6e61 6d65 7d20 6275 7420 6d69 7373   {name} but miss
-0002cc00: 696e 6720 736c 6163 6b20 6368 616e 6e65  ing slack channe
-0002cc10: 6c22 290a 2020 2020 2020 2020 2020 2020  l").            
-0002cc20: 2020 2020 656c 6966 2073 6c61 636b 746f      elif slackto
-0002cc30: 6b65 6e20 6973 204e 6f6e 653a 0a20 2020  ken is None:.   
-0002cc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cc50: 2077 6172 6e69 6e67 2866 224e 6f74 6966   warning(f"Notif
-0002cc60: 6963 6174 696f 6e20 7265 7175 6972 6564  ication required
-0002cc70: 2066 6f72 207b 6e61 6d65 7d20 6275 7420   for {name} but 
-0002cc80: 6d69 7373 696e 6720 736c 6163 6b74 6f6b  missing slacktok
-0002cc90: 656e 2229 0a20 2020 2020 2020 2020 2020  en").           
-0002cca0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0002ccb0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0002ccc0: 6c61 636b 636d 6420 3d20 6622 696e 666f  lackcmd = f"info
-0002ccd0: 3d60 7b6e 6f74 6966 7963 6d64 7d20 323e  =`{notifycmd} 2>
-0002cce0: 2631 207c 2073 6564 2027 732f 5c5c 7832  &1 | sed 's/\\x2
-0002ccf0: 2f20 2f67 2760 3b22 0a20 2020 2020 2020  / /g'`;".       
-0002cd00: 2020 2020 2020 2020 2020 2020 2073 6c61               sla
-0002cd10: 636b 636d 6420 2b3d 2022 2222 6375 726c  ckcmd += """curl
-0002cd20: 202d 5820 504f 5354 202d 4820 2741 7574   -X POST -H 'Aut
-0002cd30: 686f 7269 7a61 7469 6f6e 3a20 4265 6172  horization: Bear
-0002cd40: 6572 2025 7327 0a20 2d48 2027 436f 6e74  er %s'. -H 'Cont
-0002cd50: 656e 742d 7479 7065 3a20 6170 706c 6963  ent-type: applic
-0002cd60: 6174 696f 6e2f 6a73 6f6e 3b20 6368 6172  ation/json; char
-0002cd70: 7365 743d 7574 662d 3827 0a20 2d2d 6461  set=utf-8'. --da
-0002cd80: 7461 2027 7b22 6368 616e 6e65 6c22 3a22  ta '{"channel":"
-0002cd90: 2573 222c 2274 6578 7422 3a22 2573 222c  %s","text":"%s",
-0002cda0: 2261 7474 6163 686d 656e 7473 223a 205b  "attachments": [
-0002cdb0: 7b22 7465 7874 223a 2227 2224 696e 666f  {"text":"'"$info
-0002cdc0: 2227 222c 2266 616c 6c62 6163 6b22 3a22  "'","fallback":"
-0002cdd0: 6e6f 7468 696e 6722 2c0a 2263 6f6c 6f72  nothing",."color
-0002cde0: 223a 2223 3341 4133 4533 222c 2261 7474  ":"#3AA3E3","att
-0002cdf0: 6163 686d 656e 745f 7479 7065 223a 2264  achment_type":"d
-0002ce00: 6566 6175 6c74 227d 5d7d 2720 6874 7470  efault"}]}' http
-0002ce10: 733a 2f2f 736c 6163 6b2e 636f 6d2f 6170  s://slack.com/ap
-0002ce20: 692f 6368 6174 2e70 6f73 744d 6573 7361  i/chat.postMessa
-0002ce30: 6765 2222 2220 2520 2873 6c61 636b 746f  ge""" % (slackto
-0002ce40: 6b65 6e2c 0a20 2020 2020 2020 2020 2020  ken,.           
-0002ce50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ce60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ce70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ce80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ce90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cea0: 2020 2020 736c 6163 6b63 6861 6e6e 656c      slackchannel
-0002ceb0: 2c20 7469 746c 6529 0a20 2020 2020 2020  , title).       
-0002cec0: 2020 2020 2020 2020 2020 2020 2073 6c61               sla
-0002ced0: 636b 636d 6420 3d20 736c 6163 6b63 6d64  ckcmd = slackcmd
-0002cee0: 2e72 6570 6c61 6365 2827 5c6e 272c 2027  .replace('\n', '
-0002cef0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
-0002cf00: 2020 2020 2020 2063 6d64 732e 6170 7065         cmds.appe
-0002cf10: 6e64 2873 6c61 636b 636d 6429 0a20 2020  nd(slackcmd).   
-0002cf20: 2020 2020 2020 2020 2065 6c69 6620 6e6f           elif no
-0002cf30: 7469 6679 6d65 7468 6f64 203d 3d20 276d  tifymethod == 'm
-0002cf40: 6169 6c27 3a0a 2020 2020 2020 2020 2020  ail':.          
-0002cf50: 2020 2020 2020 6966 206d 6169 6c73 6572        if mailser
-0002cf60: 7665 7220 6973 204e 6f6e 653a 0a20 2020  ver is None:.   
-0002cf70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cf80: 2077 6172 6e69 6e67 2866 224e 6f74 6966   warning(f"Notif
-0002cf90: 6963 6174 696f 6e20 7265 7175 6972 6564  ication required
-0002cfa0: 2066 6f72 207b 6e61 6d65 7d20 6275 7420   for {name} but 
-0002cfb0: 6d69 7373 696e 6720 6d61 696c 7365 7276  missing mailserv
-0002cfc0: 6572 2229 0a20 2020 2020 2020 2020 2020  er").           
-0002cfd0: 2020 2020 2065 6c69 6620 6d61 696c 6672       elif mailfr
-0002cfe0: 6f6d 2069 7320 4e6f 6e65 3a0a 2020 2020  om is None:.    
-0002cff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d000: 7761 726e 696e 6728 6622 4e6f 7469 6669  warning(f"Notifi
-0002d010: 6361 7469 6f6e 2072 6571 7569 7265 6420  cation required 
-0002d020: 666f 7220 7b6e 616d 657d 2062 7574 206d  for {name} but m
-0002d030: 6973 7369 6e67 206d 6169 6c66 726f 6d22  issing mailfrom"
-0002d040: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0002d050: 2020 656c 6966 206e 6f74 206d 6169 6c74    elif not mailt
-0002d060: 6f3a 0a20 2020 2020 2020 2020 2020 2020  o:.             
-0002d070: 2020 2020 2020 2077 6172 6e69 6e67 2866         warning(f
-0002d080: 224e 6f74 6966 6963 6174 696f 6e20 7265  "Notification re
-0002d090: 7175 6972 6564 2066 6f72 207b 6e61 6d65  quired for {name
-0002d0a0: 7d20 6275 7420 6d69 7373 696e 6720 6d61  } but missing ma
-0002d0b0: 696c 746f 2229 0a20 2020 2020 2020 2020  ilto").         
-0002d0c0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0002d0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d0e0: 206e 6f77 203d 2064 6174 6574 696d 652e   now = datetime.
-0002d0f0: 6e6f 7728 290a 2020 2020 2020 2020 2020  now().          
-0002d100: 2020 2020 2020 2020 2020 6e6f 7720 3d20            now = 
-0002d110: 6e6f 772e 2073 7472 6674 696d 6528 2225  now. strftime("%
-0002d120: 612c 2564 2025 6220 2559 2025 483a 254d  a,%d %b %Y %H:%M
-0002d130: 3a25 5322 290a 2020 2020 2020 2020 2020  :%S").          
-0002d140: 2020 2020 2020 2020 2020 746f 7320 3d20            tos = 
-0002d150: 272c 272e 6a6f 696e 285b 6622 3c7b 746f  ','.join([f"<{to
-0002d160: 7d3e 2220 666f 7220 746f 2069 6e20 6d61  }>" for to in ma
-0002d170: 696c 746f 5d29 0a20 2020 2020 2020 2020  ilto]).         
-0002d180: 2020 2020 2020 2020 2020 206d 6169 6c63             mailc
-0002d190: 6f6e 7465 6e74 203d 2066 2246 726f 6d3a  ontent = f"From:
-0002d1a0: 207b 6d61 696c 6672 6f6d 7d20 3c7b 6d61   {mailfrom} <{ma
-0002d1b0: 696c 6672 6f6d 7d3e 5c6e 546f 3a20 7b74  ilfrom}>\nTo: {t
-0002d1c0: 6f73 7d5c 6e44 6174 653a 207b 6e6f 777d  os}\nDate: {now}
-0002d1d0: 5c6e 5375 626a 6563 743a 207b 7469 746c  \nSubject: {titl
-0002d1e0: 657d 220a 2020 2020 2020 2020 2020 2020  e}".            
-0002d1f0: 2020 2020 2020 2020 6d61 696c 636d 6420          mailcmd 
-0002d200: 3d20 5b5d 0a20 2020 2020 2020 2020 2020  = [].           
-0002d210: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-0002d220: 636c 7573 7465 723a 0a20 2020 2020 2020  cluster:.       
-0002d230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d240: 206d 6169 6c63 6d64 2e61 7070 656e 6428   mailcmd.append(
-0002d250: 2774 6573 7420 2d66 202f 6574 632f 6465  'test -f /etc/de
-0002d260: 6269 616e 5f76 6572 7369 6f6e 2026 2620  bian_version && 
-0002d270: 6170 742d 6765 7420 2d79 2069 6e73 7461  apt-get -y insta
-0002d280: 6c6c 2063 7572 6c27 290a 2020 2020 2020  ll curl').      
-0002d290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d2a0: 2020 6d61 696c 636d 642e 6170 7065 6e64    mailcmd.append
-0002d2b0: 2827 6563 686f 2022 2220 3e3e 202f 7661  ('echo "" >> /va
-0002d2c0: 722f 746d 702f 6d61 696c 2e74 7874 2729  r/tmp/mail.txt')
-0002d2d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d2e0: 2020 2020 206d 6169 6c63 6d64 2e61 7070       mailcmd.app
-0002d2f0: 656e 6428 6627 7b6e 6f74 6966 7963 6d64  end(f'{notifycmd
-0002d300: 7d20 323e 2631 203e 3e20 2f76 6172 2f74  } 2>&1 >> /var/t
-0002d310: 6d70 2f6d 6169 6c2e 7478 7427 290a 2020  mp/mail.txt').  
-0002d320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d330: 2020 6375 726c 636d 6420 3d20 6622 6375    curlcmd = f"cu
-0002d340: 726c 202d 2d73 696c 656e 7420 2d2d 7572  rl --silent --ur
-0002d350: 6c20 736d 7470 3a2f 2f7b 6d61 696c 7365  l smtp://{mailse
-0002d360: 7276 6572 7d3a 3235 202d 2d6d 6169 6c2d  rver}:25 --mail-
-0002d370: 6672 6f6d 207b 6d61 696c 6672 6f6d 7d22  from {mailfrom}"
-0002d380: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d390: 2020 2020 2066 6f72 2061 6464 7265 7373       for address
-0002d3a0: 2069 6e20 6d61 696c 746f 3a0a 2020 2020   in mailto:.    
-0002d3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d3c0: 2020 2020 6375 726c 636d 6420 2b3d 2066      curlcmd += f
-0002d3d0: 2220 2d2d 6d61 696c 2d72 6370 7420 7b61  " --mail-rcpt {a
-0002d3e0: 6464 7265 7373 7d20 220a 2020 2020 2020  ddress} ".      
-0002d3f0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0002d400: 2063 6c75 7374 6572 3a0a 2020 2020 2020   cluster:.      
-0002d410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d420: 2020 6d61 696c 636f 6e74 656e 7420 3d20    mailcontent = 
-0002d430: 2222 0a20 2020 2020 2020 2020 2020 2020  "".             
-0002d440: 2020 2020 2020 2020 2020 206b 7562 6563             kubec
-0002d450: 6f6e 6669 6720 3d20 6627 2f65 7463 2f6b  onfig = f'/etc/k
-0002d460: 7562 6572 6e65 7465 732f 6b75 6265 636f  ubernetes/kubeco
-0002d470: 6e66 6967 2e7b 6e61 6d65 7d27 0a20 2020  nfig.{name}'.   
-0002d480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d490: 2020 2020 2063 7572 6c63 6d64 202b 3d20       curlcmd += 
-0002d4a0: 6627 202d 4820 2253 7562 6a65 6374 3a20  f' -H "Subject: 
-0002d4b0: 7b74 6974 6c65 7d22 202d 4820 2246 726f  {title}" -H "Fro
-0002d4c0: 6d3a 207b 6d61 696c 6672 6f6d 7d20 3c7b  m: {mailfrom} <{
-0002d4d0: 6d61 696c 6672 6f6d 7d3e 2227 0a20 2020  mailfrom}>"'.   
-0002d4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d4f0: 2020 2020 2066 6f72 2061 6464 7265 7373       for address
-0002d500: 2069 6e20 6d61 696c 746f 3a0a 2020 2020   in mailto:.    
-0002d510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d520: 2020 2020 2020 2020 6375 726c 636d 6420          curlcmd 
-0002d530: 2b3d 2066 2720 2d48 2022 546f 3a20 7b61  += f' -H "To: {a
-0002d540: 6464 7265 7373 7d20 3c7b 6164 6472 6573  ddress} <{addres
-0002d550: 737d 3e22 270a 2020 2020 2020 2020 2020  s}>"'.          
-0002d560: 2020 2020 2020 2020 2020 2020 2020 6375                cu
-0002d570: 726c 636d 6420 2b3d 2027 202d 4620 223d  rlcmd += ' -F "=
-0002d580: 283b 7479 7065 3d6d 756c 7469 7061 7274  (;type=multipart
-0002d590: 2f6d 6978 6564 2220 2d46 2022 3d24 2863  /mixed" -F "=$(c
-0002d5a0: 6174 202f 7661 722f 746d 702f 6d61 696c  at /var/tmp/mail
-0002d5b0: 2e74 7874 293b 7479 7065 3d74 6578 742f  .txt);type=text/
-0002d5c0: 706c 6169 6e22 270a 2020 2020 2020 2020  plain"'.        
-0002d5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d5e0: 6375 726c 636d 6420 2b3d 2066 2720 2d46  curlcmd += f' -F
-0002d5f0: 2022 6669 6c65 3d40 7b6b 7562 6563 6f6e   "file=@{kubecon
-0002d600: 6669 677d 3b74 7970 653d 7465 7874 2f70  fig};type=text/p
-0002d610: 6c61 696e 3b65 6e63 6f64 6572 3d62 6173  lain;encoder=bas
-0002d620: 6536 3422 202d 4620 223d 2922 270a 2020  e64" -F "=)"'.  
-0002d630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d640: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0002d650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d660: 6375 726c 636d 6420 2b3d 2022 202d 2d75  curlcmd += " --u
-0002d670: 706c 6f61 642d 6669 6c65 202f 7661 722f  pload-file /var/
-0002d680: 746d 702f 6d61 696c 2e74 7874 220a 2020  tmp/mail.txt".  
-0002d690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d6a0: 2020 6d61 696c 636d 642e 6170 7065 6e64    mailcmd.append
-0002d6b0: 2863 7572 6c63 6d64 290a 2020 2020 2020  (curlcmd).      
-0002d6c0: 2020 2020 2020 2020 2020 2020 2020 636d                cm
-0002d6d0: 6473 2e65 7874 656e 6428 6d61 696c 636d  ds.extend(mailcm
-0002d6e0: 6429 0a20 2020 2020 2020 2020 2020 2065  d).            e
-0002d6f0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0002d700: 2020 2020 2065 7272 6f72 2866 2249 6e76       error(f"Inv
-0002d710: 616c 6964 206d 6574 686f 6420 7b6e 6f74  alid method {not
-0002d720: 6966 796d 6574 686f 647d 2229 0a20 2020  ifymethod}").   
-0002d730: 2020 2020 2072 6574 7572 6e20 636d 6473       return cmds
-0002d740: 2c20 6d61 696c 636f 6e74 656e 740a 0a20  , mailcontent.. 
-0002d750: 2020 2064 6566 2068 616e 646c 655f 766d     def handle_vm
-0002d760: 5f72 6573 756c 7428 7365 6c66 2c20 6e61  _result(self, na
-0002d770: 6d65 2c20 7072 6f66 696c 652c 2072 6573  me, profile, res
-0002d780: 756c 742c 206e 6577 766d 732c 2066 6169  ult, newvms, fai
-0002d790: 6c65 6476 6d73 2c20 6173 796e 6377 6169  ledvms, asyncwai
-0002d7a0: 7476 6d73 2c20 6f6e 6c79 6173 7365 7473  tvms, onlyassets
-0002d7b0: 3d46 616c 7365 2c20 6e65 7761 7373 6574  =False, newasset
-0002d7c0: 733d 5b5d 2c0a 2020 2020 2020 2020 2020  s=[],.          
-0002d7d0: 2020 2020 2020 2020 2020 2020 2020 2076                 v
-0002d7e0: 6d63 6c69 656e 743d 4e6f 6e65 293a 0a20  mclient=None):. 
-0002d7f0: 2020 2020 2020 2069 6620 2772 6573 756c         if 'resul
-0002d800: 7427 2069 6e20 7265 7375 6c74 2061 6e64  t' in result and
-0002d810: 2072 6573 756c 745b 2772 6573 756c 7427   result['result'
-0002d820: 5d20 3d3d 2027 7375 6363 6573 7327 3a0a  ] == 'success':.
-0002d830: 2020 2020 2020 2020 2020 2020 6e65 7776              newv
-0002d840: 6d73 2e61 7070 656e 6428 6e61 6d65 290a  ms.append(name).
-0002d850: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0002d860: 2020 2020 2020 2020 2020 6661 696c 6564            failed
-0002d870: 766d 732e 6170 7065 6e64 287b 276e 616d  vms.append({'nam
-0002d880: 6527 3a20 6e61 6d65 2c20 2772 6561 736f  e': name, 'reaso
-0002d890: 6e27 3a20 7265 7375 6c74 5b27 7265 6173  n': result['reas
-0002d8a0: 6f6e 275d 7d29 0a20 2020 2020 2020 2073  on']}).        s
-0002d8b0: 7461 7274 203d 2070 726f 6669 6c65 2e67  tart = profile.g
-0002d8c0: 6574 2827 7374 6172 7427 2c20 5472 7565  et('start', True
-0002d8d0: 290a 2020 2020 2020 2020 636c 6f75 6469  ).        cloudi
-0002d8e0: 6e69 7420 3d20 7072 6f66 696c 652e 6765  nit = profile.ge
-0002d8f0: 7428 2763 6c6f 7564 696e 6974 272c 2054  t('cloudinit', T
-0002d900: 7275 6529 0a20 2020 2020 2020 2061 7379  rue).        asy
-0002d910: 6e63 7761 6974 203d 2070 726f 6669 6c65  ncwait = profile
-0002d920: 2e67 6574 2827 6173 796e 6377 6169 7427  .get('asyncwait'
-0002d930: 2c20 4661 6c73 6529 0a20 2020 2020 2020  , False).       
-0002d940: 2066 696e 6973 6866 696c 6573 203d 2070   finishfiles = p
-0002d950: 726f 6669 6c65 2e67 6574 2827 6669 6e69  rofile.get('fini
-0002d960: 7368 6669 6c65 7327 2c20 5b5d 290a 2020  shfiles', []).  
-0002d970: 2020 2020 2020 6966 206f 6e6c 7961 7373        if onlyass
-0002d980: 6574 733a 0a20 2020 2020 2020 2020 2020  ets:.           
-0002d990: 2069 6620 2764 6174 6127 2069 6e20 7265   if 'data' in re
-0002d9a0: 7375 6c74 3a0a 2020 2020 2020 2020 2020  sult:.          
-0002d9b0: 2020 2020 2020 6e65 7761 7373 6574 732e        newassets.
-0002d9c0: 6170 7065 6e64 2872 6573 756c 745b 2764  append(result['d
-0002d9d0: 6174 6127 5d29 0a20 2020 2020 2020 2020  ata']).         
-0002d9e0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0002d9f0: 2020 2020 2020 2020 2065 7272 6f72 2872           error(r
-0002da00: 6573 756c 745b 2772 6561 736f 6e27 5d29  esult['reason'])
-0002da10: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-0002da20: 6173 796e 6377 6169 743a 0a20 2020 2020  asyncwait:.     
-0002da30: 2020 2020 2020 2072 6574 7572 6e0a 2020         return.  
-0002da40: 2020 2020 2020 656c 6966 206e 6f74 2073        elif not s
-0002da50: 7461 7274 206f 7220 6e6f 7420 636c 6f75  tart or not clou
-0002da60: 6469 6e69 7420 6f72 2070 726f 6669 6c65  dinit or profile
-0002da70: 2e67 6574 2827 696d 6167 6527 2920 6973  .get('image') is
-0002da80: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-0002da90: 2020 2070 7072 696e 7428 6622 536b 6970     pprint(f"Skip
-0002daa0: 7069 6e67 2077 6169 7420 6f6e 207b 6e61  ping wait on {na
-0002dab0: 6d65 7d22 290a 2020 2020 2020 2020 656c  me}").        el
-0002dac0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0002dad0: 7761 6974 636f 6d6d 616e 6420 3d20 7072  waitcommand = pr
-0002dae0: 6f66 696c 652e 6765 7428 2777 6169 7463  ofile.get('waitc
-0002daf0: 6f6d 6d61 6e64 2729 0a20 2020 2020 2020  ommand').       
-0002db00: 2020 2020 2077 6169 7474 696d 656f 7574       waittimeout
-0002db10: 203d 2070 726f 6669 6c65 2e67 6574 2827   = profile.get('
-0002db20: 7761 6974 7469 6d65 6f75 7427 2c20 3029  waittimeout', 0)
-0002db30: 0a20 2020 2020 2020 2020 2020 2061 7379  .            asy
-0002db40: 6e63 7761 6974 766d 203d 207b 276e 616d  ncwaitvm = {'nam
-0002db50: 6527 3a20 6e61 6d65 2c20 2766 696e 6973  e': name, 'finis
-0002db60: 6866 696c 6573 273a 2066 696e 6973 6866  hfiles': finishf
-0002db70: 696c 6573 2c20 2777 6169 7463 6f6d 6d61  iles, 'waitcomma
-0002db80: 6e64 273a 2077 6169 7463 6f6d 6d61 6e64  nd': waitcommand
-0002db90: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0002dba0: 2020 2020 2020 2020 2020 2020 2027 7761               'wa
-0002dbb0: 6974 7469 6d65 6f75 7427 3a20 7761 6974  ittimeout': wait
-0002dbc0: 7469 6d65 6f75 742c 2027 766d 636c 6965  timeout, 'vmclie
-0002dbd0: 6e74 273a 2076 6d63 6c69 656e 747d 0a20  nt': vmclient}. 
-0002dbe0: 2020 2020 2020 2020 2020 2061 7379 6e63             async
-0002dbf0: 7761 6974 766d 732e 6170 7065 6e64 2861  waitvms.append(a
-0002dc00: 7379 6e63 7761 6974 766d 290a 0a20 2020  syncwaitvm)..   
-0002dc10: 2064 6566 2074 6872 6561 6465 645f 6372   def threaded_cr
-0002dc20: 6561 7465 5f76 6d28 7365 6c66 2c20 6e61  eate_vm(self, na
-0002dc30: 6d65 2c20 7072 6f66 696c 656e 616d 652c  me, profilename,
-0002dc40: 2063 7572 7265 6e74 6f76 6572 7269 6465   currentoverride
-0002dc50: 732c 2070 726f 6669 6c65 2c20 7a2c 2070  s, profile, z, p
-0002dc60: 6c61 6e2c 2063 7572 7265 6e74 706c 616e  lan, currentplan
-0002dc70: 6469 722c 2076 6d63 6c69 656e 742c 0a20  dir, vmclient,. 
-0002dc80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dc90: 2020 2020 2020 2020 2020 6f6e 666c 792c            onfly,
-0002dca0: 206f 6e6c 7961 7373 6574 732c 206e 6577   onlyassets, new
-0002dcb0: 766d 732c 2066 6169 6c65 6476 6d73 2c20  vms, failedvms, 
-0002dcc0: 6173 796e 6377 6169 7476 6d73 2c20 6e65  asyncwaitvms, ne
-0002dcd0: 7761 7373 6574 7329 3a0a 2020 2020 2020  wassets):.      
-0002dce0: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
-0002dcf0: 6372 6561 7465 5f76 6d28 6e61 6d65 2c20  create_vm(name, 
-0002dd00: 7072 6f66 696c 656e 616d 652c 206f 7665  profilename, ove
-0002dd10: 7272 6964 6573 3d63 7572 7265 6e74 6f76  rrides=currentov
-0002dd20: 6572 7269 6465 732c 2063 7573 746f 6d70  errides, customp
-0002dd30: 726f 6669 6c65 3d70 726f 6669 6c65 2c20  rofile=profile, 
-0002dd40: 6b3d 7a2c 0a20 2020 2020 2020 2020 2020  k=z,.           
-0002dd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dd60: 2020 2020 2070 6c61 6e3d 706c 616e 2c20       plan=plan, 
-0002dd70: 6261 7365 6469 723d 6375 7272 656e 7470  basedir=currentp
-0002dd80: 6c61 6e64 6972 2c20 636c 6965 6e74 3d76  landir, client=v
-0002dd90: 6d63 6c69 656e 742c 206f 6e66 6c79 3d6f  mclient, onfly=o
-0002dda0: 6e66 6c79 2c0a 2020 2020 2020 2020 2020  nfly,.          
-0002ddb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ddc0: 2020 2020 2020 6f6e 6c79 6173 7365 7473        onlyassets
-0002ddd0: 3d6f 6e6c 7961 7373 6574 7329 0a20 2020  =onlyassets).   
-0002dde0: 2020 2020 2069 6620 6e6f 7420 6f6e 6c79       if not only
-0002ddf0: 6173 7365 7473 3a0a 2020 2020 2020 2020  assets:.        
-0002de00: 2020 2020 636f 6d6d 6f6e 2e68 616e 646c      common.handl
-0002de10: 655f 7265 7370 6f6e 7365 2872 6573 756c  e_response(resul
-0002de20: 742c 206e 616d 652c 2063 6c69 656e 743d  t, name, client=
-0002de30: 766d 636c 6965 6e74 290a 2020 2020 2020  vmclient).      
-0002de40: 2020 7365 6c66 2e68 616e 646c 655f 766d    self.handle_vm
-0002de50: 5f72 6573 756c 7428 6e61 6d65 2c20 7072  _result(name, pr
-0002de60: 6f66 696c 652c 2072 6573 756c 743d 7265  ofile, result=re
-0002de70: 7375 6c74 2c20 6e65 7776 6d73 3d6e 6577  sult, newvms=new
-0002de80: 766d 732c 2066 6169 6c65 6476 6d73 3d66  vms, failedvms=f
-0002de90: 6169 6c65 6476 6d73 2c0a 2020 2020 2020  ailedvms,.      
-0002dea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002deb0: 2020 2020 2020 2020 6173 796e 6377 6169          asyncwai
-0002dec0: 7476 6d73 3d61 7379 6e63 7761 6974 766d  tvms=asyncwaitvm
-0002ded0: 732c 206f 6e6c 7961 7373 6574 733d 6f6e  s, onlyassets=on
-0002dee0: 6c79 6173 7365 7473 2c20 6e65 7761 7373  lyassets, newass
-0002def0: 6574 733d 6e65 7761 7373 6574 732c 2076  ets=newassets, v
-0002df00: 6d63 6c69 656e 743d 766d 636c 6965 6e74  mclient=vmclient
-0002df10: 290a 0a20 2020 2064 6566 2070 6172 7365  )..    def parse
-0002df20: 5f66 696c 6573 2873 656c 662c 206e 616d  _files(self, nam
-0002df30: 652c 2066 696c 6573 2c20 6261 7365 6469  e, files, basedi
-0002df40: 723d 272e 272c 206f 6e66 6c79 3d4e 6f6e  r='.', onfly=Non
-0002df50: 6529 3a0a 2020 2020 2020 2020 6966 206e  e):.        if n
-0002df60: 6f74 2066 696c 6573 3a0a 2020 2020 2020  ot files:.      
-0002df70: 2020 2020 2020 7265 7475 726e 0a20 2020        return.   
-0002df80: 2020 2020 2066 6f72 2069 6e64 6578 2c20       for index, 
-0002df90: 6669 6c20 696e 2065 6e75 6d65 7261 7465  fil in enumerate
-0002dfa0: 2866 696c 6573 293a 0a20 2020 2020 2020  (files):.       
-0002dfb0: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-0002dfc0: 6365 2866 696c 2c20 7374 7229 3a0a 2020  ce(fil, str):.  
-0002dfd0: 2020 2020 2020 2020 2020 2020 2020 7061                pa
-0002dfe0: 7468 203d 2066 222f 726f 6f74 2f7b 6669  th = f"/root/{fi
-0002dff0: 6c7d 220a 2020 2020 2020 2020 2020 2020  l}".            
-0002e000: 2020 2020 6966 2062 6173 6564 6972 2021      if basedir !
-0002e010: 3d20 272e 273a 0a20 2020 2020 2020 2020  = '.':.         
-0002e020: 2020 2020 2020 2020 2020 206f 7269 6769             origi
-0002e030: 6e20 3d20 6622 7b62 6173 6564 6972 7d2f  n = f"{basedir}/
-0002e040: 7b70 6174 687d 220a 2020 2020 2020 2020  {path}".        
-0002e050: 2020 2020 2020 2020 6f72 6967 696e 203d          origin =
-0002e060: 2066 696c 0a20 2020 2020 2020 2020 2020   fil.           
-0002e070: 2020 2020 2063 6f6e 7465 6e74 203d 204e       content = N
-0002e080: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
-0002e090: 2020 2020 6669 6c65 735b 696e 6465 785d      files[index]
-0002e0a0: 203d 207b 2770 6174 6827 3a20 7061 7468   = {'path': path
-0002e0b0: 2c20 276f 7269 6769 6e27 3a20 6f72 6967  , 'origin': orig
-0002e0c0: 696e 7d0a 2020 2020 2020 2020 2020 2020  in}.            
-0002e0d0: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
-0002e0e0: 6669 6c2c 2064 6963 7429 3a0a 2020 2020  fil, dict):.    
-0002e0f0: 2020 2020 2020 2020 2020 2020 6f72 6967              orig
-0002e100: 696e 203d 2066 696c 2e67 6574 2827 6f72  in = fil.get('or
-0002e110: 6967 696e 2729 0a20 2020 2020 2020 2020  igin').         
-0002e120: 2020 2020 2020 2063 6f6e 7465 6e74 203d         content =
-0002e130: 2066 696c 2e67 6574 2827 636f 6e74 656e   fil.get('conten
-0002e140: 7427 290a 2020 2020 2020 2020 2020 2020  t').            
-0002e150: 2020 2020 7061 7468 203d 2066 696c 2e67      path = fil.g
-0002e160: 6574 2827 7061 7468 2729 0a20 2020 2020  et('path').     
-0002e170: 2020 2020 2020 2020 2020 2069 6620 7061             if pa
-0002e180: 7468 2069 7320 4e6f 6e65 3a0a 2020 2020  th is None:.    
-0002e190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e1a0: 6966 206f 7269 6769 6e20 6973 206e 6f74  if origin is not
-0002e1b0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-0002e1c0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0002e1d0: 696c 6573 5b69 6e64 6578 5d5b 2770 6174  iles[index]['pat
-0002e1e0: 6827 5d20 3d20 6622 2f72 6f6f 742f 7b6f  h'] = f"/root/{o
-0002e1f0: 7269 6769 6e7d 220a 2020 2020 2020 2020  rigin}".        
-0002e200: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0002e210: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0002e220: 2020 2020 2020 2020 2020 6572 726f 7228            error(
-0002e230: 6622 496e 636f 7272 6563 7420 656e 7472  f"Incorrect entr
-0002e240: 7920 7b66 696c 7d2e 4c65 6176 696e 672e  y {fil}.Leaving.
-0002e250: 2e2e 2229 0a20 2020 2020 2020 2020 2020  ..").           
-0002e260: 2020 2020 2020 2020 2020 2020 2073 7973               sys
-0002e270: 2e65 7869 7428 3129 0a20 2020 2020 2020  .exit(1).       
-0002e280: 2020 2020 2020 2020 2065 6c69 6620 6e6f           elif no
-0002e290: 7420 7061 7468 2e73 7461 7274 7377 6974  t path.startswit
-0002e2a0: 6828 272f 2729 3a0a 2020 2020 2020 2020  h('/'):.        
-0002e2b0: 2020 2020 2020 2020 2020 2020 6572 726f              erro
-0002e2c0: 7228 6622 496e 636f 7272 6563 7420 7061  r(f"Incorrect pa
-0002e2d0: 7468 207b 7061 7468 7d2e 4c65 6176 696e  th {path}.Leavin
-0002e2e0: 672e 2e2e 2229 0a20 2020 2020 2020 2020  g...").         
-0002e2f0: 2020 2020 2020 2020 2020 2073 7973 2e65             sys.e
-0002e300: 7869 7428 3129 0a20 2020 2020 2020 2020  xit(1).         
-0002e310: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0002e320: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0002e330: 7b27 7265 7375 6c74 273a 2027 6661 696c  {'result': 'fail
-0002e340: 7572 6527 2c20 2772 6561 736f 6e27 3a20  ure', 'reason': 
-0002e350: 2249 6e63 6f72 7265 6374 2066 696c 6520  "Incorrect file 
-0002e360: 656e 7472 7922 7d0a 2020 2020 2020 2020  entry"}.        
-0002e370: 2020 2020 6966 206f 7269 6769 6e20 6973      if origin is
-0002e380: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-0002e390: 2020 2020 2020 2020 2020 2069 6620 6f6e             if on
-0002e3a0: 666c 7920 6973 206e 6f74 204e 6f6e 6520  fly is not None 
-0002e3b0: 616e 6420 277e 2720 6e6f 7420 696e 206f  and '~' not in o
-0002e3c0: 7269 6769 6e3a 0a20 2020 2020 2020 2020  rigin:.         
-0002e3d0: 2020 2020 2020 2020 2020 2064 6573 7464             destd
-0002e3e0: 6972 203d 2062 6173 6564 6972 0a20 2020  ir = basedir.   
-0002e3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e400: 2069 6620 272f 2720 696e 206f 7269 6769   if '/' in origi
-0002e410: 6e3a 0a20 2020 2020 2020 2020 2020 2020  n:.             
-0002e420: 2020 2020 2020 2020 2020 2064 6573 7464             destd
-0002e430: 6972 203d 206f 732e 7061 7468 2e64 6972  ir = os.path.dir
-0002e440: 6e61 6d65 286f 7269 6769 6e29 0a20 2020  name(origin).   
-0002e450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e460: 2020 2020 206f 732e 6d61 6b65 6469 7273       os.makedirs
-0002e470: 2864 6573 7464 6972 2c20 6578 6973 745f  (destdir, exist_
-0002e480: 6f6b 3d54 7275 6529 0a20 2020 2020 2020  ok=True).       
-0002e490: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
-0002e4a0: 6d6f 6e2e 6665 7463 6828 6622 7b6f 6e66  mon.fetch(f"{onf
-0002e4b0: 6c79 7d2f 7b6f 7269 6769 6e7d 222c 2064  ly}/{origin}", d
-0002e4c0: 6573 7464 6972 290a 2020 2020 2020 2020  estdir).        
-0002e4d0: 2020 2020 2020 2020 6f72 6967 696e 203d          origin =
-0002e4e0: 206f 732e 7061 7468 2e65 7870 616e 6475   os.path.expandu
-0002e4f0: 7365 7228 6f72 6967 696e 290a 2020 2020  ser(origin).    
-0002e500: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-0002e510: 6f74 206f 732e 7061 7468 2e69 7361 6273  ot os.path.isabs
-0002e520: 286f 7269 6769 6e29 3a0a 2020 2020 2020  (origin):.      
-0002e530: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0002e540: 2069 7369 6e73 7461 6e63 6528 6669 6c2c   isinstance(fil,
-0002e550: 2064 6963 7429 2061 6e64 2066 696c 2e67   dict) and fil.g
-0002e560: 6574 2827 6375 7272 656e 7464 6972 272c  et('currentdir',
-0002e570: 2046 616c 7365 293a 0a20 2020 2020 2020   False):.       
-0002e580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e590: 206f 7269 6769 6e20 3d20 6622 7b6f 732e   origin = f"{os.
-0002e5a0: 6765 7463 7764 2829 7d2f 7b6f 7269 6769  getcwd()}/{origi
-0002e5b0: 6e7d 220a 2020 2020 2020 2020 2020 2020  n}".            
-0002e5c0: 2020 2020 2020 2020 2020 2020 6669 6c65              file
-0002e5d0: 735b 696e 6465 785d 5b27 6f72 6967 696e  s[index]['origin
-0002e5e0: 275d 203d 206f 7269 6769 6e0a 2020 2020  '] = origin.    
-0002e5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e600: 656c 6966 2062 6173 6564 6972 2021 3d20  elif basedir != 
-0002e610: 272e 2720 616e 6420 6e6f 7420 6f72 6967  '.' and not orig
-0002e620: 696e 2e73 7461 7274 7377 6974 6828 272e  in.startswith('.
-0002e630: 2f27 2920 616e 6420 6e6f 7420 6f72 6967  /') and not orig
-0002e640: 696e 2e73 7461 7274 7377 6974 6828 272f  in.startswith('/
-0002e650: 776f 726b 6469 722f 2729 3a0a 2020 2020  workdir/'):.    
-0002e660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e670: 2020 2020 6f72 6967 696e 203d 2066 227b      origin = f"{
-0002e680: 6261 7365 6469 727d 2f7b 6f72 6967 696e  basedir}/{origin
-0002e690: 7d22 0a20 2020 2020 2020 2020 2020 2020  }".             
-0002e6a0: 2020 2020 2020 2020 2020 2066 696c 6573             files
-0002e6b0: 5b69 6e64 6578 5d5b 276f 7269 6769 6e27  [index]['origin'
-0002e6c0: 5d20 3d20 6f72 6967 696e 0a20 2020 2020  ] = origin.     
-0002e6d0: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-0002e6e0: 7420 6f73 2e70 6174 682e 6578 6973 7473  t os.path.exists
-0002e6f0: 286f 7269 6769 6e29 3a0a 2020 2020 2020  (origin):.      
-0002e700: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0002e710: 7475 726e 207b 2772 6573 756c 7427 3a20  turn {'result': 
-0002e720: 2766 6169 6c75 7265 272c 2027 7265 6173  'failure', 'reas
-0002e730: 6f6e 273a 2066 224f 7269 6769 6e20 6669  on': f"Origin fi
-0002e740: 6c65 207b 6f72 6967 696e 7d20 6e6f 7420  le {origin} not 
-0002e750: 666f 756e 6420 666f 7220 7b6e 616d 657d  found for {name}
-0002e760: 227d 0a20 2020 2020 2020 2020 2020 2065  "}.            e
-0002e770: 6c69 6620 636f 6e74 656e 7420 6973 204e  lif content is N
-0002e780: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-0002e790: 2020 2020 2072 6574 7572 6e20 7b27 7265       return {'re
-0002e7a0: 7375 6c74 273a 2027 6661 696c 7572 6527  sult': 'failure'
-0002e7b0: 2c20 2772 6561 736f 6e27 3a20 6622 436f  , 'reason': f"Co
-0002e7c0: 6e74 656e 7420 6f66 2066 696c 6520 7b70  ntent of file {p
-0002e7d0: 6174 687d 206e 6f74 2066 6f75 6e64 2066  ath} not found f
-0002e7e0: 6f72 207b 6e61 6d65 7d22 7d0a 0a20 2020  or {name}"}..   
-0002e7f0: 2064 6566 2070 7265 7065 6e64 5f69 6e70   def prepend_inp
-0002e800: 7574 5f64 6972 2873 656c 662c 206e 6577  ut_dir(self, new
-0002e810: 6669 6c65 732c 2069 6e70 7574 6469 7229  files, inputdir)
-0002e820: 3a0a 2020 2020 2020 2020 7265 7375 6c74  :.        result
-0002e830: 7320 3d20 5b5d 0a20 2020 2020 2020 2066  s = [].        f
-0002e840: 6f72 2066 6963 2069 6e20 6e65 7766 696c  or fic in newfil
-0002e850: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
-0002e860: 6966 2069 7369 6e73 7461 6e63 6528 6669  if isinstance(fi
-0002e870: 632c 2073 7472 2920 616e 6420 6e6f 7420  c, str) and not 
-0002e880: 6f73 2e70 6174 682e 6973 6162 7328 6669  os.path.isabs(fi
-0002e890: 6329 3a0a 2020 2020 2020 2020 2020 2020  c):.            
-0002e8a0: 2020 2020 6e65 775f 6669 6320 3d20 6622      new_fic = f"
-0002e8b0: 7b69 6e70 7574 6469 727d 2f7b 6669 637d  {inputdir}/{fic}
-0002e8c0: 220a 2020 2020 2020 2020 2020 2020 656c  ".            el
-0002e8d0: 6966 2069 7369 6e73 7461 6e63 6528 6669  if isinstance(fi
-0002e8e0: 632c 2064 6963 7429 2061 6e64 2027 6f72  c, dict) and 'or
-0002e8f0: 6967 696e 2720 696e 2066 6963 2061 6e64  igin' in fic and
-0002e900: 206e 6f74 206f 732e 7061 7468 2e69 7361   not os.path.isa
-0002e910: 6273 286f 732e 7061 7468 2e65 7870 616e  bs(os.path.expan
-0002e920: 6475 7365 7228 6669 635b 276f 7269 6769  duser(fic['origi
-0002e930: 6e27 5d29 293a 0a20 2020 2020 2020 2020  n'])):.         
-0002e940: 2020 2020 2020 206e 6577 5f66 6963 203d         new_fic =
-0002e950: 2066 6963 2e63 6f70 7928 290a 2020 2020   fic.copy().    
-0002e960: 2020 2020 2020 2020 2020 2020 6e65 775f              new_
-0002e970: 6669 635b 276f 7269 6769 6e27 5d20 3d20  fic['origin'] = 
-0002e980: 6622 7b69 6e70 7574 6469 727d 2f7b 6669  f"{inputdir}/{fi
-0002e990: 635b 276f 7269 6769 6e27 5d7d 220a 2020  c['origin']}".  
-0002e9a0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-0002e9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e9c0: 6e65 775f 6669 6320 3d20 6669 630a 2020  new_fic = fic.  
-0002e9d0: 2020 2020 2020 2020 2020 7265 7375 6c74            result
-0002e9e0: 732e 6170 7065 6e64 286e 6577 5f66 6963  s.append(new_fic
-0002e9f0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-0002ea00: 2072 6573 756c 7473 0a0a 2020 2020 6465   results..    de
-0002ea10: 6620 7265 6d65 6469 6174 655f 6669 6c65  f remediate_file
-0002ea20: 7328 7365 6c66 2c20 6e61 6d65 2c20 6e65  s(self, name, ne
-0002ea30: 7766 696c 6573 2c20 6f76 6572 7269 6465  wfiles, override
-0002ea40: 733d 7b7d 2c20 696e 7075 7464 6972 3d27  s={}, inputdir='
-0002ea50: 2e27 293a 0a20 2020 2020 2020 2075 7064  .'):.        upd
-0002ea60: 6174 6564 5f66 696c 6573 203d 205b 5d0a  ated_files = [].
-0002ea70: 2020 2020 2020 2020 6970 2c20 766d 706f          ip, vmpo
-0002ea80: 7274 203d 205f 7373 685f 6372 6564 656e  rt = _ssh_creden
-0002ea90: 7469 616c 7328 7365 6c66 2e6b 2c20 6e61  tials(self.k, na
-0002eaa0: 6d65 295b 313a 5d0a 2020 2020 2020 2020  me)[1:].        
-0002eab0: 6966 2069 6e70 7574 6469 7220 213d 2027  if inputdir != '
-0002eac0: 2e27 3a0a 2020 2020 2020 2020 2020 2020  .':.            
-0002ead0: 6e65 7766 696c 6573 203d 2073 656c 662e  newfiles = self.
-0002eae0: 7072 6570 656e 645f 696e 7075 745f 6469  prepend_input_di
-0002eaf0: 7228 6e65 7766 696c 6573 2c20 696e 7075  r(newfiles, inpu
-0002eb00: 7464 6972 290a 2020 2020 2020 2020 7365  tdir).        se
-0002eb10: 6c66 2e70 6172 7365 5f66 696c 6573 286e  lf.parse_files(n
-0002eb20: 616d 652c 206e 6577 6669 6c65 7329 0a20  ame, newfiles). 
-0002eb30: 2020 2020 2020 206f 7665 7272 6964 6573         overrides
-0002eb40: 5f66 696c 6573 203d 206f 7665 7272 6964  _files = overrid
-0002eb50: 6573 2e63 6f70 7928 290a 2020 2020 2020  es.copy().      
-0002eb60: 2020 6f76 6572 7269 6465 735f 6669 6c65    overrides_file
-0002eb70: 735b 276e 616d 6527 5d20 3d20 6e61 6d65  s['name'] = name
-0002eb80: 0a20 2020 2020 2020 2064 6174 6120 3d20  .        data = 
-0002eb90: 7072 6f63 6573 735f 6669 6c65 7328 6669  process_files(fi
-0002eba0: 6c65 733d 6e65 7766 696c 6573 2c20 6f76  les=newfiles, ov
-0002ebb0: 6572 7269 6465 733d 6f76 6572 7269 6465  errides=override
-0002ebc0: 735f 6669 6c65 732c 2072 656d 6564 6961  s_files, remedia
-0002ebd0: 7465 3d54 7275 6529 0a20 2020 2020 2020  te=True).       
-0002ebe0: 2064 6174 6164 6972 7320 3d20 7b7d 0a20   datadirs = {}. 
-0002ebf0: 2020 2020 2020 2077 6974 6820 5465 6d70         with Temp
-0002ec00: 6f72 6172 7944 6972 6563 746f 7279 2829  oraryDirectory()
-0002ec10: 2061 7320 746d 7064 6972 3a0a 2020 2020   as tmpdir:.    
-0002ec20: 2020 2020 2020 2020 666f 7220 696e 6465          for inde
-0002ec30: 782c 2065 6e74 7279 2069 6e20 656e 756d  x, entry in enum
-0002ec40: 6572 6174 6528 6461 7461 293a 0a20 2020  erate(data):.   
-0002ec50: 2020 2020 2020 2020 2020 2020 2064 6573               des
-0002ec60: 7469 6e61 7469 6f6e 203d 2065 6e74 7279  tination = entry
-0002ec70: 5b27 7061 7468 275d 0a20 2020 2020 2020  ['path'].       
-0002ec80: 2020 2020 2020 2020 2070 6174 6864 6972           pathdir
-0002ec90: 203d 206f 732e 7061 7468 2e64 6972 6e61   = os.path.dirna
-0002eca0: 6d65 2864 6573 7469 6e61 7469 6f6e 290a  me(destination).
-0002ecb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ecc0: 6966 2070 6174 6864 6972 206e 6f74 2069  if pathdir not i
-0002ecd0: 6e20 6461 7461 6469 7273 3a0a 2020 2020  n datadirs:.    
-0002ece0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ecf0: 7061 7468 6469 7263 6d64 203d 2066 276c  pathdircmd = f'l
-0002ed00: 7320 2d61 207b 7061 7468 6469 727d 2032  s -a {pathdir} 2
-0002ed10: 3e26 3127 0a20 2020 2020 2020 2020 2020  >&1'.           
-0002ed20: 2020 2020 2020 2020 2070 6174 6864 6972           pathdir
-0002ed30: 636d 6420 3d20 7373 6828 6e61 6d65 2c20  cmd = ssh(name, 
-0002ed40: 6970 3d69 702c 2075 7365 723d 2772 6f6f  ip=ip, user='roo
-0002ed50: 7427 2c20 7475 6e6e 656c 3d73 656c 662e  t', tunnel=self.
-0002ed60: 7475 6e6e 656c 2c20 7475 6e6e 656c 686f  tunnel, tunnelho
-0002ed70: 7374 3d73 656c 662e 7475 6e6e 656c 686f  st=self.tunnelho
-0002ed80: 7374 2c0a 2020 2020 2020 2020 2020 2020  st,.            
-0002ed90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002eda0: 2020 2020 2020 2020 2074 756e 6e65 6c70           tunnelp
-0002edb0: 6f72 743d 7365 6c66 2e74 756e 6e65 6c70  ort=self.tunnelp
-0002edc0: 6f72 742c 2074 756e 6e65 6c75 7365 723d  ort, tunneluser=
-0002edd0: 7365 6c66 2e74 756e 6e65 6c75 7365 722c  self.tunneluser,
-0002ede0: 2069 6e73 6563 7572 653d 5472 7565 2c0a   insecure=True,.
-0002edf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ee00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ee10: 2020 2020 2063 6d64 3d70 6174 6864 6972       cmd=pathdir
-0002ee20: 636d 642c 2076 6d70 6f72 743d 766d 706f  cmd, vmport=vmpo
-0002ee30: 7274 290a 2020 2020 2020 2020 2020 2020  rt).            
-0002ee40: 2020 2020 2020 2020 7061 7468 6469 7266          pathdirf
-0002ee50: 696c 6573 203d 206f 732e 706f 7065 6e28  iles = os.popen(
-0002ee60: 7061 7468 6469 7263 6d64 292e 7265 6164  pathdircmd).read
-0002ee70: 6c69 6e65 7328 290a 2020 2020 2020 2020  lines().        
-0002ee80: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-0002ee90: 656e 2870 6174 6864 6972 6669 6c65 7329  en(pathdirfiles)
-0002eea0: 203d 3d20 3120 616e 6420 274e 6f20 7375   == 1 and 'No su
-0002eeb0: 6368 2066 696c 6520 6f72 2064 6972 6563  ch file or direc
-0002eec0: 746f 7279 2720 696e 2070 6174 6864 6972  tory' in pathdir
-0002eed0: 6669 6c65 735b 305d 3a0a 2020 2020 2020  files[0]:.      
-0002eee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002eef0: 2020 6372 6561 7465 6469 7263 6d64 203d    createdircmd =
-0002ef00: 2066 276d 6b64 6972 202d 7020 7b70 6174   f'mkdir -p {pat
-0002ef10: 6864 6972 7d27 0a20 2020 2020 2020 2020  hdir}'.         
-0002ef20: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0002ef30: 7265 6174 6564 6972 636d 6420 3d20 7373  reatedircmd = ss
-0002ef40: 6828 6e61 6d65 2c20 6970 3d69 702c 2075  h(name, ip=ip, u
-0002ef50: 7365 723d 2772 6f6f 7427 2c20 7475 6e6e  ser='root', tunn
-0002ef60: 656c 3d73 656c 662e 7475 6e6e 656c 2c20  el=self.tunnel, 
-0002ef70: 7475 6e6e 656c 686f 7374 3d73 656c 662e  tunnelhost=self.
-0002ef80: 7475 6e6e 656c 686f 7374 2c0a 2020 2020  tunnelhost,.    
-0002ef90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002efa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002efb0: 2020 2020 2020 2074 756e 6e65 6c70 6f72         tunnelpor
-0002efc0: 743d 7365 6c66 2e74 756e 6e65 6c70 6f72  t=self.tunnelpor
-0002efd0: 742c 2074 756e 6e65 6c75 7365 723d 7365  t, tunneluser=se
-0002efe0: 6c66 2e74 756e 6e65 6c75 7365 722c 2069  lf.tunneluser, i
-0002eff0: 6e73 6563 7572 653d 5472 7565 2c0a 2020  nsecure=True,.  
-0002f000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f020: 2020 2020 2020 2020 2063 6d64 3d63 7265           cmd=cre
-0002f030: 6174 6564 6972 636d 642c 2076 6d70 6f72  atedircmd, vmpor
-0002f040: 743d 766d 706f 7274 290a 2020 2020 2020  t=vmport).      
-0002f050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f060: 2020 6f73 2e70 6f70 656e 2863 7265 6174    os.popen(creat
-0002f070: 6564 6972 636d 6429 0a20 2020 2020 2020  edircmd).       
-0002f080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f090: 2070 6174 6864 6972 6669 6c65 7320 3d20   pathdirfiles = 
-0002f0a0: 5b5d 0a20 2020 2020 2020 2020 2020 2020  [].             
-0002f0b0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0002f0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f0d0: 2020 2020 2070 6174 6864 6972 6669 6c65       pathdirfile
-0002f0e0: 7320 3d20 5b78 2e73 7472 6970 2829 2066  s = [x.strip() f
-0002f0f0: 6f72 2078 2069 6e20 7061 7468 6469 7266  or x in pathdirf
-0002f100: 696c 6573 5d0a 2020 2020 2020 2020 2020  iles].          
-0002f110: 2020 2020 2020 2020 2020 6461 7461 6469            datadi
-0002f120: 7273 5b70 6174 6864 6972 5d20 3d20 7061  rs[pathdir] = pa
-0002f130: 7468 6469 7266 696c 6573 0a20 2020 2020  thdirfiles.     
-0002f140: 2020 2020 2020 2020 2020 2069 6620 6f73             if os
-0002f150: 2e70 6174 682e 6261 7365 6e61 6d65 2864  .path.basename(d
-0002f160: 6573 7469 6e61 7469 6f6e 2920 6e6f 7420  estination) not 
-0002f170: 696e 2064 6174 6164 6972 735b 7061 7468  in datadirs[path
-0002f180: 6469 725d 3a0a 2020 2020 2020 2020 2020  dir]:.          
-0002f190: 2020 2020 2020 2020 2020 7070 7269 6e74            pprint
-0002f1a0: 2866 2255 7064 6174 696e 6720 7b64 6573  (f"Updating {des
-0002f1b0: 7469 6e61 7469 6f6e 7d20 696e 207b 6e61  tination} in {na
-0002f1c0: 6d65 7d22 290a 2020 2020 2020 2020 2020  me}").          
-0002f1d0: 2020 2020 2020 2020 2020 736f 7572 6365            source
-0002f1e0: 203d 2066 227b 746d 7064 6972 7d2f 6669   = f"{tmpdir}/fi
-0002f1f0: 637b 696e 6465 787d 220a 2020 2020 2020  c{index}".      
-0002f200: 2020 2020 2020 2020 2020 2020 2020 7769                wi
-0002f210: 7468 206f 7065 6e28 736f 7572 6365 2c20  th open(source, 
-0002f220: 2777 2729 2061 7320 663a 0a20 2020 2020  'w') as f:.     
-0002f230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f240: 2020 2066 2e77 7269 7465 2865 6e74 7279     f.write(entry
-0002f250: 5b27 636f 6e74 656e 7427 5d29 0a20 2020  ['content']).   
-0002f260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f270: 2073 6370 636d 6420 3d20 7363 7028 6e61   scpcmd = scp(na
-0002f280: 6d65 2c20 6970 3d69 702c 2075 7365 723d  me, ip=ip, user=
-0002f290: 2772 6f6f 7427 2c20 736f 7572 6365 3d73  'root', source=s
-0002f2a0: 6f75 7263 652c 2064 6573 7469 6e61 7469  ource, destinati
-0002f2b0: 6f6e 3d64 6573 7469 6e61 7469 6f6e 2c20  on=destination, 
-0002f2c0: 7475 6e6e 656c 3d73 656c 662e 7475 6e6e  tunnel=self.tunn
-0002f2d0: 656c 2c0a 2020 2020 2020 2020 2020 2020  el,.            
-0002f2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f2f0: 2020 2020 2074 756e 6e65 6c68 6f73 743d       tunnelhost=
-0002f300: 7365 6c66 2e74 756e 6e65 6c68 6f73 742c  self.tunnelhost,
-0002f310: 2074 756e 6e65 6c70 6f72 743d 7365 6c66   tunnelport=self
-0002f320: 2e74 756e 6e65 6c70 6f72 742c 2074 756e  .tunnelport, tun
-0002f330: 6e65 6c75 7365 723d 7365 6c66 2e74 756e  neluser=self.tun
-0002f340: 6e65 6c75 7365 722c 0a20 2020 2020 2020  neluser,.       
-0002f350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f360: 2020 2020 2020 2020 2020 646f 776e 6c6f            downlo
-0002f370: 6164 3d46 616c 7365 2c20 696e 7365 6375  ad=False, insecu
-0002f380: 7265 3d54 7275 652c 2076 6d70 6f72 743d  re=True, vmport=
-0002f390: 766d 706f 7274 290a 2020 2020 2020 2020  vmport).        
-0002f3a0: 2020 2020 2020 2020 2020 2020 6f73 2e73              os.s
-0002f3b0: 7973 7465 6d28 7363 7063 6d64 290a 2020  ystem(scpcmd).  
-0002f3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f3d0: 2020 7570 6461 7465 645f 6669 6c65 732e    updated_files.
-0002f3e0: 6170 7065 6e64 2864 6573 7469 6e61 7469  append(destinati
-0002f3f0: 6f6e 290a 2020 2020 2020 2020 7265 7475  on).        retu
-0002f400: 726e 2075 7064 6174 6564 5f66 696c 6573  rn updated_files
-0002f410: 0a0a 2020 2020 6465 6620 696e 666f 5f73  ..    def info_s
-0002f420: 7065 6369 6669 635f 706c 616e 2873 656c  pecific_plan(sel
-0002f430: 662c 2070 6c61 6e29 3a0a 2020 2020 2020  f, plan):.      
-0002f440: 2020 7070 7269 6e74 2866 2250 726f 7669    pprint(f"Provi
-0002f450: 6469 6e67 2069 6e66 6f72 6d61 7469 6f6e  ding information
-0002f460: 2061 626f 7574 2070 6c61 6e20 7b70 6c61   about plan {pla
-0002f470: 6e7d 2229 0a20 2020 2020 2020 206b 203d  n}").        k =
-0002f480: 2073 656c 662e 6b0a 2020 2020 2020 2020   self.k.        
-0002f490: 7265 7375 6c74 7320 3d20 5b5d 0a20 2020  results = [].   
-0002f4a0: 2020 2020 2066 6f72 2076 6d20 696e 206b       for vm in k
-0002f4b0: 2e6c 6973 7428 293a 0a20 2020 2020 2020  .list():.       
-0002f4c0: 2020 2020 2069 6620 766d 2e67 6574 2827       if vm.get('
-0002f4d0: 706c 616e 272c 2027 2729 203d 3d20 706c  plan', '') == pl
-0002f4e0: 616e 3a0a 2020 2020 2020 2020 2020 2020  an:.            
-0002f4f0: 2020 2020 7265 7375 6c74 732e 6170 7065      results.appe
-0002f500: 6e64 2876 6d29 0a20 2020 2020 2020 2072  nd(vm).        r
-0002f510: 6574 7572 6e20 7265 7375 6c74 730a 0a20  eturn results.. 
-0002f520: 2020 2064 6566 2061 7574 6f73 6361 6c65     def autoscale
-0002f530: 5f63 6c75 7374 6572 2873 656c 662c 206b  _cluster(self, k
-0002f540: 7562 652c 206b 7562 6574 7970 652c 2077  ube, kubetype, w
-0002f550: 6f72 6b65 7273 2c20 7468 7265 7368 6f6c  orkers, threshol
-0002f560: 642c 2069 646c 6529 3a0a 2020 2020 2020  d, idle):.      
-0002f570: 2020 6966 2074 6872 6573 686f 6c64 203e    if threshold >
-0002f580: 2039 3939 393a 0a20 2020 2020 2020 2020   9999:.         
-0002f590: 2020 2070 7072 696e 7428 6622 536b 6970     pprint(f"Skip
-0002f5a0: 7069 6e67 2061 7574 6f73 6361 6c69 6e67  ping autoscaling
-0002f5b0: 2075 7020 6368 6563 6b73 2066 6f72 2063   up checks for c
-0002f5c0: 6c75 7374 6572 207b 6b75 6265 7d20 6173  luster {kube} as
-0002f5d0: 2070 6572 2074 6872 6573 686f 6c64 207b   per threshold {
-0002f5e0: 7468 7265 7368 6f6c 647d 2229 0a20 2020  threshold}").   
-0002f5f0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0002f600: 7b27 7265 7375 6c74 273a 2027 7375 6363  {'result': 'succ
-0002f610: 6573 7327 2c20 2777 6f72 6b65 7273 273a  ess', 'workers':
-0002f620: 2077 6f72 6b65 7273 7d0a 2020 2020 2020   workers}.      
-0002f630: 2020 6966 2069 646c 6520 3c20 313a 0a20    if idle < 1:. 
-0002f640: 2020 2020 2020 2020 2020 2070 7072 696e             pprin
-0002f650: 7428 6622 536b 6970 7069 6e67 2061 7574  t(f"Skipping aut
-0002f660: 6f73 6361 6c69 6e67 2064 6f77 6e20 6368  oscaling down ch
-0002f670: 6563 6b73 2066 6f72 2063 6c75 7374 6572  ecks for cluster
-0002f680: 207b 6b75 6265 7d20 6173 2070 6572 2069   {kube} as per i
-0002f690: 646c 6520 7b69 646c 657d 2229 0a20 2020  dle {idle}").   
-0002f6a0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0002f6b0: 7b27 7265 7375 6c74 273a 2027 7375 6363  {'result': 'succ
-0002f6c0: 6573 7327 2c20 2777 6f72 6b65 7273 273a  ess', 'workers':
-0002f6d0: 2077 6f72 6b65 7273 7d0a 2020 2020 2020   workers}.      
-0002f6e0: 2020 7070 7269 6e74 2866 2243 6865 636b    pprint(f"Check
-0002f6f0: 696e 6720 6e6f 6e20 7363 6865 6475 6c65  ing non schedule
-0002f700: 6420 706f 6473 2063 6f75 6e74 206f 6e20  d pods count on 
-0002f710: 636c 7573 7465 7220 7b6b 7562 657d 2229  cluster {kube}")
-0002f720: 0a20 2020 2020 2020 2073 656c 6563 746f  .        selecto
-0002f730: 7220 3d20 2221 6e6f 6465 2d72 6f6c 652e  r = "!node-role.
-0002f740: 6b75 6265 726e 6574 6573 2e69 6f2f 636f  kubernetes.io/co
-0002f750: 6e74 726f 6c2d 706c 616e 652c 6e6f 6465  ntrol-plane,node
-0002f760: 2d72 6f6c 652e 6b75 6265 726e 6574 6573  -role.kubernetes
-0002f770: 2e69 6f2f 776f 726b 6572 220a 2020 2020  .io/worker".    
-0002f780: 2020 2020 6375 7272 656e 7463 6d64 203d      currentcmd =
-0002f790: 2066 226b 7562 6563 746c 2067 6574 206e   f"kubectl get n
-0002f7a0: 6f64 6520 2d2d 7365 6c65 6374 6f72 3d27  ode --selector='
-0002f7b0: 7b73 656c 6563 746f 727d 2722 0a20 2020  {selector}'".   
-0002f7c0: 2020 2020 2063 7572 7265 6e74 636d 6420       currentcmd 
-0002f7d0: 2b3d 2022 207c 2067 7265 7020 2720 5265  += " | grep ' Re
-0002f7e0: 6164 7927 220a 2020 2020 2020 2020 776f  ady'".        wo
-0002f7f0: 726b 6572 7320 3d20 6c65 6e28 6f73 2e70  rkers = len(os.p
-0002f800: 6f70 656e 2863 7572 7265 6e74 636d 6429  open(currentcmd)
-0002f810: 2e72 6561 646c 696e 6573 2829 290a 2020  .readlines()).  
-0002f820: 2020 2020 2020 7065 6e64 696e 6763 6d64        pendingcmd
-0002f830: 203d 2022 6b75 6265 6374 6c20 6765 7420   = "kubectl get 
-0002f840: 706f 6473 202d 4120 2d2d 6669 656c 642d  pods -A --field-
-0002f850: 7365 6c65 6374 6f72 3d73 7461 7475 732e  selector=status.
-0002f860: 7068 6173 653d 5065 6e64 696e 6720 2d6f  phase=Pending -o
-0002f870: 2079 616d 6c22 0a20 2020 2020 2020 2070   yaml".        p
-0002f880: 656e 6469 6e67 5f70 6f64 7320 3d20 7961  ending_pods = ya
-0002f890: 6d6c 2e73 6166 655f 6c6f 6164 286f 732e  ml.safe_load(os.
-0002f8a0: 706f 7065 6e28 7065 6e64 696e 6763 6d64  popen(pendingcmd
-0002f8b0: 292e 7265 6164 2829 295b 2769 7465 6d73  ).read())['items
-0002f8c0: 275d 0a20 2020 2020 2020 2069 6620 6c65  '].        if le
-0002f8d0: 6e28 7065 6e64 696e 675f 706f 6473 2920  n(pending_pods) 
-0002f8e0: 3e20 7468 7265 7368 6f6c 643a 0a20 2020  > threshold:.   
-0002f8f0: 2020 2020 2020 2020 2070 7072 696e 7428           pprint(
-0002f900: 6622 5472 6967 6765 7269 6e67 2073 6361  f"Triggering sca
-0002f910: 6c69 6e67 2075 7020 666f 7220 636c 7573  ling up for clus
-0002f920: 7465 7220 7b6b 7562 657d 2061 7320 7468  ter {kube} as th
-0002f930: 6572 6520 6172 6520 7b6c 656e 2870 656e  ere are {len(pen
-0002f940: 6469 6e67 5f70 6f64 7329 7d20 7065 6e64  ding_pods)} pend
-0002f950: 696e 6720 706f 6473 2229 0a20 2020 2020  ing pods").     
-0002f960: 2020 2020 2020 2077 6f72 6b65 7273 202b         workers +
-0002f970: 3d20 310a 2020 2020 2020 2020 2020 2020  = 1.            
-0002f980: 7070 7269 6e74 2822 5363 616c 696e 6720  pprint("Scaling 
-0002f990: 7570 2063 6c75 7374 6572 207b 6b75 6265  up cluster {kube
-0002f9a0: 7d20 746f 207b 776f 726b 6572 737d 2077  } to {workers} w
-0002f9b0: 6f72 6b65 7273 2229 0a20 2020 2020 2020  orkers").       
-0002f9c0: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
-0002f9d0: 6c66 2e73 6361 6c65 5f6b 7562 6528 6b75  lf.scale_kube(ku
-0002f9e0: 6265 2c20 6b75 6265 7479 7065 2c20 6f76  be, kubetype, ov
-0002f9f0: 6572 7269 6465 733d 7b27 776f 726b 6572  errides={'worker
-0002fa00: 7327 3a20 776f 726b 6572 737d 290a 2020  s': workers}).  
-0002fa10: 2020 2020 2020 2020 2020 7265 7375 6c74            result
-0002fa20: 5b27 776f 726b 6572 7327 5d20 3d20 776f  ['workers'] = wo
-0002fa30: 726b 6572 730a 2020 2020 2020 2020 2020  rkers.          
-0002fa40: 2020 7265 7475 726e 2072 6573 756c 740a    return result.
-0002fa50: 2020 2020 2020 2020 6e6f 6465 7320 3d20          nodes = 
-0002fa60: 7b7d 0a20 2020 2020 2020 2063 7572 7265  {}.        curre
-0002fa70: 6e74 636d 6420 3d20 226b 7562 6563 746c  ntcmd = "kubectl
-0002fa80: 2067 6574 2070 6f64 202d 4120 2d6f 2079   get pod -A -o y
-0002fa90: 616d 6c22 0a20 2020 2020 2020 2061 6c6c  aml".        all
-0002faa0: 706f 6473 203d 2079 616d 6c2e 7361 6665  pods = yaml.safe
-0002fab0: 5f6c 6f61 6428 6f73 2e70 6f70 656e 2863  _load(os.popen(c
-0002fac0: 7572 7265 6e74 636d 6429 2e72 6561 6428  urrentcmd).read(
-0002fad0: 2929 5b27 6974 656d 7327 5d0a 2020 2020  ))['items'].    
-0002fae0: 2020 2020 666f 7220 706f 6420 696e 2061      for pod in a
-0002faf0: 6c6c 706f 6473 3a0a 2020 2020 2020 2020  llpods:.        
-0002fb00: 2020 2020 6e6f 6465 6e61 6d65 203d 2070      nodename = p
-0002fb10: 6f64 5b27 7370 6563 275d 5b27 6e6f 6465  od['spec']['node
-0002fb20: 4e61 6d65 275d 0a20 2020 2020 2020 2020  Name'].         
-0002fb30: 2020 2073 7461 7475 7320 3d20 706f 645b     status = pod[
-0002fb40: 2773 7461 7475 7327 5d5b 2770 6861 7365  'status']['phase
-0002fb50: 275d 0a20 2020 2020 2020 2020 2020 2069  '].            i
-0002fb60: 6620 7374 6174 7573 2021 3d20 2752 756e  f status != 'Run
-0002fb70: 6e69 6e67 273a 0a20 2020 2020 2020 2020  ning':.         
-0002fb80: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
-0002fb90: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-0002fba0: 6f64 656e 616d 6520 6e6f 7420 696e 206e  odename not in n
-0002fbb0: 6f64 6573 3a0a 2020 2020 2020 2020 2020  odes:.          
-0002fbc0: 2020 2020 2020 6e6f 6465 735b 6e6f 6465        nodes[node
-0002fbd0: 6e61 6d65 5d20 3d20 310a 2020 2020 2020  name] = 1.      
-0002fbe0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0002fbf0: 2020 2020 2020 2020 2020 2020 6e6f 6465              node
-0002fc00: 735b 6e6f 6465 6e61 6d65 5d20 2b3d 2031  s[nodename] += 1
-0002fc10: 0a20 2020 2020 2020 2074 6f64 656c 6574  .        todelet
-0002fc20: 6520 3d20 300a 2020 2020 2020 2020 666f  e = 0.        fo
-0002fc30: 7220 6e6f 6465 2069 6e20 6e6f 6465 733a  r node in nodes:
-0002fc40: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0002fc50: 6e6f 6465 735b 6e6f 6465 5d20 3c20 6964  nodes[node] < id
-0002fc60: 6c65 3a0a 2020 2020 2020 2020 2020 2020  le:.            
-0002fc70: 2020 2020 7070 7269 6e74 2866 226e 6f64      pprint(f"nod
-0002fc80: 6520 7b6e 6f64 657d 2074 6f20 6265 2072  e {node} to be r
-0002fc90: 656d 6f76 6564 2073 696e 6365 2069 7420  emoved since it 
-0002fca0: 6f6e 6c79 2068 6173 2074 6865 2066 6f6c  only has the fol
-0002fcb0: 6c6f 7769 6e67 2070 6f64 733a 207b 6e6f  lowing pods: {no
-0002fcc0: 6465 735b 6e6f 6465 5d7d 2229 0a20 2020  des[node]}").   
-0002fcd0: 2020 2020 2020 2020 2020 2020 2074 6f64               tod
-0002fce0: 656c 6574 6520 2b3d 2031 0a20 2020 2020  elete += 1.     
-0002fcf0: 2020 2069 6620 746f 6465 6c65 7465 203e     if todelete >
-0002fd00: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
-0002fd10: 7070 7269 6e74 2866 2254 7269 6767 6572  pprint(f"Trigger
-0002fd20: 696e 6720 7363 616c 696e 6720 646f 776e  ing scaling down
-0002fd30: 2066 6f72 2063 6c75 7374 6572 207b 6b75   for cluster {ku
-0002fd40: 6265 7d20 6173 2074 6865 7265 2061 7265  be} as there are
-0002fd50: 207b 746f 6465 6c65 7465 7d20 6964 6c65   {todelete} idle
-0002fd60: 206e 6f64 6573 2229 0a20 2020 2020 2020   nodes").       
-0002fd70: 2020 2020 2077 6f72 6b65 7273 203d 2077       workers = w
-0002fd80: 6f72 6b65 7273 202d 2074 6f64 656c 6574  orkers - todelet
-0002fd90: 650a 2020 2020 2020 2020 2020 2020 7070  e.            pp
-0002fda0: 7269 6e74 2866 2253 6361 6c69 6e67 2064  rint(f"Scaling d
-0002fdb0: 6f77 6e20 636c 7573 7465 7220 7b6b 7562  own cluster {kub
-0002fdc0: 657d 2074 6f20 7b77 6f72 6b65 7273 7d20  e} to {workers} 
-0002fdd0: 776f 726b 6572 7322 290a 2020 2020 2020  workers").      
-0002fde0: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
-0002fdf0: 656c 662e 7363 616c 655f 6b75 6265 286b  elf.scale_kube(k
-0002fe00: 7562 652c 206b 7562 6574 7970 652c 206f  ube, kubetype, o
-0002fe10: 7665 7272 6964 6573 3d7b 2777 6f72 6b65  verrides={'worke
-0002fe20: 7273 273a 2077 6f72 6b65 7273 7d29 0a20  rs': workers}). 
-0002fe30: 2020 2020 2020 2020 2020 2072 6573 756c             resul
-0002fe40: 745b 2777 6f72 6b65 7273 275d 203d 2077  t['workers'] = w
-0002fe50: 6f72 6b65 7273 0a20 2020 2020 2020 2020  orkers.         
-0002fe60: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
-0002fe70: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0002fe80: 7b27 7265 7375 6c74 273a 2027 7375 6363  {'result': 'succ
-0002fe90: 6573 7327 2c20 2777 6f72 6b65 7273 273a  ess', 'workers':
-0002fea0: 2077 6f72 6b65 7273 7d0a 0a20 2020 2064   workers}..    d
-0002feb0: 6566 206c 6f6f 705f 6175 746f 7363 616c  ef loop_autoscal
-0002fec0: 655f 636c 7573 7465 7228 7365 6c66 2c20  e_cluster(self, 
-0002fed0: 6b75 6265 2c20 6b75 6265 7479 7065 2c20  kube, kubetype, 
-0002fee0: 776f 726b 6572 732c 2074 6872 6573 686f  workers, thresho
-0002fef0: 6c64 2c20 6964 6c65 293a 0a20 2020 2020  ld, idle):.     
-0002ff00: 2020 2070 7072 696e 7428 6622 5374 6172     pprint(f"Star
-0002ff10: 7469 6e67 2077 6974 6820 7b77 6f72 6b65  ting with {worke
-0002ff20: 7273 7d20 776f 726b 6572 7322 290a 2020  rs} workers").  
-0002ff30: 2020 2020 2020 6966 2077 6869 6368 2827        if which('
-0002ff40: 6b75 6265 6374 6c27 2920 6973 204e 6f6e  kubectl') is Non
-0002ff50: 653a 0a20 2020 2020 2020 2020 2020 2063  e:.            c
-0002ff60: 6f6d 6d6f 6e2e 6765 745f 6b75 6265 6374  ommon.get_kubect
-0002ff70: 6c28 290a 2020 2020 2020 2020 2020 2020  l().            
-0002ff80: 6f73 2e65 6e76 6972 6f6e 5b27 5041 5448  os.environ['PATH
-0002ff90: 275d 202b 3d20 273a 2e27 0a20 2020 2020  '] += ':.'.     
-0002ffa0: 2020 2077 6869 6c65 2054 7275 653a 0a20     while True:. 
-0002ffb0: 2020 2020 2020 2020 2020 2073 656c 6563             selec
-0002ffc0: 746f 7220 3d20 2221 6e6f 6465 2d72 6f6c  tor = "!node-rol
-0002ffd0: 652e 6b75 6265 726e 6574 6573 2e69 6f2f  e.kubernetes.io/
-0002ffe0: 636f 6e74 726f 6c2d 706c 616e 652c 6e6f  control-plane,no
-0002fff0: 6465 2d72 6f6c 652e 6b75 6265 726e 6574  de-role.kubernet
-00030000: 6573 2e69 6f2f 776f 726b 6572 220a 2020  es.io/worker".  
-00030010: 2020 2020 2020 2020 2020 6375 7272 656e            curren
-00030020: 7463 6d64 203d 2066 226b 7562 6563 746c  tcmd = f"kubectl
-00030030: 2067 6574 206e 6f64 6520 2d2d 7365 6c65   get node --sele
-00030040: 6374 6f72 3d27 7b73 656c 6563 746f 727d  ctor='{selector}
-00030050: 2722 0a20 2020 2020 2020 2020 2020 2063  '".            c
-00030060: 7572 7265 6e74 636d 6420 2b3d 2022 207c  urrentcmd += " |
-00030070: 2067 7265 7020 2720 5265 6164 7927 220a   grep ' Ready'".
-00030080: 2020 2020 2020 2020 2020 2020 6375 7272              curr
-00030090: 656e 746e 6f64 6573 203d 206f 732e 706f  entnodes = os.po
-000300a0: 7065 6e28 6375 7272 656e 7463 6d64 292e  pen(currentcmd).
-000300b0: 7265 6164 6c69 6e65 7328 290a 2020 2020  readlines().    
-000300c0: 2020 2020 2020 2020 6966 206c 656e 2863          if len(c
-000300d0: 7572 7265 6e74 6e6f 6465 7329 2021 3d20  urrentnodes) != 
-000300e0: 776f 726b 6572 733a 0a20 2020 2020 2020  workers:.       
-000300f0: 2020 2020 2020 2020 2070 7072 696e 7428           pprint(
-00030100: 6622 4f6e 676f 696e 6720 7363 616c 696e  f"Ongoing scalin
-00030110: 6720 6f70 6572 6174 696f 6e20 6f6e 2063  g operation on c
-00030120: 6c75 7374 6572 207b 6b75 6265 7d22 290a  luster {kube}").
-00030130: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00030140: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00030150: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
-00030160: 6175 746f 7363 616c 655f 636c 7573 7465  autoscale_cluste
-00030170: 7228 6b75 6265 2c20 6b75 6265 7479 7065  r(kube, kubetype
-00030180: 2c20 776f 726b 6572 732c 2074 6872 6573  , workers, thres
-00030190: 686f 6c64 2c20 6964 6c65 290a 2020 2020  hold, idle).    
-000301a0: 2020 2020 2020 2020 2020 2020 6966 2072              if r
-000301b0: 6573 756c 745b 2772 6573 756c 7427 5d20  esult['result'] 
-000301c0: 213d 2027 7375 6363 6573 7327 3a0a 2020  != 'success':.  
-000301d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000301e0: 2020 7265 7475 726e 2072 6573 756c 740a    return result.
-000301f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030200: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00030210: 2020 2020 2020 2020 2020 776f 726b 6572            worker
-00030220: 7320 3d20 7265 7375 6c74 5b27 776f 726b  s = result['work
-00030230: 6572 7327 5d0a 2020 2020 2020 2020 2020  ers'].          
-00030240: 2020 2020 2020 2020 2020 7070 7269 6e74            pprint
-00030250: 2866 2243 7572 7265 6e74 2077 6f72 6b65  (f"Current worke
-00030260: 7273 206e 756d 6265 7220 6465 7369 7265  rs number desire
-00030270: 643a 207b 776f 726b 6572 737d 2229 0a20  d: {workers}"). 
-00030280: 2020 2020 2020 2020 2020 2073 6c65 6570             sleep
-00030290: 2836 3029 0a0a 2020 2020 6465 6620 7468  (60)..    def th
-000302a0: 7265 6164 6564 5f77 6562 5f63 6f6e 736f  readed_web_conso
-000302b0: 6c65 2873 656c 662c 2070 6f72 742c 206e  le(self, port, n
-000302c0: 616d 6529 3a0a 2020 2020 2020 2020 636f  ame):.        co
-000302d0: 6e73 6f6c 6520 3d20 4b6d 696e 6963 6f6e  nsole = Kminicon
-000302e0: 736f 6c65 2863 6f6e 6669 673d 7365 6c66  sole(config=self
-000302f0: 2c20 706f 7274 3d70 6f72 742c 206e 616d  , port=port, nam
-00030300: 653d 6e61 6d65 290a 2020 2020 2020 2020  e=name).        
-00030310: 636f 6e73 6f6c 652e 7275 6e28 290a 0a20  console.run().. 
-00030320: 2020 2064 6566 2077 6562 636f 6e73 6f6c     def webconsol
-00030330: 6528 7365 6c66 2c20 6e61 6d65 293a 0a20  e(self, name):. 
-00030340: 2020 2020 2020 2070 6f72 7420 3d20 6765         port = ge
-00030350: 745f 6672 6565 5f70 6f72 7428 290a 2020  t_free_port().  
-00030360: 2020 2020 2020 7420 3d20 7468 7265 6164        t = thread
-00030370: 696e 672e 5468 7265 6164 2874 6172 6765  ing.Thread(targe
-00030380: 743d 7365 6c66 2e74 6872 6561 6465 645f  t=self.threaded_
-00030390: 7765 625f 636f 6e73 6f6c 652c 2061 7267  web_console, arg
-000303a0: 733d 2870 6f72 742c 206e 616d 652c 2929  s=(port, name,))
-000303b0: 0a20 2020 2020 2020 2074 2e73 7461 7274  .        t.start
-000303c0: 2829 0a20 2020 2020 2020 2077 6562 6272  ().        webbr
-000303d0: 6f77 7365 722e 6f70 656e 2866 2268 7474  owser.open(f"htt
-000303e0: 703a 2f2f 3132 372e 302e 302e 313a 7b70  p://127.0.0.1:{p
-000303f0: 6f72 747d 222c 206e 6577 3d32 2c20 6175  ort}", new=2, au
-00030400: 746f 7261 6973 653d 5472 7565 290a 0a20  toraise=True).. 
-00030410: 2020 2064 6566 2069 6e66 6f5f 7370 6563     def info_spec
-00030420: 6966 6963 5f61 6b73 2873 656c 662c 2063  ific_aks(self, c
-00030430: 6c75 7374 6572 293a 0a20 2020 2020 2020  luster):.       
-00030440: 2066 726f 6d20 6b76 6972 742e 636c 7573   from kvirt.clus
-00030450: 7465 722e 616b 7320 696d 706f 7274 2069  ter.aks import i
-00030460: 6e66 6f20 6173 2061 6b73 5f69 6e66 6f0a  nfo as aks_info.
-00030470: 2020 2020 2020 2020 7265 7475 726e 2061          return a
-00030480: 6b73 5f69 6e66 6f28 7365 6c66 2c20 636c  ks_info(self, cl
-00030490: 7573 7465 722c 2073 656c 662e 6465 6275  uster, self.debu
-000304a0: 6729 0a0a 2020 2020 6465 6620 696e 666f  g)..    def info
-000304b0: 5f73 7065 6369 6669 635f 656b 7328 7365  _specific_eks(se
-000304c0: 6c66 2c20 636c 7573 7465 7229 3a0a 2020  lf, cluster):.  
-000304d0: 2020 2020 2020 6672 6f6d 206b 7669 7274        from kvirt
-000304e0: 2e63 6c75 7374 6572 2e65 6b73 2069 6d70  .cluster.eks imp
-000304f0: 6f72 7420 696e 666f 2061 7320 656b 735f  ort info as eks_
-00030500: 696e 666f 0a20 2020 2020 2020 2072 6574  info.        ret
-00030510: 7572 6e20 656b 735f 696e 666f 2873 656c  urn eks_info(sel
-00030520: 662c 2063 6c75 7374 6572 2c20 7365 6c66  f, cluster, self
-00030530: 2e64 6562 7567 290a 0a20 2020 2064 6566  .debug)..    def
-00030540: 2069 6e66 6f5f 6b75 6265 5f61 6b73 2873   info_kube_aks(s
-00030550: 656c 662c 2071 7569 6574 2c20 7765 623d  elf, quiet, web=
-00030560: 4661 6c73 6529 3a0a 2020 2020 2020 2020  False):.        
-00030570: 6672 6f6d 206b 7669 7274 2e63 6c75 7374  from kvirt.clust
-00030580: 6572 2069 6d70 6f72 7420 616b 730a 2020  er import aks.  
-00030590: 2020 2020 2020 706c 616e 6469 7220 3d20        plandir = 
-000305a0: 6f73 2e70 6174 682e 6469 726e 616d 6528  os.path.dirname(
-000305b0: 616b 732e 6372 6561 7465 2e5f 5f63 6f64  aks.create.__cod
-000305c0: 655f 5f2e 636f 5f66 696c 656e 616d 6529  e__.co_filename)
-000305d0: 0a20 2020 2020 2020 2069 6e70 7574 6669  .        inputfi
-000305e0: 6c65 203d 2066 277b 706c 616e 6469 727d  le = f'{plandir}
-000305f0: 2f66 616b 652e 796d 6c27 0a20 2020 2020  /fake.yml'.     
-00030600: 2020 2073 656c 662e 696e 666f 5f70 6c61     self.info_pla
-00030610: 6e28 696e 7075 7466 696c 652c 2071 7569  n(inputfile, qui
-00030620: 6574 3d71 7569 6574 2c20 7765 623d 7765  et=quiet, web=we
-00030630: 6229 0a20 2020 2020 2020 2061 6b73 2e69  b).        aks.i
-00030640: 6e66 6f5f 7365 7276 6963 6528 7365 6c66  nfo_service(self
-00030650: 290a 0a20 2020 2064 6566 2069 6e66 6f5f  )..    def info_
-00030660: 6b75 6265 5f65 6b73 2873 656c 662c 2071  kube_eks(self, q
-00030670: 7569 6574 2c20 7765 623d 4661 6c73 6529  uiet, web=False)
-00030680: 3a0a 2020 2020 2020 2020 6672 6f6d 206b  :.        from k
-00030690: 7669 7274 2e63 6c75 7374 6572 2069 6d70  virt.cluster imp
-000306a0: 6f72 7420 656b 730a 2020 2020 2020 2020  ort eks.        
-000306b0: 706c 616e 6469 7220 3d20 6f73 2e70 6174  plandir = os.pat
-000306c0: 682e 6469 726e 616d 6528 656b 732e 6372  h.dirname(eks.cr
-000306d0: 6561 7465 2e5f 5f63 6f64 655f 5f2e 636f  eate.__code__.co
-000306e0: 5f66 696c 656e 616d 6529 0a20 2020 2020  _filename).     
-000306f0: 2020 2069 6e70 7574 6669 6c65 203d 2066     inputfile = f
-00030700: 277b 706c 616e 6469 727d 2f66 616b 652e  '{plandir}/fake.
-00030710: 796d 6c27 0a20 2020 2020 2020 2073 656c  yml'.        sel
-00030720: 662e 696e 666f 5f70 6c61 6e28 696e 7075  f.info_plan(inpu
-00030730: 7466 696c 652c 2071 7569 6574 3d71 7569  tfile, quiet=qui
-00030740: 6574 2c20 7765 623d 7765 6229 0a20 2020  et, web=web).   
-00030750: 2020 2020 2065 6b73 2e69 6e66 6f5f 7365       eks.info_se
-00030760: 7276 6963 6528 7365 6c66 290a 0a20 2020  rvice(self)..   
-00030770: 2064 6566 2069 6e66 6f5f 7370 6563 6966   def info_specif
-00030780: 6963 5f67 6b65 2873 656c 662c 2063 6c75  ic_gke(self, clu
-00030790: 7374 6572 293a 0a20 2020 2020 2020 2066  ster):.        f
-000307a0: 726f 6d20 6b76 6972 742e 636c 7574 6572  rom kvirt.cluter
-000307b0: 2e67 6b65 2069 6d70 6f72 7420 696e 666f  .gke import info
-000307c0: 2061 7320 676b 655f 696e 666f 0a20 2020   as gke_info.   
-000307d0: 2020 2020 2072 6574 7572 6e20 676b 655f       return gke_
-000307e0: 696e 666f 2873 656c 662c 2063 6c75 7374  info(self, clust
-000307f0: 6572 2c20 7365 6c66 2e64 6562 7567 290a  er, self.debug).
-00030800: 0a20 2020 2064 6566 2069 6e66 6f5f 6b75  .    def info_ku
-00030810: 6265 5f67 6b65 2873 656c 662c 2071 7569  be_gke(self, qui
-00030820: 6574 2c20 7765 623d 4661 6c73 6529 3a0a  et, web=False):.
-00030830: 2020 2020 2020 2020 6672 6f6d 206b 7669          from kvi
-00030840: 7274 2e63 6c75 7374 6572 2069 6d70 6f72  rt.cluster impor
-00030850: 7420 676b 650a 2020 2020 2020 2020 706c  t gke.        pl
-00030860: 616e 6469 7220 3d20 6f73 2e70 6174 682e  andir = os.path.
-00030870: 6469 726e 616d 6528 676b 652e 6372 6561  dirname(gke.crea
-00030880: 7465 2e5f 5f63 6f64 655f 5f2e 636f 5f66  te.__code__.co_f
-00030890: 696c 656e 616d 6529 0a20 2020 2020 2020  ilename).       
-000308a0: 2069 6e70 7574 6669 6c65 203d 2066 277b   inputfile = f'{
-000308b0: 706c 616e 6469 727d 2f66 616b 652e 796d  plandir}/fake.ym
-000308c0: 6c27 0a20 2020 2020 2020 2073 656c 662e  l'.        self.
-000308d0: 696e 666f 5f70 6c61 6e28 696e 7075 7466  info_plan(inputf
-000308e0: 696c 652c 2071 7569 6574 3d71 7569 6574  ile, quiet=quiet
-000308f0: 2c20 7765 623d 7765 6229 0a20 2020 2020  , web=web).     
-00030900: 2020 2067 6b65 2e69 6e66 6f5f 7365 7276     gke.info_serv
-00030910: 6963 6528 7365 6c66 290a                 ice(self).
+0002cb50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cb60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cb70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cb80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cb90: 7469 746c 6529 0a20 2020 2020 2020 2020  title).         
+0002cba0: 2020 2020 2020 2020 2020 2070 6263 6d64             pbcmd
+0002cbb0: 202b 3d20 2768 7474 7073 3a2f 2f61 7069   += 'https://api
+0002cbc0: 2e70 7573 6862 756c 6c65 742e 636f 6d2f  .pushbullet.com/
+0002cbd0: 7632 2f70 7573 6865 7327 0a20 2020 2020  v2/pushes'.     
+0002cbe0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0002cbf0: 6d64 732e 6170 7065 6e64 2870 6263 6d64  mds.append(pbcmd
+0002cc00: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
+0002cc10: 6966 206e 6f74 6966 796d 6574 686f 6420  if notifymethod 
+0002cc20: 3d3d 2027 736c 6163 6b27 3a0a 2020 2020  == 'slack':.    
+0002cc30: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+0002cc40: 6c61 636b 6368 616e 6e65 6c20 6973 204e  lackchannel is N
+0002cc50: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+0002cc60: 2020 2020 2020 2020 2077 6172 6e69 6e67           warning
+0002cc70: 2866 224e 6f74 6966 6963 6174 696f 6e20  (f"Notification 
+0002cc80: 7265 7175 6972 6564 2066 6f72 207b 6e61  required for {na
+0002cc90: 6d65 7d20 6275 7420 6d69 7373 696e 6720  me} but missing 
+0002cca0: 736c 6163 6b20 6368 616e 6e65 6c22 290a  slack channel").
+0002ccb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ccc0: 656c 6966 2073 6c61 636b 746f 6b65 6e20  elif slacktoken 
+0002ccd0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
+0002cce0: 2020 2020 2020 2020 2020 2020 2077 6172               war
+0002ccf0: 6e69 6e67 2866 224e 6f74 6966 6963 6174  ning(f"Notificat
+0002cd00: 696f 6e20 7265 7175 6972 6564 2066 6f72  ion required for
+0002cd10: 207b 6e61 6d65 7d20 6275 7420 6d69 7373   {name} but miss
+0002cd20: 696e 6720 736c 6163 6b74 6f6b 656e 2229  ing slacktoken")
+0002cd30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002cd40: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0002cd50: 2020 2020 2020 2020 2020 2073 6c61 636b             slack
+0002cd60: 636d 6420 3d20 6622 696e 666f 3d60 7b6e  cmd = f"info=`{n
+0002cd70: 6f74 6966 7963 6d64 7d20 323e 2631 207c  otifycmd} 2>&1 |
+0002cd80: 2073 6564 2027 732f 5c5c 7832 2f20 2f67   sed 's/\\x2/ /g
+0002cd90: 2760 3b22 0a20 2020 2020 2020 2020 2020  '`;".           
+0002cda0: 2020 2020 2020 2020 2073 6c61 636b 636d           slackcm
+0002cdb0: 6420 2b3d 2022 2222 6375 726c 202d 5820  d += """curl -X 
+0002cdc0: 504f 5354 202d 4820 2741 7574 686f 7269  POST -H 'Authori
+0002cdd0: 7a61 7469 6f6e 3a20 4265 6172 6572 2025  zation: Bearer %
+0002cde0: 7327 0a20 2d48 2027 436f 6e74 656e 742d  s'. -H 'Content-
+0002cdf0: 7479 7065 3a20 6170 706c 6963 6174 696f  type: applicatio
+0002ce00: 6e2f 6a73 6f6e 3b20 6368 6172 7365 743d  n/json; charset=
+0002ce10: 7574 662d 3827 0a20 2d2d 6461 7461 2027  utf-8'. --data '
+0002ce20: 7b22 6368 616e 6e65 6c22 3a22 2573 222c  {"channel":"%s",
+0002ce30: 2274 6578 7422 3a22 2573 222c 2261 7474  "text":"%s","att
+0002ce40: 6163 686d 656e 7473 223a 205b 7b22 7465  achments": [{"te
+0002ce50: 7874 223a 2227 2224 696e 666f 2227 222c  xt":"'"$info"'",
+0002ce60: 2266 616c 6c62 6163 6b22 3a22 6e6f 7468  "fallback":"noth
+0002ce70: 696e 6722 2c0a 2263 6f6c 6f72 223a 2223  ing",."color":"#
+0002ce80: 3341 4133 4533 222c 2261 7474 6163 686d  3AA3E3","attachm
+0002ce90: 656e 745f 7479 7065 223a 2264 6566 6175  ent_type":"defau
+0002cea0: 6c74 227d 5d7d 2720 6874 7470 733a 2f2f  lt"}]}' https://
+0002ceb0: 736c 6163 6b2e 636f 6d2f 6170 692f 6368  slack.com/api/ch
+0002cec0: 6174 2e70 6f73 744d 6573 7361 6765 2222  at.postMessage""
+0002ced0: 2220 2520 2873 6c61 636b 746f 6b65 6e2c  " % (slacktoken,
+0002cee0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002cef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cf00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cf10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cf20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cf30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cf40: 736c 6163 6b63 6861 6e6e 656c 2c20 7469  slackchannel, ti
+0002cf50: 746c 6529 0a20 2020 2020 2020 2020 2020  tle).           
+0002cf60: 2020 2020 2020 2020 2073 6c61 636b 636d           slackcm
+0002cf70: 6420 3d20 736c 6163 6b63 6d64 2e72 6570  d = slackcmd.rep
+0002cf80: 6c61 6365 2827 5c6e 272c 2027 2729 0a20  lace('\n', ''). 
+0002cf90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cfa0: 2020 2063 6d64 732e 6170 7065 6e64 2873     cmds.append(s
+0002cfb0: 6c61 636b 636d 6429 0a20 2020 2020 2020  lackcmd).       
+0002cfc0: 2020 2020 2065 6c69 6620 6e6f 7469 6679       elif notify
+0002cfd0: 6d65 7468 6f64 203d 3d20 276d 6169 6c27  method == 'mail'
+0002cfe0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0002cff0: 2020 6966 206d 6169 6c73 6572 7665 7220    if mailserver 
+0002d000: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
+0002d010: 2020 2020 2020 2020 2020 2020 2077 6172               war
+0002d020: 6e69 6e67 2866 224e 6f74 6966 6963 6174  ning(f"Notificat
+0002d030: 696f 6e20 7265 7175 6972 6564 2066 6f72  ion required for
+0002d040: 207b 6e61 6d65 7d20 6275 7420 6d69 7373   {name} but miss
+0002d050: 696e 6720 6d61 696c 7365 7276 6572 2229  ing mailserver")
+0002d060: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002d070: 2065 6c69 6620 6d61 696c 6672 6f6d 2069   elif mailfrom i
+0002d080: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+0002d090: 2020 2020 2020 2020 2020 2020 7761 726e              warn
+0002d0a0: 696e 6728 6622 4e6f 7469 6669 6361 7469  ing(f"Notificati
+0002d0b0: 6f6e 2072 6571 7569 7265 6420 666f 7220  on required for 
+0002d0c0: 7b6e 616d 657d 2062 7574 206d 6973 7369  {name} but missi
+0002d0d0: 6e67 206d 6169 6c66 726f 6d22 290a 2020  ng mailfrom").  
+0002d0e0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+0002d0f0: 6966 206e 6f74 206d 6169 6c74 6f3a 0a20  if not mailto:. 
+0002d100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d110: 2020 2077 6172 6e69 6e67 2866 224e 6f74     warning(f"Not
+0002d120: 6966 6963 6174 696f 6e20 7265 7175 6972  ification requir
+0002d130: 6564 2066 6f72 207b 6e61 6d65 7d20 6275  ed for {name} bu
+0002d140: 7420 6d69 7373 696e 6720 6d61 696c 746f  t missing mailto
+0002d150: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
+0002d160: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0002d170: 2020 2020 2020 2020 2020 2020 206e 6f77               now
+0002d180: 203d 2064 6174 6574 696d 652e 6e6f 7728   = datetime.now(
+0002d190: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0002d1a0: 2020 2020 2020 6e6f 7720 3d20 6e6f 772e        now = now.
+0002d1b0: 2073 7472 6674 696d 6528 2225 612c 2564   strftime("%a,%d
+0002d1c0: 2025 6220 2559 2025 483a 254d 3a25 5322   %b %Y %H:%M:%S"
+0002d1d0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0002d1e0: 2020 2020 2020 746f 7320 3d20 272c 272e        tos = ','.
+0002d1f0: 6a6f 696e 285b 6622 3c7b 746f 7d3e 2220  join([f"<{to}>" 
+0002d200: 666f 7220 746f 2069 6e20 6d61 696c 746f  for to in mailto
+0002d210: 5d29 0a20 2020 2020 2020 2020 2020 2020  ]).             
+0002d220: 2020 2020 2020 206d 6169 6c63 6f6e 7465         mailconte
+0002d230: 6e74 203d 2066 2246 726f 6d3a 207b 6d61  nt = f"From: {ma
+0002d240: 696c 6672 6f6d 7d20 3c7b 6d61 696c 6672  ilfrom} <{mailfr
+0002d250: 6f6d 7d3e 5c6e 546f 3a20 7b74 6f73 7d5c  om}>\nTo: {tos}\
+0002d260: 6e44 6174 653a 207b 6e6f 777d 5c6e 5375  nDate: {now}\nSu
+0002d270: 626a 6563 743a 207b 7469 746c 657d 220a  bject: {title}".
+0002d280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d290: 2020 2020 6d61 696c 636d 6420 3d20 5b5d      mailcmd = []
+0002d2a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002d2b0: 2020 2020 2069 6620 6e6f 7420 636c 7573       if not clus
+0002d2c0: 7465 723a 0a20 2020 2020 2020 2020 2020  ter:.           
+0002d2d0: 2020 2020 2020 2020 2020 2020 206d 6169               mai
+0002d2e0: 6c63 6d64 2e61 7070 656e 6428 2774 6573  lcmd.append('tes
+0002d2f0: 7420 2d66 202f 6574 632f 6465 6269 616e  t -f /etc/debian
+0002d300: 5f76 6572 7369 6f6e 2026 2620 6170 742d  _version && apt-
+0002d310: 6765 7420 2d79 2069 6e73 7461 6c6c 2063  get -y install c
+0002d320: 7572 6c27 290a 2020 2020 2020 2020 2020  url').          
+0002d330: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
+0002d340: 696c 636d 642e 6170 7065 6e64 2827 6563  ilcmd.append('ec
+0002d350: 686f 2022 2220 3e3e 202f 7661 722f 746d  ho "" >> /var/tm
+0002d360: 702f 6d61 696c 2e74 7874 2729 0a20 2020  p/mail.txt').   
+0002d370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d380: 206d 6169 6c63 6d64 2e61 7070 656e 6428   mailcmd.append(
+0002d390: 6627 7b6e 6f74 6966 7963 6d64 7d20 323e  f'{notifycmd} 2>
+0002d3a0: 2631 203e 3e20 2f76 6172 2f74 6d70 2f6d  &1 >> /var/tmp/m
+0002d3b0: 6169 6c2e 7478 7427 290a 2020 2020 2020  ail.txt').      
+0002d3c0: 2020 2020 2020 2020 2020 2020 2020 6375                cu
+0002d3d0: 726c 636d 6420 3d20 6622 6375 726c 202d  rlcmd = f"curl -
+0002d3e0: 2d73 696c 656e 7420 2d2d 7572 6c20 736d  -silent --url sm
+0002d3f0: 7470 3a2f 2f7b 6d61 696c 7365 7276 6572  tp://{mailserver
+0002d400: 7d3a 3235 202d 2d6d 6169 6c2d 6672 6f6d  }:25 --mail-from
+0002d410: 207b 6d61 696c 6672 6f6d 7d22 0a20 2020   {mailfrom}".   
+0002d420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d430: 2066 6f72 2061 6464 7265 7373 2069 6e20   for address in 
+0002d440: 6d61 696c 746f 3a0a 2020 2020 2020 2020  mailto:.        
+0002d450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d460: 6375 726c 636d 6420 2b3d 2066 2220 2d2d  curlcmd += f" --
+0002d470: 6d61 696c 2d72 6370 7420 7b61 6464 7265  mail-rcpt {addre
+0002d480: 7373 7d20 220a 2020 2020 2020 2020 2020  ss} ".          
+0002d490: 2020 2020 2020 2020 2020 6966 2063 6c75            if clu
+0002d4a0: 7374 6572 3a0a 2020 2020 2020 2020 2020  ster:.          
+0002d4b0: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
+0002d4c0: 696c 636f 6e74 656e 7420 3d20 2222 0a20  ilcontent = "". 
+0002d4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d4e0: 2020 2020 2020 206b 7562 6563 6f6e 6669         kubeconfi
+0002d4f0: 6720 3d20 6627 2f65 7463 2f6b 7562 6572  g = f'/etc/kuber
+0002d500: 6e65 7465 732f 6b75 6265 636f 6e66 6967  netes/kubeconfig
+0002d510: 2e7b 6e61 6d65 7d27 0a20 2020 2020 2020  .{name}'.       
+0002d520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d530: 2063 7572 6c63 6d64 202b 3d20 6627 202d   curlcmd += f' -
+0002d540: 4820 2253 7562 6a65 6374 3a20 7b74 6974  H "Subject: {tit
+0002d550: 6c65 7d22 202d 4820 2246 726f 6d3a 207b  le}" -H "From: {
+0002d560: 6d61 696c 6672 6f6d 7d20 3c7b 6d61 696c  mailfrom} <{mail
+0002d570: 6672 6f6d 7d3e 2227 0a20 2020 2020 2020  from}>"'.       
+0002d580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d590: 2066 6f72 2061 6464 7265 7373 2069 6e20   for address in 
+0002d5a0: 6d61 696c 746f 3a0a 2020 2020 2020 2020  mailto:.        
+0002d5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d5c0: 2020 2020 6375 726c 636d 6420 2b3d 2066      curlcmd += f
+0002d5d0: 2720 2d48 2022 546f 3a20 7b61 6464 7265  ' -H "To: {addre
+0002d5e0: 7373 7d20 3c7b 6164 6472 6573 737d 3e22  ss} <{address}>"
+0002d5f0: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
+0002d600: 2020 2020 2020 2020 2020 6375 726c 636d            curlcm
+0002d610: 6420 2b3d 2027 202d 4620 223d 283b 7479  d += ' -F "=(;ty
+0002d620: 7065 3d6d 756c 7469 7061 7274 2f6d 6978  pe=multipart/mix
+0002d630: 6564 2220 2d46 2022 3d24 2863 6174 202f  ed" -F "=$(cat /
+0002d640: 7661 722f 746d 702f 6d61 696c 2e74 7874  var/tmp/mail.txt
+0002d650: 293b 7479 7065 3d74 6578 742f 706c 6169  );type=text/plai
+0002d660: 6e22 270a 2020 2020 2020 2020 2020 2020  n"'.            
+0002d670: 2020 2020 2020 2020 2020 2020 6375 726c              curl
+0002d680: 636d 6420 2b3d 2066 2720 2d46 2022 6669  cmd += f' -F "fi
+0002d690: 6c65 3d40 7b6b 7562 6563 6f6e 6669 677d  le=@{kubeconfig}
+0002d6a0: 3b74 7970 653d 7465 7874 2f70 6c61 696e  ;type=text/plain
+0002d6b0: 3b65 6e63 6f64 6572 3d62 6173 6536 3422  ;encoder=base64"
+0002d6c0: 202d 4620 223d 2922 270a 2020 2020 2020   -F "=)"'.      
+0002d6d0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+0002d6e0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0002d6f0: 2020 2020 2020 2020 2020 2020 6375 726c              curl
+0002d700: 636d 6420 2b3d 2022 202d 2d75 706c 6f61  cmd += " --uploa
+0002d710: 642d 6669 6c65 202f 7661 722f 746d 702f  d-file /var/tmp/
+0002d720: 6d61 696c 2e74 7874 220a 2020 2020 2020  mail.txt".      
+0002d730: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
+0002d740: 696c 636d 642e 6170 7065 6e64 2863 7572  ilcmd.append(cur
+0002d750: 6c63 6d64 290a 2020 2020 2020 2020 2020  lcmd).          
+0002d760: 2020 2020 2020 2020 2020 636d 6473 2e65            cmds.e
+0002d770: 7874 656e 6428 6d61 696c 636d 6429 0a20  xtend(mailcmd). 
+0002d780: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+0002d790: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002d7a0: 2065 7272 6f72 2866 2249 6e76 616c 6964   error(f"Invalid
+0002d7b0: 206d 6574 686f 6420 7b6e 6f74 6966 796d   method {notifym
+0002d7c0: 6574 686f 647d 2229 0a20 2020 2020 2020  ethod}").       
+0002d7d0: 2072 6574 7572 6e20 636d 6473 2c20 6d61   return cmds, ma
+0002d7e0: 696c 636f 6e74 656e 740a 0a20 2020 2064  ilcontent..    d
+0002d7f0: 6566 2068 616e 646c 655f 766d 5f72 6573  ef handle_vm_res
+0002d800: 756c 7428 7365 6c66 2c20 6e61 6d65 2c20  ult(self, name, 
+0002d810: 7072 6f66 696c 652c 2072 6573 756c 742c  profile, result,
+0002d820: 206e 6577 766d 732c 2066 6169 6c65 6476   newvms, failedv
+0002d830: 6d73 2c20 6173 796e 6377 6169 7476 6d73  ms, asyncwaitvms
+0002d840: 2c20 6f6e 6c79 6173 7365 7473 3d46 616c  , onlyassets=Fal
+0002d850: 7365 2c20 6e65 7761 7373 6574 733d 5b5d  se, newassets=[]
+0002d860: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0002d870: 2020 2020 2020 2020 2020 2076 6d63 6c69             vmcli
+0002d880: 656e 743d 4e6f 6e65 293a 0a20 2020 2020  ent=None):.     
+0002d890: 2020 2069 6620 2772 6573 756c 7427 2069     if 'result' i
+0002d8a0: 6e20 7265 7375 6c74 2061 6e64 2072 6573  n result and res
+0002d8b0: 756c 745b 2772 6573 756c 7427 5d20 3d3d  ult['result'] ==
+0002d8c0: 2027 7375 6363 6573 7327 3a0a 2020 2020   'success':.    
+0002d8d0: 2020 2020 2020 2020 6e65 7776 6d73 2e61          newvms.a
+0002d8e0: 7070 656e 6428 6e61 6d65 290a 2020 2020  ppend(name).    
+0002d8f0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0002d900: 2020 2020 2020 6661 696c 6564 766d 732e        failedvms.
+0002d910: 6170 7065 6e64 287b 276e 616d 6527 3a20  append({'name': 
+0002d920: 6e61 6d65 2c20 2772 6561 736f 6e27 3a20  name, 'reason': 
+0002d930: 7265 7375 6c74 5b27 7265 6173 6f6e 275d  result['reason']
+0002d940: 7d29 0a20 2020 2020 2020 2073 7461 7274  }).        start
+0002d950: 203d 2070 726f 6669 6c65 2e67 6574 2827   = profile.get('
+0002d960: 7374 6172 7427 2c20 5472 7565 290a 2020  start', True).  
+0002d970: 2020 2020 2020 636c 6f75 6469 6e69 7420        cloudinit 
+0002d980: 3d20 7072 6f66 696c 652e 6765 7428 2763  = profile.get('c
+0002d990: 6c6f 7564 696e 6974 272c 2054 7275 6529  loudinit', True)
+0002d9a0: 0a20 2020 2020 2020 2061 7379 6e63 7761  .        asyncwa
+0002d9b0: 6974 203d 2070 726f 6669 6c65 2e67 6574  it = profile.get
+0002d9c0: 2827 6173 796e 6377 6169 7427 2c20 4661  ('asyncwait', Fa
+0002d9d0: 6c73 6529 0a20 2020 2020 2020 2066 696e  lse).        fin
+0002d9e0: 6973 6866 696c 6573 203d 2070 726f 6669  ishfiles = profi
+0002d9f0: 6c65 2e67 6574 2827 6669 6e69 7368 6669  le.get('finishfi
+0002da00: 6c65 7327 2c20 5b5d 290a 2020 2020 2020  les', []).      
+0002da10: 2020 6966 206f 6e6c 7961 7373 6574 733a    if onlyassets:
+0002da20: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0002da30: 2764 6174 6127 2069 6e20 7265 7375 6c74  'data' in result
+0002da40: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0002da50: 2020 6e65 7761 7373 6574 732e 6170 7065    newassets.appe
+0002da60: 6e64 2872 6573 756c 745b 2764 6174 6127  nd(result['data'
+0002da70: 5d29 0a20 2020 2020 2020 2020 2020 2065  ]).            e
+0002da80: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0002da90: 2020 2020 2065 7272 6f72 2872 6573 756c       error(resul
+0002daa0: 745b 2772 6561 736f 6e27 5d29 0a20 2020  t['reason']).   
+0002dab0: 2020 2020 2069 6620 6e6f 7420 6173 796e       if not asyn
+0002dac0: 6377 6169 743a 0a20 2020 2020 2020 2020  cwait:.         
+0002dad0: 2020 2072 6574 7572 6e0a 2020 2020 2020     return.      
+0002dae0: 2020 656c 6966 206e 6f74 2073 7461 7274    elif not start
+0002daf0: 206f 7220 6e6f 7420 636c 6f75 6469 6e69   or not cloudini
+0002db00: 7420 6f72 2070 726f 6669 6c65 2e67 6574  t or profile.get
+0002db10: 2827 696d 6167 6527 2920 6973 204e 6f6e  ('image') is Non
+0002db20: 653a 0a20 2020 2020 2020 2020 2020 2070  e:.            p
+0002db30: 7072 696e 7428 6622 536b 6970 7069 6e67  print(f"Skipping
+0002db40: 2077 6169 7420 6f6e 207b 6e61 6d65 7d22   wait on {name}"
+0002db50: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
+0002db60: 2020 2020 2020 2020 2020 2020 7761 6974              wait
+0002db70: 636f 6d6d 616e 6420 3d20 7072 6f66 696c  command = profil
+0002db80: 652e 6765 7428 2777 6169 7463 6f6d 6d61  e.get('waitcomma
+0002db90: 6e64 2729 0a20 2020 2020 2020 2020 2020  nd').           
+0002dba0: 2077 6169 7474 696d 656f 7574 203d 2070   waittimeout = p
+0002dbb0: 726f 6669 6c65 2e67 6574 2827 7761 6974  rofile.get('wait
+0002dbc0: 7469 6d65 6f75 7427 2c20 3029 0a20 2020  timeout', 0).   
+0002dbd0: 2020 2020 2020 2020 2061 7379 6e63 7761           asyncwa
+0002dbe0: 6974 766d 203d 207b 276e 616d 6527 3a20  itvm = {'name': 
+0002dbf0: 6e61 6d65 2c20 2766 696e 6973 6866 696c  name, 'finishfil
+0002dc00: 6573 273a 2066 696e 6973 6866 696c 6573  es': finishfiles
+0002dc10: 2c20 2777 6169 7463 6f6d 6d61 6e64 273a  , 'waitcommand':
+0002dc20: 2077 6169 7463 6f6d 6d61 6e64 2c0a 2020   waitcommand,.  
+0002dc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dc40: 2020 2020 2020 2020 2027 7761 6974 7469           'waitti
+0002dc50: 6d65 6f75 7427 3a20 7761 6974 7469 6d65  meout': waittime
+0002dc60: 6f75 742c 2027 766d 636c 6965 6e74 273a  out, 'vmclient':
+0002dc70: 2076 6d63 6c69 656e 747d 0a20 2020 2020   vmclient}.     
+0002dc80: 2020 2020 2020 2061 7379 6e63 7761 6974         asyncwait
+0002dc90: 766d 732e 6170 7065 6e64 2861 7379 6e63  vms.append(async
+0002dca0: 7761 6974 766d 290a 0a20 2020 2064 6566  waitvm)..    def
+0002dcb0: 2074 6872 6561 6465 645f 6372 6561 7465   threaded_create
+0002dcc0: 5f76 6d28 7365 6c66 2c20 6e61 6d65 2c20  _vm(self, name, 
+0002dcd0: 7072 6f66 696c 656e 616d 652c 2063 7572  profilename, cur
+0002dce0: 7265 6e74 6f76 6572 7269 6465 732c 2070  rentoverrides, p
+0002dcf0: 726f 6669 6c65 2c20 7a2c 2070 6c61 6e2c  rofile, z, plan,
+0002dd00: 2063 7572 7265 6e74 706c 616e 6469 722c   currentplandir,
+0002dd10: 2076 6d63 6c69 656e 742c 0a20 2020 2020   vmclient,.     
+0002dd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dd30: 2020 2020 2020 6f6e 666c 792c 206f 6e6c        onfly, onl
+0002dd40: 7961 7373 6574 732c 206e 6577 766d 732c  yassets, newvms,
+0002dd50: 2066 6169 6c65 6476 6d73 2c20 6173 796e   failedvms, asyn
+0002dd60: 6377 6169 7476 6d73 2c20 6e65 7761 7373  cwaitvms, newass
+0002dd70: 6574 7329 3a0a 2020 2020 2020 2020 7265  ets):.        re
+0002dd80: 7375 6c74 203d 2073 656c 662e 6372 6561  sult = self.crea
+0002dd90: 7465 5f76 6d28 6e61 6d65 2c20 7072 6f66  te_vm(name, prof
+0002dda0: 696c 656e 616d 652c 206f 7665 7272 6964  ilename, overrid
+0002ddb0: 6573 3d63 7572 7265 6e74 6f76 6572 7269  es=currentoverri
+0002ddc0: 6465 732c 2063 7573 746f 6d70 726f 6669  des, customprofi
+0002ddd0: 6c65 3d70 726f 6669 6c65 2c20 6b3d 7a2c  le=profile, k=z,
+0002dde0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002ddf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002de00: 2070 6c61 6e3d 706c 616e 2c20 6261 7365   plan=plan, base
+0002de10: 6469 723d 6375 7272 656e 7470 6c61 6e64  dir=currentpland
+0002de20: 6972 2c20 636c 6965 6e74 3d76 6d63 6c69  ir, client=vmcli
+0002de30: 656e 742c 206f 6e66 6c79 3d6f 6e66 6c79  ent, onfly=onfly
+0002de40: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0002de50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002de60: 2020 6f6e 6c79 6173 7365 7473 3d6f 6e6c    onlyassets=onl
+0002de70: 7961 7373 6574 7329 0a20 2020 2020 2020  yassets).       
+0002de80: 2069 6620 6e6f 7420 6f6e 6c79 6173 7365   if not onlyasse
+0002de90: 7473 3a0a 2020 2020 2020 2020 2020 2020  ts:.            
+0002dea0: 636f 6d6d 6f6e 2e68 616e 646c 655f 7265  common.handle_re
+0002deb0: 7370 6f6e 7365 2872 6573 756c 742c 206e  sponse(result, n
+0002dec0: 616d 652c 2063 6c69 656e 743d 766d 636c  ame, client=vmcl
+0002ded0: 6965 6e74 290a 2020 2020 2020 2020 7365  ient).        se
+0002dee0: 6c66 2e68 616e 646c 655f 766d 5f72 6573  lf.handle_vm_res
+0002def0: 756c 7428 6e61 6d65 2c20 7072 6f66 696c  ult(name, profil
+0002df00: 652c 2072 6573 756c 743d 7265 7375 6c74  e, result=result
+0002df10: 2c20 6e65 7776 6d73 3d6e 6577 766d 732c  , newvms=newvms,
+0002df20: 2066 6169 6c65 6476 6d73 3d66 6169 6c65   failedvms=faile
+0002df30: 6476 6d73 2c0a 2020 2020 2020 2020 2020  dvms,.          
+0002df40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002df50: 2020 2020 6173 796e 6377 6169 7476 6d73      asyncwaitvms
+0002df60: 3d61 7379 6e63 7761 6974 766d 732c 206f  =asyncwaitvms, o
+0002df70: 6e6c 7961 7373 6574 733d 6f6e 6c79 6173  nlyassets=onlyas
+0002df80: 7365 7473 2c20 6e65 7761 7373 6574 733d  sets, newassets=
+0002df90: 6e65 7761 7373 6574 732c 2076 6d63 6c69  newassets, vmcli
+0002dfa0: 656e 743d 766d 636c 6965 6e74 290a 0a20  ent=vmclient).. 
+0002dfb0: 2020 2064 6566 2070 6172 7365 5f66 696c     def parse_fil
+0002dfc0: 6573 2873 656c 662c 206e 616d 652c 2066  es(self, name, f
+0002dfd0: 696c 6573 2c20 6261 7365 6469 723d 272e  iles, basedir='.
+0002dfe0: 272c 206f 6e66 6c79 3d4e 6f6e 6529 3a0a  ', onfly=None):.
+0002dff0: 2020 2020 2020 2020 6966 206e 6f74 2066          if not f
+0002e000: 696c 6573 3a0a 2020 2020 2020 2020 2020  iles:.          
+0002e010: 2020 7265 7475 726e 0a20 2020 2020 2020    return.       
+0002e020: 2066 6f72 2069 6e64 6578 2c20 6669 6c20   for index, fil 
+0002e030: 696e 2065 6e75 6d65 7261 7465 2866 696c  in enumerate(fil
+0002e040: 6573 293a 0a20 2020 2020 2020 2020 2020  es):.           
+0002e050: 2069 6620 6973 696e 7374 616e 6365 2866   if isinstance(f
+0002e060: 696c 2c20 7374 7229 3a0a 2020 2020 2020  il, str):.      
+0002e070: 2020 2020 2020 2020 2020 7061 7468 203d            path =
+0002e080: 2066 222f 726f 6f74 2f7b 6669 6c7d 220a   f"/root/{fil}".
+0002e090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e0a0: 6966 2062 6173 6564 6972 2021 3d20 272e  if basedir != '.
+0002e0b0: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+0002e0c0: 2020 2020 2020 206f 7269 6769 6e20 3d20         origin = 
+0002e0d0: 6622 7b62 6173 6564 6972 7d2f 7b70 6174  f"{basedir}/{pat
+0002e0e0: 687d 220a 2020 2020 2020 2020 2020 2020  h}".            
+0002e0f0: 2020 2020 6f72 6967 696e 203d 2066 696c      origin = fil
+0002e100: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002e110: 2063 6f6e 7465 6e74 203d 204e 6f6e 650a   content = None.
+0002e120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e130: 6669 6c65 735b 696e 6465 785d 203d 207b  files[index] = {
+0002e140: 2770 6174 6827 3a20 7061 7468 2c20 276f  'path': path, 'o
+0002e150: 7269 6769 6e27 3a20 6f72 6967 696e 7d0a  rigin': origin}.
+0002e160: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+0002e170: 2069 7369 6e73 7461 6e63 6528 6669 6c2c   isinstance(fil,
+0002e180: 2064 6963 7429 3a0a 2020 2020 2020 2020   dict):.        
+0002e190: 2020 2020 2020 2020 6f72 6967 696e 203d          origin =
+0002e1a0: 2066 696c 2e67 6574 2827 6f72 6967 696e   fil.get('origin
+0002e1b0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
+0002e1c0: 2020 2063 6f6e 7465 6e74 203d 2066 696c     content = fil
+0002e1d0: 2e67 6574 2827 636f 6e74 656e 7427 290a  .get('content').
+0002e1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e1f0: 7061 7468 203d 2066 696c 2e67 6574 2827  path = fil.get('
+0002e200: 7061 7468 2729 0a20 2020 2020 2020 2020  path').         
+0002e210: 2020 2020 2020 2069 6620 7061 7468 2069         if path i
+0002e220: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+0002e230: 2020 2020 2020 2020 2020 2020 6966 206f              if o
+0002e240: 7269 6769 6e20 6973 206e 6f74 204e 6f6e  rigin is not Non
+0002e250: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0002e260: 2020 2020 2020 2020 2020 2066 696c 6573             files
+0002e270: 5b69 6e64 6578 5d5b 2770 6174 6827 5d20  [index]['path'] 
+0002e280: 3d20 6622 2f72 6f6f 742f 7b6f 7269 6769  = f"/root/{origi
+0002e290: 6e7d 220a 2020 2020 2020 2020 2020 2020  n}".            
+0002e2a0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0002e2b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e2c0: 2020 2020 2020 6572 726f 7228 6622 496e        error(f"In
+0002e2d0: 636f 7272 6563 7420 656e 7472 7920 7b66  correct entry {f
+0002e2e0: 696c 7d2e 4c65 6176 696e 672e 2e2e 2229  il}.Leaving...")
+0002e2f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002e300: 2020 2020 2020 2020 2073 7973 2e65 7869           sys.exi
+0002e310: 7428 3129 0a20 2020 2020 2020 2020 2020  t(1).           
+0002e320: 2020 2020 2065 6c69 6620 6e6f 7420 7061       elif not pa
+0002e330: 7468 2e73 7461 7274 7377 6974 6828 272f  th.startswith('/
+0002e340: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
+0002e350: 2020 2020 2020 2020 6572 726f 7228 6622          error(f"
+0002e360: 496e 636f 7272 6563 7420 7061 7468 207b  Incorrect path {
+0002e370: 7061 7468 7d2e 4c65 6176 696e 672e 2e2e  path}.Leaving...
+0002e380: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
+0002e390: 2020 2020 2020 2073 7973 2e65 7869 7428         sys.exit(
+0002e3a0: 3129 0a20 2020 2020 2020 2020 2020 2065  1).            e
+0002e3b0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0002e3c0: 2020 2020 2072 6574 7572 6e20 7b27 7265       return {'re
+0002e3d0: 7375 6c74 273a 2027 6661 696c 7572 6527  sult': 'failure'
+0002e3e0: 2c20 2772 6561 736f 6e27 3a20 2249 6e63  , 'reason': "Inc
+0002e3f0: 6f72 7265 6374 2066 696c 6520 656e 7472  orrect file entr
+0002e400: 7922 7d0a 2020 2020 2020 2020 2020 2020  y"}.            
+0002e410: 6966 206f 7269 6769 6e20 6973 206e 6f74  if origin is not
+0002e420: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0002e430: 2020 2020 2020 2069 6620 6f6e 666c 7920         if onfly 
+0002e440: 6973 206e 6f74 204e 6f6e 6520 616e 6420  is not None and 
+0002e450: 277e 2720 6e6f 7420 696e 206f 7269 6769  '~' not in origi
+0002e460: 6e3a 0a20 2020 2020 2020 2020 2020 2020  n:.             
+0002e470: 2020 2020 2020 2064 6573 7464 6972 203d         destdir =
+0002e480: 2062 6173 6564 6972 0a20 2020 2020 2020   basedir.       
+0002e490: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0002e4a0: 272f 2720 696e 206f 7269 6769 6e3a 0a20  '/' in origin:. 
+0002e4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e4c0: 2020 2020 2020 2064 6573 7464 6972 203d         destdir =
+0002e4d0: 206f 732e 7061 7468 2e64 6972 6e61 6d65   os.path.dirname
+0002e4e0: 286f 7269 6769 6e29 0a20 2020 2020 2020  (origin).       
+0002e4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e500: 206f 732e 6d61 6b65 6469 7273 2864 6573   os.makedirs(des
+0002e510: 7464 6972 2c20 6578 6973 745f 6f6b 3d54  tdir, exist_ok=T
+0002e520: 7275 6529 0a20 2020 2020 2020 2020 2020  rue).           
+0002e530: 2020 2020 2020 2020 2063 6f6d 6d6f 6e2e           common.
+0002e540: 6665 7463 6828 6622 7b6f 6e66 6c79 7d2f  fetch(f"{onfly}/
+0002e550: 7b6f 7269 6769 6e7d 222c 2064 6573 7464  {origin}", destd
+0002e560: 6972 290a 2020 2020 2020 2020 2020 2020  ir).            
+0002e570: 2020 2020 6f72 6967 696e 203d 206f 732e      origin = os.
+0002e580: 7061 7468 2e65 7870 616e 6475 7365 7228  path.expanduser(
+0002e590: 6f72 6967 696e 290a 2020 2020 2020 2020  origin).        
+0002e5a0: 2020 2020 2020 2020 6966 206e 6f74 206f          if not o
+0002e5b0: 732e 7061 7468 2e69 7361 6273 286f 7269  s.path.isabs(ori
+0002e5c0: 6769 6e29 3a0a 2020 2020 2020 2020 2020  gin):.          
+0002e5d0: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
+0002e5e0: 6e73 7461 6e63 6528 6669 6c2c 2064 6963  nstance(fil, dic
+0002e5f0: 7429 2061 6e64 2066 696c 2e67 6574 2827  t) and fil.get('
+0002e600: 6375 7272 656e 7464 6972 272c 2046 616c  currentdir', Fal
+0002e610: 7365 293a 0a20 2020 2020 2020 2020 2020  se):.           
+0002e620: 2020 2020 2020 2020 2020 2020 206f 7269               ori
+0002e630: 6769 6e20 3d20 6622 7b6f 732e 6765 7463  gin = f"{os.getc
+0002e640: 7764 2829 7d2f 7b6f 7269 6769 6e7d 220a  wd()}/{origin}".
+0002e650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e660: 2020 2020 2020 2020 6669 6c65 735b 696e          files[in
+0002e670: 6465 785d 5b27 6f72 6967 696e 275d 203d  dex]['origin'] =
+0002e680: 206f 7269 6769 6e0a 2020 2020 2020 2020   origin.        
+0002e690: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+0002e6a0: 2062 6173 6564 6972 2021 3d20 272e 2720   basedir != '.' 
+0002e6b0: 616e 6420 6e6f 7420 6f72 6967 696e 2e73  and not origin.s
+0002e6c0: 7461 7274 7377 6974 6828 272e 2f27 2920  tartswith('./') 
+0002e6d0: 616e 6420 6e6f 7420 6f72 6967 696e 2e73  and not origin.s
+0002e6e0: 7461 7274 7377 6974 6828 272f 776f 726b  tartswith('/work
+0002e6f0: 6469 722f 2729 3a0a 2020 2020 2020 2020  dir/'):.        
+0002e700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e710: 6f72 6967 696e 203d 2066 227b 6261 7365  origin = f"{base
+0002e720: 6469 727d 2f7b 6f72 6967 696e 7d22 0a20  dir}/{origin}". 
+0002e730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e740: 2020 2020 2020 2066 696c 6573 5b69 6e64         files[ind
+0002e750: 6578 5d5b 276f 7269 6769 6e27 5d20 3d20  ex]['origin'] = 
+0002e760: 6f72 6967 696e 0a20 2020 2020 2020 2020  origin.         
+0002e770: 2020 2020 2020 2069 6620 6e6f 7420 6f73         if not os
+0002e780: 2e70 6174 682e 6578 6973 7473 286f 7269  .path.exists(ori
+0002e790: 6769 6e29 3a0a 2020 2020 2020 2020 2020  gin):.          
+0002e7a0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0002e7b0: 207b 2772 6573 756c 7427 3a20 2766 6169   {'result': 'fai
+0002e7c0: 6c75 7265 272c 2027 7265 6173 6f6e 273a  lure', 'reason':
+0002e7d0: 2066 224f 7269 6769 6e20 6669 6c65 207b   f"Origin file {
+0002e7e0: 6f72 6967 696e 7d20 6e6f 7420 666f 756e  origin} not foun
+0002e7f0: 6420 666f 7220 7b6e 616d 657d 227d 0a20  d for {name}"}. 
+0002e800: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+0002e810: 636f 6e74 656e 7420 6973 204e 6f6e 653a  content is None:
+0002e820: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002e830: 2072 6574 7572 6e20 7b27 7265 7375 6c74   return {'result
+0002e840: 273a 2027 6661 696c 7572 6527 2c20 2772  ': 'failure', 'r
+0002e850: 6561 736f 6e27 3a20 6622 436f 6e74 656e  eason': f"Conten
+0002e860: 7420 6f66 2066 696c 6520 7b70 6174 687d  t of file {path}
+0002e870: 206e 6f74 2066 6f75 6e64 2066 6f72 207b   not found for {
+0002e880: 6e61 6d65 7d22 7d0a 0a20 2020 2064 6566  name}"}..    def
+0002e890: 2070 7265 7065 6e64 5f69 6e70 7574 5f64   prepend_input_d
+0002e8a0: 6972 2873 656c 662c 206e 6577 6669 6c65  ir(self, newfile
+0002e8b0: 732c 2069 6e70 7574 6469 7229 3a0a 2020  s, inputdir):.  
+0002e8c0: 2020 2020 2020 7265 7375 6c74 7320 3d20        results = 
+0002e8d0: 5b5d 0a20 2020 2020 2020 2066 6f72 2066  [].        for f
+0002e8e0: 6963 2069 6e20 6e65 7766 696c 6573 3a0a  ic in newfiles:.
+0002e8f0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+0002e900: 7369 6e73 7461 6e63 6528 6669 632c 2073  sinstance(fic, s
+0002e910: 7472 2920 616e 6420 6e6f 7420 6f73 2e70  tr) and not os.p
+0002e920: 6174 682e 6973 6162 7328 6669 6329 3a0a  ath.isabs(fic):.
+0002e930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e940: 6e65 775f 6669 6320 3d20 6622 7b69 6e70  new_fic = f"{inp
+0002e950: 7574 6469 727d 2f7b 6669 637d 220a 2020  utdir}/{fic}".  
+0002e960: 2020 2020 2020 2020 2020 656c 6966 2069            elif i
+0002e970: 7369 6e73 7461 6e63 6528 6669 632c 2064  sinstance(fic, d
+0002e980: 6963 7429 2061 6e64 2027 6f72 6967 696e  ict) and 'origin
+0002e990: 2720 696e 2066 6963 2061 6e64 206e 6f74  ' in fic and not
+0002e9a0: 206f 732e 7061 7468 2e69 7361 6273 286f   os.path.isabs(o
+0002e9b0: 732e 7061 7468 2e65 7870 616e 6475 7365  s.path.expanduse
+0002e9c0: 7228 6669 635b 276f 7269 6769 6e27 5d29  r(fic['origin'])
+0002e9d0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0002e9e0: 2020 206e 6577 5f66 6963 203d 2066 6963     new_fic = fic
+0002e9f0: 2e63 6f70 7928 290a 2020 2020 2020 2020  .copy().        
+0002ea00: 2020 2020 2020 2020 6e65 775f 6669 635b          new_fic[
+0002ea10: 276f 7269 6769 6e27 5d20 3d20 6622 7b69  'origin'] = f"{i
+0002ea20: 6e70 7574 6469 727d 2f7b 6669 635b 276f  nputdir}/{fic['o
+0002ea30: 7269 6769 6e27 5d7d 220a 2020 2020 2020  rigin']}".      
+0002ea40: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0002ea50: 2020 2020 2020 2020 2020 2020 6e65 775f              new_
+0002ea60: 6669 6320 3d20 6669 630a 2020 2020 2020  fic = fic.      
+0002ea70: 2020 2020 2020 7265 7375 6c74 732e 6170        results.ap
+0002ea80: 7065 6e64 286e 6577 5f66 6963 290a 2020  pend(new_fic).  
+0002ea90: 2020 2020 2020 7265 7475 726e 2072 6573        return res
+0002eaa0: 756c 7473 0a0a 2020 2020 6465 6620 7265  ults..    def re
+0002eab0: 6d65 6469 6174 655f 6669 6c65 7328 7365  mediate_files(se
+0002eac0: 6c66 2c20 6e61 6d65 2c20 6e65 7766 696c  lf, name, newfil
+0002ead0: 6573 2c20 6f76 6572 7269 6465 733d 7b7d  es, overrides={}
+0002eae0: 2c20 696e 7075 7464 6972 3d27 2e27 293a  , inputdir='.'):
+0002eaf0: 0a20 2020 2020 2020 2075 7064 6174 6564  .        updated
+0002eb00: 5f66 696c 6573 203d 205b 5d0a 2020 2020  _files = [].    
+0002eb10: 2020 2020 6970 2c20 766d 706f 7274 203d      ip, vmport =
+0002eb20: 205f 7373 685f 6372 6564 656e 7469 616c   _ssh_credential
+0002eb30: 7328 7365 6c66 2e6b 2c20 6e61 6d65 295b  s(self.k, name)[
+0002eb40: 313a 5d0a 2020 2020 2020 2020 6966 2069  1:].        if i
+0002eb50: 6e70 7574 6469 7220 213d 2027 2e27 3a0a  nputdir != '.':.
+0002eb60: 2020 2020 2020 2020 2020 2020 6e65 7766              newf
+0002eb70: 696c 6573 203d 2073 656c 662e 7072 6570  iles = self.prep
+0002eb80: 656e 645f 696e 7075 745f 6469 7228 6e65  end_input_dir(ne
+0002eb90: 7766 696c 6573 2c20 696e 7075 7464 6972  wfiles, inputdir
+0002eba0: 290a 2020 2020 2020 2020 7365 6c66 2e70  ).        self.p
+0002ebb0: 6172 7365 5f66 696c 6573 286e 616d 652c  arse_files(name,
+0002ebc0: 206e 6577 6669 6c65 7329 0a20 2020 2020   newfiles).     
+0002ebd0: 2020 206f 7665 7272 6964 6573 5f66 696c     overrides_fil
+0002ebe0: 6573 203d 206f 7665 7272 6964 6573 2e63  es = overrides.c
+0002ebf0: 6f70 7928 290a 2020 2020 2020 2020 6f76  opy().        ov
+0002ec00: 6572 7269 6465 735f 6669 6c65 735b 276e  errides_files['n
+0002ec10: 616d 6527 5d20 3d20 6e61 6d65 0a20 2020  ame'] = name.   
+0002ec20: 2020 2020 2064 6174 6120 3d20 7072 6f63       data = proc
+0002ec30: 6573 735f 6669 6c65 7328 6669 6c65 733d  ess_files(files=
+0002ec40: 6e65 7766 696c 6573 2c20 6f76 6572 7269  newfiles, overri
+0002ec50: 6465 733d 6f76 6572 7269 6465 735f 6669  des=overrides_fi
+0002ec60: 6c65 732c 2072 656d 6564 6961 7465 3d54  les, remediate=T
+0002ec70: 7275 6529 0a20 2020 2020 2020 2064 6174  rue).        dat
+0002ec80: 6164 6972 7320 3d20 7b7d 0a20 2020 2020  adirs = {}.     
+0002ec90: 2020 2077 6974 6820 5465 6d70 6f72 6172     with Temporar
+0002eca0: 7944 6972 6563 746f 7279 2829 2061 7320  yDirectory() as 
+0002ecb0: 746d 7064 6972 3a0a 2020 2020 2020 2020  tmpdir:.        
+0002ecc0: 2020 2020 666f 7220 696e 6465 782c 2065      for index, e
+0002ecd0: 6e74 7279 2069 6e20 656e 756d 6572 6174  ntry in enumerat
+0002ece0: 6528 6461 7461 293a 0a20 2020 2020 2020  e(data):.       
+0002ecf0: 2020 2020 2020 2020 2064 6573 7469 6e61           destina
+0002ed00: 7469 6f6e 203d 2065 6e74 7279 5b27 7061  tion = entry['pa
+0002ed10: 7468 275d 0a20 2020 2020 2020 2020 2020  th'].           
+0002ed20: 2020 2020 2070 6174 6864 6972 203d 206f       pathdir = o
+0002ed30: 732e 7061 7468 2e64 6972 6e61 6d65 2864  s.path.dirname(d
+0002ed40: 6573 7469 6e61 7469 6f6e 290a 2020 2020  estination).    
+0002ed50: 2020 2020 2020 2020 2020 2020 6966 2070              if p
+0002ed60: 6174 6864 6972 206e 6f74 2069 6e20 6461  athdir not in da
+0002ed70: 7461 6469 7273 3a0a 2020 2020 2020 2020  tadirs:.        
+0002ed80: 2020 2020 2020 2020 2020 2020 7061 7468              path
+0002ed90: 6469 7263 6d64 203d 2066 276c 7320 2d61  dircmd = f'ls -a
+0002eda0: 207b 7061 7468 6469 727d 2032 3e26 3127   {pathdir} 2>&1'
+0002edb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002edc0: 2020 2020 2070 6174 6864 6972 636d 6420       pathdircmd 
+0002edd0: 3d20 7373 6828 6e61 6d65 2c20 6970 3d69  = ssh(name, ip=i
+0002ede0: 702c 2075 7365 723d 2772 6f6f 7427 2c20  p, user='root', 
+0002edf0: 7475 6e6e 656c 3d73 656c 662e 7475 6e6e  tunnel=self.tunn
+0002ee00: 656c 2c20 7475 6e6e 656c 686f 7374 3d73  el, tunnelhost=s
+0002ee10: 656c 662e 7475 6e6e 656c 686f 7374 2c0a  elf.tunnelhost,.
+0002ee20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ee30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ee40: 2020 2020 2074 756e 6e65 6c70 6f72 743d       tunnelport=
+0002ee50: 7365 6c66 2e74 756e 6e65 6c70 6f72 742c  self.tunnelport,
+0002ee60: 2074 756e 6e65 6c75 7365 723d 7365 6c66   tunneluser=self
+0002ee70: 2e74 756e 6e65 6c75 7365 722c 2069 6e73  .tunneluser, ins
+0002ee80: 6563 7572 653d 5472 7565 2c0a 2020 2020  ecure=True,.    
+0002ee90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002eea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002eeb0: 2063 6d64 3d70 6174 6864 6972 636d 642c   cmd=pathdircmd,
+0002eec0: 2076 6d70 6f72 743d 766d 706f 7274 290a   vmport=vmport).
+0002eed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002eee0: 2020 2020 7061 7468 6469 7266 696c 6573      pathdirfiles
+0002eef0: 203d 206f 732e 706f 7065 6e28 7061 7468   = os.popen(path
+0002ef00: 6469 7263 6d64 292e 7265 6164 6c69 6e65  dircmd).readline
+0002ef10: 7328 290a 2020 2020 2020 2020 2020 2020  s().            
+0002ef20: 2020 2020 2020 2020 6966 206c 656e 2870          if len(p
+0002ef30: 6174 6864 6972 6669 6c65 7329 203d 3d20  athdirfiles) == 
+0002ef40: 3120 616e 6420 274e 6f20 7375 6368 2066  1 and 'No such f
+0002ef50: 696c 6520 6f72 2064 6972 6563 746f 7279  ile or directory
+0002ef60: 2720 696e 2070 6174 6864 6972 6669 6c65  ' in pathdirfile
+0002ef70: 735b 305d 3a0a 2020 2020 2020 2020 2020  s[0]:.          
+0002ef80: 2020 2020 2020 2020 2020 2020 2020 6372                cr
+0002ef90: 6561 7465 6469 7263 6d64 203d 2066 276d  eatedircmd = f'm
+0002efa0: 6b64 6972 202d 7020 7b70 6174 6864 6972  kdir -p {pathdir
+0002efb0: 7d27 0a20 2020 2020 2020 2020 2020 2020  }'.             
+0002efc0: 2020 2020 2020 2020 2020 2063 7265 6174             creat
+0002efd0: 6564 6972 636d 6420 3d20 7373 6828 6e61  edircmd = ssh(na
+0002efe0: 6d65 2c20 6970 3d69 702c 2075 7365 723d  me, ip=ip, user=
+0002eff0: 2772 6f6f 7427 2c20 7475 6e6e 656c 3d73  'root', tunnel=s
+0002f000: 656c 662e 7475 6e6e 656c 2c20 7475 6e6e  elf.tunnel, tunn
+0002f010: 656c 686f 7374 3d73 656c 662e 7475 6e6e  elhost=self.tunn
+0002f020: 656c 686f 7374 2c0a 2020 2020 2020 2020  elhost,.        
+0002f030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f050: 2020 2074 756e 6e65 6c70 6f72 743d 7365     tunnelport=se
+0002f060: 6c66 2e74 756e 6e65 6c70 6f72 742c 2074  lf.tunnelport, t
+0002f070: 756e 6e65 6c75 7365 723d 7365 6c66 2e74  unneluser=self.t
+0002f080: 756e 6e65 6c75 7365 722c 2069 6e73 6563  unneluser, insec
+0002f090: 7572 653d 5472 7565 2c0a 2020 2020 2020  ure=True,.      
+0002f0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f0c0: 2020 2020 2063 6d64 3d63 7265 6174 6564       cmd=created
+0002f0d0: 6972 636d 642c 2076 6d70 6f72 743d 766d  ircmd, vmport=vm
+0002f0e0: 706f 7274 290a 2020 2020 2020 2020 2020  port).          
+0002f0f0: 2020 2020 2020 2020 2020 2020 2020 6f73                os
+0002f100: 2e70 6f70 656e 2863 7265 6174 6564 6972  .popen(createdir
+0002f110: 636d 6429 0a20 2020 2020 2020 2020 2020  cmd).           
+0002f120: 2020 2020 2020 2020 2020 2020 2070 6174               pat
+0002f130: 6864 6972 6669 6c65 7320 3d20 5b5d 0a20  hdirfiles = []. 
+0002f140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f150: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0002f160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f170: 2070 6174 6864 6972 6669 6c65 7320 3d20   pathdirfiles = 
+0002f180: 5b78 2e73 7472 6970 2829 2066 6f72 2078  [x.strip() for x
+0002f190: 2069 6e20 7061 7468 6469 7266 696c 6573   in pathdirfiles
+0002f1a0: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+0002f1b0: 2020 2020 2020 6461 7461 6469 7273 5b70        datadirs[p
+0002f1c0: 6174 6864 6972 5d20 3d20 7061 7468 6469  athdir] = pathdi
+0002f1d0: 7266 696c 6573 0a20 2020 2020 2020 2020  rfiles.         
+0002f1e0: 2020 2020 2020 2069 6620 6f73 2e70 6174         if os.pat
+0002f1f0: 682e 6261 7365 6e61 6d65 2864 6573 7469  h.basename(desti
+0002f200: 6e61 7469 6f6e 2920 6e6f 7420 696e 2064  nation) not in d
+0002f210: 6174 6164 6972 735b 7061 7468 6469 725d  atadirs[pathdir]
+0002f220: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0002f230: 2020 2020 2020 7070 7269 6e74 2866 2255        pprint(f"U
+0002f240: 7064 6174 696e 6720 7b64 6573 7469 6e61  pdating {destina
+0002f250: 7469 6f6e 7d20 696e 207b 6e61 6d65 7d22  tion} in {name}"
+0002f260: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0002f270: 2020 2020 2020 736f 7572 6365 203d 2066        source = f
+0002f280: 227b 746d 7064 6972 7d2f 6669 637b 696e  "{tmpdir}/fic{in
+0002f290: 6465 787d 220a 2020 2020 2020 2020 2020  dex}".          
+0002f2a0: 2020 2020 2020 2020 2020 7769 7468 206f            with o
+0002f2b0: 7065 6e28 736f 7572 6365 2c20 2777 2729  pen(source, 'w')
+0002f2c0: 2061 7320 663a 0a20 2020 2020 2020 2020   as f:.         
+0002f2d0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0002f2e0: 2e77 7269 7465 2865 6e74 7279 5b27 636f  .write(entry['co
+0002f2f0: 6e74 656e 7427 5d29 0a20 2020 2020 2020  ntent']).       
+0002f300: 2020 2020 2020 2020 2020 2020 2073 6370               scp
+0002f310: 636d 6420 3d20 7363 7028 6e61 6d65 2c20  cmd = scp(name, 
+0002f320: 6970 3d69 702c 2075 7365 723d 2772 6f6f  ip=ip, user='roo
+0002f330: 7427 2c20 736f 7572 6365 3d73 6f75 7263  t', source=sourc
+0002f340: 652c 2064 6573 7469 6e61 7469 6f6e 3d64  e, destination=d
+0002f350: 6573 7469 6e61 7469 6f6e 2c20 7475 6e6e  estination, tunn
+0002f360: 656c 3d73 656c 662e 7475 6e6e 656c 2c0a  el=self.tunnel,.
+0002f370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f390: 2074 756e 6e65 6c68 6f73 743d 7365 6c66   tunnelhost=self
+0002f3a0: 2e74 756e 6e65 6c68 6f73 742c 2074 756e  .tunnelhost, tun
+0002f3b0: 6e65 6c70 6f72 743d 7365 6c66 2e74 756e  nelport=self.tun
+0002f3c0: 6e65 6c70 6f72 742c 2074 756e 6e65 6c75  nelport, tunnelu
+0002f3d0: 7365 723d 7365 6c66 2e74 756e 6e65 6c75  ser=self.tunnelu
+0002f3e0: 7365 722c 0a20 2020 2020 2020 2020 2020  ser,.           
+0002f3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f400: 2020 2020 2020 646f 776e 6c6f 6164 3d46        download=F
+0002f410: 616c 7365 2c20 696e 7365 6375 7265 3d54  alse, insecure=T
+0002f420: 7275 652c 2076 6d70 6f72 743d 766d 706f  rue, vmport=vmpo
+0002f430: 7274 290a 2020 2020 2020 2020 2020 2020  rt).            
+0002f440: 2020 2020 2020 2020 6f73 2e73 7973 7465          os.syste
+0002f450: 6d28 7363 7063 6d64 290a 2020 2020 2020  m(scpcmd).      
+0002f460: 2020 2020 2020 2020 2020 2020 2020 7570                up
+0002f470: 6461 7465 645f 6669 6c65 732e 6170 7065  dated_files.appe
+0002f480: 6e64 2864 6573 7469 6e61 7469 6f6e 290a  nd(destination).
+0002f490: 2020 2020 2020 2020 7265 7475 726e 2075          return u
+0002f4a0: 7064 6174 6564 5f66 696c 6573 0a0a 2020  pdated_files..  
+0002f4b0: 2020 6465 6620 696e 666f 5f73 7065 6369    def info_speci
+0002f4c0: 6669 635f 706c 616e 2873 656c 662c 2070  fic_plan(self, p
+0002f4d0: 6c61 6e29 3a0a 2020 2020 2020 2020 7070  lan):.        pp
+0002f4e0: 7269 6e74 2866 2250 726f 7669 6469 6e67  rint(f"Providing
+0002f4f0: 2069 6e66 6f72 6d61 7469 6f6e 2061 626f   information abo
+0002f500: 7574 2070 6c61 6e20 7b70 6c61 6e7d 2229  ut plan {plan}")
+0002f510: 0a20 2020 2020 2020 206b 203d 2073 656c  .        k = sel
+0002f520: 662e 6b0a 2020 2020 2020 2020 7265 7375  f.k.        resu
+0002f530: 6c74 7320 3d20 5b5d 0a20 2020 2020 2020  lts = [].       
+0002f540: 2066 6f72 2076 6d20 696e 206b 2e6c 6973   for vm in k.lis
+0002f550: 7428 293a 0a20 2020 2020 2020 2020 2020  t():.           
+0002f560: 2069 6620 766d 2e67 6574 2827 706c 616e   if vm.get('plan
+0002f570: 272c 2027 2729 203d 3d20 706c 616e 3a0a  ', '') == plan:.
+0002f580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f590: 7265 7375 6c74 732e 6170 7065 6e64 2876  results.append(v
+0002f5a0: 6d29 0a20 2020 2020 2020 2072 6574 7572  m).        retur
+0002f5b0: 6e20 7265 7375 6c74 730a 0a20 2020 2064  n results..    d
+0002f5c0: 6566 2061 7574 6f73 6361 6c65 5f63 6c75  ef autoscale_clu
+0002f5d0: 7374 6572 2873 656c 662c 206b 7562 652c  ster(self, kube,
+0002f5e0: 206b 7562 6574 7970 652c 2077 6f72 6b65   kubetype, worke
+0002f5f0: 7273 2c20 7468 7265 7368 6f6c 642c 2069  rs, threshold, i
+0002f600: 646c 6529 3a0a 2020 2020 2020 2020 6966  dle):.        if
+0002f610: 2074 6872 6573 686f 6c64 203e 2039 3939   threshold > 999
+0002f620: 393a 0a20 2020 2020 2020 2020 2020 2070  9:.            p
+0002f630: 7072 696e 7428 6622 536b 6970 7069 6e67  print(f"Skipping
+0002f640: 2061 7574 6f73 6361 6c69 6e67 2075 7020   autoscaling up 
+0002f650: 6368 6563 6b73 2066 6f72 2063 6c75 7374  checks for clust
+0002f660: 6572 207b 6b75 6265 7d20 6173 2070 6572  er {kube} as per
+0002f670: 2074 6872 6573 686f 6c64 207b 7468 7265   threshold {thre
+0002f680: 7368 6f6c 647d 2229 0a20 2020 2020 2020  shold}").       
+0002f690: 2020 2020 2072 6574 7572 6e20 7b27 7265       return {'re
+0002f6a0: 7375 6c74 273a 2027 7375 6363 6573 7327  sult': 'success'
+0002f6b0: 2c20 2777 6f72 6b65 7273 273a 2077 6f72  , 'workers': wor
+0002f6c0: 6b65 7273 7d0a 2020 2020 2020 2020 6966  kers}.        if
+0002f6d0: 2069 646c 6520 3c20 313a 0a20 2020 2020   idle < 1:.     
+0002f6e0: 2020 2020 2020 2070 7072 696e 7428 6622         pprint(f"
+0002f6f0: 536b 6970 7069 6e67 2061 7574 6f73 6361  Skipping autosca
+0002f700: 6c69 6e67 2064 6f77 6e20 6368 6563 6b73  ling down checks
+0002f710: 2066 6f72 2063 6c75 7374 6572 207b 6b75   for cluster {ku
+0002f720: 6265 7d20 6173 2070 6572 2069 646c 6520  be} as per idle 
+0002f730: 7b69 646c 657d 2229 0a20 2020 2020 2020  {idle}").       
+0002f740: 2020 2020 2072 6574 7572 6e20 7b27 7265       return {'re
+0002f750: 7375 6c74 273a 2027 7375 6363 6573 7327  sult': 'success'
+0002f760: 2c20 2777 6f72 6b65 7273 273a 2077 6f72  , 'workers': wor
+0002f770: 6b65 7273 7d0a 2020 2020 2020 2020 7070  kers}.        pp
+0002f780: 7269 6e74 2866 2243 6865 636b 696e 6720  rint(f"Checking 
+0002f790: 6e6f 6e20 7363 6865 6475 6c65 6420 706f  non scheduled po
+0002f7a0: 6473 2063 6f75 6e74 206f 6e20 636c 7573  ds count on clus
+0002f7b0: 7465 7220 7b6b 7562 657d 2229 0a20 2020  ter {kube}").   
+0002f7c0: 2020 2020 2073 656c 6563 746f 7220 3d20       selector = 
+0002f7d0: 2221 6e6f 6465 2d72 6f6c 652e 6b75 6265  "!node-role.kube
+0002f7e0: 726e 6574 6573 2e69 6f2f 636f 6e74 726f  rnetes.io/contro
+0002f7f0: 6c2d 706c 616e 652c 6e6f 6465 2d72 6f6c  l-plane,node-rol
+0002f800: 652e 6b75 6265 726e 6574 6573 2e69 6f2f  e.kubernetes.io/
+0002f810: 776f 726b 6572 220a 2020 2020 2020 2020  worker".        
+0002f820: 6375 7272 656e 7463 6d64 203d 2066 226b  currentcmd = f"k
+0002f830: 7562 6563 746c 2067 6574 206e 6f64 6520  ubectl get node 
+0002f840: 2d2d 7365 6c65 6374 6f72 3d27 7b73 656c  --selector='{sel
+0002f850: 6563 746f 727d 2722 0a20 2020 2020 2020  ector}'".       
+0002f860: 2063 7572 7265 6e74 636d 6420 2b3d 2022   currentcmd += "
+0002f870: 207c 2067 7265 7020 2720 5265 6164 7927   | grep ' Ready'
+0002f880: 220a 2020 2020 2020 2020 776f 726b 6572  ".        worker
+0002f890: 7320 3d20 6c65 6e28 6f73 2e70 6f70 656e  s = len(os.popen
+0002f8a0: 2863 7572 7265 6e74 636d 6429 2e72 6561  (currentcmd).rea
+0002f8b0: 646c 696e 6573 2829 290a 2020 2020 2020  dlines()).      
+0002f8c0: 2020 7065 6e64 696e 6763 6d64 203d 2022    pendingcmd = "
+0002f8d0: 6b75 6265 6374 6c20 6765 7420 706f 6473  kubectl get pods
+0002f8e0: 202d 4120 2d2d 6669 656c 642d 7365 6c65   -A --field-sele
+0002f8f0: 6374 6f72 3d73 7461 7475 732e 7068 6173  ctor=status.phas
+0002f900: 653d 5065 6e64 696e 6720 2d6f 2079 616d  e=Pending -o yam
+0002f910: 6c22 0a20 2020 2020 2020 2070 656e 6469  l".        pendi
+0002f920: 6e67 5f70 6f64 7320 3d20 7961 6d6c 2e73  ng_pods = yaml.s
+0002f930: 6166 655f 6c6f 6164 286f 732e 706f 7065  afe_load(os.pope
+0002f940: 6e28 7065 6e64 696e 6763 6d64 292e 7265  n(pendingcmd).re
+0002f950: 6164 2829 295b 2769 7465 6d73 275d 0a20  ad())['items']. 
+0002f960: 2020 2020 2020 2069 6620 6c65 6e28 7065         if len(pe
+0002f970: 6e64 696e 675f 706f 6473 2920 3e20 7468  nding_pods) > th
+0002f980: 7265 7368 6f6c 643a 0a20 2020 2020 2020  reshold:.       
+0002f990: 2020 2020 2070 7072 696e 7428 6622 5472       pprint(f"Tr
+0002f9a0: 6967 6765 7269 6e67 2073 6361 6c69 6e67  iggering scaling
+0002f9b0: 2075 7020 666f 7220 636c 7573 7465 7220   up for cluster 
+0002f9c0: 7b6b 7562 657d 2061 7320 7468 6572 6520  {kube} as there 
+0002f9d0: 6172 6520 7b6c 656e 2870 656e 6469 6e67  are {len(pending
+0002f9e0: 5f70 6f64 7329 7d20 7065 6e64 696e 6720  _pods)} pending 
+0002f9f0: 706f 6473 2229 0a20 2020 2020 2020 2020  pods").         
+0002fa00: 2020 2077 6f72 6b65 7273 202b 3d20 310a     workers += 1.
+0002fa10: 2020 2020 2020 2020 2020 2020 7070 7269              ppri
+0002fa20: 6e74 2822 5363 616c 696e 6720 7570 2063  nt("Scaling up c
+0002fa30: 6c75 7374 6572 207b 6b75 6265 7d20 746f  luster {kube} to
+0002fa40: 207b 776f 726b 6572 737d 2077 6f72 6b65   {workers} worke
+0002fa50: 7273 2229 0a20 2020 2020 2020 2020 2020  rs").           
+0002fa60: 2072 6573 756c 7420 3d20 7365 6c66 2e73   result = self.s
+0002fa70: 6361 6c65 5f6b 7562 6528 6b75 6265 2c20  cale_kube(kube, 
+0002fa80: 6b75 6265 7479 7065 2c20 6f76 6572 7269  kubetype, overri
+0002fa90: 6465 733d 7b27 776f 726b 6572 7327 3a20  des={'workers': 
+0002faa0: 776f 726b 6572 737d 290a 2020 2020 2020  workers}).      
+0002fab0: 2020 2020 2020 7265 7375 6c74 5b27 776f        result['wo
+0002fac0: 726b 6572 7327 5d20 3d20 776f 726b 6572  rkers'] = worker
+0002fad0: 730a 2020 2020 2020 2020 2020 2020 7265  s.            re
+0002fae0: 7475 726e 2072 6573 756c 740a 2020 2020  turn result.    
+0002faf0: 2020 2020 6e6f 6465 7320 3d20 7b7d 0a20      nodes = {}. 
+0002fb00: 2020 2020 2020 2063 7572 7265 6e74 636d         currentcm
+0002fb10: 6420 3d20 226b 7562 6563 746c 2067 6574  d = "kubectl get
+0002fb20: 2070 6f64 202d 4120 2d6f 2079 616d 6c22   pod -A -o yaml"
+0002fb30: 0a20 2020 2020 2020 2061 6c6c 706f 6473  .        allpods
+0002fb40: 203d 2079 616d 6c2e 7361 6665 5f6c 6f61   = yaml.safe_loa
+0002fb50: 6428 6f73 2e70 6f70 656e 2863 7572 7265  d(os.popen(curre
+0002fb60: 6e74 636d 6429 2e72 6561 6428 2929 5b27  ntcmd).read())['
+0002fb70: 6974 656d 7327 5d0a 2020 2020 2020 2020  items'].        
+0002fb80: 666f 7220 706f 6420 696e 2061 6c6c 706f  for pod in allpo
+0002fb90: 6473 3a0a 2020 2020 2020 2020 2020 2020  ds:.            
+0002fba0: 6e6f 6465 6e61 6d65 203d 2070 6f64 5b27  nodename = pod['
+0002fbb0: 7370 6563 275d 5b27 6e6f 6465 4e61 6d65  spec']['nodeName
+0002fbc0: 275d 0a20 2020 2020 2020 2020 2020 2073  '].            s
+0002fbd0: 7461 7475 7320 3d20 706f 645b 2773 7461  tatus = pod['sta
+0002fbe0: 7475 7327 5d5b 2770 6861 7365 275d 0a20  tus']['phase']. 
+0002fbf0: 2020 2020 2020 2020 2020 2069 6620 7374             if st
+0002fc00: 6174 7573 2021 3d20 2752 756e 6e69 6e67  atus != 'Running
+0002fc10: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+0002fc20: 2020 2063 6f6e 7469 6e75 650a 2020 2020     continue.    
+0002fc30: 2020 2020 2020 2020 6966 206e 6f64 656e          if noden
+0002fc40: 616d 6520 6e6f 7420 696e 206e 6f64 6573  ame not in nodes
+0002fc50: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0002fc60: 2020 6e6f 6465 735b 6e6f 6465 6e61 6d65    nodes[nodename
+0002fc70: 5d20 3d20 310a 2020 2020 2020 2020 2020  ] = 1.          
+0002fc80: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0002fc90: 2020 2020 2020 2020 6e6f 6465 735b 6e6f          nodes[no
+0002fca0: 6465 6e61 6d65 5d20 2b3d 2031 0a20 2020  dename] += 1.   
+0002fcb0: 2020 2020 2074 6f64 656c 6574 6520 3d20       todelete = 
+0002fcc0: 300a 2020 2020 2020 2020 666f 7220 6e6f  0.        for no
+0002fcd0: 6465 2069 6e20 6e6f 6465 733a 0a20 2020  de in nodes:.   
+0002fce0: 2020 2020 2020 2020 2069 6620 6e6f 6465           if node
+0002fcf0: 735b 6e6f 6465 5d20 3c20 6964 6c65 3a0a  s[node] < idle:.
+0002fd00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fd10: 7070 7269 6e74 2866 226e 6f64 6520 7b6e  pprint(f"node {n
+0002fd20: 6f64 657d 2074 6f20 6265 2072 656d 6f76  ode} to be remov
+0002fd30: 6564 2073 696e 6365 2069 7420 6f6e 6c79  ed since it only
+0002fd40: 2068 6173 2074 6865 2066 6f6c 6c6f 7769   has the followi
+0002fd50: 6e67 2070 6f64 733a 207b 6e6f 6465 735b  ng pods: {nodes[
+0002fd60: 6e6f 6465 5d7d 2229 0a20 2020 2020 2020  node]}").       
+0002fd70: 2020 2020 2020 2020 2074 6f64 656c 6574           todelet
+0002fd80: 6520 2b3d 2031 0a20 2020 2020 2020 2069  e += 1.        i
+0002fd90: 6620 746f 6465 6c65 7465 203e 2030 3a0a  f todelete > 0:.
+0002fda0: 2020 2020 2020 2020 2020 2020 7070 7269              ppri
+0002fdb0: 6e74 2866 2254 7269 6767 6572 696e 6720  nt(f"Triggering 
+0002fdc0: 7363 616c 696e 6720 646f 776e 2066 6f72  scaling down for
+0002fdd0: 2063 6c75 7374 6572 207b 6b75 6265 7d20   cluster {kube} 
+0002fde0: 6173 2074 6865 7265 2061 7265 207b 746f  as there are {to
+0002fdf0: 6465 6c65 7465 7d20 6964 6c65 206e 6f64  delete} idle nod
+0002fe00: 6573 2229 0a20 2020 2020 2020 2020 2020  es").           
+0002fe10: 2077 6f72 6b65 7273 203d 2077 6f72 6b65   workers = worke
+0002fe20: 7273 202d 2074 6f64 656c 6574 650a 2020  rs - todelete.  
+0002fe30: 2020 2020 2020 2020 2020 7070 7269 6e74            pprint
+0002fe40: 2866 2253 6361 6c69 6e67 2064 6f77 6e20  (f"Scaling down 
+0002fe50: 636c 7573 7465 7220 7b6b 7562 657d 2074  cluster {kube} t
+0002fe60: 6f20 7b77 6f72 6b65 7273 7d20 776f 726b  o {workers} work
+0002fe70: 6572 7322 290a 2020 2020 2020 2020 2020  ers").          
+0002fe80: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
+0002fe90: 7363 616c 655f 6b75 6265 286b 7562 652c  scale_kube(kube,
+0002fea0: 206b 7562 6574 7970 652c 206f 7665 7272   kubetype, overr
+0002feb0: 6964 6573 3d7b 2777 6f72 6b65 7273 273a  ides={'workers':
+0002fec0: 2077 6f72 6b65 7273 7d29 0a20 2020 2020   workers}).     
+0002fed0: 2020 2020 2020 2072 6573 756c 745b 2777         result['w
+0002fee0: 6f72 6b65 7273 275d 203d 2077 6f72 6b65  orkers'] = worke
+0002fef0: 7273 0a20 2020 2020 2020 2020 2020 2072  rs.            r
+0002ff00: 6574 7572 6e20 7265 7375 6c74 0a20 2020  eturn result.   
+0002ff10: 2020 2020 2072 6574 7572 6e20 7b27 7265       return {'re
+0002ff20: 7375 6c74 273a 2027 7375 6363 6573 7327  sult': 'success'
+0002ff30: 2c20 2777 6f72 6b65 7273 273a 2077 6f72  , 'workers': wor
+0002ff40: 6b65 7273 7d0a 0a20 2020 2064 6566 206c  kers}..    def l
+0002ff50: 6f6f 705f 6175 746f 7363 616c 655f 636c  oop_autoscale_cl
+0002ff60: 7573 7465 7228 7365 6c66 2c20 6b75 6265  uster(self, kube
+0002ff70: 2c20 6b75 6265 7479 7065 2c20 776f 726b  , kubetype, work
+0002ff80: 6572 732c 2074 6872 6573 686f 6c64 2c20  ers, threshold, 
+0002ff90: 6964 6c65 293a 0a20 2020 2020 2020 2070  idle):.        p
+0002ffa0: 7072 696e 7428 6622 5374 6172 7469 6e67  print(f"Starting
+0002ffb0: 2077 6974 6820 7b77 6f72 6b65 7273 7d20   with {workers} 
+0002ffc0: 776f 726b 6572 7322 290a 2020 2020 2020  workers").      
+0002ffd0: 2020 6966 2077 6869 6368 2827 6b75 6265    if which('kube
+0002ffe0: 6374 6c27 2920 6973 204e 6f6e 653a 0a20  ctl') is None:. 
+0002fff0: 2020 2020 2020 2020 2020 2063 6f6d 6d6f             commo
+00030000: 6e2e 6765 745f 6b75 6265 6374 6c28 290a  n.get_kubectl().
+00030010: 2020 2020 2020 2020 2020 2020 6f73 2e65              os.e
+00030020: 6e76 6972 6f6e 5b27 5041 5448 275d 202b  nviron['PATH'] +
+00030030: 3d20 273a 2e27 0a20 2020 2020 2020 2077  = ':.'.        w
+00030040: 6869 6c65 2054 7275 653a 0a20 2020 2020  hile True:.     
+00030050: 2020 2020 2020 2073 656c 6563 746f 7220         selector 
+00030060: 3d20 2221 6e6f 6465 2d72 6f6c 652e 6b75  = "!node-role.ku
+00030070: 6265 726e 6574 6573 2e69 6f2f 636f 6e74  bernetes.io/cont
+00030080: 726f 6c2d 706c 616e 652c 6e6f 6465 2d72  rol-plane,node-r
+00030090: 6f6c 652e 6b75 6265 726e 6574 6573 2e69  ole.kubernetes.i
+000300a0: 6f2f 776f 726b 6572 220a 2020 2020 2020  o/worker".      
+000300b0: 2020 2020 2020 6375 7272 656e 7463 6d64        currentcmd
+000300c0: 203d 2066 226b 7562 6563 746c 2067 6574   = f"kubectl get
+000300d0: 206e 6f64 6520 2d2d 7365 6c65 6374 6f72   node --selector
+000300e0: 3d27 7b73 656c 6563 746f 727d 2722 0a20  ='{selector}'". 
+000300f0: 2020 2020 2020 2020 2020 2063 7572 7265             curre
+00030100: 6e74 636d 6420 2b3d 2022 207c 2067 7265  ntcmd += " | gre
+00030110: 7020 2720 5265 6164 7927 220a 2020 2020  p ' Ready'".    
+00030120: 2020 2020 2020 2020 6375 7272 656e 746e          currentn
+00030130: 6f64 6573 203d 206f 732e 706f 7065 6e28  odes = os.popen(
+00030140: 6375 7272 656e 7463 6d64 292e 7265 6164  currentcmd).read
+00030150: 6c69 6e65 7328 290a 2020 2020 2020 2020  lines().        
+00030160: 2020 2020 6966 206c 656e 2863 7572 7265      if len(curre
+00030170: 6e74 6e6f 6465 7329 2021 3d20 776f 726b  ntnodes) != work
+00030180: 6572 733a 0a20 2020 2020 2020 2020 2020  ers:.           
+00030190: 2020 2020 2070 7072 696e 7428 6622 4f6e       pprint(f"On
+000301a0: 676f 696e 6720 7363 616c 696e 6720 6f70  going scaling op
+000301b0: 6572 6174 696f 6e20 6f6e 2063 6c75 7374  eration on clust
+000301c0: 6572 207b 6b75 6265 7d22 290a 2020 2020  er {kube}").    
+000301d0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+000301e0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+000301f0: 7375 6c74 203d 2073 656c 662e 6175 746f  sult = self.auto
+00030200: 7363 616c 655f 636c 7573 7465 7228 6b75  scale_cluster(ku
+00030210: 6265 2c20 6b75 6265 7479 7065 2c20 776f  be, kubetype, wo
+00030220: 726b 6572 732c 2074 6872 6573 686f 6c64  rkers, threshold
+00030230: 2c20 6964 6c65 290a 2020 2020 2020 2020  , idle).        
+00030240: 2020 2020 2020 2020 6966 2072 6573 756c          if resul
+00030250: 745b 2772 6573 756c 7427 5d20 213d 2027  t['result'] != '
+00030260: 7375 6363 6573 7327 3a0a 2020 2020 2020  success':.      
+00030270: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00030280: 7475 726e 2072 6573 756c 740a 2020 2020  turn result.    
+00030290: 2020 2020 2020 2020 2020 2020 656c 7365              else
+000302a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000302b0: 2020 2020 2020 776f 726b 6572 7320 3d20        workers = 
+000302c0: 7265 7375 6c74 5b27 776f 726b 6572 7327  result['workers'
+000302d0: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+000302e0: 2020 2020 2020 7070 7269 6e74 2866 2243        pprint(f"C
+000302f0: 7572 7265 6e74 2077 6f72 6b65 7273 206e  urrent workers n
+00030300: 756d 6265 7220 6465 7369 7265 643a 207b  umber desired: {
+00030310: 776f 726b 6572 737d 2229 0a20 2020 2020  workers}").     
+00030320: 2020 2020 2020 2073 6c65 6570 2836 3029         sleep(60)
+00030330: 0a0a 2020 2020 6465 6620 7468 7265 6164  ..    def thread
+00030340: 6564 5f77 6562 5f63 6f6e 736f 6c65 2873  ed_web_console(s
+00030350: 656c 662c 2070 6f72 742c 206e 616d 6529  elf, port, name)
+00030360: 3a0a 2020 2020 2020 2020 636f 6e73 6f6c  :.        consol
+00030370: 6520 3d20 4b6d 696e 6963 6f6e 736f 6c65  e = Kminiconsole
+00030380: 2863 6f6e 6669 673d 7365 6c66 2c20 706f  (config=self, po
+00030390: 7274 3d70 6f72 742c 206e 616d 653d 6e61  rt=port, name=na
+000303a0: 6d65 290a 2020 2020 2020 2020 636f 6e73  me).        cons
+000303b0: 6f6c 652e 7275 6e28 290a 0a20 2020 2064  ole.run()..    d
+000303c0: 6566 2077 6562 636f 6e73 6f6c 6528 7365  ef webconsole(se
+000303d0: 6c66 2c20 6e61 6d65 293a 0a20 2020 2020  lf, name):.     
+000303e0: 2020 2070 6f72 7420 3d20 6765 745f 6672     port = get_fr
+000303f0: 6565 5f70 6f72 7428 290a 2020 2020 2020  ee_port().      
+00030400: 2020 7420 3d20 7468 7265 6164 696e 672e    t = threading.
+00030410: 5468 7265 6164 2874 6172 6765 743d 7365  Thread(target=se
+00030420: 6c66 2e74 6872 6561 6465 645f 7765 625f  lf.threaded_web_
+00030430: 636f 6e73 6f6c 652c 2061 7267 733d 2870  console, args=(p
+00030440: 6f72 742c 206e 616d 652c 2929 0a20 2020  ort, name,)).   
+00030450: 2020 2020 2074 2e73 7461 7274 2829 0a20       t.start(). 
+00030460: 2020 2020 2020 2077 6562 6272 6f77 7365         webbrowse
+00030470: 722e 6f70 656e 2866 2268 7474 703a 2f2f  r.open(f"http://
+00030480: 3132 372e 302e 302e 313a 7b70 6f72 747d  127.0.0.1:{port}
+00030490: 222c 206e 6577 3d32 2c20 6175 746f 7261  ", new=2, autora
+000304a0: 6973 653d 5472 7565 290a 0a20 2020 2064  ise=True)..    d
+000304b0: 6566 2069 6e66 6f5f 7370 6563 6966 6963  ef info_specific
+000304c0: 5f61 6b73 2873 656c 662c 2063 6c75 7374  _aks(self, clust
+000304d0: 6572 293a 0a20 2020 2020 2020 2066 726f  er):.        fro
+000304e0: 6d20 6b76 6972 742e 636c 7573 7465 722e  m kvirt.cluster.
+000304f0: 616b 7320 696d 706f 7274 2069 6e66 6f20  aks import info 
+00030500: 6173 2061 6b73 5f69 6e66 6f0a 2020 2020  as aks_info.    
+00030510: 2020 2020 7265 7475 726e 2061 6b73 5f69      return aks_i
+00030520: 6e66 6f28 7365 6c66 2c20 636c 7573 7465  nfo(self, cluste
+00030530: 722c 2073 656c 662e 6465 6275 6729 0a0a  r, self.debug)..
+00030540: 2020 2020 6465 6620 696e 666f 5f73 7065      def info_spe
+00030550: 6369 6669 635f 656b 7328 7365 6c66 2c20  cific_eks(self, 
+00030560: 636c 7573 7465 7229 3a0a 2020 2020 2020  cluster):.      
+00030570: 2020 6672 6f6d 206b 7669 7274 2e63 6c75    from kvirt.clu
+00030580: 7374 6572 2e65 6b73 2069 6d70 6f72 7420  ster.eks import 
+00030590: 696e 666f 2061 7320 656b 735f 696e 666f  info as eks_info
+000305a0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000305b0: 656b 735f 696e 666f 2873 656c 662c 2063  eks_info(self, c
+000305c0: 6c75 7374 6572 2c20 7365 6c66 2e64 6562  luster, self.deb
+000305d0: 7567 290a 0a20 2020 2064 6566 2069 6e66  ug)..    def inf
+000305e0: 6f5f 6b75 6265 5f61 6b73 2873 656c 662c  o_kube_aks(self,
+000305f0: 2071 7569 6574 2c20 7765 623d 4661 6c73   quiet, web=Fals
+00030600: 6529 3a0a 2020 2020 2020 2020 6672 6f6d  e):.        from
+00030610: 206b 7669 7274 2e63 6c75 7374 6572 2069   kvirt.cluster i
+00030620: 6d70 6f72 7420 616b 730a 2020 2020 2020  mport aks.      
+00030630: 2020 706c 616e 6469 7220 3d20 6f73 2e70    plandir = os.p
+00030640: 6174 682e 6469 726e 616d 6528 616b 732e  ath.dirname(aks.
+00030650: 6372 6561 7465 2e5f 5f63 6f64 655f 5f2e  create.__code__.
+00030660: 636f 5f66 696c 656e 616d 6529 0a20 2020  co_filename).   
+00030670: 2020 2020 2069 6e70 7574 6669 6c65 203d       inputfile =
+00030680: 2066 277b 706c 616e 6469 727d 2f66 616b   f'{plandir}/fak
+00030690: 652e 796d 6c27 0a20 2020 2020 2020 2073  e.yml'.        s
+000306a0: 656c 662e 696e 666f 5f70 6c61 6e28 696e  elf.info_plan(in
+000306b0: 7075 7466 696c 652c 2071 7569 6574 3d71  putfile, quiet=q
+000306c0: 7569 6574 2c20 7765 623d 7765 6229 0a20  uiet, web=web). 
+000306d0: 2020 2020 2020 2061 6b73 2e69 6e66 6f5f         aks.info_
+000306e0: 7365 7276 6963 6528 7365 6c66 290a 0a20  service(self).. 
+000306f0: 2020 2064 6566 2069 6e66 6f5f 6b75 6265     def info_kube
+00030700: 5f65 6b73 2873 656c 662c 2071 7569 6574  _eks(self, quiet
+00030710: 2c20 7765 623d 4661 6c73 6529 3a0a 2020  , web=False):.  
+00030720: 2020 2020 2020 6672 6f6d 206b 7669 7274        from kvirt
+00030730: 2e63 6c75 7374 6572 2069 6d70 6f72 7420  .cluster import 
+00030740: 656b 730a 2020 2020 2020 2020 706c 616e  eks.        plan
+00030750: 6469 7220 3d20 6f73 2e70 6174 682e 6469  dir = os.path.di
+00030760: 726e 616d 6528 656b 732e 6372 6561 7465  rname(eks.create
+00030770: 2e5f 5f63 6f64 655f 5f2e 636f 5f66 696c  .__code__.co_fil
+00030780: 656e 616d 6529 0a20 2020 2020 2020 2069  ename).        i
+00030790: 6e70 7574 6669 6c65 203d 2066 277b 706c  nputfile = f'{pl
+000307a0: 616e 6469 727d 2f66 616b 652e 796d 6c27  andir}/fake.yml'
+000307b0: 0a20 2020 2020 2020 2073 656c 662e 696e  .        self.in
+000307c0: 666f 5f70 6c61 6e28 696e 7075 7466 696c  fo_plan(inputfil
+000307d0: 652c 2071 7569 6574 3d71 7569 6574 2c20  e, quiet=quiet, 
+000307e0: 7765 623d 7765 6229 0a20 2020 2020 2020  web=web).       
+000307f0: 2065 6b73 2e69 6e66 6f5f 7365 7276 6963   eks.info_servic
+00030800: 6528 7365 6c66 290a 0a20 2020 2064 6566  e(self)..    def
+00030810: 2069 6e66 6f5f 7370 6563 6966 6963 5f67   info_specific_g
+00030820: 6b65 2873 656c 662c 2063 6c75 7374 6572  ke(self, cluster
+00030830: 293a 0a20 2020 2020 2020 2066 726f 6d20  ):.        from 
+00030840: 6b76 6972 742e 636c 7574 6572 2e67 6b65  kvirt.cluter.gke
+00030850: 2069 6d70 6f72 7420 696e 666f 2061 7320   import info as 
+00030860: 676b 655f 696e 666f 0a20 2020 2020 2020  gke_info.       
+00030870: 2072 6574 7572 6e20 676b 655f 696e 666f   return gke_info
+00030880: 2873 656c 662c 2063 6c75 7374 6572 2c20  (self, cluster, 
+00030890: 7365 6c66 2e64 6562 7567 290a 0a20 2020  self.debug)..   
+000308a0: 2064 6566 2069 6e66 6f5f 6b75 6265 5f67   def info_kube_g
+000308b0: 6b65 2873 656c 662c 2071 7569 6574 2c20  ke(self, quiet, 
+000308c0: 7765 623d 4661 6c73 6529 3a0a 2020 2020  web=False):.    
+000308d0: 2020 2020 6672 6f6d 206b 7669 7274 2e63      from kvirt.c
+000308e0: 6c75 7374 6572 2069 6d70 6f72 7420 676b  luster import gk
+000308f0: 650a 2020 2020 2020 2020 706c 616e 6469  e.        plandi
+00030900: 7220 3d20 6f73 2e70 6174 682e 6469 726e  r = os.path.dirn
+00030910: 616d 6528 676b 652e 6372 6561 7465 2e5f  ame(gke.create._
+00030920: 5f63 6f64 655f 5f2e 636f 5f66 696c 656e  _code__.co_filen
+00030930: 616d 6529 0a20 2020 2020 2020 2069 6e70  ame).        inp
+00030940: 7574 6669 6c65 203d 2066 277b 706c 616e  utfile = f'{plan
+00030950: 6469 727d 2f66 616b 652e 796d 6c27 0a20  dir}/fake.yml'. 
+00030960: 2020 2020 2020 2073 656c 662e 696e 666f         self.info
+00030970: 5f70 6c61 6e28 696e 7075 7466 696c 652c  _plan(inputfile,
+00030980: 2071 7569 6574 3d71 7569 6574 2c20 7765   quiet=quiet, we
+00030990: 623d 7765 6229 0a20 2020 2020 2020 2067  b=web).        g
+000309a0: 6b65 2e69 6e66 6f5f 7365 7276 6963 6528  ke.info_service(
+000309b0: 7365 6c66 290a                           self).
```

## kvirt/examples.py

```diff
@@ -250,14 +250,26 @@
 # Do the same but customize some parameters
 $ kcli create kube openshift -P ctlplanes=1 -P workers=2 myopenshift
 
 # Use a parameter file
 $ kcli create kube openshift --paramfile=myparameters.yml myopenshift
 """
 
+openshiftsnocreate = """# Create an SNO openshift iso named mysno with default values
+$ kcli create openshift-sno myopenshift
+
+# Do the same but wait for install
+$ kcli create openshift-sno -P sno_wait=true myopenshift
+
+# Inject an extra vip in the ISO
+$ kcli create openshift-sno -P api_ip=192.168.1.251 myopenshift
+
+$ kcli create openshift-sno --paramfile=myparameters.yml myopenshift
+"""
+
 vmdatacreate = """# Generate a basic ignition file for rhcos4.6
 $ kcli create vmdata -i rhcos46
 
 # Do the same without injecting any hostname
 $ kcli create vmdata -i rhcos46 -P minimal=true
 
 # Do the same but force the name
```

## kvirt/version/git

```diff
@@ -1 +1 @@
-44e3730 2023/07/16
+6fa1f32 2023/07/17
```

## Comparing `kvirt/cluster/openshift/sno.yml` & `kvirt/cluster/openshift/sno/kcli_plan.yml`

 * *Files identical despite different names*

## Comparing `kcli-99.0.202307161842.dist-info/LICENSE` & `kcli-99.0.202307171045.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `kcli-99.0.202307161842.dist-info/METADATA` & `kcli-99.0.202307171045.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: kcli
-Version: 99.0.202307161842
+Version: 99.0.202307171045
 Summary: Provisioner/Manager for Libvirt/Vsphere/Aws/Gcp/Kubevirt/Ovirt/Openstack/IBM Cloud and containers
 Home-page: http://github.com/karmab/kcli
 Author: Karim Boumedhel
 Author-email: karimboumedhel@gmail.com
 License: ASL
 Platform: UNKNOWN
 License-File: LICENSE
```

## Comparing `kcli-99.0.202307161842.dist-info/RECORD` & `kcli-99.0.202307171045.dist-info/RECORD`

 * *Files 1% similar despite different names*

```diff
@@ -1,16 +1,16 @@
 kvirt/__init__.py,sha256=eoZ6GfifbqhMLNzjlqRDVil-yyBkOmVN9ujSgJWNBlY,15
-kvirt/baseconfig.py,sha256=o-aVSark6kEow6PYGqMvXE1lw6hYXmhjTBKQvEGv3BQ,100542
+kvirt/baseconfig.py,sha256=l1hNK0jdeD9EMvmG1oyopBxMieyJFg9Io0kCgS62C_M,100857
 kvirt/bottle.py,sha256=DMuCINuwVog8XC-D6nPFVzRmo6lnJZ1H3sNK2VICKKE,171487
-kvirt/cli.py,sha256=J2viC5d0-WnYgXeOqjN2roImSRCxAgyXNmrdpMrPs1Q,264818
-kvirt/config.py,sha256=Fsa9uruoWtIwNqye12nwYscWfK3NUYtJRHt9yTHLHQ0,198938
+kvirt/cli.py,sha256=VUbRQtZOWU5u2jNwWPLjtomQisZWwh4aL1pbdzpDPS8,266549
+kvirt/config.py,sha256=AzUzMAWEQcnqIky2G9MPLjhn76y8kMAe6d3juRNQZMc,199094
 kvirt/containerconfig.py,sha256=Pfp1wWU1u1S6S0IT00mWFEAa8FlbTV2qrFE21_cquWA,2851
 kvirt/defaults.py,sha256=ipZ8ubedbgZAcIQ1y7sV4wGMG-dR6QsNld5b4fBmpnI,9442
 kvirt/ekstoken.py,sha256=MjK_tcLFl2VKxqgTSB4ve_kybZw5dBj2H6BezGGtBpM,1475
-kvirt/examples.py,sha256=KNcLLMMtpl1hq7XRP_OPdcX7Yd_l28tJff7_xZPgH3M,21622
+kvirt/examples.py,sha256=_klqX5X4fObbvtPw_1knv-a2Ar0sbB_e_VkEImHKAug,22014
 kvirt/gketoken.py,sha256=tufCvrSBE_L2HEt8CjePvBXes7wkj7auUVJXbgZBblI,1047
 kvirt/ignitionmerger.py,sha256=K22COM_XqYOG28ezUJzoRjQL-jbJqpFWgm7lUwDiVbE,4333
 kvirt/keywords.yaml,sha256=HG5nGzsC2pPwWy86XQjL-UoDw_j8IIy4dVZeGIMP3k0,9871
 kvirt/klist.py,sha256=6rUa1Z7aH-Yx8MAVW-7TvB2DzteGkquBBlPQmei1p8E,3487
 kvirt/ansibleutils/__init__.py,sha256=uxy2it8uvuhDZSIlKOimpqPZtFTPsZ0AX_DLs5y7fSo,6009
 kvirt/cluster/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kvirt/cluster/sampleprovider.py,sha256=OA414n2t54Bd6EIV1K1hXpe3KndPBtRzoYTZRH5JWu4,204
@@ -196,15 +196,14 @@
 kvirt/cluster/openshift/nonlocalbind.conf,sha256=eRCLfWYHqx2UgY3QE1pbXm2iFwERatyihNySEEbeuE8,60
 kvirt/cluster/openshift/openshift-workload-pinning,sha256=hBNL3GLj5yqlIkqIIujA4r7OuGmeFWjmofLBA6j-6Xo,59
 kvirt/cluster/openshift/relocate-ip-bootstrap.service,sha256=UGkz_5NzpMgzfTOcr5kKmCdJk7pCq2gxbC8a-xE84SI,157
 kvirt/cluster/openshift/relocate-ip-bootstrap.sh,sha256=ULOY5S0HfirvWtsVxsU-FxUOn7CSlr3TOdKUBItx-1s,281
 kvirt/cluster/openshift/relocate-ip.sh,sha256=yLSNRloRaIwv3rVzGCqoGg38YKQ90yAAr_hpp319YAk,690
 kvirt/cluster/openshift/sno-finish.service,sha256=ZK979qFu7RYofhStnClyOlfUOfqL2hY7Shs0yvt3F24,212
 kvirt/cluster/openshift/sno-finish.sh,sha256=zfOIkUZlJjKuezFoG4cLgFnDkupudzyX0Ukxm55M5To,2085
-kvirt/cluster/openshift/sno.yml,sha256=xnqZN5XBPrfiBdMmxb2PBo8q6kMvGoax4rxDHDp6KkA,660
 kvirt/cluster/openshift/workers.yml,sha256=nOupRfx5fAieeU0CcgTjY4uAiwyFBZh95YvMQuAQOWc,1615
 kvirt/cluster/openshift/apps/cr.sh,sha256=P5WGXGFoNI_9mEdfHc6fIIwVv0j5N_fFi3R-Pg6GOxA,40
 kvirt/cluster/openshift/apps/install.yml.j2,sha256=F3rwE3_RJ5a1_m71c7GzWEGHlVpKXEFWS3RUtGZMlOo,768
 kvirt/cluster/openshift/apps/advanced-cluster-management/99-metal3-provisioning.yaml,sha256=HJ_rl-F-qNm6tQcvkqnDT8aAu-FwQLMOUXBZ9UxaDxg,162
 kvirt/cluster/openshift/apps/advanced-cluster-management/assisted-service.sample.yml,sha256=Ce98pfYagqx9A1pvrULGp13OBW7qQLjInCR62BsYGew,2934
 kvirt/cluster/openshift/apps/advanced-cluster-management/assisted-service.sh,sha256=y95Tk93PQsBcGP-sjUqeoWWebWLXK9aWPpYyQwi-Lfc,2839
 kvirt/cluster/openshift/apps/advanced-cluster-management/cr.yml,sha256=PWCsre6ChpTGgLE5-j6DHaBahc7Dd-A_e8xCQFAR9EY,418
@@ -271,14 +270,16 @@
 kvirt/cluster/openshift/disconnected/scripts/03_mirror.sh,sha256=xUMjjzCxlGC2SmYNO2YDbARWNBDqFawW0dRbIbwjcJY,2381
 kvirt/cluster/openshift/disconnected/scripts/03_registry.sh,sha256=_f0EtbS5Di8ioBbbQQd8FcuZKvquBfnWwztwTN_d7k0,2046
 kvirt/cluster/openshift/disconnected/scripts/04_extras.sh,sha256=aHzg-QtoTTfso8iNxYPpdtS_tiveg2LeNLgNyv7xkvI,337
 kvirt/cluster/openshift/disconnected/scripts/05_olm.sh,sha256=6rbVEmB6JAGsh4TNf0K8rga21rn7Sl0ESMAw9sRTiYo,2319
 kvirt/cluster/openshift/disconnected/scripts/06_web.sh,sha256=AzpvAtt3BjG1cvCA3-wEdQ4LiGJ6KYwpOcRKxW22gMQ,241
 kvirt/cluster/openshift/disconnected/scripts/deploy.sh,sha256=IcTj2mKY-w8jS_3vY0EY0I7LK4G0MVpZMg_iPRmJP9A,733
 kvirt/cluster/openshift/disconnected/scripts/mirror-config.yaml.sample,sha256=P7bWcqRT3ZjHmgcL3j5ft5B0vm_XTp-LgTY0oBRx5Ro,4223
+kvirt/cluster/openshift/sno/kcli_default.yml,sha256=aEaAK9IjlPndT48Kkmo4uGBTM9o8sjsxp_BVVesmFrI,945
+kvirt/cluster/openshift/sno/kcli_plan.yml,sha256=xnqZN5XBPrfiBdMmxb2PBo8q6kMvGoax4rxDHDp6KkA,660
 kvirt/cluster/openshift/staticpods/coredns.yml,sha256=mJUPks8W68XU586E9d2MD-xAa5QRh7Qhm9Xr2HhmkdY,2557
 kvirt/cluster/openshift/staticpods/haproxy.yml,sha256=FusgP4irNwIb1a4_kh5mAXKSPwW37ZVuxp9wfdcaOGk,987
 kvirt/cluster/openshift/staticpods/keepalived.yml,sha256=xNpZoSX8qjqpd_3-senrZDRFBttVtdaRDOF3BAoccnc,2539
 kvirt/cluster/openshift/staticpods/mdns.yml,sha256=ttElI3ATZ2Y1kR1t5AJrcf-kdA6_t3RifaLOo4wU-IY,1721
 kvirt/cluster/profiles/sample-kubeadm-default.yml,sha256=nSVV2Q5610SHemeErWF6eXqYAko3M2euNMPk_KYkvOc,193
 kvirt/cluster/profiles/sample-openshift-compact.yml,sha256=sYA9UXAnSFaiXJLPvA6A8_TY--A3xEp3fiWFBr3pA_Y,135
 kvirt/cluster/profiles/sample-openshift-contrail.yml,sha256=BRIQ9q5KdsklWBtCcUo56XP7N5-ZKVGxpTEYyA063ug,210
@@ -364,15 +365,15 @@
 kvirt/providers/packet/__init__.py,sha256=z71vF3yFtt36u2xcIlDdpLtQ0Tvv30acFyllwPZ2qOo,31230
 kvirt/providers/proxmox/__init__.py,sha256=5103mBH3aQ19vgL9CtIm_JPDrZ0hQ2rn4AU7e21TnBc,34424
 kvirt/providers/vsphere/__init__.py,sha256=-Yap7VbRjUjWI9mrvDnvGks5rW37UolJl7_wphBsnck,73215
 kvirt/providers/vsphere/helpers.py,sha256=F1rB_AHISd8TFYQ6eRolQmCVqU8KFAa36CCwjDj-vqw,13655
 kvirt/providers/vsphere/tagging.py,sha256=7RqFIUETSzHAjS0F_8-j145-_8lca7aDUsCxs4DhQVQ,4893
 kvirt/providers/web/__init__.py,sha256=5fTs7xbQ2TT9uCUp6TtYWQVl6ywsB-efH7_PgX1wrZI,21420
 kvirt/version/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-kvirt/version/git,sha256=MCeP9LGvYMZXG9dHuDrX17tJv6dln31-yMu1kZuQUFE,19
+kvirt/version/git,sha256=70aj6Nci7ahuszlMBKKVB3sAgCs9EukhNHkt9Rt5AIY,19
 kvirt/web/__init__.py,sha256=mz6UtxtapEZzgWy-6KWw5pwNQUhUxWyHqFOh1HUlQZk,46652
 kvirt/web/main.py,sha256=DIb6tW3ce7wCc83kD9HBCG4ALJuLItp9uaP6tzdsm_Y,261
 kvirt/web/static/css/bootstrap-notify.css,sha256=ibUTW-jDj-F8d1T1KZ4DOujRmVTFfvMKL9y14QgEaPQ,408
 kvirt/web/static/css/bootstrap-theme.min.css,sha256=ZT4HPpdCOt2lvDkXokHuhJfdOKSPFLzeAJik5U_Q-l4,23409
 kvirt/web/static/css/bootstrap.min.css,sha256=E-dwlJxOS7dOrKCvR-5WCqiHCbIHLl59MMDVsfU4oiU,121125
 kvirt/web/static/css/dataTables.checkboxes.css,sha256=H-x4lWeyX3jMsghnkCUUTO2lXjRpJ8pxhUj3YAqaBrQ,399
 kvirt/web/static/css/jquery.dataTables.min.css,sha256=-Z1rYa3ys5OdZNUck5G7lBvb8A13OrYwvf-d8PfEaHQ,13587
@@ -606,13 +607,13 @@
 kvirt/web/templates/repos.html,sha256=HaFCTQjX3zSaqyV05Y_wG0vSkOWDpc-wj6Uj5TLbiFg,475
 kvirt/web/templates/repostable.html,sha256=6HH8sgdppR-yojQspdcI59ju4e9HZYVvV6uvnPxqbeo,1203
 kvirt/web/templates/vmcreate.html,sha256=FG3OoQEKTpeo8spJ1WiqYVkOp672saYRQKujNWOA3uQ,958
 kvirt/web/templates/vmprofiles.html,sha256=T65Cv7povhBtD2dyuWkWJE6byaA9EYtLSk5gtcQlHIU,486
 kvirt/web/templates/vmprofilestable.html,sha256=-8viNOqSvN_yzimENxq7Q0187zbflOn8p8zpgx0Vyek,1420
 kvirt/web/templates/vms.html,sha256=k2ptKeiLFdpzgfbk6xi__sduu0UALYXXrnrmDEmAfaQ,470
 kvirt/web/templates/vmstable.html,sha256=ikuYkIm_ocvGIBXFyJt1-tBjwQWCyqkgC08leoXgR54,4894
-kcli-99.0.202307161842.dist-info/LICENSE,sha256=z8d0m5b2O9McPEK1xHG_dWgUBT6EfBDz6wA0F7xSPTA,11358
-kcli-99.0.202307161842.dist-info/METADATA,sha256=Py4kjiP2tNGOnDfu9zRd-666-WAQYLKZXC9J0mGLUdM,4240
-kcli-99.0.202307161842.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-kcli-99.0.202307161842.dist-info/entry_points.txt,sha256=BrQuU8qI-1nidLF1G4COY5zxOvhu4akPk_teiSsx2D0,281
-kcli-99.0.202307161842.dist-info/top_level.txt,sha256=FwVTxtMIWdr8QBk5mTfd0f_GheFlRR_vn4zl6p5N57s,6
-kcli-99.0.202307161842.dist-info/RECORD,,
+kcli-99.0.202307171045.dist-info/LICENSE,sha256=z8d0m5b2O9McPEK1xHG_dWgUBT6EfBDz6wA0F7xSPTA,11358
+kcli-99.0.202307171045.dist-info/METADATA,sha256=EeTYWw6_l3GBdn7TngHSJ9cfcGAC71GMdaHeLrcaAwg,4240
+kcli-99.0.202307171045.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
+kcli-99.0.202307171045.dist-info/entry_points.txt,sha256=BrQuU8qI-1nidLF1G4COY5zxOvhu4akPk_teiSsx2D0,281
+kcli-99.0.202307171045.dist-info/top_level.txt,sha256=FwVTxtMIWdr8QBk5mTfd0f_GheFlRR_vn4zl6p5N57s,6
+kcli-99.0.202307171045.dist-info/RECORD,,
```

