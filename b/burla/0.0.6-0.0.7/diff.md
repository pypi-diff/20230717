# Comparing `tmp/burla-0.0.6.tar.gz` & `tmp/burla-0.0.7.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "burla-0.0.6.tar", max compression
+gzip compressed data, was "burla-0.0.7.tar", max compression
```

## Comparing `burla-0.0.6.tar` & `burla-0.0.7.tar`

### file list

```diff
@@ -1,6 +1,6 @@
--rw-r--r--   0        0        0      486 2023-07-13 20:10:03.234590 burla-0.0.6/pyproject.toml
--rw-r--r--   0        0        0      175 2023-07-13 18:25:13.491110 burla-0.0.6/src/burla/__init__.py
--rw-r--r--   0        0        0     1352 2023-07-12 19:34:52.816658 burla-0.0.6/src/burla/_logstream.py
--rw-r--r--   0        0        0      907 2023-07-13 18:24:57.649392 burla-0.0.6/src/burla/config.py
--rw-r--r--   0        0        0     3884 2023-07-13 19:36:19.611107 burla-0.0.6/src/burla/remote_parallel_map.py
--rw-r--r--   0        0        0      578 1970-01-01 00:00:00.000000 burla-0.0.6/PKG-INFO
+-rw-r--r--   0        0        0      503 2023-07-17 15:45:57.027703 burla-0.0.7/pyproject.toml
+-rw-r--r--   0        0        0      175 2023-07-13 18:25:13.491110 burla-0.0.7/src/burla/__init__.py
+-rw-r--r--   0        0        0     1352 2023-07-12 19:34:52.816658 burla-0.0.7/src/burla/_logstream.py
+-rw-r--r--   0        0        0      907 2023-07-13 18:24:57.649392 burla-0.0.7/src/burla/config.py
+-rw-r--r--   0        0        0     4064 2023-07-17 15:56:22.078209 burla-0.0.7/src/burla/remote_parallel_map.py
+-rw-r--r--   0        0        0      616 1970-01-01 00:00:00.000000 burla-0.0.7/PKG-INFO
```

### Comparing `burla-0.0.6/src/burla/_logstream.py` & `burla-0.0.7/src/burla/_logstream.py`

 * *Files identical despite different names*

### Comparing `burla-0.0.6/src/burla/config.py` & `burla-0.0.7/src/burla/config.py`

 * *Files identical despite different names*

### Comparing `burla-0.0.6/src/burla/remote_parallel_map.py` & `burla-0.0.7/src/burla/remote_parallel_map.py`

 * *Files 10% similar despite different names*

```diff
@@ -1,21 +1,25 @@
 import sys
 import requests
 import threading
 import warnings
-from binascii import hexlify
+import pickle
+from six import reraise
 from typing import Callable, Optional
 from time import sleep, time
 from queue import PriorityQueue
 
 import dill
+from tblib import pickling_support
 
 from burla._logstream import print_logs_from_queue
 from burla.config import load_api_key_from_local_config
 
+pickling_support.install()
+
 BURLA_SERVICE_URL = "https://burla-webservice-gxc7eo4ala-uc.a.run.app"
 JOB_ENV_REPO = "us-east4-docker.pkg.dev/burla-389321/burla-job-environments"
 
 # BURLA_SERVICE_URL = "https://127.0.0.1:5000"
 
 JOB_STATUS_POLL_RATE_SEC = 6  # how often to check for job completion
 TIMEOUT_MIN = 60 * 12  # max time a Burla job can run for
@@ -64,15 +68,15 @@
     job_id = response.json()["job_id"]
 
     user_python_version = f"{sys.version_info.major}.{sys.version_info.minor}"
     default_docker_image = f"{JOB_ENV_REPO}/python{user_python_version}/burla_job_env:latest"
 
     data = {
         "key": api_key,
-        "func_pkl_hex_ascii": hexlify(dill.dumps(function_.__code__)).decode("ascii"),
+        "function_pkl_hex": dill.dumps(function_.__code__).hex(),
         "inputs": inputs,
         "image": image or default_docker_image,
         "num_computers": cpus,
     }
     job_started_at_epoch = int(time())
     response = requests.post(f"{BURLA_SERVICE_URL}/v1/jobs/{job_id}", json=data)
     response.raise_for_status()
@@ -81,17 +85,15 @@
     epoch = last_epoch
     job_is_running = True
     job_timed_out = False
 
     # Start printing logs generated by this job using a separate thread.
     print_queue = PriorityQueue()
     stop_event = threading.Event()
-    log_thread = threading.Thread(
-        target=print_logs_from_queue, args=(print_queue, stop_event), daemon=True
-    )
+    log_thread = threading.Thread(target=print_logs_from_queue, args=(print_queue, stop_event))
     log_thread.start()
 
     # loop until job finishes, or times out
     while job_is_running and (not job_timed_out):
         # TODO: record and subtract time so this loop always takes exactly JOB_STATUS_POLL_RATE_SEC
         # sec to run? This might fix late logs?
         sleep(JOB_STATUS_POLL_RATE_SEC)
@@ -100,16 +102,21 @@
 
         # add all logs to print queue
         for epoch, log_message in job["logs"]:
             print_queue.put((epoch, log_message))
 
         last_epoch = epoch
         job_is_running = job["job_is_done"] == False
+        job_failed = job.get("error") is not None
         job_timed_out = (time() - job_started_at_epoch) > (TIMEOUT_MIN * 60)
 
     stop_event.set()
     log_thread.join()
 
+    if job_failed:
+        error = pickle.loads(bytes.fromhex(job.get("error")))
+        reraise(*error)
+
     if job_timed_out:
         raise JobTimeoutError(job_id=job_id, timeout=TIMEOUT_MIN)
 
     return job["return_values"]
```

### Comparing `burla-0.0.6/PKG-INFO` & `burla-0.0.7/PKG-INFO`

 * *Files 4% similar despite different names*

```diff
@@ -1,16 +1,17 @@
 Metadata-Version: 2.1
 Name: burla
-Version: 0.0.6
+Version: 0.0.7
 Summary: Make your python script 100x faster
 Author: Jake Zuliani
 Author-email: jake@burla.dev
 Requires-Python: >=3.8,<4.0
 Classifier: Programming Language :: Python :: 3
 Classifier: Programming Language :: Python :: 3.8
 Classifier: Programming Language :: Python :: 3.9
 Classifier: Programming Language :: Python :: 3.10
 Classifier: Programming Language :: Python :: 3.11
 Requires-Dist: appdirs (>=1.4.4,<2.0.0)
 Requires-Dist: dill (>=0.3.6,<0.4.0)
 Requires-Dist: fire (>=0.5.0,<0.6.0)
 Requires-Dist: requests (>=2.27.1,<3.0.0)
+Requires-Dist: tblib (>=2.0.0,<3.0.0)
```

