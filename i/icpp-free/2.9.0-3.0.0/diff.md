# Comparing `tmp/icpp_free-2.9.0-py3-none-any.whl.zip` & `tmp/icpp_free-3.0.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,82 +1,84 @@
-Zip file size: 48410 bytes, number of entries: 80
+Zip file size: 52000 bytes, number of entries: 82
 -rw-rw-r--  2.0 unx      747 b- defN 23-Apr-29 11:50 icpp/__init__.py
 -rw-rw-r--  2.0 unx     1086 b- defN 23-May-19 20:47 icpp/__main__.py
--rw-rw-r--  2.0 unx     1053 b- defN 23-Jul-10 14:38 icpp/commands_build_native.py
--rw-rw-r--  2.0 unx     5433 b- defN 23-May-19 20:47 icpp/commands_build_wasm.py
+-rw-rw-r--  2.0 unx     1153 b- defN 23-Jul-17 02:30 icpp/commands_build_native.py
+-rw-rw-r--  2.0 unx     7957 b- defN 23-Jul-17 02:27 icpp/commands_build_wasm.py
 -rw-rw-r--  2.0 unx     1122 b- defN 23-Apr-29 11:50 icpp/commands_get.py
 -rw-rw-r--  2.0 unx      753 b- defN 23-Apr-29 11:50 icpp/commands_init.py
--rw-rw-r--  2.0 unx     4724 b- defN 23-Jul-08 00:43 icpp/commands_install_wasi_sdk.py
--rw-rw-r--  2.0 unx     6070 b- defN 23-Jul-10 14:41 icpp/config_default.py
--rw-rw-r--  2.0 unx     2565 b- defN 23-Jul-10 14:38 icpp/conftest_base.py
--rw-rw-r--  2.0 unx     2944 b- defN 23-May-19 20:47 icpp/decorators.py
--rw-rw-r--  2.0 unx     3776 b- defN 23-May-12 19:56 icpp/icpp_toml.py
+-rw-rw-r--  2.0 unx     4804 b- defN 23-Jul-17 02:27 icpp/commands_install_wasi_sdk.py
+-rw-rw-r--  2.0 unx     6097 b- defN 23-Jul-17 02:27 icpp/config_default.py
+-rw-rw-r--  2.0 unx     2565 b- defN 23-Jul-17 02:26 icpp/conftest_base.py
+-rw-rw-r--  2.0 unx     3558 b- defN 23-Jul-17 02:27 icpp/decorators.py
+-rw-rw-r--  2.0 unx     4002 b- defN 23-Jul-17 02:27 icpp/icpp_toml.py
 -rw-rw-r--  2.0 unx      670 b- defN 23-May-19 20:47 icpp/options_build.py
--rw-rw-r--  2.0 unx      925 b- defN 23-Jul-10 14:38 icpp/options_main.py
--rw-rw-r--  2.0 unx      879 b- defN 23-Jul-10 14:38 icpp/pro.py
+-rw-rw-r--  2.0 unx      925 b- defN 23-Jul-17 02:26 icpp/options_main.py
+-rw-rw-r--  2.0 unx     1076 b- defN 23-Jul-17 02:43 icpp/pro.py
 -rw-rw-r--  2.0 unx       98 b- defN 23-Apr-29 11:50 icpp/py.typed
--rw-rw-r--  2.0 unx     5280 b- defN 23-May-10 21:24 icpp/run_shell_cmd.py
--rw-rw-r--  2.0 unx     1506 b- defN 23-Jul-10 14:38 icpp/smoketest.py
--rw-rw-r--  2.0 unx      322 b- defN 23-Jul-10 14:41 icpp/version.py
+-rw-rw-r--  2.0 unx     5578 b- defN 23-Jul-17 02:27 icpp/run_shell_cmd.py
+-rw-rw-r--  2.0 unx     1642 b- defN 23-Jul-17 02:30 icpp/smoketest.py
+-rw-rw-r--  2.0 unx      322 b- defN 23-Jul-17 02:27 icpp/version.py
 -rw-rw-r--  2.0 unx      231 b- defN 23-Jul-08 00:43 icpp/version_wasi_sdk.py
 -rw-r--r--  2.0 unx       92 b- defN 23-Apr-29 11:50 icpp/canisters/greet/README.md
--rwxr-xr-x  2.0 unx      774 b- defN 23-May-30 20:59 icpp/canisters/greet/demo.sh
--rw-r--r--  2.0 unx      283 b- defN 23-Jun-08 12:04 icpp/canisters/greet/dfx.json
+-rw-r--r--  2.0 unx     3389 b- defN 23-Jul-17 02:27 icpp/canisters/greet/demo.ps1
+-rwxr-xr-x  2.0 unx     2404 b- defN 23-Jul-17 02:27 icpp/canisters/greet/demo.sh
+-rw-r--r--  2.0 unx      232 b- defN 23-Jul-17 02:27 icpp/canisters/greet/dfx.json
 -rw-r--r--  2.0 unx      474 b- defN 23-Apr-29 11:50 icpp/canisters/greet/icpp.toml
--rw-rw-r--  2.0 unx     2061 b- defN 23-May-19 20:47 icpp/canisters/greet/native/main.cpp
+-rw-rw-r--  2.0 unx     3297 b- defN 23-Jul-17 02:27 icpp/canisters/greet/native/main.cpp
 -rw-rw-r--  2.0 unx      137 b- defN 23-May-19 20:47 icpp/canisters/greet/native/main.h
--rw-rw-r--  2.0 unx     3125 b- defN 23-Jun-14 01:34 icpp/canisters/greet/src/greet.cpp
--rw-r--r--  2.0 unx      469 b- defN 23-May-19 20:47 icpp/canisters/greet/src/greet.did
--rw-r--r--  2.0 unx      354 b- defN 23-May-19 20:47 icpp/canisters/greet/src/greet.h
+-rw-rw-r--  2.0 unx     5411 b- defN 23-Jul-17 02:27 icpp/canisters/greet/src/greet.cpp
+-rw-r--r--  2.0 unx      599 b- defN 23-Jul-17 02:27 icpp/canisters/greet/src/greet.did
+-rw-r--r--  2.0 unx      427 b- defN 23-Jul-17 02:27 icpp/canisters/greet/src/greet.h
 -rw-rw-r--  2.0 unx        0 b- defN 23-Apr-29 11:50 icpp/canisters/greet/test/__init__.py
 -rw-rw-r--  2.0 unx      298 b- defN 23-Apr-29 11:50 icpp/canisters/greet/test/conftest.py
--rw-rw-r--  2.0 unx     2500 b- defN 23-May-10 21:24 icpp/canisters/greet/test/test_apis.py
--rw-r--r--  2.0 unx     1916 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister.h
--rw-r--r--  2.0 unx      262 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_base.cpp
--rw-r--r--  2.0 unx      295 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_base.h
--rw-r--r--  2.0 unx      269 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_cleanup_callback.cpp
+-rw-rw-r--  2.0 unx     3723 b- defN 23-Jul-17 02:27 icpp/canisters/greet/test/test_apis.py
+-rw-r--r--  2.0 unx     1288 b- defN 23-Jul-17 02:27 icpp/ic/canister/canister.h
+-rw-rw-r--  2.0 unx      405 b- defN 23-Jul-17 02:27 icpp/ic/canister/canister_base.cpp
+-rw-rw-r--  2.0 unx     1389 b- defN 23-Jul-17 02:27 icpp/ic/canister/canister_base.h
+-rw-r--r--  2.0 unx      292 b- defN 23-Jul-17 02:27 icpp/ic/canister/canister_cleanup_callback.cpp
 -rw-r--r--  2.0 unx      240 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_cleanup_callback.h
--rw-r--r--  2.0 unx      245 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_global_timer.cpp
+-rw-r--r--  2.0 unx      268 b- defN 23-Jul-17 02:27 icpp/ic/canister/canister_global_timer.cpp
 -rw-r--r--  2.0 unx      224 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_global_timer.h
--rw-r--r--  2.0 unx      233 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_heartbeat.cpp
+-rw-r--r--  2.0 unx      256 b- defN 23-Jul-17 02:27 icpp/ic/canister/canister_heartbeat.cpp
 -rw-r--r--  2.0 unx      216 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_heartbeat.h
--rw-r--r--  2.0 unx      203 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_init.cpp
+-rw-r--r--  2.0 unx      226 b- defN 23-Jul-17 02:27 icpp/ic/canister/canister_init.cpp
 -rw-r--r--  2.0 unx      196 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_init.h
--rw-r--r--  2.0 unx      263 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_inspect_message.cpp
+-rw-r--r--  2.0 unx      286 b- defN 23-Jul-17 02:27 icpp/ic/canister/canister_inspect_message.cpp
 -rw-r--r--  2.0 unx      236 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_inspect_message.h
--rw-r--r--  2.0 unx      245 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_post_upgrade.cpp
+-rw-r--r--  2.0 unx      268 b- defN 23-Jul-17 02:27 icpp/ic/canister/canister_post_upgrade.cpp
 -rw-r--r--  2.0 unx      224 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_post_upgrade.h
--rw-r--r--  2.0 unx      239 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_pre_upgrade.cpp
+-rw-r--r--  2.0 unx      262 b- defN 23-Jul-17 02:27 icpp/ic/canister/canister_pre_upgrade.cpp
 -rw-r--r--  2.0 unx      220 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_pre_upgrade.h
--rw-r--r--  2.0 unx      209 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_query.cpp
+-rw-r--r--  2.0 unx      232 b- defN 23-Jul-17 02:27 icpp/ic/canister/canister_query.cpp
 -rw-r--r--  2.0 unx      200 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_query.h
--rw-r--r--  2.0 unx      263 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_reject_callback.cpp
+-rw-r--r--  2.0 unx      286 b- defN 23-Jul-17 02:27 icpp/ic/canister/canister_reject_callback.cpp
 -rw-r--r--  2.0 unx      236 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_reject_callback.h
--rw-r--r--  2.0 unx      257 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_reply_callback.cpp
+-rw-r--r--  2.0 unx      280 b- defN 23-Jul-17 02:27 icpp/ic/canister/canister_reply_callback.cpp
 -rw-r--r--  2.0 unx      232 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_reply_callback.h
--rw-r--r--  2.0 unx      209 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_start.cpp
+-rw-r--r--  2.0 unx      232 b- defN 23-Jul-17 02:27 icpp/ic/canister/canister_start.cpp
 -rw-r--r--  2.0 unx      200 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_start.h
--rw-r--r--  2.0 unx      215 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_update.cpp
+-rw-r--r--  2.0 unx      238 b- defN 23-Jul-17 02:27 icpp/ic/canister/canister_update.cpp
 -rw-r--r--  2.0 unx      204 b- defN 23-Jun-14 01:34 icpp/ic/canister/canister_update.h
 -rw-rw-r--  2.0 unx     3407 b- defN 23-Apr-29 11:50 icpp/ic/ic0/ic0.h
--rw-r--r--  2.0 unx      110 b- defN 23-Apr-29 11:50 icpp/ic/ic0mock/global.h
--rw-r--r--  2.0 unx     3288 b- defN 23-Jul-10 14:38 icpp/ic/ic0mock/ic0.cpp
+-rw-r--r--  2.0 unx      111 b- defN 23-Jul-17 02:27 icpp/ic/ic0mock/global.h
+-rw-rw-r--  2.0 unx     3436 b- defN 23-Jul-17 02:27 icpp/ic/ic0mock/ic0.cpp
 -rw-rw-r--  2.0 unx     2091 b- defN 23-Apr-29 11:50 icpp/ic/ic0mock/ic0.h
--rw-r--r--  2.0 unx     1372 b- defN 23-Jul-10 14:38 icpp/ic/ic0mock/mock_ic.cpp
--rw-rw-r--  2.0 unx     1495 b- defN 23-May-01 15:09 icpp/ic/ic0mock/mock_ic.h
--rw-rw-r--  2.0 unx     6636 b- defN 23-Jun-14 01:34 icpp/ic/icapi/ic_api.cpp
--rw-rw-r--  2.0 unx     9710 b- defN 23-Jul-08 00:43 icpp/ic/icapi/ic_api.h
+-rw-rw-r--  2.0 unx     1456 b- defN 23-Jul-17 02:27 icpp/ic/ic0mock/mock_ic.cpp
+-rw-rw-r--  2.0 unx      157 b- defN 23-Jul-17 02:27 icpp/ic/ic0mock/mock_ic.h
+-rw-r--r--  2.0 unx     1514 b- defN 23-Jul-17 02:27 icpp/ic/ic0mock/mock_ic_.h
+-rw-rw-r--  2.0 unx     6705 b- defN 23-Jul-17 02:27 icpp/ic/icapi/ic_api.cpp
+-rw-rw-r--  2.0 unx     8460 b- defN 23-Jul-17 02:27 icpp/ic/icapi/ic_api.h
 -rw-r--r--  2.0 unx      463 b- defN 23-Apr-29 11:50 icpp/ic/icapi/wasm_symbol.h
--rw-r--r--  2.0 unx      754 b- defN 23-Jul-10 14:38 icpp/ic/pro/pro.cpp
+-rw-r--r--  2.0 unx     1000 b- defN 23-Jul-17 02:43 icpp/ic/pro/pro.cpp
 -rw-r--r--  2.0 unx      393 b- defN 23-Apr-29 17:59 icpp/ic/pro/pro.h
 -rw-rw-r--  2.0 unx     1370 b- defN 23-Apr-29 11:50 icpp/ic/wasi_sdk_traps/__wasilibc_initialize_environ.c
 -rw-rw-r--  2.0 unx      327 b- defN 23-Apr-29 11:50 icpp/ic/wasi_sdk_traps/ic_trap.c
 -rw-rw-r--  2.0 unx       70 b- defN 23-Apr-29 11:50 icpp/ic/wasi_sdk_traps/ic_trap.h
 -rw-rw-r--  2.0 unx     4743 b- defN 23-May-19 20:47 icpp/ic/wasi_sdk_traps/posix.c
 -rw-r--r--  2.0 unx    10198 b- defN 23-May-19 20:47 icpp/ic/wasi_sdk_traps/unreachable.c
--rw-r--r--  2.0 unx     1066 b- defN 23-Jul-10 14:47 icpp_free-2.9.0.dist-info/LICENSE
--rw-rw-r--  2.0 unx     1772 b- defN 23-Jul-10 14:47 icpp_free-2.9.0.dist-info/METADATA
--rw-rw-r--  2.0 unx       92 b- defN 23-Jul-10 14:47 icpp_free-2.9.0.dist-info/WHEEL
--rw-rw-r--  2.0 unx       44 b- defN 23-Jul-10 14:47 icpp_free-2.9.0.dist-info/entry_points.txt
--rw-rw-r--  2.0 unx        5 b- defN 23-Jul-10 14:47 icpp_free-2.9.0.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     6905 b- defN 23-Jul-10 14:47 icpp_free-2.9.0.dist-info/RECORD
-80 files, 115013 bytes uncompressed, 37390 bytes compressed:  67.5%
+-rw-r--r--  2.0 unx     1066 b- defN 23-Jul-17 02:44 icpp_free-3.0.0.dist-info/LICENSE
+-rw-rw-r--  2.0 unx     1772 b- defN 23-Jul-17 02:44 icpp_free-3.0.0.dist-info/METADATA
+-rw-rw-r--  2.0 unx       92 b- defN 23-Jul-17 02:44 icpp_free-3.0.0.dist-info/WHEEL
+-rw-rw-r--  2.0 unx       44 b- defN 23-Jul-17 02:44 icpp_free-3.0.0.dist-info/entry_points.txt
+-rw-rw-r--  2.0 unx        5 b- defN 23-Jul-17 02:44 icpp_free-3.0.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     7077 b- defN 23-Jul-17 02:44 icpp_free-3.0.0.dist-info/RECORD
+82 files, 129662 bytes uncompressed, 40718 bytes compressed:  68.6%
```

## zipnote {}

```diff
@@ -54,14 +54,17 @@
 
 Filename: icpp/version_wasi_sdk.py
 Comment: 
 
 Filename: icpp/canisters/greet/README.md
 Comment: 
 
+Filename: icpp/canisters/greet/demo.ps1
+Comment: 
+
 Filename: icpp/canisters/greet/demo.sh
 Comment: 
 
 Filename: icpp/canisters/greet/dfx.json
 Comment: 
 
 Filename: icpp/canisters/greet/icpp.toml
@@ -186,14 +189,17 @@
 
 Filename: icpp/ic/ic0mock/mock_ic.cpp
 Comment: 
 
 Filename: icpp/ic/ic0mock/mock_ic.h
 Comment: 
 
+Filename: icpp/ic/ic0mock/mock_ic_.h
+Comment: 
+
 Filename: icpp/ic/icapi/ic_api.cpp
 Comment: 
 
 Filename: icpp/ic/icapi/ic_api.h
 Comment: 
 
 Filename: icpp/ic/icapi/wasm_symbol.h
@@ -216,26 +222,26 @@
 
 Filename: icpp/ic/wasi_sdk_traps/posix.c
 Comment: 
 
 Filename: icpp/ic/wasi_sdk_traps/unreachable.c
 Comment: 
 
-Filename: icpp_free-2.9.0.dist-info/LICENSE
+Filename: icpp_free-3.0.0.dist-info/LICENSE
 Comment: 
 
-Filename: icpp_free-2.9.0.dist-info/METADATA
+Filename: icpp_free-3.0.0.dist-info/METADATA
 Comment: 
 
-Filename: icpp_free-2.9.0.dist-info/WHEEL
+Filename: icpp_free-3.0.0.dist-info/WHEEL
 Comment: 
 
-Filename: icpp_free-2.9.0.dist-info/entry_points.txt
+Filename: icpp_free-3.0.0.dist-info/entry_points.txt
 Comment: 
 
-Filename: icpp_free-2.9.0.dist-info/top_level.txt
+Filename: icpp_free-3.0.0.dist-info/top_level.txt
 Comment: 
 
-Filename: icpp_free-2.9.0.dist-info/RECORD
+Filename: icpp_free-3.0.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## icpp/commands_build_native.py

```diff
@@ -1,22 +1,26 @@
 """Handles 'icpp build-native' """
 # pylint: disable=unused-import, unused-argument
 import sys
 import subprocess
 import shutil
+import concurrent.futures
 import typer
 from typing_extensions import Annotated
 
 from icpp.__main__ import app
 from icpp import config_default
 from icpp.run_shell_cmd import run_shell_cmd
 
 from icpp.decorators import requires_native_compiler, requires_pro
 from icpp.options_build import to_compile_callback, option_to_compile_values_string
 
+# options are: "none", "multi-threading"
+CONCURRENCY = "multi-threading"
+
 
 @app.command()
 @requires_native_compiler()
 @requires_pro("build-native")
 def build_native(
     to_compile: Annotated[
         str,
```

## icpp/commands_build_wasm.py

```diff
@@ -1,22 +1,27 @@
 """Handles 'icpp build-wasm' """
+# pylint: disable = too-many-statements
 import sys
 import subprocess
 import shutil
+import concurrent.futures
 import typer
 from typing_extensions import Annotated
 
 from icpp.__main__ import app
 
 from icpp import config_default
 from icpp.run_shell_cmd import run_shell_cmd
 
 from icpp.decorators import requires_wasi_sdk
 from icpp.options_build import to_compile_callback, option_to_compile_values_string
 
+# options are: "none", "multi-threading"
+CONCURRENCY = "multi-threading"
+
 
 @app.command()
 @requires_wasi_sdk()
 def build_wasm(
     to_compile: Annotated[
         str,
         typer.Option(
@@ -41,75 +46,125 @@
                 shutil.rmtree(build_path)
             except OSError as e:
                 typer.echo(f"ERROR: During delete of {build_path}:\n {e.strerror}")
 
     if not build_path.exists():
         build_path.mkdir()
 
+    def cpp_compile_file(file: str) -> None:
+        cmd = (
+            f"{config_default.WASM_CPP} "
+            f"{config_default.WASM_CPPFLAGS} {cpp_compile_flags_s} "
+            f"-c {file}"
+        )
+        typer.echo(cmd)
+        run_shell_cmd(cmd, cwd=build_path)
+
+    def c_compile_file(file: str) -> None:
+        cmd = (
+            f"{config_default.WASM_C} "
+            f"{config_default.WASM_CFLAGS} {c_compile_flags_s} "
+            f"-c {file}"
+        )
+        typer.echo(cmd)
+        run_shell_cmd(cmd, cwd=build_path)
+
     try:
         # ----------------------------------------------------------------------
         # compile 'mine' C++ files, if we have any
+        # string format
         cpp_files = icpp_toml.build_wasm["cpp_files"]
+        # list format
+        cpp_files_list = icpp_toml.build_wasm["cpp_files_list"]
         cpp_compile_flags_s = icpp_toml.build_wasm["cpp_compile_flags_s"]
         if len(cpp_files.strip()) > 0:
-            cmd = (
-                f"{config_default.WASM_CPP} "
-                f"{config_default.WASM_CPPFLAGS} {cpp_compile_flags_s} "
-                f"-c {cpp_files}"
-            )
-
-            typer.echo("--")
-            typer.echo("Compiling your C++ files with command:")
-            typer.echo(cmd)
-            run_shell_cmd(cmd, cwd=build_path)
+            if CONCURRENCY == "multi-threading":
+                typer.echo("--")
+                typer.echo("Compiling your C++ files using multi-threading:")
+                with concurrent.futures.ThreadPoolExecutor() as executor:
+                    executor.map(cpp_compile_file, cpp_files_list)
+            else:
+                cmd = (
+                    f"{config_default.WASM_CPP} "
+                    f"{config_default.WASM_CPPFLAGS} {cpp_compile_flags_s} "
+                    f"-c {cpp_files}"
+                )
+
+                typer.echo("--")
+                typer.echo("Compiling your C++ files with command:")
+                typer.echo(cmd)
+                run_shell_cmd(cmd, cwd=build_path)
 
         # ----------------------------------------------------------------------
         # compile 'mine' C files, if we have any
         c_files = icpp_toml.build_wasm["c_files"]
+        c_files_list = icpp_toml.build_wasm["c_files_list"]
         c_compile_flags_s = icpp_toml.build_wasm["c_compile_flags_s"]
         if len(c_files.strip()) > 0:
-            cmd = (
-                f"{config_default.WASM_C} "
-                f"{config_default.WASM_CFLAGS} {c_compile_flags_s} "
-                f"-c {c_files}"
-            )
-
-            typer.echo("--")
-            typer.echo("Compiling your C files with command:")
-            typer.echo(cmd)
-            run_shell_cmd(cmd, cwd=build_path)
-
-        if to_compile == "all":
-            # ----------------------------------------------------------------------
-            # compile the C++ files of the IC API, if we have any
-            if len(config_default.IC_CPP_FILES.strip()) > 0:
+            if CONCURRENCY == "multi-threading":
+                typer.echo("--")
+                typer.echo("Compiling your C files using multi-threading:")
+                with concurrent.futures.ThreadPoolExecutor() as executor:
+                    executor.map(c_compile_file, c_files_list)
+            else:
                 cmd = (
-                    f"{config_default.WASM_CPP} "
-                    f"{config_default.WASM_CPPFLAGS} "
-                    f"-c {config_default.IC_CPP_FILES}"
+                    f"{config_default.WASM_C} "
+                    f"{config_default.WASM_CFLAGS} {c_compile_flags_s} "
+                    f"-c {c_files}"
                 )
 
                 typer.echo("--")
-                typer.echo("Compiling C++ files of the IC_API with command:")
+                typer.echo("Compiling your C files with command:")
                 typer.echo(cmd)
                 run_shell_cmd(cmd, cwd=build_path)
 
+        if to_compile == "all":
+            # ----------------------------------------------------------------------
+            # compile the C++ files of the IC API, if we have any
+            if len(config_default.IC_CPP_FILES.strip()) > 0:
+                if CONCURRENCY == "multi-threading":
+                    typer.echo("--")
+                    typer.echo(
+                        "Compiling C++ files of the IC_API using multi-threading:"
+                    )
+                    with concurrent.futures.ThreadPoolExecutor() as executor:
+                        executor.map(cpp_compile_file, config_default.IC_CPP_FILES_LIST)
+                else:
+                    cmd = (
+                        f"{config_default.WASM_CPP} "
+                        f"{config_default.WASM_CPPFLAGS} "
+                        f"-c {config_default.IC_CPP_FILES}"
+                    )
+
+                    typer.echo("--")
+                    typer.echo("Compiling C++ files of the IC_API with command:")
+                    typer.echo(cmd)
+                    run_shell_cmd(cmd, cwd=build_path)
+
             # ----------------------------------------------------------------------
             # compile the C files of the IC API, if we have any
             if len(config_default.IC_C_FILES.strip()) > 0:
-                cmd = (
-                    f"{config_default.WASM_C} "
-                    f"{config_default.WASM_CFLAGS} "
-                    f"-c {config_default.IC_C_FILES}"
-                )
-
-                typer.echo("--")
-                typer.echo("Compiling C files of the IC_API with command:")
-                typer.echo(cmd)
-                run_shell_cmd(cmd, cwd=build_path)
+                if CONCURRENCY == "multi-threading":
+                    typer.echo("--")
+                    typer.echo(
+                        "Compiling C++ files of the IC_API using multi-threading:"
+                    )
+                    with concurrent.futures.ThreadPoolExecutor() as executor:
+                        executor.map(c_compile_file, config_default.IC_C_FILES_LIST)
+                else:
+                    cmd = (
+                        f"{config_default.WASM_C} "
+                        f"{config_default.WASM_CFLAGS} "
+                        f"-c {config_default.IC_C_FILES}"
+                    )
+
+                    typer.echo("--")
+                    typer.echo("Compiling C files of the IC_API with command:")
+                    typer.echo(cmd)
+                    run_shell_cmd(cmd, cwd=build_path)
 
         # ----------------------------------------------------------------------
         # link it into a wasm
         cmd = (
             f"{config_default.WASM_CPP} "
             f"{config_default.WASM_CPPFLAGS} {config_default.WASM_LDFLAGS} "
             f"*.o -o {icpp_toml.build_wasm['canister']}.wasm"
@@ -144,9 +199,12 @@
     shutil.copy(did_path, build_path)
 
     # ----------------------------------------------------------------------
     # All done
     typer.echo("--")
     typer.echo("All done building the canister Wasm module:")
     typer.echo(f"{build_path.resolve()}/{icpp_toml.build_wasm['canister']}.wasm")
-    typer.echo("✔️")
+    try:
+        typer.echo("✔️")
+    except UnicodeEncodeError:
+        typer.echo(" ")
     typer.echo("--")
```

## icpp/commands_install_wasi_sdk.py

```diff
@@ -110,15 +110,18 @@
 
         typer.echo("Cleaning up")
         fpath.unlink(missing_ok=True)
 
         typer.echo(
             f"Successfully installed wasi-sdk in {config_default.ICPP_ROOT_COMPILER}"
         )
-        typer.echo("💯 🎉 🏁")
+        try:
+            typer.echo("💯 🎉 🏁")
+        except UnicodeEncodeError:
+            typer.echo(" ")
         typer.echo("--")
 
     except Exception as e:  # pylint: disable=broad-except
         typer.echo(
             f"Tried to fetch wasi-sdk from GitHub at url={config_default.WASI_SDK_URL} "
             f"and install in {config_default.ICPP_ROOT_COMPILER}, but received this "
             f"Error: {e}"
```

## icpp/config_default.py

```diff
@@ -75,69 +75,61 @@
 #
 ICPP_INIT_PATH = ICPP_PATH / "canisters/greet"
 LOCAL_INIT_PATH = Path("./greet")
 
 ########################################################################
 # build-wasm
 #
-IC_C_FILES = (
-    " ".join(
-        [
-            str(x)
-            for x in list(ICPP_PATH.glob("ic/ic0/*.c"))
-            + list(ICPP_PATH.glob("ic/wasi_sdk_traps/*.c"))
-            + list(ICPP_PATH.glob("ic/canister/*.c"))
-            + list(ICPP_PATH.glob("ic/icapi/*.c"))
-            + list(ICPP_CANDID_PATH.glob("candid/*.c"))
-            # + list(ICPP_CANDID_PATH.glob("vendors/*.c"))
-        ]
-    )
-    + " "
-)
-IC_CPP_FILES = (
-    " ".join(
-        [
-            str(x)
-            for x in list(ICPP_PATH.glob("ic/ic0/*.cpp"))
-            + list(ICPP_PATH.glob("ic/canister/*.cpp"))
-            + list(ICPP_PATH.glob("ic/icapi/*.cpp"))
-            + list(ICPP_PATH.glob("ic/pro/*.cpp"))
-            + list(ICPP_CANDID_PATH.glob("candid/*.cpp"))
-            + list(ICPP_CANDID_PATH.glob("vendors/hash-library/*.cpp"))
-        ]
-    )
-    + " "
-)
-IC_HEADER_FILES = (
-    " ".join(
-        [
-            str(x)
-            for x in list(ICPP_PATH.glob("ic/ic0/*.h"))
-            + list(ICPP_PATH.glob("ic/wasi_sdk_traps/*.h"))
-            + list(ICPP_PATH.glob("ic/canister/*.h"))
-            + list(ICPP_PATH.glob("ic/icapi/*.h"))
-            + list(ICPP_PATH.glob("ic/pro/*.h"))
-            + list(ICPP_CANDID_PATH.glob("candid/*.h"))
-            # + list(ICPP_CANDID_PATH.glob("vendors/*.h"))
-            # + list(ICPP_CANDID_PATH.glob("vendors/*.hpp"))
-        ]
-    )
-    + " "
-)
+IC_C_FILES_LIST = [
+    str(x)
+    for x in list(ICPP_PATH.glob("ic/ic0/*.c"))
+    + list(ICPP_PATH.glob("ic/wasi_sdk_traps/*.c"))
+    + list(ICPP_PATH.glob("ic/canister/*.c"))
+    + list(ICPP_PATH.glob("ic/icapi/*.c"))
+    + list(ICPP_CANDID_PATH.glob("candid/*.c"))
+]
+IC_CPP_FILES_LIST = [
+    str(x)
+    for x in list(ICPP_PATH.glob("ic/ic0/*.cpp"))
+    + list(ICPP_PATH.glob("ic/canister/*.cpp"))
+    + list(ICPP_PATH.glob("ic/icapi/*.cpp"))
+    + list(ICPP_PATH.glob("ic/pro/*.cpp"))
+    + list(ICPP_CANDID_PATH.glob("candid/*.cpp"))
+    + list(ICPP_CANDID_PATH.glob("hooks/*.cpp"))
+    + list(ICPP_CANDID_PATH.glob("vendors/hash-library/*.cpp"))
+]
+IC_HEADER_FILES_LIST = [
+    str(x)
+    for x in list(ICPP_PATH.glob("ic/ic0/*.h"))
+    + list(ICPP_PATH.glob("ic/wasi_sdk_traps/*.h"))
+    + list(ICPP_PATH.glob("ic/canister/*.h"))
+    + list(ICPP_PATH.glob("ic/icapi/*.h"))
+    + list(ICPP_PATH.glob("ic/pro/*.h"))
+    + list(ICPP_CANDID_PATH.glob("candid/*.h"))
+    + list(ICPP_CANDID_PATH.glob("hooks/*.h"))
+    + list(ICPP_CANDID_PATH.glob("vendors/hash-library/*.h"))
+    + list(ICPP_CANDID_PATH.glob("vendors/cppcodec/*.hpp"))
+    + list(ICPP_CANDID_PATH.glob("vendors/cppcodec/*/*.hpp"))
+]
+
+IC_C_FILES = " ".join(IC_C_FILES_LIST) + " "
+IC_CPP_FILES = " ".join(IC_CPP_FILES_LIST) + " "
+IC_HEADER_FILES = " ".join(IC_HEADER_FILES_LIST) + " "
 
 SYSROOT = ICPP_ROOT_COMPILER / "share/wasi-sysroot"
 
 WASM_C = ICPP_ROOT_COMPILER / "bin/clang"
 WASM_CPP = ICPP_ROOT_COMPILER / "bin/clang++"
 WASM_CFLAGS = (
     f" --target=wasm32-wasi -O3 -flto -fno-exceptions -fvisibility=hidden "
     f" --sysroot {SYSROOT} "
     f" -I {ICPP_DIR}/ic/canister -I {ICPP_DIR}/ic/icapi "
     f" -I {ICPP_DIR}/ic/pro -I {ICPP_DIR}/ic/ic0 "
-    f" -I {ICPP_CANDID_PATH}/candid -I {ICPP_CANDID_PATH}/vendors "
+    f" -I {ICPP_CANDID_PATH}/candid -I {ICPP_CANDID_PATH}/hooks "
+    f" -I {ICPP_CANDID_PATH}/vendors "
     f" -D NDEBUG -D ICPP_VERBOSE=0 "
 )
 WASM_CPPFLAGS = WASM_CFLAGS + " -std=c++20 "
 WASM_LDFLAGS = (
     " -nostartfiles -Wl,--no-entry -Wl,--lto-O3 -Wl,--strip-all "
     " -Wl,--strip-debug -Wl,--stack-first -Wl,--export-dynamic "
 )
@@ -145,61 +137,54 @@
 # Utilities we can use too
 CLANG_FORMAT = ICPP_ROOT_COMPILER / "bin/clang-format"
 CLANG_TIDY = ICPP_ROOT_COMPILER / "bin/clang-tidy"
 
 ########################################################################
 # build-native
 #
-MOCKIC_C_FILES = (
-    " ".join(
-        [
-            str(x)
-            for x in list(ICPP_PATH.glob("ic/ic0mock/*.c"))
-            + list(ICPP_PATH.glob("ic/canister/*.c"))
-            + list(ICPP_PATH.glob("ic/icapi/*.c"))
-            + list(ICPP_CANDID_PATH.glob("candid/*.c"))
-            # + list(ICPP_CANDID_PATH.glob("vendors/*.c"))
-        ]
-    )
-    + " "
-)
-MOCKIC_CPP_FILES = (
-    " ".join(
-        [
-            str(x)
-            for x in list(ICPP_PATH.glob("ic/ic0mock/*.cpp"))
-            + list(ICPP_PATH.glob("ic/canister/*.cpp"))
-            + list(ICPP_PATH.glob("ic/icapi/*.cpp"))
-            + list(ICPP_PATH.glob("ic/pro/*.cpp"))
-            + list(ICPP_CANDID_PATH.glob("candid/*.cpp"))
-            + list(ICPP_CANDID_PATH.glob("vendors/hash-library/*.cpp"))
-        ]
-    )
-    + " "
-)
-MOCKIC_HEADER_FILES = (
-    " ".join(
-        [
-            str(x)
-            for x in list(ICPP_PATH.glob("ic/ic0mock/*.h"))
-            + list(ICPP_PATH.glob("ic/canister/*.h"))
-            + list(ICPP_PATH.glob("ic/icapi/*.h"))
-            + list(ICPP_PATH.glob("ic/pro/*.h"))
-            + list(ICPP_CANDID_PATH.glob("candid/*.h"))
-            # + list(ICPP_CANDID_PATH.glob("vendors/*.h"))
-            # + list(ICPP_CANDID_PATH.glob("vendors/*.hpp"))
-        ]
-    )
-    + " "
-)
+MOCKIC_C_FILES_LIST = [
+    str(x)
+    for x in list(ICPP_PATH.glob("ic/ic0mock/*.c"))
+    + list(ICPP_PATH.glob("ic/canister/*.c"))
+    + list(ICPP_PATH.glob("ic/icapi/*.c"))
+    + list(ICPP_CANDID_PATH.glob("candid/*.c"))
+]
+
+MOCKIC_CPP_FILES_LIST = [
+    str(x)
+    for x in list(ICPP_PATH.glob("ic/ic0mock/*.cpp"))
+    + list(ICPP_PATH.glob("ic/canister/*.cpp"))
+    + list(ICPP_PATH.glob("ic/icapi/*.cpp"))
+    + list(ICPP_PATH.glob("ic/pro/*.cpp"))
+    + list(ICPP_CANDID_PATH.glob("candid/*.cpp"))
+    + list(ICPP_CANDID_PATH.glob("hooks/*.cpp"))
+    + list(ICPP_CANDID_PATH.glob("vendors/hash-library/*.cpp"))
+]
+MOCKIC_HEADER_FILES_LIST = [
+    str(x)
+    for x in list(ICPP_PATH.glob("ic/ic0mock/*.h"))
+    + list(ICPP_PATH.glob("ic/canister/*.h"))
+    + list(ICPP_PATH.glob("ic/icapi/*.h"))
+    + list(ICPP_PATH.glob("ic/pro/*.h"))
+    + list(ICPP_CANDID_PATH.glob("candid/*.h"))
+    + list(ICPP_CANDID_PATH.glob("hooks/*.h"))
+    + list(ICPP_CANDID_PATH.glob("vendors/hash-library/*.h"))
+    + list(ICPP_CANDID_PATH.glob("vendors/cppcodec/*.hpp"))
+    + list(ICPP_CANDID_PATH.glob("vendors/cppcodec/*/*.hpp"))
+]
+
+MOCKIC_C_FILES = " ".join(MOCKIC_C_FILES_LIST) + " "
+MOCKIC_CPP_FILES = " ".join(MOCKIC_CPP_FILES_LIST) + " "
+MOCKIC_HEADER_FILES = " ".join(MOCKIC_HEADER_FILES_LIST) + " "
 
 NATIVE_COMPILER = "Clang"
 NATIVE_C = "clang"
 NATIVE_CPP = "clang++"
 NATIVE_CFLAGS = (
     f" -g -I {ICPP_DIR}/ic/canister -I {ICPP_DIR}/ic/icapi "
     f" -I {ICPP_DIR}/ic/pro -I {ICPP_DIR}/ic/ic0mock "
-    f" -I {ICPP_CANDID_PATH}/candid -I {ICPP_CANDID_PATH}/vendors "
+    f" -I {ICPP_CANDID_PATH}/candid -I {ICPP_CANDID_PATH}/hooks "
+    f" -I {ICPP_CANDID_PATH}/vendors "
     f" -D ICPP_VERBOSE=0 "
 )
 NATIVE_CPPFLAGS = NATIVE_CFLAGS + " -std=c++20 "
 NATIVE_LDFLAGS = " "
```

## icpp/decorators.py

```diff
@@ -88,15 +88,29 @@
     """Exit if `clang` or `clang++` not available"""
     no_c = shutil.which(config_default.NATIVE_C) is None
     no_cpp = shutil.which(config_default.NATIVE_CPP) is None
     if no_c or no_cpp:
         typer.echo("--")
         typer.echo("ERROR: The native compiler is not installed")
         if no_c:
-            typer.echo(f"       (✗) could not find '{config_default.NATIVE_C}'")
+            try:
+                typer.echo(f"       (✗) could not find '{config_default.NATIVE_C}'")
+            except UnicodeEncodeError:
+                typer.echo(f"       (ERROR) could not find '{config_default.NATIVE_C}'")
         else:
-            typer.echo(f"       (✔) found '{config_default.NATIVE_C}'")
+            try:
+                typer.echo(f"       (✔) found '{config_default.NATIVE_C}'")
+            except UnicodeEncodeError:
+                typer.echo(f"       (OK) found '{config_default.NATIVE_C}'")
         if no_cpp:
-            typer.echo(f"       (✗) could not find '{config_default.NATIVE_CPP}'")
+            try:
+                typer.echo(f"       (✗) could not find '{config_default.NATIVE_CPP}'")
+            except UnicodeEncodeError:
+                typer.echo(
+                    f"       (ERROR) could not find '{config_default.NATIVE_CPP}'"
+                )
         else:
-            typer.echo(f"       (✔) found '{config_default.NATIVE_CPP}'")
+            try:
+                typer.echo(f"       (✔) found '{config_default.NATIVE_CPP}'")
+            except UnicodeEncodeError:
+                typer.echo(f"       (OK) found '{config_default.NATIVE_CPP}'")
         sys.exit(1)
```

## icpp/icpp_toml.py

```diff
@@ -77,15 +77,22 @@
     d["c_header_paths"] = [
         icpp_toml_path.parent / Path(x).resolve()
         for x in d_in.get("c_header_paths", [])
     ]
     d["c_compile_flags"] = d_in.get("c_compile_flags", [])
 
     #
-    # compiler uses strings, not lists
+    # concurrent compiler uses a list of strings for the files to compile
+    #
+    d["cpp_files_list"] = [str(x) for x in d["cpp_paths"]]
+
+    d["c_files_list"] = [str(x) for x in d["c_paths"]]
+
+    #
+    # all in one compiler uses a long string of strings, not a list
     #
     d["cpp_files"] = " ".join([str(x) for x in d["cpp_paths"]]) + " "
     d["cpp_header_files"] = " ".join([str(x) for x in d["cpp_header_paths"]]) + " "
     d["cpp_compile_flags_s"] = " ".join([str(x) for x in d["cpp_compile_flags"]]) + " "
 
     d["c_files"] = " ".join([str(x) for x in d["c_paths"]]) + " "
     d["c_header_files"] = " ".join([str(x) for x in d["c_header_paths"]]) + " "
@@ -98,15 +105,15 @@
 # Look for `icpp.toml`in the current folder
 icpp_toml_path = Path("icpp.toml")
 if not icpp_toml_path.exists():
     typer.echo(
         f"ERROR: There is no `icpp.toml` file in the current working directory: \n"
         f"        {icpp_toml_path.parent.resolve()} \n"
         f"       Maybe you're in the wrong folder, \n"
-        f"       or else can you please create one, so I know what to build? 🙂"
+        f"       or else can you please create one, so I know what to build?"
     )
     sys.exit(1)
 
 with open(icpp_toml_path, "rb") as f:
     data = tomllib.load(f)
 
 validate(data)
```

### encoding

```diff
@@ -1 +1 @@
-utf-8
+us-ascii
```

## icpp/pro.py

```diff
@@ -17,15 +17,19 @@
         msg = "this command"
     else:
         msg = f"'{capability}'"
     if not is_pro():
         typer.echo("--")
         typer.echo(f"ERROR: {msg} requires icpp-pro")
         typer.echo(" ")
-        typer.echo("For licensing, contact us at icpp@icpp.world")
+        typer.echo("You can just upgrade with: `pip install icpp-pro`")
+        typer.echo("But please be a sport, and donate a little. Thank YOU!")
+        typer.echo(
+            "For details, see: https://docs.icpp.world/index.html#donations-welcome"
+        )
         typer.echo(" ")
         sys.exit(1)
 
 
 def is_pro() -> bool:
     """Returns True if running a licensed icpp-pro"""
     return False
```

## icpp/run_shell_cmd.py

```diff
@@ -1,13 +1,13 @@
 """Utility to run 'cmd' from python as a subprocess"""
 
 import subprocess
 import re
 from pathlib import Path
-from typing import Optional
+from typing import Optional, Union
 
 
 def escape_ansi(line: Optional[str]) -> Optional[str]:
     """Removes ansi escape characters that come back from the terminal"""
     if line is None:
         return None
 
@@ -33,14 +33,15 @@
 
 def run_shell_cmd(
     cmd: str,
     capture_output: bool = False,
     print_captured_output: bool = False,
     cwd: Optional[Path] = None,
     timeout_seconds: Optional[int] = None,
+    run_in_powershell: Optional[bool] = None,
 ) -> str:
     """Runs 'cmd' with following behavior, so we can
     use it in our sequential CI/CD pipeline:
 
     Example usage:
         import sys
         import subprocess
@@ -74,36 +75,45 @@
         - If no error occurs:
           - if capture_output=True, returns the captured combination of stdout & stderr
           - else, returns ""
         - If an error occurs:
           - Throws a subprocess.CalledProcessError as e:
             return e.returncode
     """
+    shell = True
     if cwd is None:
         cwd = Path(".")
 
+    if run_in_powershell is None:
+        run_in_powershell = False
+
+    # for certain commands on Windows
+    cmd_: Union[str, list[str]] = cmd
+    if run_in_powershell:
+        cmd_ = ["powershell.exe", "-Command", cmd]
+
     if timeout_seconds is None:
         timeout_seconds = 3
 
     capture_stdout = ""
 
     if capture_output is False:
-        subprocess.run(cmd, shell=True, check=True, text=True, cwd=cwd)
+        subprocess.run(cmd_, shell=True, check=True, text=True, cwd=cwd)
     else:
         # These will block & cannot be used to start a background process from make.
         if print_captured_output is False:
             try:
                 # This will capture_output and:
                 # - return it if there is no error
                 # - includes it in a possibly raised error
                 p_1 = subprocess.run(
-                    cmd,
+                    cmd_,
                     stdout=subprocess.PIPE,
                     stderr=subprocess.STDOUT,
-                    shell=True,
+                    shell=shell,
                     check=False,
                     text=True,
                     cwd=cwd,
                     timeout=timeout_seconds,
                 )
                 if p_1.returncode != 0:
                     # typer.echo(p_1.stdout)
@@ -128,18 +138,18 @@
                         capture_stdout += "..."
 
                 print(capture_output)
         else:
             # This prints output while running, and we capture it as well & return it
             # https://stackoverflow.com/a/28319191/5480536
             with subprocess.Popen(
-                cmd,
+                cmd_,
                 stdout=subprocess.PIPE,
                 stderr=subprocess.STDOUT,
-                shell=True,
+                shell=shell,
                 bufsize=1,
                 universal_newlines=True,
                 cwd=cwd,
             ) as p_2:
                 if p_2.stdout is not None:
                     for line in p_2.stdout:
                         print(line, end="")
```

## icpp/smoketest.py

```diff
@@ -1,20 +1,27 @@
 """Functions to be used in a pytest test"""
 
 # pylint: disable=unused-import, unused-argument
 
 import subprocess
 import json
+import platform
 from pathlib import Path
 from typing import Optional, Any
 import pytest  # pylint: disable=unused-import
 
 from icpp.run_shell_cmd import run_shell_cmd
 from icpp import pro
 
+DFX = "dfx"
+RUN_IN_POWERSHELL = False
+if platform.win32_ver()[0]:
+    DFX = "wsl --% dfx"
+    RUN_IN_POWERSHELL = True
+
 
 def call_canister_api(
     *,
     dfx_json_path: Path,
     canister_name: str,
     canister_method: str,
     canister_argument: Optional[str] = None,
```

## icpp/version.py

```diff
@@ -5,8 +5,8 @@
 (-) do not add anything but the version number here!
 
 We do it this way, so both __init__.py and setup.py can use it.
 
 see:
 https://packaging.python.org/guides/single-sourcing-package-version/
 """
-__version__ = "2.9.0"
+__version__ = "3.0.0"
```

## icpp/canisters/greet/demo.sh

```diff
@@ -1,22 +1,67 @@
 #!/bin/sh
 
-echo "------------------------------------------"
-echo "Starting a clean local network"
+#######################################################################
+# This is a Linux & Mac shell script
+#
+# (-) Install icpp-pro or icpp-free in a python environment
+# (-) Install dfx
+# (-) In a terminal:
+#
+#     ./demo.sh
+#
+#######################################################################
+echo " "
+echo "--------------------------------------------------"
+echo "Stopping the local network"
 dfx stop
+
+echo " "
+echo "--------------------------------------------------"
+echo "Starting the local network as a background process"
 dfx start --clean --background
 
-echo "------------------------------------------"
-echo "Building & deploying the canister"
+#######################################################################
+echo "--------------------------------------------------"
+echo "Building the wasm with wasi-sdk"
+icpp build-wasm --to-compile all
+# icpp build-wasm --to-compile mine
+
+#######################################################################
+echo " "
+echo "--------------------------------------------------"
+echo "Deploying the wasm to a canister on the local network"
 dfx deploy
 
-echo "------------------------------------------"
-echo "Running some tests with dfx"
+#######################################################################
+echo " "
+echo "--------------------------------------------------"
+echo "Running some manual tests with dfx"
 dfx canister call greet greet_0
 dfx canister call greet greet_1
 dfx canister call greet greet_2 '("C++ Developer")'
 dfx canister call greet greet_3 '(record { "icpp version" = 1 : int; OS = "Linux" : text })'
 dfx canister call greet greet_4 '(record { 6 = 42 : int; 9 = 43 : int }, record { 7 = 44 : int; 10 = 45 : int })'
 
-echo "------------------------------------------"
-echo "Running the smoketests (requires icpp-pro)"
-pytest --network=local
+#######################################################################
+echo " "
+echo "--------------------------------------------------"
+echo "Running the full smoketests with pytest"
+pytest --network=local
+
+#######################################################################
+echo "--------------------------------------------------"
+echo "Stopping the local network"
+dfx stop
+
+#######################################################################
+echo " "
+echo "--------------------------------------------------"
+echo "Building the OS native debug executable with clang++"
+icpp build-native --to-compile all
+# icpp build-native --to-compile mine
+
+#######################################################################
+echo " "
+echo "--------------------------------------------------"
+echo "Running the OS native debug executable"
+./build-native/mockic.exe
```

## icpp/canisters/greet/dfx.json

### Pretty-printed

 * *Similarity: 0.9791666666666666%*

 * *Differences: {"'canisters'": "{'greet': {delete: ['build']}}"}*

```diff
@@ -1,11 +1,10 @@
 {
     "canisters": {
         "greet": {
-            "build": "icpp build-wasm --to-compile all",
             "candid": "src/greet.did",
             "type": "custom",
             "wasm": "build/greet.wasm"
         }
     },
     "defaults": {
         "build": {
```

## icpp/canisters/greet/native/main.cpp

```diff
@@ -4,43 +4,69 @@
 #include "main.h"
 
 #include <iostream>
 
 #include "../src/greet.h"
 
 // The Mock IC
-#include "global.h"
 #include "mock_ic.h"
 
 int main() {
   MockIC mockIC(true);
 
+  // -----------------------------------------------------------------------------
+  // Configs for the tests:
+
+  // The pretend principals of the caller
+  std::string my_principal{
+      "expmt-gtxsw-inftj-ttabj-qhp5s-nozup-n3bbo-k7zvn-dg4he-knac3-lae"};
+  std::string anonymous_principal{"2vxsx-fae"};
+
+  bool silent_on_trap = true;
+
+  // -----------------------------------------------------------------------------
   // '()' -> '("hello!")'
   mockIC.run_test("greet_0", greet_0, "4449444c0000",
-                  "4449444c0001710668656c6c6f21");
+                  "4449444c0001710668656c6c6f21", silent_on_trap, my_principal);
+
+  // '()' -> '(variant { err = 401 : nat16})'
+  // Unauthorized to call this API if not logged in
+  mockIC.run_test("greet_0_auth err", greet_0_auth, "4449444c0000",
+                  "4449444c016b01e58eb4027a0100009101", silent_on_trap,
+                  anonymous_principal);
+
+  // '()' -> '(variant { ok = "Hello expmt-gtxsw-inftj-ttabj-qhp5s-nozup-n3bbo-k7zvn-dg4he-knac3-lae" : text})'
+  // Responds with your principal when logged in.
+  mockIC.run_test(
+      "greet_0_auth ok", greet_0_auth, "4449444c0000",
+      "4449444c016b019cc201710100004548656c6c6f206578706d742d67747873772d696e66746a2d747461626a2d71687035732d6e6f7a75702d6e3362626f2d6b377a766e2d64673468652d6b6e6163332d6c6165",
+      silent_on_trap, my_principal);
 
   // '()' -> '(2023)'
-  mockIC.run_test("greet_1", greet_1, "4449444c0000", "4449444c00017ce70f");
+  mockIC.run_test("greet_1", greet_1, "4449444c0000", "4449444c00017ce70f",
+                  silent_on_trap, my_principal);
 
   // Pretend caller has a principal "expmt-gtxsw-inftj-ttabj-qhp5s-nozup-n3bbo-k7zvn-dg4he-knac3-lae"
   // '("C++ Developer")' -> '("hello C++ Developer!\nYour principal is: expmt-gtxsw-inftj-ttabj-qhp5s-nozup-n3bbo-k7zvn-dg4he-knac3-lae")'
   mockIC.run_test(
       "greet_2", greet_2, "4449444c0001710d432b2b20446576656c6f706572",
       "4449444c0001716768656c6c6f20432b2b20446576656c6f706572210a596f7572207072696e636970616c2069733a206578706d742d67747873772d696e66746a2d747461626a2d71687035732d6e6f7a75702d6e3362626f2d6b377a766e2d64673468652d6b6e6163332d6c6165",
-      false, "expmt-gtxsw-inftj-ttabj-qhp5s-nozup-n3bbo-k7zvn-dg4he-knac3-lae");
+      silent_on_trap, my_principal);
 
   // '(record { "icpp version" = 1 : int; OS = "Linux" : text })' ->
   // '(record { "icpp Release Details" = "Version = 1 & Operating System = Linux" : text; "release year" = 2023 : int })'
   mockIC.run_test(
       "greet_3", greet_3,
       "4449444c016c02a48a0171d2fae7d70d7c0100054c696e757801",
-      "4449444c016c02e3aa95930271b685be880f7c01002656657273696f6e203d20312026204f7065726174696e672053797374656d203d204c696e7578e70f");
+      "4449444c016c02e3aa95930271b685be880f7c01002656657273696f6e203d20312026204f7065726174696e672053797374656d203d204c696e7578e70f",
+      silent_on_trap, my_principal);
 
   // '(record { 6 = 42 : int; 9 = 43 : int }, record { 7 = 44 : int; 10 = 45 : int })' ->
   // '("Hello!", "Your secret numbers are:", 42 : int, 43 : int, 44 : int, 45 : int)'
   mockIC.run_test(
       "greet_4", greet_4, "4449444c026c02067c097c6c02077c0a7c0200012a2b2c2d",
-      "4449444c000671717c7c7c7c0648656c6c6f2118596f757220736563726574206e756d62657273206172653a2a2b2c2d");
+      "4449444c000671717c7c7c7c0648656c6c6f2118596f757220736563726574206e756d62657273206172653a2a2b2c2d",
+      silent_on_trap, my_principal);
 
   // returns 1 if any tests failed
   return mockIC.test_summary();
 }
```

## icpp/canisters/greet/src/greet.cpp

```diff
@@ -1,23 +1,50 @@
 #include "greet.h"
 
 #include <string>
 
 #include "ic_api.h"
 
+/* ---------------------------------------------------------
+  Respond with a 'std::string' wrapped in a CandidTypeText
+*/
 void greet_0() {
   IC_API ic_api(CanisterQuery{std::string(__func__)}, false);
   ic_api.to_wire(CandidTypeText{"hello!"});
 }
 
+/* ---------------------------------------------------------
+  Respond only to an authenticated user
+*/
+void greet_0_auth() {
+  IC_API ic_api(CanisterQuery{std::string(__func__)}, false);
+  CandidTypePrincipal caller = ic_api.get_caller();
+  std::string principal = caller.get_text();
+
+  // Respond with 401 (Unauthorized code) if user is not logged in
+  if (caller.is_anonymous()) {
+    uint16_t status_code = 401;
+    ic_api.to_wire(CandidTypeVariant{"err", CandidTypeNat16{status_code}});
+    return;
+  }
+
+  // Greet an authenticated user by their principal
+  ic_api.to_wire(CandidTypeVariant{"ok", CandidTypeText{"Hello " + principal}});
+}
+
+// Respond with an 'int' wrapped in a CandidTypeInt
 void greet_1() {
   IC_API ic_api(CanisterQuery{std::string(__func__)}, false);
   ic_api.to_wire(CandidTypeInt{2023});
 }
 
+/* ---------------------------------------------------------
+  Extract a 'std::string" from an incoming CandidTypeText
+  Respond with an 'std::string' wrapped in a CandidTypeText
+*/
 void greet_2() {
   IC_API ic_api(CanisterQuery{std::string(__func__)}, false);
 
   // Get the principal of the caller, as cryptographically verified by the IC
   CandidTypePrincipal caller = ic_api.get_caller();
 
   // Get the name, passed as a Candid parameter to this method
@@ -29,27 +56,30 @@
   msg.append("hello " + name + "!\n");
   msg.append("Your principal is: " + caller.get_text());
 
   // Send the response back
   ic_api.to_wire(CandidTypeText{msg});
 }
 
+/* ---------------------------------------------------------------------------
+  Extract an '__int128_t' & a 'std::string" from an incoming CandidTypeRecord
+  Respond with an '__int128_t' & a 'std::string" wrapped in a CandidTypeRecord
+*/
 void greet_3() {
   IC_API ic_api(CanisterQuery{std::string(__func__)}, false);
-  // ---------------------------------------------------------------------------
+
   // Get the data from the wire
   __int128_t icpp_version{0};
   std::string OS{""};
 
   CandidTypeRecord r_in;
   r_in.append("icpp version", CandidTypeInt{&icpp_version});
   r_in.append("OS", CandidTypeText{&OS});
   ic_api.from_wire(r_in);
 
-  // ---------------------------------------------------------------------------
   // Do something with the input
   std::string release_details;
   release_details.append("Version = " + std::to_string(int(icpp_version)) +
                          " & ");
   release_details.append("Operating System = " + OS);
 
   __int128_t release_year{0};
@@ -57,23 +87,25 @@
     release_year = 2023;
   } else {
     std::string msg;
     IC_API::trap("INPUT ERROR: the Release Year is not known for " +
                  release_details);
   }
 
-  // ---------------------------------------------------------------------------
   // Send it back
   CandidTypeRecord r_out;
   r_out.append("icpp Release Details", CandidTypeText{release_details});
   r_out.append("release year", CandidTypeInt{release_year});
   ic_api.to_wire(r_out);
 }
 
-// Demonstrate how to receive an argument list of two records & send an argument list of different CandidTypes
+/* ------------------------------------------------------------------------------------------------
+  Extract data from an incoming argument list, represented as a C++ vector of two CandidTypeRecords 
+  Respond using a C++ vector of different CandidTypeXXX objects
+*/
 void greet_4() {
   IC_API ic_api(CanisterQuery{std::string(__func__)}, false);
 
   __int128_t r1_i1{0};
   __int128_t r1_i2{0};
   CandidTypeRecord r1;
   r1.append(6, CandidTypeInt{&r1_i1});
@@ -81,24 +113,60 @@
 
   __int128_t r2_i1{0};
   __int128_t r2_i2{0};
   CandidTypeRecord r2;
   r2.append(7, CandidTypeInt{&r2_i1});
   r2.append(10, CandidTypeInt{&r2_i2});
 
-  std::vector<CandidType> args_in;
-  args_in.push_back(r1);
-  args_in.push_back(r2);
+  CandidArgs args_in;
+  args_in.append(r1);
+  args_in.append(r2);
   ic_api.from_wire(args_in);
 
   // Build the args_out vector
-  std::vector<CandidType> args_out;
-  args_out.push_back(CandidTypeText{"Hello!"});
-  args_out.push_back(CandidTypeText{"Your secret numbers are:"});
-  args_out.push_back(CandidTypeInt{r1_i1});
-  args_out.push_back(CandidTypeInt{r1_i2});
-  args_out.push_back(CandidTypeInt{r2_i1});
-  args_out.push_back(CandidTypeInt{r2_i2});
+  CandidArgs args_out;
+  args_out.append(CandidTypeText{"Hello!"});
+  args_out.append(CandidTypeText{"Your secret numbers are:"});
+  args_out.append(CandidTypeInt{r1_i1});
+  args_out.append(CandidTypeInt{r1_i2});
+  args_out.append(CandidTypeInt{r2_i1});
+  args_out.append(CandidTypeInt{r2_i2});
 
   // Send it back
   ic_api.to_wire(args_out);
-}
+}
+// void greet_4() {
+//   // build-native on windows has a compiler limitation
+//   // - std::vector<CandidType> is currently not supported
+//   #ifndef _WIN32
+//     IC_API ic_api(CanisterQuery{std::string(__func__)}, false);
+
+//     __int128_t r1_i1{0};
+//     __int128_t r1_i2{0};
+//     CandidTypeRecord r1;
+//     r1.append(6, CandidTypeInt{&r1_i1});
+//     r1.append(9, CandidTypeInt{&r1_i2});
+
+//     __int128_t r2_i1{0};
+//     __int128_t r2_i2{0};
+//     CandidTypeRecord r2;
+//     r2.append(7, CandidTypeInt{&r2_i1});
+//     r2.append(10, CandidTypeInt{&r2_i2});
+
+//     std::vector<CandidType> args_in;
+//     args_in.push_back(r1);
+//     args_in.push_back(r2);
+//     ic_api.from_wire(args_in);
+
+//     // Build the args_out vector
+//     std::vector<CandidType> args_out;
+//     args_out.push_back(CandidTypeText{"Hello!"});
+//     args_out.push_back(CandidTypeText{"Your secret numbers are:"});
+//     args_out.push_back(CandidTypeInt{r1_i1});
+//     args_out.push_back(CandidTypeInt{r1_i2});
+//     args_out.push_back(CandidTypeInt{r2_i1});
+//     args_out.push_back(CandidTypeInt{r2_i2});
+
+//     // Send it back
+//     ic_api.to_wire(args_out);
+//   #endif
+// }
```

## icpp/canisters/greet/src/greet.did

```diff
@@ -1,9 +1,16 @@
+type StatusCode = nat16;
+type Result = 
+ variant {
+   err: StatusCode;
+   ok: text;
+ };
 service : {
     "greet_0": () -> (text) query;
+    "greet_0_auth": () -> (Result) query;
     "greet_1": () -> (int) query;
     "greet_2" : (text) -> (text) query;
     "greet_3": (record { "icpp version" : int; OS : text }) -> 
                       (record { "icpp Release Details" : text; "release year" : int }) 
                       query;
     "greet_4": (record { 6 : int; 9 : int }, record { 7 : int; 10 : int }) -> 
                        (text, text, int, int, int, int)
```

## icpp/canisters/greet/src/greet.h

```diff
@@ -1,9 +1,10 @@
 #pragma once
 
 #include "wasm_symbol.h"
 
 void greet_0() WASM_SYMBOL_EXPORTED("canister_query greet_0");
+void greet_0_auth() WASM_SYMBOL_EXPORTED("canister_query greet_0_auth");
 void greet_1() WASM_SYMBOL_EXPORTED("canister_query greet_1");
 void greet_3() WASM_SYMBOL_EXPORTED("canister_query greet_3");
 void greet_4() WASM_SYMBOL_EXPORTED("canister_query greet_4");
 void greet_2() WASM_SYMBOL_EXPORTED("canister_query greet_2");
```

## icpp/canisters/greet/test/test_apis.py

```diff
@@ -26,14 +26,48 @@
         canister_argument="()",
         network=network,
     )
     expected_response = '("hello!")'
     assert response == expected_response
 
 
+# Run this test with anonymous identity
+def test__greet_0_auth_err(identity_anonymous: dict[str, str], network: str) -> None:
+    # double check the identity_anonymous fixture worked
+    assert identity_anonymous["identity"] == "anonymous"
+    assert identity_anonymous["principal"] == "2vxsx-fae"
+
+    response = call_canister_api(
+        dfx_json_path=DFX_JSON_PATH,
+        canister_name=CANISTER_NAME,
+        canister_method="greet_0_auth",
+        canister_argument="()",
+        network=network,
+    )
+    expected_response = "(variant { err = 401 : nat16 })"
+    assert response == expected_response
+
+
+# Run this test with a logged in default identity
+def test__greet_0_auth_ok(identity_default: dict[str, str], network: str) -> None:
+    # double check the identity_anonymous fixture worked
+    assert identity_default["identity"] == "default"
+
+    response = call_canister_api(
+        dfx_json_path=DFX_JSON_PATH,
+        canister_name=CANISTER_NAME,
+        canister_method="greet_0_auth",
+        canister_argument="()",
+        network=network,
+    )
+    principal = identity_default["principal"]
+    expected_response = f'(variant {{ ok = "Hello {principal}" }})'
+    assert response == expected_response
+
+
 def test__greet_1(network: str) -> None:
     response = call_canister_api(
         dfx_json_path=DFX_JSON_PATH,
         canister_name=CANISTER_NAME,
         canister_method="greet_1",
         canister_argument="()",
         network=network,
```

## icpp/ic/canister/canister.h

```diff
@@ -1,13 +1,11 @@
 // https://internetcomputer.org/docs/current/references/ic-interface-spec#entry-points
 
 #pragma once
 
-#include <variant>
-
 // ------------------------------------------------------------------
 // Forward declarations
 
 // The Canister Entry Point base classes
 class CanisterBase;
 
 // The Canister Entry Point classes
@@ -21,27 +19,14 @@
 class CanisterUpdate;
 class CanisterQuery;
 class CanisterReplyCallback;
 class CanisterRejectCallback;
 class CanisterCleanupCallback;
 class CanisterStart;
 
-// The std::variant alias
-using CanisterEntry =
-    std::variant<CanisterQuery, CanisterUpdate, CanisterInit,
-                 CanisterPreUpgrade, CanisterPostUpgrade,
-                 CanisterInspectMessage, CanisterHeartbeat, CanisterGlobalTimer,
-                 CanisterReplyCallback, CanisterRejectCallback,
-                 CanisterCleanupCallback, CanisterStart>;
-
-// https://subscription.packtpub.com/book/programming/9781787120495/8/ch08lvl1sec91/storing-different-types-with-stdvariant
-template <typename T> bool is_CanisterEntryPoint(const CanisterEntry &c) {
-  return holds_alternative<T>(c);
-}
-
 // ------------------------------------------------------------------
 // The include files
 
 // The Canister Entry Point base classes
 #include "canister_base.h"
 
 // The Canister Entry Point classes
```

## icpp/ic/canister/canister_base.cpp

```diff
@@ -1,13 +1,17 @@
 // The base class for all Canister Entry points
 
 #include "canister.h"
 
+#include "candid_type.h"
+#include "candid_type_all_includes.h"
 #include "ic_api.h"
 
 CanisterBase::CanisterBase() {}
 
-CanisterBase::CanisterBase(std::string calling_function) {
+CanisterBase::CanisterBase(std::string calling_function,
+                           std::string entry_type) {
   m_calling_function = calling_function;
+  m_entry_type = entry_type;
 }
 
 CanisterBase::~CanisterBase() {}
```

## icpp/ic/canister/canister_base.h

```diff
@@ -5,14 +5,36 @@
 #include <string>
 
 #include "canister.h"
 
 class CanisterBase {
 public:
   CanisterBase();
-  CanisterBase(std::string calling_function);
+  CanisterBase(std::string calling_function, std::string entry_type);
   ~CanisterBase();
 
+  // Canister Entry Point we're in
+  // https://internetcomputer.org/docs/current/references/ic-interface-spec#system-api-imports
+  bool is_entry_I() {
+    return m_entry_type == "CanisterInit" ||
+           m_entry_type == "CanisterPostUpgrade";
+  }
+  bool is_entry_G() { return m_entry_type == "CanisterPreUpgrade"; }
+  bool is_entry_U() { return m_entry_type == "CanisterUpdate"; }
+  bool is_entry_Q() { return m_entry_type == "CanisterQuery"; }
+  bool is_entry_Ry() { return m_entry_type == "CanisterReplyCallback"; }
+  bool is_entry_Rt() { return m_entry_type == "CanisterRejectCallback"; }
+  bool is_entry_C() { return m_entry_type == "CanisterCleanupCallback"; }
+  bool is_entry_s() { return m_entry_type == "CanisterStart"; }
+  bool is_entry_F() { return m_entry_type == "CanisterInspectMessage"; }
+  bool is_entry_T() {
+    return m_entry_type == "CanisterHeartbeat" ||
+           m_entry_type == "CanisterGlobalTimer";
+  }
+  bool is_entry_Wildcard() { return m_entry_type != "CanisterStart"; }
+
 protected:
   // The calling function
   std::string m_calling_function{""};
+  // The entry type
+  std::string m_entry_type{"CanisterQuery"};
 };
```

## icpp/ic/canister/canister_cleanup_callback.cpp

```diff
@@ -1,8 +1,8 @@
 #include "canister.h"
 
 CanisterCleanupCallback::CanisterCleanupCallback() : CanisterBase() {}
 
 CanisterCleanupCallback::CanisterCleanupCallback(std::string calling_function)
-    : CanisterBase(calling_function) {}
+    : CanisterBase(calling_function, std::string(__func__)) {}
 
 CanisterCleanupCallback::~CanisterCleanupCallback() {}
```

## icpp/ic/canister/canister_global_timer.cpp

```diff
@@ -1,8 +1,8 @@
 #include "canister.h"
 
 CanisterGlobalTimer::CanisterGlobalTimer() : CanisterBase() {}
 
 CanisterGlobalTimer::CanisterGlobalTimer(std::string calling_function)
-    : CanisterBase(calling_function) {}
+    : CanisterBase(calling_function, std::string(__func__)) {}
 
 CanisterGlobalTimer::~CanisterGlobalTimer() {}
```

## icpp/ic/canister/canister_heartbeat.cpp

```diff
@@ -1,8 +1,8 @@
 #include "canister.h"
 
 CanisterHeartbeat::CanisterHeartbeat() : CanisterBase() {}
 
 CanisterHeartbeat::CanisterHeartbeat(std::string calling_function)
-    : CanisterBase(calling_function) {}
+    : CanisterBase(calling_function, std::string(__func__)) {}
 
 CanisterHeartbeat::~CanisterHeartbeat() {}
```

## icpp/ic/canister/canister_init.cpp

```diff
@@ -1,8 +1,8 @@
 #include "canister.h"
 
 CanisterInit::CanisterInit() : CanisterBase() {}
 
 CanisterInit::CanisterInit(std::string calling_function)
-    : CanisterBase(calling_function) {}
+    : CanisterBase(calling_function, std::string(__func__)) {}
 
 CanisterInit::~CanisterInit() {}
```

## icpp/ic/canister/canister_inspect_message.cpp

```diff
@@ -1,8 +1,8 @@
 #include "canister.h"
 
 CanisterInspectMessage::CanisterInspectMessage() : CanisterBase() {}
 
 CanisterInspectMessage::CanisterInspectMessage(std::string calling_function)
-    : CanisterBase(calling_function) {}
+    : CanisterBase(calling_function, std::string(__func__)) {}
 
 CanisterInspectMessage::~CanisterInspectMessage() {}
```

## icpp/ic/canister/canister_post_upgrade.cpp

```diff
@@ -1,8 +1,8 @@
 #include "canister.h"
 
 CanisterPostUpgrade::CanisterPostUpgrade() : CanisterBase() {}
 
 CanisterPostUpgrade::CanisterPostUpgrade(std::string calling_function)
-    : CanisterBase(calling_function) {}
+    : CanisterBase(calling_function, std::string(__func__)) {}
 
 CanisterPostUpgrade::~CanisterPostUpgrade() {}
```

## icpp/ic/canister/canister_pre_upgrade.cpp

```diff
@@ -1,8 +1,8 @@
 #include "canister.h"
 
 CanisterPreUpgrade::CanisterPreUpgrade() : CanisterBase() {}
 
 CanisterPreUpgrade::CanisterPreUpgrade(std::string calling_function)
-    : CanisterBase(calling_function) {}
+    : CanisterBase(calling_function, std::string(__func__)) {}
 
 CanisterPreUpgrade::~CanisterPreUpgrade() {}
```

## icpp/ic/canister/canister_query.cpp

```diff
@@ -1,8 +1,8 @@
 #include "canister.h"
 
 CanisterQuery::CanisterQuery() : CanisterBase() {}
 
 CanisterQuery::CanisterQuery(std::string calling_function)
-    : CanisterBase(calling_function) {}
+    : CanisterBase(calling_function, std::string(__func__)) {}
 
 CanisterQuery::~CanisterQuery() {}
```

## icpp/ic/canister/canister_reject_callback.cpp

```diff
@@ -1,8 +1,8 @@
 #include "canister.h"
 
 CanisterRejectCallback::CanisterRejectCallback() : CanisterBase() {}
 
 CanisterRejectCallback::CanisterRejectCallback(std::string calling_function)
-    : CanisterBase(calling_function) {}
+    : CanisterBase(calling_function, std::string(__func__)) {}
 
 CanisterRejectCallback::~CanisterRejectCallback() {}
```

## icpp/ic/canister/canister_reply_callback.cpp

```diff
@@ -1,8 +1,8 @@
 #include "canister.h"
 
 CanisterReplyCallback::CanisterReplyCallback() : CanisterBase() {}
 
 CanisterReplyCallback::CanisterReplyCallback(std::string calling_function)
-    : CanisterBase(calling_function) {}
+    : CanisterBase(calling_function, std::string(__func__)) {}
 
 CanisterReplyCallback::~CanisterReplyCallback() {}
```

## icpp/ic/canister/canister_start.cpp

```diff
@@ -1,8 +1,8 @@
 #include "canister.h"
 
 CanisterStart::CanisterStart() : CanisterBase() {}
 
 CanisterStart::CanisterStart(std::string calling_function)
-    : CanisterBase(calling_function) {}
+    : CanisterBase(calling_function, std::string(__func__)) {}
 
 CanisterStart::~CanisterStart() {}
```

## icpp/ic/canister/canister_update.cpp

```diff
@@ -1,8 +1,8 @@
 #include "canister.h"
 
 CanisterUpdate::CanisterUpdate() : CanisterBase() {}
 
 CanisterUpdate::CanisterUpdate(std::string calling_function)
-    : CanisterBase(calling_function) {}
+    : CanisterBase(calling_function, std::string(__func__)) {}
 
 CanisterUpdate::~CanisterUpdate() {}
```

## icpp/ic/ic0mock/global.h

```diff
@@ -1,7 +1,7 @@
 // A pointer to a global instance of MockIC
 
 #pragma once
 
-#include "mock_ic.h"
+#include "mock_ic_.h"
 
 inline MockIC *global_mockIC;
```

## icpp/ic/ic0mock/ic0.cpp

```diff
@@ -1,24 +1,29 @@
 // Mocked ic0 functions to mimic the IC.
 // Use in a native executable, for development, debug & testing.
 
 #include "ic0.h"
+#include "candid_type.h"
+#include "candid_type_all_includes.h"
+#include "ic_api.h"
 #include "pro.h"
 
 #include <algorithm>
 #include <cstddef>
 #include <cstdint>
 
 #include <chrono>
 #include <iomanip>
 #include <iostream>
 #include <stdexcept>
 
+#include "candid_type.h"
+#include "candid_type_all_includes.h"
 #include "global.h"
-#include "mock_ic.h"
+#include "vec_bytes.h"
 
 // See:
 // https://smartcontracts.org/docs/interface-spec/index.html#system-api-imports
 uint32_t ic0_msg_arg_data_size() {
   Pro().exit_if_not_pro();
   return 0;
 };
```

## icpp/ic/ic0mock/mock_ic.cpp

```diff
@@ -1,14 +1,17 @@
 // A class to mimic the IC canister runtime, so we can compile,
 // develop and debug using a native executable, including
 // setting breakpoints in our IDE.
 
-#include "mock_ic.h"
 #include "candid_assert.h"
+#include "candid_type.h"
+#include "candid_type_all_includes.h"
 #include "global.h"
+#include "ic_api.h"
+#include "mock_ic_.h"
 #include "pro.h"
 
 #include <cstddef>
 #include <cstdlib>
 #include <cstring>
 
 #include <algorithm>
```

## icpp/ic/ic0mock/mock_ic.h

```diff
@@ -1,53 +1,6 @@
-// A class to mimic the IC canister runtime, so we can compile,
-// develop and debug using a native executable, including
-// setting breakpoints in our IDE.
-
+// To be included in the `native/main.cpp` of icpp projects.
 #pragma once
 
-#include "ic_api.h"
-#include <iostream>
-#include <vector>
-
-class MockIC {
-public:
-  // Constructors
-  explicit MockIC(const bool &exit_on_fail);
-
-  // Destructor
-  ~MockIC();
-
-  std::vector<std::byte> vec_in() { return m_B_in.vec(); }
-  std::vector<std::byte> vec_out() { return m_B_out.vec(); }
-  CandidTypePrincipal get_caller() { return m_caller; }
-
-  VecBytes get_msg_in() { return m_B_in; }
-  VecBytes get_msg_out() { return m_B_out; }
-
-  void msg_reply_data_append(uintptr_t src, uint32_t size);
-
-  int assert_candid_out(const std::string &candid_out_expected);
-
-  int run_test(const std::string &test_name, void (*api_callback)(),
-               const std::string &candid_in,
-               const std::string &candid_out_expected,
-               const bool silent_on_trap = false,
-               const std::string &caller = "");
-
-  int run_trap_test(const std::string &test_name, void (*api_callback)(),
-                    const std::string &candid_in,
-                    const bool silent_on_trap = true,
-                    const std::string &caller = "");
-
-  int test_summary();
-
-  bool get_silent_on_trap() { return m_silent_on_trap; }
-
-private:
-  VecBytes m_B_in;
-  VecBytes m_B_out;
-  CandidTypePrincipal m_caller;
-  int m_tests_total;
-  int m_tests_failed;
-  bool m_exit_on_fail;
-  bool m_silent_on_trap;
-};
+#include "candid_type.h"
+#include "candid_type_all_includes.h"
+#include "global.h"
```

## icpp/ic/icapi/ic_api.cpp

```diff
@@ -3,31 +3,32 @@
 //
 // References:
 //  -
 //  https://smartcontracts.org/docs/interface-spec/index.html#system-api-imports
 //  - https://github.com/dfinity/candid/blob/master/spec/Candid.md#binary-format
 
 #include "ic_api.h"
+#include "candid_deserialize.h"
+#include "candid_serialize.h"
+#include "candid_type.h"
+#include "candid_type_all_includes.h"
 
 #include <cassert>
 #include <cstddef>
 #include <cstring>
 #include <limits.h>
-
 #include <string>
-// #include <sstream>
-// #include <iomanip>
 
 #include "ic0.h"
 
 IC_API::IC_API() : IC_API(CanisterQuery("-unknown-"), false) {}
 IC_API::IC_API(const bool &debug_print)
     : IC_API(CanisterQuery("-unknown-"), debug_print) {}
 
-IC_API::IC_API(const CanisterEntry &canister_entry, const bool &dbug)
+IC_API::IC_API(const CanisterBase &canister_entry, const bool &dbug)
     : m_canister_entry(canister_entry), m_debug_print(dbug) {
   // Fill 'm_B_in' with the bytes of msg_arg_data
   std::vector<uint8_t> bytes(ic0_msg_arg_data_size());
   ic0_msg_arg_data_copy(reinterpret_cast<uintptr_t>(bytes.data()), 0,
                         bytes.size());
   m_B_in.store(bytes.data(), bytes.size());
 
@@ -44,15 +45,16 @@
     m_B_in.debug_print();
   }
 }
 
 IC_API::~IC_API() {
   // https://internetcomputer.org/docs/current/references/ic-interface-spec#system-api-imports
   // Only can call msg_reply if entry is `U Q Ry Rt`
-  if (is_entry_U() || is_entry_Q() || is_entry_Ry() || is_entry_Rt()) {
+  if (m_canister_entry.is_entry_U() || m_canister_entry.is_entry_Q() ||
+      m_canister_entry.is_entry_Ry() || m_canister_entry.is_entry_Rt()) {
     // If the method did not yet call to_wire, do it automatic without content
     if (!m_called_to_wire) {
       to_wire();
     }
     // Send the out over the wire
     msg_reply();
   }
@@ -84,31 +86,31 @@
 }
 
 void IC_API::trap(const std::string &s) { IC_API::trap(s.c_str()); }
 
 uint64_t IC_API::time() { return ic0_time(); }
 
 // DeSerialize the byte stream received over the wire
-void IC_API::from_wire(std::vector<CandidType> A) {
+void IC_API::from_wire(CandidArgs A) {
   if (m_called_from_wire) {
     trap("ERROR: The canister is calling ic_api.from_wire() more than once.");
   }
   m_called_from_wire = true;
 
   CandidDeserialize(m_B_in, A);
 }
 // DeSerialize the byte stream received over the wire
 void IC_API::from_wire(CandidType c) {
-  std::vector<CandidType> A;
-  A.push_back(c);
+  CandidArgs A;
+  A.append(c);
   from_wire(A);
 }
 // DeSerialize the byte stream received over the wire, when no arguments are expected
 void IC_API::from_wire() {
-  std::vector<CandidType> A;
+  CandidArgs A;
   from_wire(A);
 }
 
 std::optional<__uint128_t> IC_API::string_to_uint128_t(const std::string &str) {
   __uint128_t result = 0;
   for (char c : str) {
     if (c < '0' || c > '9')
@@ -175,26 +177,26 @@
     str = "-" + str;
   }
   return str;
 }
 
 // Serialize to byte stream & send out over the wire, when no arguments are sent
 void IC_API::to_wire() {
-  std::vector<CandidType> args_out;
+  CandidArgs args_out;
   to_wire(args_out);
 }
 
 // Serialize to byte stream & send out over the wire
 void IC_API::to_wire(const CandidType &arg_out) {
-  std::vector<CandidType> args_out;
-  args_out.push_back(arg_out);
+  CandidArgs args_out;
+  args_out.append(arg_out);
   to_wire(args_out);
 }
 
-void IC_API::to_wire(const std::vector<CandidType> &args_out) {
+void IC_API::to_wire(const CandidArgs &args_out) {
   if (m_called_to_wire) {
     trap("ERROR: The canister is calling ic_api.to_wire() more than once.");
   }
   m_called_to_wire = true;
 
   m_B_out = CandidSerialize(args_out).get_B();
```

## icpp/ic/icapi/ic_api.h

```diff
@@ -15,28 +15,28 @@
 #include <set>
 #include <string>
 #include <typeinfo>
 #include <unordered_map>
 #include <unordered_set>
 #include <vector>
 
-#include "candid.h"
-#include "candid_type_principal.h"
+#include "candid_type.h"
+#include "candid_type_all_includes.h"
 #include "canister.h"
 #include "vec_bytes.h"
 
 class IC_API {
 public:
   IC_API();
 
   [[deprecated("Replace with: IC_API ic_api(CanisterQuery{std::string(__func__)}, false)")]] IC_API(
       const bool &debug_print);
 
   // docs start: ic_api
-  IC_API(const CanisterEntry &canister_entry,
+  IC_API(const CanisterBase &canister_entry,
          const bool &debug_print); // docs end: ic_api
 
   ~IC_API();
 
   // docs start: demo_debug_print
   static void debug_print(const char *msg);
   static void debug_print(const std::string &msg); // docs end: demo_debug_print
@@ -51,15 +51,16 @@
   // docs start: get_caller
   CandidTypePrincipal get_caller(); // docs end: get_caller
 
   // Receive things from the wire in candid format
   // docs start: from_wire
   void from_wire();
   void from_wire(CandidType arg_in);
-  void from_wire(std::vector<CandidType> args_in); // docs end: from_wire
+  void from_wire(CandidArgs args_in); // docs end: from_wire
+  // void from_wire(std::vector<CandidType> args_in); // DEPRECATED
 
   // Convert string to __uint128_t & __int128_t
   // clang-format off
   // docs start: string_to_128
   static std::optional<__uint128_t> string_to_uint128_t(const std::string &str);
   static std::optional<__int128_t> string_to_int128_t(const std::string &str); // docs end: string_to_128
   // clang-format on
@@ -69,53 +70,16 @@
   static std::string to_string_128(__uint128_t v);
   static std::string to_string_128(__int128_t v); // docs end: to_string_128
 
   // Send things back over the wire in candid format
   // docs start: to_wire
   void to_wire();
   void to_wire(const CandidType &arg_out);
-  void to_wire(const std::vector<CandidType> &args_out); // docs end: to_wire
-
-  // Canister Entry Point we're in
-  // https://internetcomputer.org/docs/current/references/ic-interface-spec#system-api-imports
-  bool is_entry_I() {
-    return std::holds_alternative<CanisterInit>(m_canister_entry) ||
-           std::holds_alternative<CanisterPostUpgrade>(m_canister_entry);
-  }
-  bool is_entry_G() {
-    return std::holds_alternative<CanisterPreUpgrade>(m_canister_entry);
-  }
-  bool is_entry_U() {
-    return std::holds_alternative<CanisterUpdate>(m_canister_entry);
-  }
-  bool is_entry_Q() {
-    return std::holds_alternative<CanisterQuery>(m_canister_entry);
-  }
-  bool is_entry_Ry() {
-    return std::holds_alternative<CanisterReplyCallback>(m_canister_entry);
-  }
-  bool is_entry_Rt() {
-    return std::holds_alternative<CanisterRejectCallback>(m_canister_entry);
-  }
-  bool is_entry_C() {
-    return std::holds_alternative<CanisterCleanupCallback>(m_canister_entry);
-  }
-  bool is_entry_s() {
-    return std::holds_alternative<CanisterStart>(m_canister_entry);
-  }
-  bool is_entry_F() {
-    return std::holds_alternative<CanisterInspectMessage>(m_canister_entry);
-  }
-  bool is_entry_T() {
-    return std::holds_alternative<CanisterHeartbeat>(m_canister_entry) ||
-           std::holds_alternative<CanisterGlobalTimer>(m_canister_entry);
-  }
-  bool is_entry_Wildcard() {
-    return !std::holds_alternative<CanisterStart>(m_canister_entry);
-  }
+  void to_wire(const CandidArgs &args_out); // docs end: to_wire
+  // void to_wire(const std::vector<CandidType> &args_out); // DEPRECATED
 
   // Orthogonal Persistence
   template <typename T>
   void store_vector_orthogonal(const std::vector<T> &vec, T **p_data,
                                __uint128_t *len) {
     persist_container_sequence(vec, p_data, len, typeid(vec).name());
   }
@@ -231,15 +195,15 @@
     if (p_data == nullptr) {
       return std::string(); // Return empty string if p_data is nullptr.
     }
     return std::string(p_data);
   }
 
 private:
-  CanisterEntry m_canister_entry;
+  CanisterBase m_canister_entry;
   bool m_debug_print{false};
   VecBytes m_B_in;
   VecBytes m_B_out;
   CandidTypePrincipal m_caller;
   void msg_reply();
 
   bool m_called_from_wire{false};
```

## icpp/ic/pro/pro.cpp

```diff
@@ -3,26 +3,31 @@
 /*
 ********************************************************************************
 * IT IS NOT ALLOWED TO MODIFY THIS FILE OR ANY FILE THAT CALLS THESE FUNCTIONS *
 ********************************************************************************
 */
 
 #include "pro.h"
+#include "candid_type.h"
+#include "candid_type_all_includes.h"
 #include "ic_api.h"
 
 Pro::Pro() {}
 Pro::~Pro() {}
 
 // Exit if not running a licensed icpp-pro.
 void Pro::exit_if_not_pro() {
   if (!is_pro()) {
     std::string msg;
     msg.append("ERROR: this functionality requires icpp-pro\n");
     msg.append("\n");
-    msg.append("For licensing, contact us at icpp@icpp.world\n");
+    msg.append("You can just upgrade with: `pip install icpp-pro`\n");
+    msg.append("But please be a sport, and donate a little. Thank YOU!\n");
+    msg.append(
+        "For details, see: https://docs.icpp.world/index.html#donations-welcome`\n");
     msg.append("\n");
     IC_API::trap(msg);
   }
 }
 
 // Returns true if running a licensed icpp-pro
 bool Pro::is_pro() { return false; }
```

## Comparing `icpp_free-2.9.0.dist-info/LICENSE` & `icpp_free-3.0.0.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `icpp_free-2.9.0.dist-info/METADATA` & `icpp_free-3.0.0.dist-info/METADATA`

 * *Files 4% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: icpp-free
-Version: 2.9.0
+Version: 3.0.0
 Summary: C++ Canister Development Kit (CDK) for the Internet Computer
 Home-page: https://docs.icpp.world/
 Author: icppWorld
 Author-email: icpp@icpp.world
 License: MIT
 Keywords: Internet Computer,C++,Canister Development Kit,CDK,Smart Contracts,blockchain
 Classifier: Development Status :: 4 - Beta
@@ -14,15 +14,15 @@
 Classifier: Programming Language :: Python :: 3.9
 Classifier: Programming Language :: Python :: 3.10
 Classifier: Programming Language :: Python :: 3.11
 Classifier: Programming Language :: Python :: 3 :: Only
 Requires-Python: >=3.8
 Description-Content-Type: text/markdown
 License-File: LICENSE
-Requires-Dist: icpp-candid (==2.9.0)
+Requires-Dist: icpp-candid (==3.0.0)
 Requires-Dist: typer[all] (>=0.9.0)
 Requires-Dist: tomli
 Requires-Dist: requests
 Requires-Dist: enlighten
 Requires-Dist: pytest
 Provides-Extra: dev
 Requires-Dist: black ; extra == 'dev'
```

## Comparing `icpp_free-2.9.0.dist-info/RECORD` & `icpp_free-3.0.0.dist-info/RECORD`

 * *Files 10% similar despite different names*

```diff
@@ -1,80 +1,82 @@
 icpp/__init__.py,sha256=5BfpNFB6SJywAquvhh7hDVg7sv90_DxJP_cWmvsk2Dc,747
 icpp/__main__.py,sha256=fK15a0FT8qE_XkPGLsFwoPXk7_2ExKzIw2Bhj1SQWwI,1086
-icpp/commands_build_native.py,sha256=bBn8QwjYmzpwNRkzIJF4kpFUr7DL1tAGW4p7kWyBfa8,1053
-icpp/commands_build_wasm.py,sha256=5q7vIhfvZK_b5StH3OG2kMHkTCalsVVekm2YqYgdaV8,5433
+icpp/commands_build_native.py,sha256=Ut72Lio6obc8C5c-mUjQ0tzN8MaXDcQw-2yBM18bGOM,1153
+icpp/commands_build_wasm.py,sha256=sDVLeE3leMf2WVKYZs3NuPBZydrVIThxLRL-3hTnqS8,7957
 icpp/commands_get.py,sha256=UpriQcUxFU_ahs2Niq7tDwo5d8ZArDo9NcuuYEg1xo0,1122
 icpp/commands_init.py,sha256=gL5AsNL3DqEpla9v2GVHimp7ILAWSKoZBzjbJC7G7rs,753
-icpp/commands_install_wasi_sdk.py,sha256=i908EsIPBtZ1DM7o3h0Ug61XIp3O0_JQVslA4NN1sqw,4724
-icpp/config_default.py,sha256=xpBMhiF2SpIU0dOCHkOp5Sm_8d2RfXyn5ayUwk-M4fg,6070
+icpp/commands_install_wasi_sdk.py,sha256=M1zvRggcOVZsUxKqUnz8uiXcDncVPSNaSWk4rZ_vC74,4804
+icpp/config_default.py,sha256=Uth4zYqCZgs_JZHMsRE24QnFgjnVsWnRw01BUSUsyIo,6097
 icpp/conftest_base.py,sha256=YjRa7qIoR2dzPVykr9dvPGgk-SGUEudxh7tqLc8BS_o,2565
-icpp/decorators.py,sha256=L4ZLaoFNuXmiApFqkLTEazHcPx2bWgCTIciNDltN2Hg,2944
-icpp/icpp_toml.py,sha256=4azeRkGyKRx7p3bin7U99NcR2zoboCyt7Ftut3HHS6A,3776
+icpp/decorators.py,sha256=tRKJoCX-bDBzhpqscvkGOAUJdAKreyYrfqvD9K44JZI,3558
+icpp/icpp_toml.py,sha256=X6pjW1bZNGnmWr0gNoEWMA6j5CuDQA_3J_2BEorgzeA,4002
 icpp/options_build.py,sha256=A8RlkYF19wYn1TyQ9TwuMEan2rZ8lJiVRdMsJw93ADs,670
 icpp/options_main.py,sha256=0pXSxX2WFgvelftoyU3vVY9ya98h5U7aiOobLopqkMM,925
-icpp/pro.py,sha256=So9VAIHXfogodjQdNA6mEqcoP2lebq45riqPu3RxYO8,879
+icpp/pro.py,sha256=xf0Fsi0RsMzt_ozxqoB82oIw0xR3LwCp9kw_fNQkYbM,1076
 icpp/py.typed,sha256=ZYhofmNLSj2zLe3tuB6mCBQnkX7Hw-vARfbOds4MQJI,98
-icpp/run_shell_cmd.py,sha256=km76SFWq1RgEojH3llp1Na1hP0gSNCKIBsv82bcvphk,5280
-icpp/smoketest.py,sha256=sj6MOTBi1j3p_Al3YH8FqkN_t5vY6o5x1jc7gcytLI0,1506
-icpp/version.py,sha256=8jHeHX6BWskKZAVikjvr80T7x_se5sidohKaotKEVnE,322
+icpp/run_shell_cmd.py,sha256=JsQpgTrapxgmNzD8OEM-qP3Qr3HdEbkzUqK7bSs6AAg,5578
+icpp/smoketest.py,sha256=izyMKESSRd41pu_bvTq4_1GH4i8BUwWzZT09nFyyKOo,1642
+icpp/version.py,sha256=I3qkhM3mJuMVKLE1NsfAu5xYSQfDEVsyvdjxS2Wo73k,322
 icpp/version_wasi_sdk.py,sha256=hfPErlEyrebbxQLamaw2IDCEt4VUmQzM8E_o01Y4Ipw,231
 icpp/canisters/greet/README.md,sha256=4_7TnftpGy_nmsBWYxonMxPOp0ZlaAy-RSxG-Um-LTQ,92
-icpp/canisters/greet/demo.sh,sha256=sOVvwST_h8hXHTl4hZRyjFlF0IOgzPEQSIIlK0JvMEE,774
-icpp/canisters/greet/dfx.json,sha256=zuayKt_qfqmQSipxJO-m6EDStN24yYK2acBuOGXwi-0,283
+icpp/canisters/greet/demo.ps1,sha256=lHF7lD23uquW9mcOi20otAt9avYZR6BbhNSwKm82QAo,3389
+icpp/canisters/greet/demo.sh,sha256=QRr41Vk8eX1SQxUu3iLCDDbnt5HmzC8iz-z9ZaERV_o,2404
+icpp/canisters/greet/dfx.json,sha256=dUJa-TG9Zm6pr3QDyEVggqBJ_q7yPsRXB9dENQQydSc,232
 icpp/canisters/greet/icpp.toml,sha256=xwT4N36kEaCxE_rg2hUY5C4Q5g8dj49VrDv5Z9Rp8SA,474
-icpp/canisters/greet/native/main.cpp,sha256=Iat-ZRjyK9WaTy7lxZ52lrygWhAZhLOxbh8fET74wfc,2061
+icpp/canisters/greet/native/main.cpp,sha256=cX8PVHqoJaClvHSWmh7CkF4e5ErmoyN9Onf36mm722U,3297
 icpp/canisters/greet/native/main.h,sha256=5xMtQn9aTHwcjRjCw1BQsrqXx1Uj1bw679lHJTkHD6U,137
-icpp/canisters/greet/src/greet.cpp,sha256=YWqNrjwZW9LjFz4kk20UR9-8NvHyTMwTTMDTc6vqpso,3125
-icpp/canisters/greet/src/greet.did,sha256=Ac6INjTZLV61gXyFqVcmyeD8FCa0FEbWn0eAH0ufEk4,469
-icpp/canisters/greet/src/greet.h,sha256=Iz4df8nFZImP-VzSSZIRRbMR5EEn5s78RwJsZGMZD6M,354
+icpp/canisters/greet/src/greet.cpp,sha256=Qu0RvJIPrpgPZ0B4htqt2L124nh_RwOs0AruP9_kJQ4,5411
+icpp/canisters/greet/src/greet.did,sha256=L3NABW0jj5i7QVyB9OeerTEekfcSypxiF4u0qqA3YEo,599
+icpp/canisters/greet/src/greet.h,sha256=cBG4ZlLrq0sc5TyeYSllztRSumIxs29cAgGBQVmYqi8,427
 icpp/canisters/greet/test/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 icpp/canisters/greet/test/conftest.py,sha256=wQiN001FDSVpOFqFA6jjZg_oRyY1E0yH4vm-1wwMS2k,298
-icpp/canisters/greet/test/test_apis.py,sha256=rRuHXe3o91Joaw7D-C5HLuW4-atR4-Xd8I98fGMcdw0,2500
-icpp/ic/canister/canister.h,sha256=Na4yGgReUAaSbbJD7TE0GlY4GZJs5IFJveUpwESiiPo,1916
-icpp/ic/canister/canister_base.cpp,sha256=RYp2ySb1SoJfDFkyZKEc0EJpgKIFo0bXyo6fYoczLj4,262
-icpp/ic/canister/canister_base.h,sha256=qeBHxCJWc5z5tZsx5UVXJGKeq-whtloBKIwSUnNJeNM,295
-icpp/ic/canister/canister_cleanup_callback.cpp,sha256=nkiAPP7Oe8UDEjBIjW4t93wJQcVQimYmZ-YQYz5is3o,269
+icpp/canisters/greet/test/test_apis.py,sha256=s3LWt_2ebpXkLEn2x0SkWCzHcx-5dgsQ-JZIs9mP0nk,3723
+icpp/ic/canister/canister.h,sha256=Hrtq8DwHrtEFDWyucePiJ7kGXqPCFEQxAXvYfK_EFog,1288
+icpp/ic/canister/canister_base.cpp,sha256=H72dHXK4f0e0KqnLAmRg3w0CZj-0ysQLcJHt1wwmIYk,405
+icpp/ic/canister/canister_base.h,sha256=ZNpBwr1as-KKb4wwG6jtdByNSb3zgSJVBO2_ySrn48A,1389
+icpp/ic/canister/canister_cleanup_callback.cpp,sha256=3qZuLJ8NirpidbJn_hV_0uPwfxmKxZtaQLjINXws9xo,292
 icpp/ic/canister/canister_cleanup_callback.h,sha256=5r22M84iZMYyoB0A-wqn9MTaB0V--7TmRa9zySkaEU4,240
-icpp/ic/canister/canister_global_timer.cpp,sha256=8Qt1959uFxS43NyjPEcUfY188R5g2BK7FWMYDOG9VdE,245
+icpp/ic/canister/canister_global_timer.cpp,sha256=ZUJY7HNxdzb6YNizDstHkvyLiqMch17IsSRaWA0GLMI,268
 icpp/ic/canister/canister_global_timer.h,sha256=cwpX4se6bx0MCRsYJzYBHq0km6HxnqFogqQ8GgZQ7I4,224
-icpp/ic/canister/canister_heartbeat.cpp,sha256=M-yPtM7g_GAV0zRvLV9kBSrD0lqTrvXIbcFsnanZZVI,233
+icpp/ic/canister/canister_heartbeat.cpp,sha256=i_8akOXrAIZr_zUFeHLGluQzszUIiujWulxgRj8Hx-s,256
 icpp/ic/canister/canister_heartbeat.h,sha256=n8OIWbg1dq8F97GLsOz-0D2GgUj0fA5zuipGQQmjy7g,216
-icpp/ic/canister/canister_init.cpp,sha256=U-YYWkrq3jxAO-2q6OIyY4DkrrIjndpfxNpwzfg5soE,203
+icpp/ic/canister/canister_init.cpp,sha256=8xHFVqcEUmh9noJ6ZKEEEPHPzUiNDGZ2xu5ALmvlVZg,226
 icpp/ic/canister/canister_init.h,sha256=egpH-XXIZGcTgGuIz0R8JS2o9axWRcm5fM6HavYVKQk,196
-icpp/ic/canister/canister_inspect_message.cpp,sha256=yHG6iltuE66GivUtkAzrDuCKMEgufWJeP4PeTguFn_8,263
+icpp/ic/canister/canister_inspect_message.cpp,sha256=p94XNKpD7ih856vDf6MzXMQphjIBSEhmuqlWqCANLAE,286
 icpp/ic/canister/canister_inspect_message.h,sha256=CqMaSwf1aUh18GBbE5Rx3a5QkoSNIXDjrUO_AwsU4nw,236
-icpp/ic/canister/canister_post_upgrade.cpp,sha256=76jxYhswSKyThmoxjfKMM980VG0wg_l_vc-7NIcmcug,245
+icpp/ic/canister/canister_post_upgrade.cpp,sha256=5txkyA1Q1ga0VZrdgdxMC_DTbv7MTz5YsHsTu1jGwuk,268
 icpp/ic/canister/canister_post_upgrade.h,sha256=bIrmIoI-Z8UD3bttV82j3HF3TftEqw7gwMjYdaDPi_I,224
-icpp/ic/canister/canister_pre_upgrade.cpp,sha256=6M_iqEn_9_IrPahhuW9GFvwT_hZZU7rkXmY1MwhHlHw,239
+icpp/ic/canister/canister_pre_upgrade.cpp,sha256=C25KQ49SrsXZ1YOKgwImfVgj8E2wZkj_2Y9S6XqlYlo,262
 icpp/ic/canister/canister_pre_upgrade.h,sha256=M6yOZcD6FtlroA6f3KvzBg0i7CaP02NJlVt6UZ9l1O8,220
-icpp/ic/canister/canister_query.cpp,sha256=ttUril0t_lcPOQma10WfYmYJi4bKhCv9c_iu-Pj1Fvs,209
+icpp/ic/canister/canister_query.cpp,sha256=zCTmb0oaQ71xsjLE1l91LbKxhqqDta-_6Y_dSKPDeWc,232
 icpp/ic/canister/canister_query.h,sha256=wBJAN2Wm3nbEwlkumdZ52-1dlijdCerIxSMzA5BgJbA,200
-icpp/ic/canister/canister_reject_callback.cpp,sha256=Jfq1nCRJVpO0CIznVLq291SYbxFfibywSwFz1OWbnnQ,263
+icpp/ic/canister/canister_reject_callback.cpp,sha256=yFX0EXNBAynLL4pOgNLiIYJVnsbDYd2Ra3ZBKQ4oRL8,286
 icpp/ic/canister/canister_reject_callback.h,sha256=66Wtiz8bPfcP0rv--fjvcKL-4yoInO6tBkWYQ5x8CjY,236
-icpp/ic/canister/canister_reply_callback.cpp,sha256=EfrIn3lEuNe_oeFNAR0pLuGItf2M0wDbHc9h3fu_Vlk,257
+icpp/ic/canister/canister_reply_callback.cpp,sha256=Zrlr8YWV9F0FrUyqblbP480Gl7hdjUgX1ahQPkfIjjI,280
 icpp/ic/canister/canister_reply_callback.h,sha256=1bQ66AmigPLSHr_RY1qdBq7h0Kko4SUCGr0b4bmycPQ,232
-icpp/ic/canister/canister_start.cpp,sha256=f0eURsIQrLfoON2U6p5Goz-V3sW9sKakEIAY9tBA2RM,209
+icpp/ic/canister/canister_start.cpp,sha256=ARX2j1AzhgI9B_CAk3KH8XiPNr5rl1CRDF2epxGibME,232
 icpp/ic/canister/canister_start.h,sha256=3K2BE7PHatvR2B-L-4n5g4EduEgbZnmI6ywZYObEIGE,200
-icpp/ic/canister/canister_update.cpp,sha256=y5NwYFUdVF7pNSFofy95pTvmr-5mwfBEpqNUwLwVYQg,215
+icpp/ic/canister/canister_update.cpp,sha256=tn3uoWSLPsrb-ESKcH-Vyp1swouxRmIYKxkWOyk1Nfw,238
 icpp/ic/canister/canister_update.h,sha256=t68N4qosRdHzrWHCt5XDmrMkNr5N6iDW99Uu5AWqDI8,204
 icpp/ic/ic0/ic0.h,sha256=Kp0YetTZj7yzQDXQtwSW1tKD2ZxIUvxXrSP51SUIZ2E,3407
-icpp/ic/ic0mock/global.h,sha256=iLBQbjovKsiEEHH8DlUR9yrKbpg6pVpG-lEkWhTLN5k,110
-icpp/ic/ic0mock/ic0.cpp,sha256=6T1XJp-NxR1DKh_y728G2Y7yyQuKA8Xq3hNYRek-e54,3288
+icpp/ic/ic0mock/global.h,sha256=0atKaqQ8s0sz-yW6mtXSZOLRNnDbPlsE2uTTZmD75u0,111
+icpp/ic/ic0mock/ic0.cpp,sha256=lIWCAS_rE95PYQSbuYUe86QJHOM0gz5-JUiMVAw1-KQ,3436
 icpp/ic/ic0mock/ic0.h,sha256=LIwEeVZVfiXet4pxs9Ot3rPfhg1CtoYVIxPayVxNufY,2091
-icpp/ic/ic0mock/mock_ic.cpp,sha256=SW5_QJ1DaafDcACvw5Y9kMti47AlBv43gUhdObc1vx0,1372
-icpp/ic/ic0mock/mock_ic.h,sha256=-Vxlmw_xM_Zksve6K5Grpd---F5_SrbC_jNSqMdyu8c,1495
-icpp/ic/icapi/ic_api.cpp,sha256=oIRvn8whJpk6lAA3RjFj9QtnKHE7pTotQRybOGcoRC0,6636
-icpp/ic/icapi/ic_api.h,sha256=t2M93xX7F7ySZgVpwj_qrj1Kl5TgL2x6TkoGU2vms6o,9710
+icpp/ic/ic0mock/mock_ic.cpp,sha256=Tq-7suiKti7r70u1yC3f9AnzpwqyoNT6IHhza32XES0,1456
+icpp/ic/ic0mock/mock_ic.h,sha256=Fj-w4DQnF00K5VBcbLWXKhq6aOSdXNbIFQM_1c-tGpY,157
+icpp/ic/ic0mock/mock_ic_.h,sha256=uYc_RRQQhBsviU3ZKD0JKRnena36hecbu-HKbjZ0FCQ,1514
+icpp/ic/icapi/ic_api.cpp,sha256=wUwouWJdscfG5fejqUUWEQISUP1VGnZOdqvVtb18rvc,6705
+icpp/ic/icapi/ic_api.h,sha256=ugMs1wAwkhxkQ8UF1ccAewQQhKHCdIlz6IQUSWSyfU0,8460
 icpp/ic/icapi/wasm_symbol.h,sha256=4LMDxhayAWrroYbNVAcbrL_dWoh0fBVw0BjbxScgpEo,463
-icpp/ic/pro/pro.cpp,sha256=r7G6voSt78p9169JdFhFmS74oFomUEA65R4QRhqIm4k,754
+icpp/ic/pro/pro.cpp,sha256=zVWsHtyZFA4l1l-OmdGZ-oBzG3dlPykjPtoa6nk0Hls,1000
 icpp/ic/pro/pro.h,sha256=EcDcDN4b524nAXDVsNgFJ6vxSEBzBQmkcv34rLUBrSk,393
 icpp/ic/wasi_sdk_traps/__wasilibc_initialize_environ.c,sha256=wK61MY-YDkEBG8qIbV-NfUVCCaEQI3AR2GdEhE2z7h8,1370
 icpp/ic/wasi_sdk_traps/ic_trap.c,sha256=YMpQZaaYomfXWU5CqJnCLtYtVvrYNzTWbvwN1slGtbc,327
 icpp/ic/wasi_sdk_traps/ic_trap.h,sha256=XI8GZ_O5sOMpHd3PefoXR_69a1PoFM1Xsbrhl-b3Te4,70
 icpp/ic/wasi_sdk_traps/posix.c,sha256=E808LK-GO22gTm57e2XDeeVSHJ-w6JMubbSo-_u_ZiY,4743
 icpp/ic/wasi_sdk_traps/unreachable.c,sha256=On8IQmEUBJDLOCe1vKVRc55YQbPgm7H1iVzsl6QZldA,10198
-icpp_free-2.9.0.dist-info/LICENSE,sha256=jdOfBHKTH3-3rX1Z-QhoyGWT-xe85Xz_NrMgYsXaMso,1066
-icpp_free-2.9.0.dist-info/METADATA,sha256=jBPHtqE5uTOr6inRXEXafM89ImPvfn_uzrUsM9vW7Q4,1772
-icpp_free-2.9.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-icpp_free-2.9.0.dist-info/entry_points.txt,sha256=TQp3Ak8BiWuu54ZQg6JgcoUle5WojECMzYYL9AXSW6E,44
-icpp_free-2.9.0.dist-info/top_level.txt,sha256=-18t6pp4U_1wjW3LmJN2N7O-rpg6U7Ly1X53MpUk9pA,5
-icpp_free-2.9.0.dist-info/RECORD,,
+icpp_free-3.0.0.dist-info/LICENSE,sha256=jdOfBHKTH3-3rX1Z-QhoyGWT-xe85Xz_NrMgYsXaMso,1066
+icpp_free-3.0.0.dist-info/METADATA,sha256=rXyDcAomp9TevsShg8TisZ6GmrU-WAmJYCjA984V6d4,1772
+icpp_free-3.0.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+icpp_free-3.0.0.dist-info/entry_points.txt,sha256=TQp3Ak8BiWuu54ZQg6JgcoUle5WojECMzYYL9AXSW6E,44
+icpp_free-3.0.0.dist-info/top_level.txt,sha256=-18t6pp4U_1wjW3LmJN2N7O-rpg6U7Ly1X53MpUk9pA,5
+icpp_free-3.0.0.dist-info/RECORD,,
```

